/*
@license
Webix Editor v.11.3.0
This software is covered by Webix Trial License.
Usage without proper license is prohibited.
(c) XB Software Ltd.
*/
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).editor={})}(this,(function(t){"use strict";var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},e(t,i)};function i(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function o(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(o.prototype=i.prototype,new o)}var o=function(){return o=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},o.apply(this,arguments)};function r(t,e,i){if(i||2===arguments.length)for(var o,r=0,n=e.length;r<n;r++)!o&&r in e||(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))}"function"==typeof SuppressedError&&SuppressedError;var n=function(){},s=function(){function t(t,e){this.webixJet=!0,this.webix=t,this._events=[],this._subs={},this._data={},e&&e.params&&t.extend(this._data,e.params)}return t.prototype.getRoot=function(){return this._root},t.prototype.destructor=function(){this._detachEvents(),this._destroySubs(),this._events=this._container=this.app=this._parent=this._root=null},t.prototype.setParam=function(t,e,i){if(this._data[t]!==e&&(this._data[t]=e,this._segment.update(t,e,0),i))return this.show(null)},t.prototype.getParam=function(t,e){var i=this._data[t];if(void 0!==i||!e)return i;var o=this.getParentView();return o?o.getParam(t,e):void 0},t.prototype.getUrl=function(){return this._segment.suburl()},t.prototype.getUrlString=function(){return this._segment.toString()},t.prototype.getParentView=function(){return this._parent},t.prototype.$$=function(t){if("string"==typeof t){var e=this.getRoot();return e.queryView((function(i){return(i.config.id===t||i.config.localId===t)&&i.$scope===e.$scope}),"self")}return t},t.prototype.on=function(t,e,i){var o=t.attachEvent(e,i);return this._events.push({obj:t,id:o}),o},t.prototype.contains=function(t){for(var e in this._subs){var i=this._subs[e].view;if(i===t||i.contains(t))return!0}return!1},t.prototype.getSubView=function(t){var e=this.getSubViewInfo(t);if(e)return e.subview.view},t.prototype.getSubViewInfo=function(t){var e=this._subs[t||"default"];return e?{subview:e,parent:this}:"_top"===t?(this._subs[t]={url:"",id:null,popup:!0},this.getSubViewInfo(t)):this._parent?this._parent.getSubViewInfo(t):null},t.prototype._detachEvents=function(){for(var t=this._events,e=t.length-1;e>=0;e--)t[e].obj.detachEvent(t[e].id)},t.prototype._destroySubs=function(){for(var t in this._subs){var e=this._subs[t].view;e&&e.destructor()}this._subs={}},t.prototype._init_url_data=function(){var t=this._segment.current();this._data={},this.webix.extend(this._data,t.params,!0)},t.prototype._getDefaultSub=function(){if(this._subs.default)return this._subs.default;for(var t in this._subs){var e=this._subs[t];if(!e.branch&&e.view&&"_top"!==t){var i=e.view._getDefaultSub();if(i)return i}}},t.prototype._routed_view=function(){var t=this.getParentView();if(!t)return!0;var e=t._getDefaultSub();return!(!e&&e!==this)&&t._routed_view()},t}();function a(t){"/"===t[0]&&(t=t.substr(1));for(var e=t.split("/"),i=[],o=0;o<e.length;o++){var r=e[o],n={},s=r.indexOf(":");if(-1===s&&(s=r.indexOf("?")),-1!==s)for(var a=0,l=r.substr(s+1).split(/[\:\?\&]/g);a<l.length;a++){var c=l[a].split("=");n[c[0]]=decodeURIComponent(c[1])}i[o]={page:s>-1?r.substr(0,s):r,params:n,isNew:!0}}return i}function l(t){for(var e=[],i=0,o=t;i<o.length;i++){var r=o[i];e.push("/"+r.page);var n=c(r.params);n&&e.push("?"+n)}return e.join("")}function c(t){var e=[];for(var i in t)"object"!=typeof t[i]&&(e.length&&e.push("&"),e.push(i+"="+encodeURIComponent(t[i])));return e.join("")}var p=function(){function t(t,e){this._next=1,this.route="string"==typeof t?{url:a(t),path:t}:t,this.index=e}return t.prototype.current=function(){return this.route.url[this.index]},t.prototype.next=function(){return this.route.url[this.index+this._next]},t.prototype.suburl=function(){return this.route.url.slice(this.index)},t.prototype.shift=function(e){var i=new t(this.route,this.index+this._next);return i.setParams(i.route.url,e,i.index),i},t.prototype.setParams=function(t,e,i){if(e){var o=t[i].params;for(var r in e)o[r]=e[r]}},t.prototype.refresh=function(){for(var t=this.route.url,e=this.index+1;e<t.length;e++)t[e].isNew=!0},t.prototype.toString=function(){var t=l(this.suburl());return t?t.substr(1):""},t.prototype._join=function(t,e){var i=this.route.url;if(null===t)return i;var o=this.route.url,r=!0;if(i=o.slice(0,this.index+(e?this._next:0)),t){i=i.concat(a(t));for(var n=0;n<i.length;n++)o[n]&&(i[n].view=o[n].view),r&&o[n]&&i[n].page===o[n].page?i[n].isNew=!1:i[n].isNew&&(r=!1)}return i},t.prototype.append=function(t){var e=this._join(t,!0);return this.route.path=l(e),this.route.url=e,this.route.path},t.prototype.show=function(t,e,i){var o=this,r=this._join(t.url,i);return this.setParams(r,t.params,this.index+(i?this._next:0)),new Promise((function(t,i){var s=l(r),a={url:r,redirect:s,confirm:Promise.resolve()},c=e?e.app:null;if(c&&!c.callEvent("app:guard",[a.redirect,e,a]))return void i(new n);a.confirm.catch((function(t){return i(t)})).then((function(){if(null!==a.redirect){if(a.redirect!==s)return c.show(a.redirect),void i(new n);o.route.path=s,o.route.url=r,t()}else i(new n)}))}))},t.prototype.size=function(t){this._next=t},t.prototype.split=function(){var e={url:this.route.url.slice(this.index+1),path:""};return e.url.length&&(e.path=l(e.url)),new t(e,0)},t.prototype.update=function(t,e,i){var o=this.route.url[this.index+(i||0)];if(!o)return this.route.url.push({page:"",params:{}}),this.update(t,e,i);""===t?o.page=e:o.params[t]=e,this.route.path=l(this.route.url)},t}(),u=function(t){function e(e,i){var o=t.call(this,e.webix)||this;return o.app=e,o._children=[],o}return i(e,t),e.prototype.ui=function(t,e){var i=(e=e||{}).container||t.container,o=this.app.createView(t);return this._children.push(o),o.render(i,this._segment,this),"object"!=typeof t||t instanceof s?o:o.getRoot()},e.prototype.show=function(t,e){if(e=e||{},"object"==typeof t){for(var i in t)this.setParam(i,t[i]);t=null}else{if("/"===t.substr(0,1))return this.app.show(t,e);if(0===t.indexOf("./")&&(t=t.substr(2)),0===t.indexOf("../")){var o=this.getParentView();return o?o.show(t.substr(3),e):this.app.show("/"+t.substr(3))}var r=this.getSubViewInfo(e.target);if(r){if(r.parent!==this)return r.parent.show(t,e);if(e.target&&"default"!==e.target)return this._renderFrameLock(e.target,r.subview,{url:t,params:e.params})}else if(t)return this.app.show("/"+t,e)}return this._show(this._segment,{url:t,params:e.params},this)},e.prototype._show=function(t,e,i){var o=this;return t.show(e,i,!0).then((function(){return o._init_url_data(),o._urlChange()})).then((function(){t.route.linkRouter&&(o.app.getRouter().set(t.route.path,{silent:!0}),o.app.callEvent("app:route",[t.route.path]))}))},e.prototype.init=function(t,e){},e.prototype.ready=function(t,e){},e.prototype.config=function(){this.app.webix.message("View:Config is not implemented")},e.prototype.urlChange=function(t,e){},e.prototype.destroy=function(){},e.prototype.destructor=function(){this.destroy(),this._destroyKids(),this._root&&(this._root.destructor(),t.prototype.destructor.call(this))},e.prototype.use=function(t,e){t(this.app,this,e)},e.prototype.refresh=function(){return this.getUrl(),this.destroy(),this._destroyKids(),this._destroySubs(),this._detachEvents(),this._container.tagName&&this._root.destructor(),this._segment.refresh(),this._render(this._segment)},e.prototype.render=function(t,e,i){var o=this;"string"==typeof e&&(e=new p(e,0)),this._segment=e,this._parent=i,this._init_url_data();var r="string"==typeof(t=t||document.body)?this.webix.toNode(t):t;return this._container!==r?(this._container=r,this._render(e)):this._urlChange().then((function(){return o.getRoot()}))},e.prototype._render=function(t){var e=this,i=this.config();return i.then?i.then((function(i){return e._render_final(i,t)})):this._render_final(i,t)},e.prototype._render_final=function(t,e){var i,o=this,r=null,n=null,s=!1;if(this._container.tagName?n=this._container:(r=this._container).popup?(n=document.body,s=!0):n=this.webix.$$(r.id),!this.app||!n)return Promise.reject(null);var a=this._segment.current(),l={ui:{}};this.app.copyConfig(t,l.ui,this._subs),this.app.callEvent("app:render",[this,e,l]),l.ui.$scope=this,!r&&a.isNew&&a.view&&a.view.destructor();try{if(r&&!s){var c=n,p=c.getParentView();p&&"multiview"===p.name&&!l.ui.id&&(l.ui.id=c.config.id)}this._root=this.app.webix.ui(l.ui,n);var u=this._root;s&&u.setPosition&&!u.isVisible()&&u.show(),r&&(r.view&&r.view!==this&&r.view!==this.app&&r.view.destructor(),r.id=this._root.config.id,this.getParentView()||!this.app.app?r.view=this:r.view=this.app),a.isNew&&(a.view=this,a.isNew=!1),i=Promise.resolve(this._init(this._root,e)).then((function(){return o._urlChange().then((function(){return o._initUrl=null,o.ready(o._root,e.suburl())}))}))}catch(t){i=Promise.reject(t)}return i.catch((function(t){return o._initError(o,t)}))},e.prototype._init=function(t,e){return this.init(t,e.suburl())},e.prototype._urlChange=function(){var t=this;this.app.callEvent("app:urlchange",[this,this._segment]);var e=[];for(var i in this._subs){var o=this._subs[i],r=this._renderFrameLock(i,o,null);r&&e.push(r)}return Promise.all(e).then((function(){return t.urlChange(t._root,t._segment.suburl())}))},e.prototype._renderFrameLock=function(t,e,i){if(!e.lock){var o=this._renderFrame(t,e,i);o&&(e.lock=o.then((function(){return e.lock=null}),(function(){return e.lock=null})))}return e.lock},e.prototype._renderFrame=function(t,e,i){var o=this;if("default"===t){if(this._segment.next()){var r=i?i.params:null;return e.params&&(r=this.webix.extend(r||{},e.params)),this._createSubView(e,this._segment.shift(r))}e.view&&e.popup&&(e.view.destructor(),e.view=null)}if(null!==i&&(e.url=i.url,e.params&&(i.params=this.webix.extend(i.params||{},e.params))),e.route){if(null!==i)return e.route.show(i,e.view).then((function(){return o._createSubView(e,e.route)}));if(e.branch)return}var n=e.view;if(!n&&e.url){if("string"==typeof e.url)return e.route=new p(e.url,0),i&&e.route.setParams(e.route.route.url,i.params,0),e.params&&e.route.setParams(e.route.route.url,e.params,0),this._createSubView(e,e.route);"function"!=typeof e.url||n instanceof e.url||(n=new(this.app._override(e.url))(this.app,"")),n||(n=e.url)}if(n)return n.render(e,e.route||this._segment,this)},e.prototype._initError=function(t,e){return this.app&&this.app.error("app:error:initview",[e,t]),!0},e.prototype._createSubView=function(t,e){var i=this;return this.app.createFromURL(e.current()).then((function(o){return o.render(t,e,i)}))},e.prototype._destroyKids=function(){for(var t=this._children,e=t.length-1;e>=0;e--)t[e]&&t[e].destructor&&t[e].destructor();this._children=[]},e}(s),h=function(t){function e(e,i){var o=t.call(this,e,i)||this;return o._ui=i.ui,o}return i(e,t),e.prototype.config=function(){return this._ui},e}(u),d=function(){function t(t,e,i){this.path="",this.app=i}return t.prototype.set=function(t,e){this.path=t;var i=this.app;i.app.getRouter().set(i._segment.append(this.path),{silent:!0})},t.prototype.get=function(){return this.path},t}(),_=!0,f=function(t){function e(e){var i=this,o=(e||{}).webix||window.webix;return e=o.extend({name:"App",version:"1.0",start:"/home"},e,!0),(i=t.call(this,o,e)||this).config=e,i.app=i.config.app,i.ready=Promise.resolve(),i._services={},i.webix.extend(i,i.webix.EventSystem),i}return i(e,t),e.prototype.getUrl=function(){return this._subSegment.suburl()},e.prototype.getUrlString=function(){return this._subSegment.toString()},e.prototype.getService=function(t){var e=this._services[t];return"function"==typeof e&&(e=this._services[t]=e(this)),e},e.prototype.setService=function(t,e){this._services[t]=e},e.prototype.destructor=function(){this.getSubView().destructor(),t.prototype.destructor.call(this)},e.prototype.copyConfig=function(t,e,i){if((t instanceof s||"function"==typeof t&&t.prototype instanceof s)&&(t={$subview:t}),void 0!==t.$subview)return this.addSubView(t,e,i);var o=t instanceof Array;for(var r in e=e||(o?[]:{}),t){var n=t[r];if("function"==typeof n&&n.prototype instanceof s&&(n={$subview:n}),!n||"object"!=typeof n||n instanceof this.webix.DataCollection||n instanceof RegExp||n instanceof Map)e[r]=n;else if(n instanceof Date)e[r]=new Date(n);else{var a=this.copyConfig(n,n instanceof Array?[]:{},i);null!==a&&(o?e.push(a):e[r]=a)}}return e},e.prototype.getRouter=function(){return this.$router},e.prototype.clickHandler=function(t,e){if(t&&(e=e||t.target||t.srcElement)&&e.getAttribute){var i=e.getAttribute("trigger");if(i)return this._forView(e,(function(t){return t.app.trigger(i)})),t.cancelBubble=!0,t.preventDefault();var o=e.getAttribute("route");if(o)return this._forView(e,(function(t){return t.show(o)})),t.cancelBubble=!0,t.preventDefault()}var r=e.parentNode;r&&this.clickHandler(t,r)},e.prototype.getRoot=function(){return this.getSubView().getRoot()},e.prototype.refresh=function(){var t=this;return this._subSegment?this.getSubView().refresh().then((function(e){return t.callEvent("app:route",[t.getUrl()]),e})):Promise.resolve(null)},e.prototype.loadView=function(t){var e=this,i=this.config.views,o=null;if(""===t)return Promise.resolve(this._loadError("",new Error("Webix Jet: Empty url segment")));try{i&&"string"==typeof(o="function"==typeof i?i(t):i[t])&&(t=o,o=null),o||("_hidden"===t?o={hidden:!0}:"_blank"===t?o={}:(t=t.replace(/\./g,"/"),o=this.require("jet-views",t)))}catch(e){o=this._loadError(t,e)}return o.then||(o=Promise.resolve(o)),o=o.then((function(t){return t.__esModule?t.default:t})).catch((function(i){return e._loadError(t,i)}))},e.prototype._forView=function(t,e){var i=this.webix.$$(t);i&&e(i.$scope)},e.prototype._loadViewDynamic=function(t){return null},e.prototype.createFromURL=function(t){var e=this;return t.isNew||!t.view?this.loadView(t.page).then((function(i){return e.createView(i,name,t.params)})):Promise.resolve(t.view)},e.prototype._override=function(t){var e=this.config.override;if(e){for(var i=void 0;t;)i=t,t=e.get(t);return i}return t},e.prototype.createView=function(t,i,o){if("function"==typeof(t=this._override(t))){if(t.prototype instanceof e)return new t({app:this,name:i,params:o,router:d});if(t.prototype instanceof s)return new t(this,{name:i,params:o});t=t(this)}return t instanceof s?t:new h(this,{name:i,ui:t})},e.prototype.show=function(t,e){return t&&this.app&&0==t.indexOf("//")?this.app.show(t.substr(1),e):this.render(this._container,t||this.config.start,e)},e.prototype.trigger=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];this.apply(t,e)},e.prototype.apply=function(t,e){this.callEvent(t,e)},e.prototype.action=function(t){return this.webix.bind((function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];this.apply(t,e)}),this)},e.prototype.on=function(t,e){this.attachEvent(t,e)},e.prototype.use=function(t,e){t(this,null,e)},e.prototype.error=function(t,e){if(this.callEvent(t,e),this.callEvent("app:error",e),this.config.debug)for(var i=0;i<e.length;i++)if(console.error(e[i]),e[i]instanceof Error){var o=e[i].message;0===o.indexOf("Module build failed")?(o=o.replace(/\x1b\[[0-9;]*m/g,""),document.body.innerHTML="<pre style='font-size:16px; background-color: #ec6873; color: #000; padding:10px;'>".concat(o,"</pre>")):(o+="<br><br>Check console for more details",this.webix.message({type:"error",text:o,expire:-1}))}},e.prototype.render=function(t,e,i){var o=this;this._container="string"==typeof t?this.webix.toNode(t):t||document.body;var r=null;!this.$router?(_&&"tagName"in this._container&&(this.webix.event(document.body,"click",(function(t){return o.clickHandler(t)})),_=!1),"string"==typeof e&&(e=new p(e,0)),this._subSegment=this._first_start(e),this._subSegment.route.linkRouter=!0):r="string"==typeof e?e:this.app?e.split().route.path||this.config.start:e.toString();var n=i?i.params:this.config.params||null,s=this.getSubView(),a=this._subSegment,l=a.show({url:r,params:n},s).then((function(){return o.createFromURL(a.current())})).then((function(e){return e.render(t,a)})).then((function(t){return o.$router.set(a.route.path,{silent:!0}),o.callEvent("app:route",[o.getUrl()]),t}));return this.ready=this.ready.then((function(){return l})),l},e.prototype.getSubView=function(){if(this._subSegment){var t=this._subSegment.current().view;if(t)return t}return new u(this,{})},e.prototype.require=function(t,e){return null},e.prototype._first_start=function(t){var e=this;this._segment=t;if(this.$router=new this.config.router((function(t){return setTimeout((function(){e.show(t).catch((function(t){if(!(t instanceof n))throw t}))}),1)}),this.config,this),this._container===document.body&&!1!==this.config.animation){var i=this._container;this.webix.html.addCss(i,"webixappstart"),setTimeout((function(){e.webix.html.removeCss(i,"webixappstart"),e.webix.html.addCss(i,"webixapp")}),10)}if(t){if(this.app){var o=t.current().view;t.current().view=this,t.next()?(t.refresh(),t=t.split()):t=new p(this.config.start,0),t.current().view=o}}else{var r=this.$router.get();r||(r=this.config.start,this.$router.set(r,{silent:!0})),t=new p(r,0)}return t},e.prototype._loadError=function(t,e){return this.error("app:error:resolve",[e,t]),{template:" "}},e.prototype.addSubView=function(t,e,i){var o=!0!==t.$subview?t.$subview:null,r=t.name||(o?this.webix.uid():"default");return e.id=t.id||"s"+this.webix.uid(),(i[r]={id:e.id,url:o,branch:t.branch,popup:t.popup,params:t.params}).popup?null:e},e}(s),g=function(){function t(t,e){var i=this;this.config=e||{},this._detectPrefix(),this.cb=t,window.onpopstate=function(){return i.cb(i.get())}}return t.prototype.set=function(t,e){var i=this;if(this.config.routes){var o=t.split("?",2);for(var r in this.config.routes)if(this.config.routes[r]===o[0]){t=r+(o.length>1?"?"+o[1]:"");break}}this.get()!==t&&window.history.pushState(null,null,this.prefix+this.sufix+t),e&&e.silent||setTimeout((function(){return i.cb(t)}),1)},t.prototype.get=function(){var t=this._getRaw().replace(this.prefix,"").replace(this.sufix,"");if(t="/"!==t&&"#"!==t?t:"",this.config.routes){var e=t.split("?",2),i=this.config.routes[e[0]];i&&(t=i+(e.length>1?"?"+e[1]:""))}return t},t.prototype._detectPrefix=function(){var t=this.config.routerPrefix;this.sufix="#"+(void 0===t?"!":t),this.prefix=document.location.href.split("#",2)[0]},t.prototype._getRaw=function(){return document.location.href},t}(),m=!1;function w(t){if(!m&&t){m=!0;var e=window;e.Promise||(e.Promise=t.promise);var i=t.version.split(".");10*i[0]+1*i[1]<53&&(t.ui.freeze=function(e){var i=e();return i&&i.then?i.then((function(e){return t.ui.$freeze=!1,t.ui.resize(),e})):(t.ui.$freeze=!1,t.ui.resize()),i});var o=t.ui.baselayout.prototype.addView,r=t.ui.baselayout.prototype.removeView,n={addView:function(t,e){if(this.$scope&&this.$scope.webixJet&&!t.queryView){var i=this.$scope,r={};t=i.app.copyConfig(t,{},r),o.apply(this,[t,e]);var n=function(t){i._renderFrame(t,r[t],null).then((function(){i._subs[t]=r[t]}))};for(var s in r)n(s);return t.id}return o.apply(this,arguments)},removeView:function(){if(r.apply(this,arguments),this.$scope&&this.$scope.webixJet){var e=this.$scope._subs;for(var i in e){var o=e[i];t.$$(o.id)||(o.view.destructor(),delete e[i])}}}};t.extend(t.ui.layout.prototype,n,!0),t.extend(t.ui.baselayout.prototype,n,!0),t.protoUI({name:"jetapp",$init:function(e){this.$app=new this.app(e);var i=t.uid().toString();e.body={id:i},this.$ready.push((function(){this.callEvent("onInit",[this.$app]),this.$app.render({id:i})}))}},t.ui.proxy,t.EventSystem)}}var y=function(t){function e(e){var i;return e.router=e.router||g,w((i=t.call(this,e)||this).webix),i}return i(e,t),e.prototype.require=function(t,e){return require(t+"/"+e)},e}(f);!function(t){function e(){return null!==t&&t.apply(this,arguments)||this}i(e,t),e.prototype._detectPrefix=function(){this.prefix="",this.sufix=this.config.routerPrefix||""},e.prototype._getRaw=function(){return document.location.pathname+(document.location.search||"")}}(g);var v=function(){function t(t,e){this.path="",this.cb=t}return t.prototype.set=function(t,e){var i=this;this.path=t,e&&e.silent||setTimeout((function(){return i.cb(t)}),1)},t.prototype.get=function(){return this.path},t}();function b(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function F(t,e,i){for(var o in t)b(t,o)&&e.call(i||t,t[o],o,t)}function x(t){t="Warning: "+t,"undefined"!=typeof console&&console.error(t);try{throw new Error(t)}catch(t){}}var k=String.prototype.replace,C=String.prototype.split,S="||||",E=function(t){var e=t%10;return 11!==t&&1===e?0:2<=e&&e<=4&&!(t>=12&&t<=14)?1:2},A={arabic:function(t){if(t<3)return t;var e=t%100;return e>=3&&e<=10?3:e>=11?4:5},bosnian_serbian:E,chinese:function(){return 0},croatian:E,french:function(t){return t>1?1:0},german:function(t){return 1!==t?1:0},russian:E,lithuanian:function(t){return t%10==1&&t%100!=11?0:t%10>=2&&t%10<=9&&(t%100<11||t%100>19)?1:2},czech:function(t){return 1===t?0:t>=2&&t<=4?1:2},polish:function(t){if(1===t)return 0;var e=t%10;return 2<=e&&e<=4&&(t%100<10||t%100>=20)?1:2},icelandic:function(t){return t%10!=1||t%100==11?1:0},slovenian:function(t){var e=t%100;return 1===e?0:2===e?1:3===e||4===e?2:3}},I={arabic:["ar"],bosnian_serbian:["bs-Latn-BA","bs-Cyrl-BA","srl-RS","sr-RS"],chinese:["id","id-ID","ja","ko","ko-KR","lo","ms","th","th-TH","zh"],croatian:["hr","hr-HR"],german:["fa","da","de","en","es","fi","el","he","hi-IN","hu","hu-HU","it","nl","no","pt","sv","tr"],french:["fr","tl","pt-br"],russian:["ru","ru-RU"],lithuanian:["lt"],czech:["cs","cs-CZ","sk"],polish:["pl"],icelandic:["is"],slovenian:["sl-SL"]};function $(t){var e,i=(e={},F(I,(function(t,i){F(t,(function(t){e[t]=i}))})),e);return i[t]||i[C.call(t,/-/,1)[0]]||i.en}function B(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}var D=/\$/g,P=/%\{(.*?)\}/g;function T(t,e,i,o){if("string"!=typeof t)throw new TypeError("Polyglot.transformPhrase expects argument #1 to be string");if(null==e)return t;var r,n=t,s=o||P,a="number"==typeof e?{smart_count:e}:e;if(null!=a.smart_count&&n){var l=C.call(n,S);r=l[function(t,e){return A[$(t)](e)}(i||"en",a.smart_count)]||l[0],n=r.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}return n=k.call(n,s,(function(t,e){return b(a,e)&&null!=a[e]?k.call(a[e],D,"$$"):t}))}function R(t){var e=t||{};this.phrases={},this.extend(e.phrases||{}),this.currentLocale=e.locale||"en";var i=e.allowMissing?T:null;this.onMissingKey="function"==typeof e.onMissingKey?e.onMissingKey:i,this.warn=e.warn||x,this.tokenRegex=function(t){var e=t&&t.prefix||"%{",i=t&&t.suffix||"}";if(e===S||i===S)throw new RangeError('"||||" token is reserved for pluralization');return new RegExp(B(e)+"(.*?)"+B(i),"g")}(e.interpolation)}R.prototype.locale=function(t){return t&&(this.currentLocale=t),this.currentLocale},R.prototype.extend=function(t,e){F(t,(function(t,i){var o=e?e+"."+i:i;"object"==typeof t?this.extend(t,o):this.phrases[o]=t}),this)},R.prototype.unset=function(t,e){"string"==typeof t?delete this.phrases[t]:F(t,(function(t,i){var o=e?e+"."+i:i;"object"==typeof t?this.unset(t,o):delete this.phrases[o]}),this)},R.prototype.clear=function(){this.phrases={}},R.prototype.replace=function(t){this.clear(),this.extend(t)},R.prototype.t=function(t,e){var i,o,r=null==e?{}:e;if("string"==typeof this.phrases[t])i=this.phrases[t];else if("string"==typeof r._)i=r._;else if(this.onMissingKey){o=(0,this.onMissingKey)(t,r,this.currentLocale,this.tokenRegex)}else this.warn('Missing translation for key: "'+t+'"'),o=t;return"string"==typeof i&&(o=T(i,r,this.currentLocale,this.tokenRegex)),o},R.prototype.has=function(t){return b(this.phrases,t)},R.transformPhrase=function(t,e,i){return T(t,e,i)};var N=R;var O=window.webix;O&&w(O);var L=function(t,e,i){var o=(i=i||{}).storage,r=o?o.get("lang")||"en":i.lang||"en";function n(e,n,s){n.__esModule&&(n=n.default);var l={phrases:n};i.polyglot&&t.webix.extend(l,i.polyglot);var c=a.polyglot=new N(l);if(c.locale(e),a._=t.webix.bind(c.t,c),r=e,o&&o.put("lang",r),i.webix){var p=i.webix[e];p&&t.webix.i18n.setLocale(p)}return s?Promise.resolve():t.refresh()}function s(e,o){if(!1!==i.path){var r=(i.path?i.path+"/":"")+e;n(e,t.require("jet-locales",r),o)}}var a={getLang:function(){return r},setLang:s,setLangData:n,_:null,polyglot:null};t.setService("locale",a),s(r,!0)},H=window;H.Promise||(H.Promise=H.webix.promise);var M=!1;function z(t){var e,i={updateConfig:function(i){var o=t.getRoot(),r=o.$view;e?e&&!r.id&&(r.id=e):(r.id?e=r.id:r.id=e="webix_"+webix.uid(),webix.html.addStyle(".webix_win_inside *:not(.webix_modal_box):not(.webix_modal_cover){ z-index: 0; }"),webix.html.addStyle("#".concat(e,"{ position: relative; }")),webix.html.addStyle("#".concat(e," .webix_window{ z-index:2 !important; }")),webix.html.addStyle("#".concat(e," .webix_disabled{ z-index:1 !important; }"))),i.container=e,i.fullscreen&&(i._fillApp=!0,delete i.fullscreen),i.on||(i.on={});var n=!0,s=i.on.onShow;return i.on.onShow=function(){var e=this;s&&s.apply(this,arguments),n&&(this.$setSize=function(t,i){V(e,o,!0),webix.ui.window.prototype.$setSize.apply(e,[t,i])},function(t,e){var i=e.getRoot();t.attachEvent("onHide",(function(){i.$destructed||(webix.html.removeCss(i.$view,"webix_win_inside"),i.enable())}));var o=e.attachEvent("view:resize",(function(){V(t,i)}));t.attachEvent("onDestruct",(function(){e.detachEvent(o)}))}(this,t),n=null),webix.callEvent("onClick",[]),webix.html.addCss(r,"webix_win_inside"),o.disable(),V(this,o)},i}};t.setService("jet-win",i)}function V(t,e,i){var o=e.$width,r=e.$height;t.config._fillApp?t.define({width:o,height:r}):t.define({left:(o-t.$width)/2,top:(r-t.$height)/2}),i||t.resize()}var j=1;var U=void 0;function G(t){var e=!1;return function(){if(e)return t.apply(this,arguments);e=!0}}function q(t,e,i){Object.defineProperty(e,i,{get:function(){return t[i]},set:function(e){return t[i]=e}})}function W(t,e){e=e||{};var i={},o={},r=function(t,e){var r=j++;return i[r]={mask:t,handler:e},e("*"===t?o:o[t],U,t),r},n=[],s=!1,a=function(t,e,o,r){if(s)n.push([t,e,o,r]);else for(var a=Object.keys(i),l=0;l<a.length;l++){var c=i[a[l]];c&&("*"!==c.mask&&c.mask!==t||c.handler(o,e,t,r))}};return Object.defineProperty(o,"$changes",{value:{attachEvent:r,detachEvent:function(t){delete i[t]}},enumerable:!1,configurable:!1}),Object.defineProperty(o,"$observe",{value:r,enumerable:!1,configurable:!1}),Object.defineProperty(o,"$batch",{value:function(t){if("function"!=typeof t){var e=t;t=function(){for(var t in e)o[t]=e[t]}}for(s=!0,t(o),s=!1;n.length;){var i=n.shift();a.apply(this,i)}},enumerable:!1,configurable:!1}),Object.defineProperty(o,"$extend",{value:function(t,i){for(var r in i=i||e,t)if(t.hasOwnProperty(r)){var n=t[r];i.nested&&"object"==typeof n&&n?o[r]=W(n,i):K(o,n,r,a)}},enumerable:!1,configurable:!1}),o.$extend(t,e),o}function K(t,e,i,o){Object.defineProperty(t,i,{get:function(){return e},set:function(t){if(null===e||null===t?e!==t:e.valueOf()!=t.valueOf()){var r=e;e=t,o(i,r,t,null)}},enumerable:!0,configurable:!1})}const X=new Map([[24584,[24586]],[24585,[24586]]]),Y=new Map([[24586,[24585,24584]],[24585,[24585,24584]],[24584,[24585,24584]]]),J=new Map([[40966,new Set([40966])],[40964,new Set([40964])],[40974,new Set([40973,40974])],[40973,new Set([40973,40974])]]),Z=8388608,Q=Object.freeze(Object.defineProperty({__proto__:null,OTHER:0,INLINE:32768,TEXT:32771,FORMAT:40964,PARAGRAPH:24578,IMAGE:32773,RULER:16396,LINK:40966,SUBSCRIPT:40973,SUPERSCRIPT:40974,NEWLINE:32775,END:8191,SPAN:40968,OL:24585,UL:24584,LI:24586,BREAK:16395,BLOCK:16384,CONTAINS:8192,CHUNK_END_CURSOR:Z,blockKids:X,blockParents:Y,conflictingTags:J,BLOCK_STYLES:1,INLINE_STYLES:2},Symbol.toStringTag,{value:"Module"}));let tt=1e3;function et(){return tt++}const it=Object.freeze(Object.defineProperty({__proto__:null,addAction:et,ACTION_TYPE:1,ACTION_BACKSPACE:2,ACTION_DELETE:3,ACTION_INSERT:6,ACTION_WRAP:7,FOCUS_MOVE:1001,ACTION_RESET:8,ACTION_SET_PROPERTY:10,ACTION_PATCH:11,ACTION_UNWRAP:12,ACTION_COPY:13,ACTION_CUT:14,ACTION_PASTE:15},Symbol.toStringTag,{value:"Module"})),ot=Object.freeze(Object.defineProperty({__proto__:null,PROPS_TEXT:0,PROPS_BLOCK:1,PROPS_UPDATE:0,PROPS_REPLACE:2,PROPS_TOGGLE:1,PROPS_CHUNK:2,ENSURE_TEXT_NODE:1,FOCUS_NEW_CHUNK:2,FOCUS_CHUNK_END:4},Symbol.toStringTag,{value:"Module"}));class rt{_node;_handler;_cleanup;constructor(t,e){this._node=t,this._handler=e;const i=()=>this._updateCursor(),o=t=>{this._handleImageClick(t)&&"contextmenu"===t.type&&this._updateCursor()};document.addEventListener("selectionchange",i),this._node.addEventListener("click",o,!0),this._node.addEventListener("contextmenu",o,!0),this._cleanup=()=>{document.removeEventListener("selectionchange",i),this._node.removeEventListener("click",o,!0),this._node.removeEventListener("contextmenu",o,!0)}}detachHandlers(){this._cleanup&&this._cleanup()}getBox(t){return this._node.querySelector(`[data-id="${t}"]`).getBoundingClientRect()}paint(t,e){if(!t)return;const i=window.getSelection();i.removeAllRanges();const o=document.createRange(),r=this._node.querySelector(`[data-id="${t.id}"]`);let n=r;(e=e||t).id!=t.id&&(n=this._node.querySelector(`[data-id="${e.id}"]`)),t.pos===Z?o.setStart(r.parentNode,nt(r)+1):o.setStart(r.firstChild||r,t.pos),e.pos===Z?o.setEnd(n.parentNode,nt(n)+1):o.setEnd(n.firstChild||n,e.pos),i.addRange(o)}read(){const t=window.getSelection();if(!t.anchorNode||!this._node.contains(t.anchorNode))return null;const e="Range"===t.type,i=t.anchorNode,o=t.focusNode;let r=this._toInline(i,t.anchorOffset,!1),n=null;return e&&"number"==typeof t.focusOffset&&(n=this._toInline(o,t.focusOffset,!0)),i?(n&&(r.id===n.id?n.pos<r.pos&&([r,n]=[n,r]):10&r.target.compareDocumentPosition(n.target)&&([r,n]=[n,r])),[r,n]):null}_updateCursor(){const t=this.read();t&&this._handler(t[0],t[1])}_handleImageClick(t){const e=t.target;if("IMG"!==e.tagName)return!1;const i=parseInt(e.dataset.id),o={id:i,pos:0},r={id:i,pos:Z};return this.paint(o,r),"contextmenu"===t.type&&this._handler(o,r),!0}_toInline(t,e,i){if(!t.getAttribute||!t.getAttribute("data-id")){const i=t.parentElement;t=i.getAttribute&&i.getAttribute("data-id")?i:t===this._node&&t.childNodes.length?t.childNodes[e]:t.firstChild}let o=parseInt(t.getAttribute("data-id")),r=t;if("SPAN"!==t.tagName){const n=t.childNodes;n.length?(r=n[e],!r||0!==e&&i?(r=n[e-1],e=Z):("A"===r.tagName&&r.firstElementChild instanceof HTMLElement&&(r=r.firstElementChild),e=0),o=parseInt(r.dataset.id)):e=0}else"​"===t.firstChild.nodeValue&&(e=0);return{id:o,pos:e,target:r}}}function nt(t){return Array.from(t.parentNode.childNodes).indexOf(t)}const st=typeof navigator<"u"&&navigator.platform.indexOf("Mac")>-1,at=st?1024:512,lt=2048,ct=st?512:1024,pt=st?"⌘":"Ctrl",ut=Object.freeze(Object.defineProperty({__proto__:null,BACKSPACE:8,INSERT:45,ENTER:13,TAB:9,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,END:35,HOME:36,PAGEUP:33,PAGEDOWN:34,DEL:46,A:65,B:66,C:67,I:73,K:75,P:80,U:85,X:88,Y:89,Z:90,CTRL:at,SHIFT:lt,META:ct,ALT:4096,ctrlName:pt},Symbol.toStringTag,{value:"Module"}));class ht{_keys;_doc;constructor(t){this._doc=t,this._keys=new Map([[8,_t(2)],[46,_t(3)],[13,ft({tag:16395,props:{}})],[2061,ft({tag:32775})],[at+66,dt({mode:1,props:{bold:!0}})],[at+73,dt({mode:1,props:{italic:!0}})],[at+85,dt({mode:1,props:{underline:!0}})],[at+lt+88,dt({mode:1,props:{strike:!0}})]])}add(t,e){e?this._keys.set(t,e):this._keys.delete(t)}handler(t){const e=t.which+(t.ctrlKey?512:0)+(t.metaKey?1024:0)+(t.shiftKey?2048:0)+(t.altKey?4096:0),i=this._keys.get(e);if(i&&!1!==i(this._doc,t))return void t.preventDefault();if(t.ctrlKey||t.metaKey)return;const o=t.key;o.length>1||t.altKey||(this._doc.exec(1,o),t.preventDefault())}}function dt(t){return e=>(e.getCursor()[1]?e.exec(10,t):e.exec(6,{...t,tag:32771}),!0)}function _t(t){return e=>(e.exec(t,null),!0)}function ft(t){return e=>(e.exec(6,t),!0)}function gt(t,e,i){const o=[],r=[];return e.forEach((e=>{o.push(t(e,r,i))})),o.join("")}function mt(t,e,i){switch(t.type){case 32773:{const e=xt(t.props);return`<img src="${t.props.url}" alt="${t.props.alt||""}"${e?` style="${e}"`:""}>`}case 32775:return"<br>";case 40966:return e.push("</a>"),`<a href="${t.props.url||"#"}">`;case 40974:return e.push("</sup>"),"<sup>";case 40973:return e.push("</sub>"),"<sub>";case 24578:{const i=t.props.tag||"p";e.push(`</${i}>`);const o=Ft(t.props);return`<${i}${o?` style="${o}"`:""}>`}case 24586:{e.push("</li>");const i=Ft(t.props);return`<li${i?` style="${i}"`:""}>`}case 40968:{const i=bt(t.props);return e.push("</span>"),`<span${i?` style="${i}"`:""}>`}case 24585:return e.push("</ol>"),"<ol>";case 24584:return e.push("</ul>"),"<ul>";case 8191:return e.pop();case 32771:{const e=bt(t.props);return e?`<span style="${e}">${t.text}</span>`:yt(t.text)}case 16396:return"<hr>";default:return console.log("Not supported node:",t),""}}const wt=new RegExp("[ ]{2,}|>[ ]{1,}","g");function yt(t){return t.replace(wt,(t=>">"===t[0]?">"+"&nbsp;".repeat(t.length-1):"&nbsp;".repeat(t.length)))}function vt(t){return yt(gt(mt,t,null))}function bt(t){let e="";return t&&(t.bold&&(e+="font-weight:bold;"),t.italic&&(e+="font-style:italic;"),(t.underline||t.strike)&&(e+=`text-decoration:${t.underline?"underline":""}${t.underline&&t.strike?" ":""}${t.strike?"line-through":""};`),t.color&&(e+=`color:${t.color};`),t.background&&(e+=`background:${t.background};`),t.fontSize&&(e+=`font-size:${t.fontSize};`),t.fontFamily&&(e+=`font-family:${t.fontFamily};`)),e}function Ft(t){let e="";return t&&t.align&&(e+=`text-align:${t.align};`),t&&t.indent&&(e+=`margin-left:${t.indent}px;`),t&&t.lineHeight&&(e+=`line-height:${t.lineHeight};`),e}function xt(t){let e="";return t&&t.width&&(e+=`width:${t.width}px;`),t&&t.height&&(e+=`height:${t.height}px;`),e}function kt(t){let e="";for(const i of t)if(typeof i.d<"u")"hr"==i.t?e+=`<${i.t}>`:(e+=`<${i.t}>`,e+=kt(i.d),e+=`</${i.t}>`);else if("br"==i.t||"img"==i.t){const t=i.u?` src="${i.u}" alt="${i.c}"`:"";e+=`<${i.t}${t}>`}else{const t=i.u?` href="${i.u}"`:"";i.t&&(e+=`<${i.t}${t}>`),e+=i.c,i.t&&(e+=`</${i.t}>`)}return e}function Ct(t){return kt(function(t,e){let i,o,r,n,s,a,l,c;if(e?({linestart:l,tag:r,checkbehind:s,unsurepoint:a,content:i,ctype:o,newLineCounter:n,i:c}=e.state):(e={nodes:[{d:[],t:"p",f:!1,i:0}],length:0,state:{}},l=0,r="p",s=-1,a=-1,i="",o="",n=0,c=0),a>=0){const t=e.nodes[e.nodes.length-1];t.d.length&&(e.length-=t.d[t.d.length-1].c.length,t.d.pop())}else i="";const p=t=>{(""!==i||"li"==o)&&u("",t);const n=e.nodes[e.nodes.length-1];n.f=1!==t,n.i=c,n.t=r,0===t&&(a=-1,r="p",e.nodes.push({d:[],t:r,f:!1,i:0}))},u=(r,n=2)=>{const l=e.nodes[e.nodes.length-1],p=l.d[l.d.length-1],u=2===n||"li"==o?o:"";if(p&&p.t===u&&a<0)p.c+=i,p.i=c,e.length+=i.length;else{const o=""===u&&a>=0?t.substring(a):i,r={c:o,t:u,f:1!==n,i:c};if("a"==u||"img"==u){const[t,e]=o.split("](");r.c=t,r.u=e||""}e.length+=r.c.length,l.d.push(r)}2===n&&(a=r?s:-1),1!==n&&(o=r,s=-1,i="")},h=(t,e)=>{e&&(i=i.slice(0,-1)),r="h"+t,s=-1,a=-1},d=(e,p)=>{if(s<0)return!1;const d=e-s,_=t[e-1],f=s===l,g=f&&0==n&&(!p||"\n"===p),m=f&&/^\d+\.$/.test(t.substring(l,e))&&" "===p,w=f&&["*","-","+"].includes(_)&&1==d&&" "===p,y=f&&"#"==_&&d<=6&&" "===p,v="="==_&&g&&i,b="-"==_&&g&&i,F=f&&">"==_&&1==d&&" "===p,x=["*","-","_"].includes(_)&&d>=3&&g,k=["*","_"].includes(_)&&"li"!=o&&d>=2,C=["*","_"].includes(_)&&"strong"!=o&&"li"!=o&&1===d,S="`"==_&&1==d,E="["===_&&(1==d||"!"==t[e-2]&&2==d),A=")"===_&&1==d;if(v)h(1,p);else if(b)h(2,p);else if(x)r="hr",i="",s=-1,a=-1;else if(w||m){const t=m?"ol":"ul";r==t?(i=i.slice(0,-1),u("li")):o="li",r=t,s=-1}else if(k){const r="strong"===o;3===d&&r&&(i+=t[e-3]),u(r?"":"strong"),3===d&&!r&&(i+=_),s=-1}else C?(u("em"===o?"":"em"),s=-1):S?(u("code"===o?"":"code"),s=-1):y?(r="h"+d,s=-1):F?(r="blockquote",s=-1):E?(u("!"==t[e-2]?"img":"a"),s=-1):A&&(u(""),s=-1);return-1!==s&&(i+=t.substring(s,c),s=-1),!!(w||m||y||F||x)};for(;c<t.length;c++){const e=t[c];if("\n"!==e){if(" "!==e&&"\t"!==e||!(n>0))if(n>0&&(n>1?p(0):i+="\n",n=0),/[*`#>\-!_.+0-9[)_=]/.test(e)){const r=t[c-1],n=/^[0-9.]$/;!o&&-1!=s&&r!=e&&!("["===e&&"!"===r)&&!(n.test(e)&&n.test(r))&&d(c),("img"==o||"a"==o)&&")"!=e||("strong"==o||"em"==o)&&"*"!=e&&"_"!=e||"code"==o&&"`"!=e||"li"==o&&!/[0-9.*\-+]/.test(e)||"\\"==r?i+=e:-1===s&&(s=c)}else{if(d(c,e))continue;i+=e}}else d(c,e),n++,l=c+1,i.endsWith("  ")&&(n=0,i=i.trimEnd(),u("br"),u(""))}return d(t.length),p(-1),e.state={},e}(t).nodes)}const St={Roboto:!0,"Open Sans":!0,"PT Sans":!0,Arial:!0,Georgia:!0,Tahoma:!0,"Times New Roman":!0,Verdana:!0,Calibri:!0},Et={"12px":!0,"14px":!0,"16px":!0,"18px":!0,"20px":!0,"24px":!0,"28px":!0,"32px":!0,"36px":!0};let At=1;function It(){return At++}class $t{_pool;_order;_isDirty=-1;constructor(t){this._pool=new Map,this._order=t}getIndex(t){let e=this._pool.get(t);return this.ensure(e)&&(e=this._pool.get(t)),typeof e>"u"?-1:e}setIndex(t,e){this._pool.set(t,e)}deleteIndex(t){for(let e=t.length-1;e>=0;e--)this._pool.delete(t[e])}deleteIndexRange(t,e){for(let i=t+e-1;i>=t;i--)this._pool.delete(i)}ensure(t){if(-1===this._isDirty||-1!==t&&typeof t<"u"&&this._isDirty>t)return!1;const e=this._order(),i=e.length;for(let t=this._isDirty;t<i;t++)this._pool.set(e[t].id,t);return this._isDirty=-1,!0}setDirty(t){(-1===this._isDirty||t<this._isDirty)&&(this._isDirty=t)}}const Bt=t=>32768&t.type&&!(8192&t.type),Dt=t=>(16384&t.type)>0,Pt={},Tt=()=>({id:It(),type:8191,props:Pt});class Rt{_order;_pool;constructor(){this.reset()}isEmpty(){return!this._order.length}setDefault(){this.reset(),this.addBlock()}addBlock(){const t={id:It(),type:32771,props:{},text:""};return this.addChunk(-1,{id:It(),type:24578,props:{}}),this.addChunk(-1,t),this.addChunk(-1,Tt()),t}reset(){this._order=[],this._pool=new $t((()=>this._order))}parse(t){this.reset(),this._order=[...t],this._pool.setDirty(0)}copy(t,e){if(Ut([]),e){let i=0;const o=this._getCursorSet(t).map((t=>{const e=structuredClone(this._order[t.pos]);return!i&&Dt(e)&&(i=t.id),delete e.id,e})),r=this._getCursorSet(e).find((t=>Dt(this._order[t.pos])))?.id;Ut(o.reverse()),i==r&&Ut(jt.filter((t=>!Dt(t))));const n=this._order.findIndex((e=>e.id==t.id)),s=this._order.findIndex((t=>t.id==e.id));for(let i=n;i<=s;i++){const o=this._order[i],r=structuredClone(o);delete r.id,o.text&&(i==n?r.text=r.text?.substring(t.pos,n==s?e.pos:r.text.length):i==s&&(r.text=r.text?.substring(0,e.pos))),jt.push(r)}let a=0;jt.forEach((t=>{8191==t.type?a--:Bt(t)||a++}));for(let t=0;t<a;t++)jt.push({type:8191,props:{}});if(24585==jt[0].type||24584==jt[0].type){const t=jt.length;for(let e=0;e<t;e++){const i=jt[e];if(24584!=i.type&&24585!=i.type||this._getEndIndex(e,jt)!=t-1-e){e>1&&Ut(jt.slice(e-1,t-(e-1)));break}}}}}paste(t){if(!jt||!jt.length)return;const e=this._order.findIndex((e=>e.id==t.id)),i=this._order[e];let o=this._getCursorSet(t).map((t=>this._order[t.pos]));const r=o.filter((t=>Dt(t)));let n=[...jt].map((t=>({...t,id:It()})));return 24586==r[0].type&&(24585==n[0].type||24584==n[0].type)&&this._getEndIndex(0,n)==n.length-1&&(n=n.slice(1,n.length-1),o=o.splice(0,o.indexOf(r[0])+1)),32768&n[0].type&&(o=o.filter((t=>!Dt(t)))),this._paste(i,n,t,o,e)}_getPastePos(t,e,i,o){let r=null;const n=e.pos==(void 0!==i.text?i.text.length:Z);if(n||0==e.pos){for(let e=0;e<t.length;e++)if(r=o+(e+1)*(n?1:-1),this._order[r].type!=(n?8191:t[e].type)){r=null;break}n&&r&&r++}return r}_paste(t,e,i,o,r){const n=this._getPastePos(o,i,t,r);let s;null!==n?(this._order.splice(n,0,...e),s=this._order.indexOf(e[e.length-1])):(e=[...new Array(o.length).fill(void 0).map((()=>({type:8191,id:It(),props:{}}))),...e,...o.reverse().map((t=>{const e=structuredClone(t);return e.id=It(),e}))],(t.text&&0!=i.pos||32773==t.type&&i.pos==Z)&&e.unshift({...structuredClone(t),text:(t.text||"").substring(0,i.pos)}),s=r+e.length-1,(t.text&&i.pos!=t.text.length||32773==t.type&&0==i.pos)&&e.push({...structuredClone(t),id:32773==t.type?t.id:It(),text:(t.text||"").substring(i.pos)}),this._order.indexOf(e[e.length-1]),this._order.splice(r,1,...e));const a=this._order[this.getPrevIndex(s+1,(t=>void 0!==t.text||32773==t.type))];return this._pool.setDirty(0),{id:a.id,pos:32773==a.type?Z:(a.text||"").length}}addChunkText(t,e,i){const o=this._pool.getIndex(t),{index:r,pos:n}=this._ensureTextNode(o,e);return this._addChunkText(r,n,i)}ensureTextNode(t){const e=this._pool.getIndex(t.id),{index:i,pos:o}=this._ensureTextNode(e,t.pos);return{id:this._order[i].id,pos:o}}_ensureTextNode(t,e){let i=this._order[t];if(32771!==i.type){if(0===e){const i=this._order[t-1];32771!==i.type?this.addLeafChunk(t,32771,""):(e=i.text.length,t-=1)}else t+=1,32771!==this._order[t].type&&this.addLeafChunk(t,32771,""),e=0;i=this._order[t]}return{index:t,pos:e}}_addChunkText(t,e,i){const o=this._order[t];return e<0&&(e=o.text.length+1-e),function(t,e){if(t)throw e}(e>o.text.length,"invalid text position"),this._order[t]={...o,text:o.text.substring(0,e)+i+o.text.substring(e)},{id:o.id,pos:e+i.length}}deleteChunkText(t,e,i){const o=this._pool.getIndex(t),{index:r,pos:n}=this._ensureTextNode(o,e);return this._deleteChunkText(r,n,i)}_mergeAfterDelete(t,e,i){if(e>0){const o=this._order[e],r=this._order[e+1];this._canBeMerged(o,r)&&(t.id==r.id&&(t={id:o.id,pos:o.text.length+t.pos}),this._order[e]={...o,text:o.text+r.text},this._deleteChunk(e+1,1,0),i&&i.forEach((t=>{t.id===r.id&&(t.id=o.id,t.pos=o.text.length+t.pos)})))}return t}_canBeMerged(t,e){if(32771!==t.type||32771!==e.type)return!1;const i=Object.keys(t.props),o=Object.keys(e.props);return!(i.find((i=>e.props[i]!==t.props[i]))||o.find((i=>e.props[i]!==t.props[i])))}_deleteChunkText(t,e,i){const o=this._order[t];e<0&&32771===o.type&&(e=o.text.length+1+e);let r=!1;const n=t=>(!(32768&t.type)&&8191!==t.type&&(r=!0),32768&t.type&&!(8192&t.type)),s=t=>{if(""!==t.text)return null;const e=this._getParentCursor(t.id),i=this._order[e.pos];return 32768&i.type&&8192&i.type&&this._getEndIndex(e.pos)-e.pos==2?(this._deleteChunk(e.pos,3,1),this._ensureCursor(e.pos)):null};let a=-1;if(i){if(0!==e){let i=o.text.substring(0,e);const r=[...(new Intl.Segmenter).segment(i)].map((t=>t.segment));return r.pop(),i=r.join(""),this._order[t]={...o,text:i+o.text.substring(e)},{id:o.id,pos:i.length}}{const e=this.getPrevIndex(t,n);if(e>=0){const n=this._order[e];if(r){const t=this.deleteRange({id:n.id,pos:n.text?n.text.length:0},{id:o.id,pos:0});return""===o.text&&n.id!==o.id&&(this.deleteChunk(o.id),a=e),this._mergeAfterDelete(t,e)}if(32771===n.type)return""===o.text&&this._deleteChunk(t,1,0),this.deleteChunkText(n.id,-1,i);this._deleteChunk(e,1,0),a=e-1}else{const t=s(o);if(t)return t}}}else{if(e!==o.text.length){const i=o.text.substring(e),r=[...(new Intl.Segmenter).segment(i)].map((t=>t.segment));return r.shift(),this._order[t]={...o,text:o.text.substring(0,e)+r.join("")},{id:o.id,pos:e}}{const e=this.getNextIndex(t,n);if(e>=0){const n=this._order[e];if(r)return this.deleteRange({id:o.id,pos:o.text.length},{id:n.id,pos:0});if(32771===n.type)return""===o.text&&this._deleteChunk(t,1,0),this._mergeAfterDelete(this.deleteChunkText(n.id,0,i),t-1);this._deleteChunk(e,1,0),a=t}else{const t=s(o);if(t)return t}}}return this._mergeAfterDelete({id:o.id,pos:e},a)}_tryToMerge(t,e){const i=this._pool.getIndex(t);let o,r;if(e<0?(o=i,r=this.getNextIndex(i,Bt)):(r=i,o=this.getPrevIndex(i,Bt)),!o||!r)return;const n=this._order[o],s=this._order[r];if(32771!==n.type||32771!==s.type)return;const a=this._getChunkSet(o),l=this._getChunkSet(r);if(a.length===l.length){t:for(let t=0;t<a.length;t++)if(a[t]!==l[t]){for(let e=t;e<a.length;e++)if(a[t].type!==l[t].type||16384&a[t].type)return;break t}return this._order[o]={...n,text:n.text+s.text},this._order.splice(o+1,r-o),this._pool.setDirty(o+1),{id:n.id,pos:n.text.length}}}_getChunk(t){return this._order[this._pool.getIndex(t)]}_getEndIndex(t,e){let i=t,o=1;for(;o>0;){i++;const t=(e||this._order)[i];8191===t.type&&o--,8192&t.type&&o++}return i}deleteChunk(t){const e=this._pool.getIndex(t);if(e>=0){const t=1+(8192&this._order[e].type?this._getEndIndex(e)-e:0);this._deleteChunk(e,t,0)}}_deleteChunk(t,e,i){const o=this._order[t+e],r=this._order[t-1];if(this._pool.deleteIndex(this._order.slice(t,t+e).map((t=>t.id))),this._order.splice(t,e),this._pool.setDirty(t),r&&o&&8191===o.type&&8192&r.type){if(1&i){const e=It();return this._order.splice(t,0,{id:e,type:32771,text:"",props:{}}),{id:e,ind:t}}if(this._order.length>2)return this._deleteChunk(t-1,2,0)}return{id:o.id,ind:t}}addLeafChunk(t,e,i){const o={id:It(),text:i,type:e,props:Pt};return this._order.splice(t,0,o),this._pool.setDirty(t),o}addBlockChunk(t,e,i){const o={id:It(),type:e,props:i},r=Tt();return this._order.splice(t,0,o,r),this._pool.setDirty(t),o}addChunk(t,e){-1===t?(this._order.push(e),this._pool.setIndex(e.id,this._order.length-1)):(this._order.splice(t,0,e),this._pool.setIndex(e.id,t),this._pool.setDirty(t))}nextIndex(t){const e=this._pool.getIndex(t);return e>=0?e+1:e}prevIndex(t){const e=this._pool.getIndex(t);return e>=0?e-1:e}forEach(t){this._order.forEach(t)}getPrev(t,e){return this._order[this.getPrevIndex(t,e)]}getNext(t,e){return this._order[this.getNextIndex(t,e)]}getPrevIndex(t,e){for(;--t>=0;){if(e(this._order[t]))return t}return-1}getNextIndex(t,e){const i=this._order.length;for(;++t<i;){if(e(this._order[t]))return t}return-1}_ensureCursor(t){const e=this._order[t];let i=e.type;if(32768&i&&!(8192&i))return{id:e.id,pos:0};const o=this._order[t-1];return i=o.type,32768&i&&!(8192&i)?{id:o.id,pos:32771===o.type?o.text.length:Z}:{id:this.addLeafChunk(t,32771,"").id,pos:0}}getIndex(t){return this._pool.getIndex(t)}deleteRange(t,e){if(t.id!==e.id){const i=this._getCursorSet(t),o=this._getCursorSet(e);return this._normalizeBaseLevel(i,o),t=this.ensureTextNode(t),e=this.ensureTextNode(e),this._extractAndMergePart(i,o,t,e)}const i=this._pool.getIndex(t.id),o=this._order[i];if(32771===o.type){const r=o;return this._order[i]={...r,text:r.text.substring(0,t.pos)+r.text.substring(e.pos)},t}const r=this._deleteChunk(i,1,1);return this._ensureCursor(r.ind)}getChunk(t){return this._order[this._pool.getIndex(t)]}getChunkAt(t){return this._order[t]}_getBlockCursor(t){let e=this._pool.getIndex(t),i=0;for(;e>=0;){const t=this._order[e];if(16384&t.type&&i<=0)return{id:t.id,pos:e};8192&t.type?i--:8191===t.type&&i++,e--}throw"block not find"}_collectChunkCursors(t,e){const i=[];let o=1;for(;o>0;){t++;const r=this._order[t];8191===r.type&&o--,8192&r.type&&o++,r.type===e&&i.push({id:r.id,pos:t})}return i}_getParentCursor(t){let e=this._pool.getIndex(t),i=0;for(;e>=0;){e--;const t=this._order[e];if(8192&t.type?i--:8191===t.type&&i++,i<0)return{id:t.id,pos:e}}throw"parent not find"}_getCursorSet(t){const e=[];let i=this._pool.getIndex(t.id),o=0;for(;i>=0;i--){const t=this._order[i];8191===t.type?o-=1:8192&t.type&&(o+=1,o>0&&(e.push({id:t.id,pos:i}),o=0))}return e}getParent(t,e){let i=this._pool.getIndex(t.id),o=0;for(;i>=0;i--){const t=this._order[i];if(8191===t.type)o-=1;else if(8192&t.type&&(o+=1,o>0)){if(e(t))return{id:t.id,pos:i};o=0}}return null}_getChunkSet(t){const e=[];let i=0;for(;t>=0;t--){const o=this._order[t];8191===o.type?i-=1:8192&o.type&&(i+=1,i>0&&(e.push(o),i=0))}return e}_normalizeBaseLevel(t,e){for(;t.length&&e.length&&t[t.length-1].id===e[e.length-1].id;)e.pop(),t.pop()}_extractAndMergePart(t,e,i,o){const r=this._pool.getIndex(i.id),n=this._pool.getIndex(o.id),s=this._order[r],a=this._order[n];let l=t.map((t=>this._order[t.pos])),c=e.map((t=>this._order[t.pos]));32771===s.type&&i.pos!==s.text.length&&(this._order[r]={...s,text:s.text.substring(0,i.pos)}),32771===a.type&&0!==o.pos&&(this._order[n]={...a,text:a.text.substring(o.pos)});let p=n-r-1,u=r+1,h=-1;for(let t=0;t<c.length;t++)if(16384&c[t].type){h=t;break}let d=-1;for(let t=0;t<l.length;t++)if(16384&l[t].type){d=t;break}if(-1!=h){const i=e[h].pos,o=this._getEndIndex(i);let s=[];for(let t=0;t<d;t++)s.push(Tt());for(let t=h-1;t>=0;t--)s.push(c[t]);const a=this._order.splice(n,o-n);s=s.concat(a),this._order.splice(r+1,0,...s);const _=this._deleteEmptyBlocks(e[h].pos+s.length,n-i-1);p-=_,c=c.slice(h+_),e=e.slice(h+_),l=l.slice(d),t=t.slice(d),this._pool.setDirty(r+1),u+=s.length}const _=[];for(let t=0;t<l.length;t++)_.push(Tt());for(let t=c.length-1;t>=0;t--)_.push(c[t]);return this._deleteSegment(u,p,_),this._mergeAfterDelete(i,r)}_deleteEmptyBlocks(t,e,i=0){const o=this._order[t],r=this._order[t+1+2*i+e];return r&&8191===r.type&&o&&16384&o.type?this._deleteEmptyBlocks(t-1,e,i+1):(i&&this._deleteSegment(t+1,2*i+e),i+e)}_deleteSegment(t,e,i=[]){if(!e)return;const o=[];for(let i=0;i<e;i++)o.push(this._order[i+t].id);this._pool.deleteIndex(o),this._order.splice(t,e,...i),this._pool.setDirty(t)}getLength(){return this._order.length}getProps(t,e,i,o){let r=this._pool.getIndex(t.id);const n=this._order[r],s={},a=Object.assign({},n.props);let l=i&&i[n.type];l&&(i=null,l(t,n));const c=this._getCursorSet(t);for(let t=0;t<c.length;t++){const e=this._order[c[t].pos];e.props&&Object.keys(e.props).length&&(16384&e.type?Object.assign(s,e.props):Object.assign(a,e.props));const o=i&&i[e.type];o&&(i=null,o(c[t],e))}if(e){r++;const t=this._pool.getIndex(e.id);for(;r<=t;){const t=this._order[r];8191!==t.type&&(16384&t.type?Nt(s,t.props):Nt(a,t.props)),r++}}if(l=i&&i[0],l&&l(t,n),o){if(1&o)return s;if(2&o)return a}return{...s,...a}}insertChunk(t,e,i,o){const{index:r,pos:n}=this._ensureTextNode(this._pool.getIndex(t.id),t.pos);if(16384&e)return this._insertBlockChunk({id:this._order[r].id,pos:n},e,i);const s=[],a=this._newTag(e,i,s),l=s.length>1||2&o,c=this._splitText(r,n,!l,s);this._order.splice(r+1,0,...s),this._pool.setDirty(r+1);const p=l?a:c;return J.has(e)&&this._cleanFromNested(r,r+s.length),{id:p,pos:0}}insertChunkNext(t,e,i){const o=this._pool.getIndex(t.id),r=this._getEndIndex(o),n=[],s=this._newTag(e,i,n);return this._order.splice(r+1,0,...n),this._pool.setDirty(r+1),{id:s,pos:0}}_isEndOfBlock(t,e){let i=this._order[t];if(32771===i.type){if(e!==i.text.length)return 0;t++}for(;i=this._order[t],i;){if(16384&i.type)return t;if(8191!==i.type)return 0;t++}return-1}_insertBlockChunk(t,e,i){const o=this._pool.getIndex(t.id),r=this._isEndOfBlock(o,t.pos),n=this._getCursorSet(t);let s=[],a=null,l=!0;const c=Y.get(e);let p=n.length,u=null;for(let t=0;t<p;t++){const i=this._order[n[t].pos];if(16384&i.type){if(c&&c.includes(i.type)){p=t,l=u!=e;break}l=i.type!==e}s.push(Tt()),u=i.type}l&&(i||(i={}),a=this._newTag(e,i,s));const h=o+1+s.length;for(let t=p-1;t>=0;t--){const e=this._order[n[t].pos];s.push({id:It(),type:e.type,props:r?Pt:e.props})}let d,_=0;return r?(_=p-1,s=s.slice(0,s.length-_),d=It(),s.push({id:d,type:32771,text:"",props:Pt})):d=this._splitText(o,t.pos,!l,s),this._order.splice(o+1,_,...s),this._pool.setDirty(o+1),r||this._deleteEmptyBlocks(h,0),{id:a||d,pos:0}}_splitText(t,e,i,o){const r=this._order[t],n=r.text.length!==e||0===e;let s=0;return n&&(this._order[t]={...r,text:r.text.substring(0,e)}),(n||i)&&(s=It(),o.push({id:s,type:r.type,text:r.text.substring(e),props:{...r.props}})),s}_splitTextAt(t,e,i){const o=this._order[t];if(!i&&(0===e||e===o.text.length||e===Z))return 0;const r=[],n=this._splitText(t,e,i,r);return r.length&&(this._order.splice(t+1,0,...r),this._pool.setDirty(t+1)),n}_newTag(t,e,i){if(8192&t){const o=It();return i.push({id:It(),type:t,props:e},{id:o,type:32771,text:"",props:{}},Tt()),o}const o={id:It(),type:t,props:e};return 32771===t&&(o.text=""),i.push(o),o.id}_removeTag(t,e,i,o=[]){return this._order.splice(e,1),this._mergeAfterDelete(i,e-1,o),this._order.splice(t,1),i=this._mergeAfterDelete(i,t-1,o),this._pool.setDirty(t),i}_splitTagAtCursor(t,e){const i=this._pool.getIndex(e.id);if(!this._splitTextAt(i,e.pos,!1))return 0;const o=this._order[t],r=i+1,n=[];let s=0;for(let e=t+1;e<i;e++){const t=this._order[e];8191===t.type?(s--,s>=0&&n.pop()):8192&t.type&&(s++,n.push(t))}const a=It(),l=[];for(let t=0;t<n.length;t++)l.push(Tt());l.push(Tt()),l.push({id:a,type:o.type,props:{...o.props}});for(let t=n.length-1;t>=0;t--)l.push({id:It(),type:n[t].type,props:{...n[t].props}});return this._injectBlock(r,l),a}_unwrapSingleCursor(t,e){const i=this._getCursorSet(t);for(let o=0;o<i.length;o++){const r=i[o].pos;if(this._order[r].type===e){const e=this._getEndTag(r);t=this._removeTag(r,e,t);break}}return[t,null]}_collectTagsInRange(t,e,i){const o=this._pool.getIndex(t.id),r=this._pool.getIndex(e.id),n=this._order[r],s=[],a=t=>{const e=this._getCursorSet(t);for(let t=0;t<e.length;t++){const o=e[t].pos;if(this._order[o].type===i){const t=this._getEndTag(o);-1!==t&&(s.some((t=>t.start===o))||s.push({start:o,end:t}))}}};0===t.pos&&a(t),(e.pos===n.text?.length||e.pos===Z)&&a(e);for(let t=o;t<=r;t++){const e=this._order[t];if(!(e&&e.type===i&&8192&e.type))continue;const o=this._getEndTag(t);-1!==o&&o<=r&&(s.some((e=>e.start===t))||s.push({start:t,end:o}),t=o)}return s}_splitTagAtBoundary(t,e,i,o=!1){const r=this._getCursorSet(t);for(let n=0;n<r.length;n++){const s=r[n].pos;if(this._order[s].type!==e)continue;const a=this._splitTagAtCursor(s,t);if(!a)continue;const l=this._pool.getIndex(a)+("end"===i||o?0:1),c={newCursor:this.ensureTextNode({id:this._order[l].id,pos:0})};if("start"===i){const t=this.ensureTextNode({id:this._order[l].id,pos:Z});c.alternateEnd=t}return c}return null}_hasContentAfterCursor(t,e){const i=this._order[t];if(32771===i.type&&e<i.text.length)return!0;let o=t+1,r=0;for(;o<this._order.length;){const t=this._order[o];if(8191===t.type){if(r--,r<0)return!1}else if(8192&t.type){if(r++,32768&t.type)return!0;if(16384&t.type)return!1}else if(32771===t.type){if(t.text.length>0)return!0}else if(32768&t.type)return!0;o++}return!1}unwrapRange(t,e,i){if(!e)return this._unwrapSingleCursor(t,i);const o=this._pool.getIndex(t.id),r=this._pool.getIndex(e.id),n=this._order[o],s=this._order[r];let a=!1;if(e.pos>0&&e.pos<s.text?.length){const t=this._splitTagAtBoundary(e,i,"end");t&&(e=t.newCursor,a=!0)}if(t.pos>0&&t.pos<n.text?.length){const o=this._splitTagAtBoundary(t,i,"start",a);if(o&&(t=o.newCursor,!a&&o.alternateEnd)){const t=this._pool.getIndex(e.id);(-1===t||(this._order[t].text?.length??0)<e.pos)&&(e=o.alternateEnd)}}const l=this._collectTagsInRange(t,e,i);l.sort(((t,e)=>e.start-t.start));const c=e?[e]:[];for(const e of l)t=this._removeTag(e.start,e.end,t,c);return[t,e]}_getEndTag(t){let e=0;for(let i=t+1;i<this._order.length;i++){const t=this._order[i];if(8191===t.type&&!e)return i;8191===t.type?e--:8192&t.type&&e++}return-1}wrapNode(t,e,i){const o=this._pool.getIndex(t.id);return this._order.splice(o+1,0,Tt()),this._order.splice(o,0,{id:It(),type:e,props:i}),this._pool.setDirty(o),t}wrapRange(t,e,i,o){const r=this._ensureTextNode(this._pool.getIndex(t.id),t.pos);let n=r.index;t={id:this._order[n].id,pos:r.pos};const s=this._ensureTextNode(this._pool.getIndex(e.id),e.pos);let a=s.index;if(e={id:this._order[a].id,pos:s.pos},J.has(i)){const o=J.get(i);if(o){for(const i of o)[t,e]=this.unwrapRange(t,e,i);n=this._pool.getIndex(t.id),a=this._pool.getIndex(e.id)}}this._splitTextAt(a,e.pos,!1);const l=this._splitTextAt(n,t.pos,!1);n+=l?1:0,a+=1+(l?1:0);const c=this._order[n],p=this._order[a-1];if(t.id===e.id)this._wrapRange(n,a,i,o);else{let r=this._getCursorSet(t),s=this._getCursorSet(e);if(this._normalizeBaseLevel(r,s),r.length||s.length){r=this._topInlineLevel(r),s=this._topInlineLevel(s);const t=this._hasContentAfterCursor(a-1,e.pos),l=this._formSplit(r,r);if(t){const t=this._formSplit(s,s);this._injectBlock(a,t)}this._injectBlock(n,l),n+=r.length,a+=2*r.length+(t?s.length:0),this._wrapOneByOne(n,a,i,o)}else this._wrapRange(n,a,i,o)}return[{id:c.id,pos:0},{id:p.id,pos:p.text.length}]}toArray(){return[...this._order]}_wrapRange(t,e,i,o){this._order.splice(t,0,{id:It(),type:i,props:o}),this._order.splice(e+1,0,Tt()),this._cleanFromNested(t,e+2),this._pool.setDirty(t)}_formSplit(t,e){const i=[];for(let e=t.length-1;e>=0;e--)i.push(Tt());for(let t=e.length-1;t>=0;t--){const o=this._order[e[t].pos];i.push({id:It(),type:o.type,props:{...o.props}})}return i}_injectBlock(t,e){this._order.splice(t,0,...e),this._pool.setDirty(t)}_wrapOneByOne(t,e,i,o){const r=[];let n=t,s=0,a=!1;for(this._getChunkSet(t).some((t=>32768&t.type&&8192&t.type))||(r.push({index:n,chunk:{id:It(),type:i,props:o}}),a=!0);n<e;){const t=this._order[n];8191===t.type?(s--,a&&(r.push({index:n,chunk:Tt()}),a=!1)):8192&t.type?(a&&0===s&&(r.push({index:n,chunk:Tt()}),a=!1),s++,1===s&&(r.push({index:n+1,chunk:{id:It(),type:i,props:o}}),a=!0)):0===s&&!a&&(r.push({index:n,chunk:{id:It(),type:i,props:o}}),a=!0),n++}a&&r.push({index:n,chunk:Tt()});for(let t=r.length-1;t>=0;t--){const{index:e,chunk:i}=r[t];this._order.splice(e,0,i)}this._pool.setDirty(t),this._cleanFromNested(t,n+r.length)}_cleanFromNested(t,e){const i=this._getChunkSet(t-1).reverse(),o=i.map((t=>t.type));for(let r=t;r<e;r++){const t=this._order[r],n=J.get(t.type);if(n){const t=o.findIndex((t=>n.has(t)));if(-1!==t){const o=i.length-t,n=this._getEndIndex(r)+o;for(let e=i.length-1;e>=t;e--)this._order.splice(r,0,Tt());for(let e=t;e<i.length;e++)this._order.splice(n+o,0,{...i[e],id:It()});r-=1,e+=2*o;continue}}8192&t.type&&(i.push(t),o.push(t.type)),8191===t.type&&(i.pop(),o.pop())}return!0}_topInlineLevel(t){const e=t.length;for(let i=0;i<e;i++)if(16384&this._order[t[i].pos].type)return t.slice(0,i);return t}_setChunkProperty(t,e,i){const o=this._pool.getIndex(t.id);this._setPropertyRange(o,o,(()=>!0),e,i)}_setBlockProperty(t,e,i,o){const r=this.getPrevIndex(this._pool.getIndex(t.id),Dt);let n=r;e&&e.id!==t.id&&(n=this.getPrevIndex(this._pool.getIndex(e.id),Dt)),this._setPropertyRange(r,n,(t=>(16384&t.type)>0),i,o)}findChunk(t){for(let e=0;e<this._order.length;e++){const i=this._order[e];if(t(i))return{id:i.id,pos:e}}return null}patchChunk(t,e){const i=this._pool.getIndex(t),o=this._order[i];if(o)for(const t in e)null===e[t]?delete o.props[t]:o.props[t]=e[t];this._order[i]={...o},this._pool.setDirty(i)}_setPropertyRange(t,e,i,o,r){const n=2===r?[]:Object.keys(o);for(let s=t;s<=e;s++){const t=this._order[s];if(i(t)){let e;if(2===r)e={...o};else{e=t.props?{...t.props}:{};for(let t=0;t<n.length;t++){const i=n[t];null===o[i]?delete e[i]:e[i]=o[i]}}this._order[s]={...t,props:e}}}}_setProperty(t,e,i,o){let r,n,s=t.id,a=t.pos,l=0,c=this._pool.getIndex(t.id);if(e){r=e.id,l=e.pos,n=this._pool.getIndex(e.id);const i=this._order[n];32771===i.type&&e.pos<i.text.length&&(0===e.pos?n--:(this._breakNode(i,n,e.pos),l=e.pos));const o=this._order[c];if(32771===o.type&&t.pos>0)if(t.pos===o.text.length)c++;else{const e=this._breakNode(o,c,t.pos);s=e.id,a=0,o.id===i.id&&(r=e.id,l-=t.pos),c++,n++}}else n=c;this._setPropertyRange(c,n,(t=>32771===t.type),i,o);const p=r?this._mergeAfterDelete({id:r,pos:l},n):null;return p||this._mergeAfterDelete({id:s,pos:a},c),[this._mergeAfterDelete({id:s,pos:a},c-1,p?[p]:void 0),p]}_breakNode(t,e,i){this._order[e]={...t,text:t.text.slice(0,i)};const o=It(),r={...t,id:o,type:t.type,props:{...t.props},text:t.text.slice(i)};return this._order.splice(e+1,0,r),this._pool.setIndex(o,e+1),this._pool.setDirty(e+1),r}_isEmptyBlock(t){const e=this._pool.getIndex(t.id),i=this._getEndIndex(e);for(let t=e;t<i;t++){const e=this._order[t];if(32771===e.type&&e.text.length>0)return!1}return!0}}function Nt(t,e){Object.keys(t).forEach((i=>{e[i]!==t[i]&&(t[i]="")}))}const Ot={};function Lt(t,e,i){t=t.replace(/[\n\t ]+/g," ");const o=(e?e.document:document).createElement("div");o.innerHTML=t;const r=new Rt;return Ht(o,r,{text:{}},{inBlock:0,onlyBlocksInside:!0},i),r}function Ht(t,e,i,o,r){const n=t.childNodes;for(let t=0;t<n.length;t++)Mt(n[t],e,i,{...o,i:t,last:n.length-1},r)}function Mt(t,e,i,o,r){const n=i.text,{inBlock:s,i:a,last:l,onlyBlocksInside:c}=o;if(t.nodeType===t.TEXT_NODE){const i=function(t,e,i){let o=t.textContent.replace(/[\n\t ]{2,}/," ");return e&&" "===o[0]&&(o=o.substring(1)),i&&" "===o[o.length-1]&&(o=o.substring(0,o.length-1)),o.replace(/\xA0/g," ")}(t,0===s||2===s&&0===a,0===s||2===s&&a===l);return void(0===s?i&&" "!=i&&(e.addChunk(-1,{id:It(),type:24578,props:{tag:"p"}}),e.addChunk(-1,{type:32771,id:It(),text:i,props:Ot}),e.addChunk(-1,{id:It(),type:8191,props:Ot})):c||e.addChunk(-1,{type:32771,id:It(),text:i,props:{...n}}))}const p=t.nodeName;if("BR"===p)return void e.addChunk(-1,{type:32775,id:It(),props:{}});let u=-1;const h={...n},d={},_={};switch(p){case"H1":u=24578,d.tag="h1";break;case"H2":u=24578,d.tag="h2";break;case"H3":u=24578,d.tag="h3";break;case"H4":u=24578,d.tag="h4";break;case"H5":u=24578,d.tag="h5";break;case"H6":u=24578,d.tag="h6";break;case"BLOCKQUOTE":u=24578,d.tag="blockquote";break;case"B":case"STRONG":h.bold=!0;break;case"I":case"EM":h.italic=!0;break;case"U":h.underline=!0;break;case"STRIKE":case"S":h.strike=!0;break;case"A":_.url=t.getAttribute("href"),u=40966;break;case"SUB":u=40973;break;case"SUP":u=40974;break;case"IMG":{_.url=t.getAttribute("src");const e=t.getAttribute("alt");e&&(_.alt=e),u=32773;break}case"HR":u=16396;break;case"P":u=24578,d.tag="p";break;case"UL":u=24584;break;case"OL":u=24585;break;case"LI":u=24586}if(function(t,e,i,o){const{fontSize:r,fontWeight:n,textAlign:s,fontFamily:a,color:l,background:c,textDecoration:p,fontStyle:u,marginLeft:h,lineHeight:d,width:_,height:f}=t.style,g=o?.defaultFontSize||"14px",m=o?.defaultFontFamily||"Arial";let w=!1;if(r&&(e.fontSize=Et[r]?r:g,w=!0),n&&(e.bold="bold"===n||parseInt(n,10)>=600,w=!0),a){const t=a.split(",").map((t=>t.trim().replace(/^["']|["']$/g,""))).find((t=>St[t]))||m;e.fontFamily=t.includes(" ")?`'${t}'`:t,w=!0}l&&(e.color=l,w=!0),c&&(e.background=c,w=!0),p&&(e.strike=-1!==p.indexOf("line-through"),e.underline=-1!==p.indexOf("underline"),w=!0),u&&(e.italic="italic"===u,w=!0),s&&(i.align=s,w=!0),h&&(i.indent=parseInt(h),w=!0),d&&(i.lineHeight=d,w=!0),_&&(i.width=parseInt(_),w=!0),f&&(i.height=parseInt(f),w=!0)}(t,h,d,r),-1!==u&&e.addChunk(-1,{id:It(),type:u,props:{..._,...d}}),-1===u||8192&u){if(d.tag&&delete d.tag,0===t.childNodes.length&&16384&u)e.addChunk(-1,{type:32771,id:It(),props:Ot,text:""});else{Ht(t,e,{text:h},{inBlock:-1!==u&&16384&u?2:1,onlyBlocksInside:24585==u||24584==u},r)}-1!==u&&e.addChunk(-1,{id:It(),type:8191,props:Ot})}}function zt(t){return Lt(Ct(t))}let Vt,jt=[];function Ut(t){jt=t}function Gt(t,e,i,o){if("paste"==e){const e=(i.clipboardData?.getData("text/plain")||"").replace(/\r/g,"");if(e){if(e!=Vt){Ut(zt(e.replace(/(?<!\s{2,})(?<!\n)\n(?!\n)/g,"  \n")).toArray().map((t=>{const e=structuredClone(t);return delete e.id,e})))}}else{const e=i.clipboardData?.files;if(e){const r=[...e].filter((t=>-1!=t.type.indexOf("image")));if(r.length){if(o)o(r);else{const e=r.map((t=>new Promise(((e,i)=>{const o=new FileReader;o.onloadend=()=>{"string"==typeof o.result?e(o.result):i()},o.onerror=()=>i(),o.readAsDataURL(t)}))));Promise.all(e).then((t=>Ut(t.map((t=>({type:32773,props:{url:t}})))))).finally((()=>t.exec(15)))}return i.preventDefault()}}}t.exec(15)}else{"copy"==e?t.exec(13):t.exec(14);const o=[],r=[];jt.forEach((t=>r.push(mt(t,o)))),i.clipboardData?.setData("text/html",r.join(""));const n=document.getSelection();Vt=n?n.toString():"",i.clipboardData?.setData("text/plain",Vt),Vt=Vt.replace(/\r/g,"")}i.preventDefault()}const qt=new Map([[32773,"i"],[32775,"n"],[16396,"r"],[24578,"p"],[40966,"a"],[40968,"s"],[40964,"f"],[24585,"o"],[24584,"u"],[24586,"l"]]);function Wt(t,e,i){return e.wrapNode(i,24586,{})}const Kt=new Map([[24584,Wt],[24585,Wt],[16396,function(t,e,i){const o=e.getIndex(i.id);let r=e.getNext(o,Bt);return r||(r=e.addBlock()),{id:r.id,pos:0}}]]);class Xt{_handlers;constructor(){this._handlers=[]}add(t){this._handlers.push(t)}call(t,e,i){let o=!0;for(let r=0;r<this._handlers.length;r++)!1===this._handlers[r](t,e,i)&&(o=!1);return o}}class Yt{plugins;_start;_end;_tape;constructor(t){t?!0===t?this.reset(!0):(this._tape=t,this.resetCursor()):this.reset(),this.plugins={action:new Xt,change:new Xt}}reset(t){this._tape=new Rt,t||(this._tape.addBlockChunk(0,24578,{}),this._tape.addLeafChunk(1,32771,"")),this.resetCursor()}resetCursor(){const t=this._tape.getNext(-1,(t=>32771===t.type||32773===t.type));t&&(this._start={id:t.id,pos:0},this._end=null)}getTape(){return this._tape}setCursor(t,e,i){e=!e||e.id===t.id&&e.pos===t.pos?null:e,i&&([t,e]=this.normalizeSelection(t,e)),this._start=t,this._end=e}normalizeSelection(t,e){if(e){const i=t=>32771===t.type||32773===t.type,o=this.getTape(),r=o.getChunk(t.id);if(t.pos==(void 0!==r.text?r.text.length:Z)&&(32773===r.type||r.text)){const r=o.getChunkAt(o.getNextIndex(o.getIndex(t.id),i));if(r.id===e.id&&0===e.pos)return[t,null];t={id:r.id,pos:0}}if(0===e.pos){const t=o.getChunk(e.id);if(32773===t.type||t.text){const t=o.getChunkAt(o.getPrevIndex(o.getIndex(e.id),i));e={id:t.id,pos:void 0!==t.text?t.text.length:Z}}}}return[t,e||null]}getCursor(){return[this._start,this._end]}exec(t,e){if(this.plugins.action.call(this,t,e)){switch(t){case 1:this._deleteSelection(),this.doInsert(this._start,e);break;case 2:if(!this._deleteSelection()){const{id:t,pos:e}=this._start,i=this._tape.deleteChunkText(t,e,!0);this.setCursor(i)}break;case 3:if(!this._deleteSelection()){const{id:t,pos:e}=this._start,i=this._tape.deleteChunkText(t,e,!1);this.setCursor(i)}break;case 13:this._tape.copy(this._start,this._end);break;case 14:this._tape.copy(this._start,this._end),this._deleteSelection();break;case 15:{this._deleteSelection();const t=this._tape.paste(this._start);t&&this.setCursor(t);break}case 6:{this._deleteSelection();let{tag:t,props:i}=e;i=i||{};const{mode:o}=e;let r=this._start,n=0;if(16395===t){const e=this._tape._getBlockCursor(r.id),i=this._tape.getChunkAt(e.pos);if(24586===i.type&&this._tape._isEmptyBlock(i)){const e=this._tape._getParentCursor(i.id),o=this._tape._collectChunkCursors(e.pos,24586);t=0,1===o.length?(r=this._tape.insertChunkNext(e,24578,{}),this._tape.deleteChunk(e.id)):o[o.length-1].id===i.id?(r=this._tape.insertChunkNext(e,24578,{}),this._tape.deleteChunk(i.id)):t=i.type}else t=i.type}else if(32771===t){if(1===o||0===o){const t=this._tape.getChunk(r.id);if(32771===t.type&&""===t.text)return void this.doSetProperty(this._start,null,{props:i,mode:o});const e=this._tape.getProps(r,null,null,2);if(1===o)for(const t in i)e[t]?delete e[t]:e[t]=i[t];else Object.assign(e,i);i=e;const n=this._tape.getIndex(r.id),s=this._tape.getChunkAt(n+1);if(32771===t.type&&t.text.length===r.pos&&32768&s.type&&this._tape._canBeMerged({id:1,type:32771,props:i},s))return void this.setCursor({id:s.id,pos:0});const a=this._tape.getChunkAt(n-1);if(0===r.pos&&32768&a.type&&this._tape._canBeMerged({id:1,type:32771,props:i},a))return void this.setCursor({id:a.id,pos:a.text.length})}n|=2}if(t){r=this._tape.insertChunk(r,t,i,n);const e=Kt.get(t);e&&(r=e(this,this._tape,r))}this.setCursor(r);break}case 7:{const{tag:t,props:i={},mode:o=0}=e;if(!this._end)throw"no end cursor";const[r,n]=this._tape.wrapRange(this._start,this._end,t,i),s=4&o;this.setCursor(s?n:r,s?null:n);break}case 12:{const{tag:t}=e,[i,o]=this._tape.unwrapRange(this._start,this._end,t);this.setCursor(i,o);break}case 11:{const{id:t,props:i}=e;this.getTape().patchChunk(t,i);break}case 10:this.doSetProperty(this._start,this._end,e);break;case 8:{const{data:t,reset:i}=e;this.getTape().parse(t),i&&this.resetCursor();break}}this.plugins.change.call(this)}}doSetProperty(t,e,i){const{target:o,mode:r,cursor:n}=i;let s=i.props;if(1===r){const e=this.getTape().getProps(t,null);s={...s};for(const t in s)e[t]&&(s[t]=null)}1===o?this.getTape()._setBlockProperty(t,e,s,r):2!==o&&e?([t,e]=this.getTape()._setProperty(t,e,s,r),this.setCursor(t,e)):this.getTape()._setChunkProperty(n||t,s,r)}doInsert(t,e){const{id:i,pos:o}=t;t=this._tape.addChunkText(i,o,e),this.setCursor(t)}setValue(t,e,i){const o=(e=e||Lt)(t,null,i);o.isEmpty()&&o.setDefault(),this.exec(8,{data:o.toArray(),reset:!0})}getValue(t){return(t=t||vt)(this.getTape())}_deleteSelection(){if(this._end){const t=this._tape.deleteRange(this._start,this._end);return this.setCursor(t),!0}return!1}}const Jt={};function Zt(t,e,i){let o=e;for(;")"!==t[o];)o++;const r=t.substring(e,o),[n,s]=r.split("=");return i[n]="true"===s||s,o-e+1}function Qt(t,e,i){const o=t.getCursor();e&&(o[0]=e),i&&(o[1]=i),t.setCursor(o[0],o[1])}function te(t,e,i){const o={},r=e.indexOf("(");if(-1!==r){let t=e.substring(r);for(e=e.substring(0,r);"("===t[0];)t=t.substring(Zt(t,1,o)+1)}const n=e.indexOf("["),s=e.indexOf("]"),a=It();if(-1!==n||-1!==s){const t=i.getCursor();-1!=n&&(t[0]={id:a,pos:n}),-1!=s&&(t[1]={id:a,pos:s-(-1!==n?1:0)}),i.setCursor(t[0],t[1]),e=e.replace("[","").replace("]","")}t.addChunk(-1,{id:a,type:32771,text:"_"===e?"":e,props:o})}const ee=new Map([["i",32773],["n",32775],["r",16396],["p",24578],["a",40966],["s",40968],["f",40964],["l",24586],["o",24585],["u",24584]]);function ie(t,e,i){switch(t.type){case 40968:case 40966:case 32773:return"";case 32775:return"\n";case 24586:return i.secondLi?"\n- ":(i.secondLi=!0,"- ");case 32771:return t.text;default:if(16384&t.type){if(i.secondLi=!1,!i.firstBlock)return"\n\n";i.firstBlock=!1}return""}}const oe={},re=()=>({id:It(),type:8191,props:oe});function ne(t,e,i){switch(t.type){case 32773:return`![${t.props.alt||""}](${t.props.url})`;case 32775:return"  \n";case 40966:return e.push(`](${t.props.url||"#"})`),"[";case 40974:case 40973:return e.push(""),"";case 24578:{const o=t.props.tag||"p";let r="";return"h"===o[0]?r="#".repeat(parseInt(o[1]))+" ":"blockquote"===o&&(r="> "),e.push(""),se(i)+r}case 24586:{e.push("");const t=i.list.length-1,o=" ".repeat(4*t),r=i.list[t],n=24584===r.tag?"- ":++r.items+". ";return se(i,!0)+o+n}case 40968:{const i=le(t.props);return e.push(i),i}case 24585:case 24584:{e.push("list");const o=i.list.length;return i.list.push({tag:t.type,items:0}),i.first||o?"":"\n"}case 8191:{let t=e.pop();return"list"===t&&(i.list.pop(),t=""),t}case 32771:{const e=le(t.props),i=t.text;return i?e+i+e:""}case 16396:return se(i)+"---";default:return console.log("Not supported node:",t),""}}function se(t,e=!1){let i="";return t.first?t.first=!1:i=e?"\n":"\n\n",i}function ae(t){return gt(ne,t,{list:[],first:!0})}function le(t){let e="";return t&&(t.bold&&(e+="**"),t.italic&&(e+="*")),e}class ce{_state;_create;_update;constructor(t,e){this._state=[],this._create=t,this._update=e}render(t,e){const i=this._state,o=i.length-1,r=e.toArray(),n=r.length-1;let s=t;t=t.firstChild;for(let e=0,a=0;e<o||a<n;){const o=i[e],n=r[a];if(!n||8191===n.type&&o&&8191!==o.type)e=this._removeTillEnd(s,t,i,e);else if(!o||8191===o.type&&n&&8191!==n.type)a=this._addTillEnd(s,t,r,a);else{if(8191===o.type)t=s.nextSibling,s=s.parentNode;else if(n!==o&&(t=this._updateDom(s,t,n,o)),8192&n.type)8192&o.type?(s=t,t=t.firstChild):(a=this._addTillEnd(t,t.firstChild,r,a+1),t=t.nextSibling);else{if(8192&o.type){let t=1;for(;t>0;){const o=i[e+1].type;8192&o?t++:8191===o&&t--,e++}}t=t.nextSibling}a++,e++}}this._state=r}_removeTillEnd(t,e,i,o){let r=1;for(;r;){const n=i[o];if(!n)return NaN;if(8191===n.type)r--;else{if(1===r&&e){const i=e.nextSibling;t.removeChild(e),e=i}8192&n.type&&r++}o++}return o-1}_addTillEnd(t,e,i,o){let r=1;for(;r;){const e=i[o];if(!e)break;if(8191===e.type)t=t.parentNode,r--;else{const i=this._addToDom(t,e,-1);8192&e.type&&(r++,t=i)}o++}return o-1}_addToDom(t,e,i){const o=t.childNodes[i],r=this._create(e);return o?t.insertBefore(r,o):t.appendChild(r),r}_removeFromDom(t,e){t.removeChild(t.childNodes[e])}_updateDom(t,e,i,o){if(!this._update(e,i,o)){const r=this._create(i);return this._replaceNode(t,e,r,(8192&i.type)>0&&(8192&o.type)>0),r}return e}_replaceNode(t,e,i,o){if(e){if(t.insertBefore(i,e),o){const t=e.childNodes.length;for(let o=0;o<t;o++)i.appendChild(e.childNodes[0])}t.removeChild(e)}else t.appendChild(i)}}function pe(t,e){const i=(e||window).document,{type:o,props:r,id:n,text:s}=t;let a;switch(o){case 24578:a=i.createElement(r.tag||"p");break;case 24585:a=i.createElement("ol");break;case 24584:a=i.createElement("ul");break;case 16396:a=i.createElement("hr");break;case 24586:a=i.createElement("li");break;case 32775:a=i.createElement("br");break;case 32773:{const{url:e,alt:o}=de(t);a=i.createElement("img"),a.setAttribute("src",e),a.setAttribute("alt",o);const n=xt(r);n&&a.setAttribute("style",n);break}case 40966:a=i.createElement("a"),a.setAttribute("href",he(t));break;case 40974:a=i.createElement("sup");break;case 40973:a=i.createElement("sub");break;default:a=i.createElement("span")}if(a.setAttribute("data-id",n.toString()),32771===o){a.appendChild(i.createTextNode(s||"​"));const t=bt(r);t&&a.setAttribute("style",t)}else if(16384&o){const t=Ft(r);t&&a.setAttribute("style",t)}return a}function ue(t,e,i){if(e.type!=i.type)return!1;if(e.id!==i.id&&t.setAttribute("data-id",e.id.toString()),32771===e.type){if(e.text!==i.text&&(t.firstChild.nodeValue=e.text||"​"),e.props!==i.props){const i=bt(e.props);i?t.setAttribute("style",i):t.hasAttribute("style")&&t.removeAttribute("style")}}else{if(e.props!==i.props){if(e.props.tag&&i.props.tag&&e.props.tag!=i.props.tag)return!1;const o=Ft(e.props);o?t.setAttribute("style",o):t.hasAttribute("style")&&t.removeAttribute("style")}if(40966===e.type&&t.setAttribute("href",he(e)),32773===e.type){const{url:i,alt:o}=de(e);t.setAttribute("src",i),t.setAttribute("alt",o);let r="";e.props.width&&(r+=`width:${e.props.width}px;`),e.props.height&&(r+=`height:${e.props.height}px;`),r?t.setAttribute("style",r):t.removeAttribute("style")}}return!0}function he(t){return t.props.url||"#"}function de(t){return{alt:t.props.alt||"",url:t.props.url||"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7"}}const _e=et(),fe=et();class ge{_history;_pointer;_skip;constructor(){this._skip=!1,this.reset()}undo(t){if(this._pointer>0){const{order:e,left:i,right:o,seed:r}=this._history[this._pointer-1];this.skip((()=>{t.setCursor(i,o),At=r,t.exec(8,{data:e}),this._pointer--}))}}redo(t){if(this._pointer<this._history.length){const{action:e,value:i,left:o,right:r}=this._history[this._pointer];this.skip((()=>{t.setCursor(o,r),t.exec(e,i),this._pointer++}))}}skip(t){const e=this._skip;this._skip=!0;try{t()}finally{this._skip=e}}getState(){return[this._pointer>0,this._pointer<this._history.length]}getHistory(){return this._history.slice(0,this._pointer)}reset(){this._pointer=0,this._history=[]}call(t,e,i){if(e===_e)this.undo(t);else if(e===fe)this.redo(t);else{if(this._skip||11===e)return;this._pointer<this._history.length&&this._history.splice(this._pointer);const[o,r]=t.getCursor(),n=At;this._history.push({seed:n,action:e,value:i,order:t.getTape().toArray(),left:o,right:r}),this._pointer++}}}const me={...it,ACTION_UNDO:_e,ACTION_REDO:fe};var we=320,ye={material:"Roboto",mini:"Roboto",flat:"'PT Sans'",compact:"'PT Sans'",contrast:"'PT Sans'",willow:"'Open Sans'",dark:"'Open Sans'"},ve=ut.CTRL,be=ut.Z,Fe=ut.SHIFT,xe=me.ACTION_UNDO,ke=me.ACTION_REDO,Ce={text:function(t){return gt(ie,t,{firstBlock:!0})},html:vt,markdown:ae},Se={text:function(t){const e=new Rt;return function(t,e){e.length||t.addChunk(-1,{type:32771,id:It(),text:"",props:{}});let i=0,o=!1;e.forEach((e=>{e.trim()?(0===i?(e.startsWith("- ")?(t.addChunk(-1,{id:It(),type:24584,props:{}}),t.addChunk(-1,{id:It(),type:24586,props:{}}),e=e.substring(2),o=!0):t.addChunk(-1,{id:It(),type:24578,props:{}}),i=1):1===i&&(o&&e.startsWith("- ")?(t.addChunk(-1,re()),t.addChunk(-1,{id:It(),type:24586,props:{}}),e=e.substring(2)):t.addChunk(-1,{type:32775,id:It(),props:{}})),t.addChunk(-1,{type:32771,id:It(),text:e,props:{}})):1===i&&(t.addChunk(-1,re()),o&&(t.addChunk(-1,re()),o=!1),i=0)})),i&&(t.addChunk(-1,re()),o&&t.addChunk(-1,re())),t.isEmpty()&&(t.addChunk(-1,{id:It(),type:24578,props:{}}),t.addChunk(-1,{type:32771,id:It(),text:"",props:{}}),t.addChunk(-1,re()))}(e,t.split("\n")),e},html:Lt,markdown:zt};webix.protoUI({name:"rt-editor-area",defaults:{scroll:"auto"},$init:function(){var t=this;this.$view.className+=" webix_rte_editor";var e=this.$scope.app,i=this._editorNode=e._editor?e._editor.node:webix.html.create("div",{class:"webix_rte_edit_area"});i.setAttribute("spellcheck","false");var o=e._editor?e._editor.doc:new Yt,r=e._editor?e._editor.dom:new ce(pe,ue),n=new rt(i,(function(e,i){o.setCursor(e,i,!0),t.callEvent("onCursorSet",[e,i])}));if(this._doc=o,this._dom=r,this._sel=n,!e._editor){var s=new ht(o);i.innerHTML="",i.onkeydown=s.handler.bind(s),i.setAttribute("role","textbox"),i.setAttribute("contenteditable","true"),["copy","cut","paste"].forEach((function(t){i.addEventListener(t,(function(i){return Gt(o,t,i,e.getService("upload").pasteImages)}))})),s.add(ve+be,(function(t){return t.exec(xe)})),s.add(ve+Fe+be,(function(t){return t.exec(ke)}))}var a=this._history=e._editor?e._editor.history:new ge;if(o.plugins.change._handlers.length>=1&&(o.plugins.change._handlers=[]),o.plugins.action._handlers.length>=1&&(o.plugins.action._handlers=[]),o.plugins.change.add((function(){return t.repaint()})),!e._editor){var l=e.config.value,c=e._pendingValueType;this.setValue(l,c)}o.plugins.action.add(a.call.bind(a)),this.$view.firstChild.appendChild(i),this._onClick=webix.event(this.$view,"click",(function(e){t.callEvent("onEditorClick",[e])})),e._editor={doc:o,dom:r,node:i,history:this._history},this.$ready.push(this._onDestruction)},$setSize:function(t,e){webix.ui.baseview.prototype.$setSize.apply(this,[t,e]),this._editorNode.style.minHeight=this.$view.offsetHeight-41+"px";var i={small:550,medium:700,large:1e3};for(var o in i){if(t<=i[o])return void(this._editorNode.classList.contains(o)||(this._clearStyles(i),webix.html.addCss(this._editorNode,o)));this._clearStyles(i)}},_clearStyles:function(t){var e=this;Object.keys(t).forEach((function(t){e._editorNode.classList.contains(t)&&webix.html.removeCss(e._editorNode,t)}))},_onDestruction:function(){var t=this;this.attachEvent("onDestruct",(function(){webix.eventRemove(t._onClick),t._sel.detachHandlers()}))},getDocument:function(){return this._doc},getSelection:function(){return this._sel},getEditorNode:function(){return this._editorNode},getHistory:function(){return this._history},getValue:function(t){return void 0===t&&(t="html"),"raw"===t?function(t){const e={d:t,prev:null};let i={encodeTag:qt};return gt(((t,e,o)=>function(t,e,i,o){let r,n="";if(32771===t.type){const e=i.d.getCursor();let o=0,n=t.text;""===n&&(n="_"),e[0].id===t.id&&(n=n.substring(0,e[0].pos)+"["+n.substring(e[0].pos),o=1),e[1]&&e[1].id===t.id&&(n=n.substring(0,e[1].pos+o)+"]"+n.substring(e[1].pos+o)),r=n}else if(8191===t.type)r=">";else if(8192&t.type)r=`<${o.encodeTag.get(t.type)||"x"}`;else{const e=i.d.getCursor();let s="#";n="#",e[0]&&e[0].id===t.id&&(0===e[0].pos?s+="[":n="["+n),e[1]&&e[1].id===t.id&&(0===e[1].pos?s+="]":n="]"+n),r=s+(o.encodeTag.get(t.type)||"")}return 32771===t.type&&i.prev&&32771===i.prev.type&&(r="."+r),i.prev=t,r+n}(t,0,o,i)),t.getTape(),e)}(this._doc):this._doc.getValue(Ce[t])},setValue:function(t,e){void 0===e&&(e="html");var i=ye[webix.skin.$name].replace(/'/g,"")||"Roboto";"raw"===e?function(t,e){let i=ee;e||(e=new Yt(!0));const o=e.getTape();let r=-1,n={};const s=[],a=t.length;for(let l=0;l<a;l++){const a=t[l];if("<"===a||">"===a||"#"===a||"."===a){if(r>=0&&(te(o,t.substring(r,l),e),r=-1),"."===a)continue;if("<"===a||"#"===a){const r=It();let n=t[l+1];"["===n?(Qt(e,{id:r,pos:0},null),l++,n=t[l+1]):"]"===n&&(Qt(e,null,{id:r,pos:0}),n=t[l+1]);const s={};for("p"===t[l+1]&&(s.tag="p");"("===t[l+2];)l+=Zt(t,l+3,s)+1;o.addChunk(-1,{id:r,type:i.get(n)||-1,props:s}),l+=1,"#"===a&&("["===t[l+1]?(Qt(e,{id:r,pos:Z},null),l++):"]"===t[l+1]&&(Qt(e,null,{id:r,pos:Z}),l++),l++)}else if(s.length){const t=s.pop();n={...n},delete n[t]}else o.addChunk(-1,{id:It(),type:8191,props:Jt})}else-1===r&&(r=l)}r>=0&&te(o,t.substring(r),e),e.getCursor()[0]||e.resetCursor()}(t,this._doc):this._doc.setValue(t,Se[e],{defaultFontFamily:i})},refreshEditor:function(){this._dom.render(this._editorNode,this._doc.getTape())},repaint:function(){this._dom.render(this._editorNode,this._doc.getTape());var t=this._doc.getCursor(),e=t[0],i=t[1];this._sel.paint(e,i),this.callEvent("onChange",[])}},webix.Scrollable,webix.ui.baseview,webix.EventSystem);var Ee={"top-left":{x:-1,y:-1,c:"nwse"},top:{x:0,y:-1,c:"ns"},"top-right":{x:1,y:-1,c:"nesw"},right:{x:1,y:0,c:"ew"},"bottom-right":{x:1,y:1,c:"nwse"},bottom:{x:0,y:1,c:"ns"},"bottom-left":{x:-1,y:1,c:"nesw"},left:{x:-1,y:0,c:"ew"}};function Ae(t,e,i){return"".concat(t,":").concat(0===e?"calc(".concat(i,"px / -4 - 3px)"):"calc(".concat(e," - ").concat(i,"px / 2)"))}webix.protoUI({name:"rt-editor-image-resizer",defaults:{liveResize:!0,tooltip:!0,markerSize:8,minWidth:10,minHeight:10},$init:function(){var t=this;this.$view.className+=" webix_rte_resizer",this._adjustOnResize=webix.event(window,"resize",(function(){t.adjustFrameSizes()})),this._onMouseDown=webix.event(this.$view,"mousedown",(function(t){return t.preventDefault()})),this.$ready.push(this._initMarkers),this.$ready.push(this._initDnD),this.$ready.push(this._onDestruction)},_initMarkers:function(){var t=this,e=Object.entries(Ee),i=this.config.markerSize,o=e.map((function(t){var e=t[1],o=["cursor:".concat(e.c,"-resize;")];return e.x<0?o.push(Ae("left",0,i)):e.x>0?o.push(Ae("right",0,i)):o.push(Ae("left","50%",i)),e.y<0?o.push(Ae("top",0,i)):e.y>0?o.push(Ae("bottom",0,i)):o.push(Ae("top","50%",i)),o.join(";")}));e.forEach((function(e,i){var r=webix.html.create("div",{dir:e[0],style:o[i],class:"webix_rte_resize_handler"});t.$view.appendChild(r)}))},_initDnD:function(){var t=this;webix.DragControl.addDrag(this.$view,{$dragCreate:function(e,i){var o=webix.DragControl.getContext(),r=i.target;if(r.classList.contains("webix_rte_resize_handler")){var n=t.getImageNode();webix.extend(o,{dir:r.getAttribute("dir"),from:t,mode:"resize",node:t.config.image,width:t.$width,height:t.$height,left:n.offsetLeft,top:n.offsetTop,x:i.clientX,y:i.clientY},!0),t.callEvent("onBeforeDrag",[o]);var s=t.config.tooltip?"visible":"hidden",a=webix.html.create("div",{class:"webix_rte_resizer_info webix_tooltip",style:"visibility:".concat(s,";")});return document.body.appendChild(a),a}return!1},$dragPos:function(e,i,o){var r=webix.DragControl.getContext(),n=r.node,s=n.getBoundingClientRect(),a=t.config.aspectRatio,l=e.x-r.x,c=e.y-r.y,p=Ee[r.dir],u=function(t,e,i,o){var r=t.width,n=t.fWidth,s=t.height,a=e.vx;return r<0&&(r=0),s<0&&(s=0),a*e.vy&&(r=s*i)<n+a*o&&(s=(r=n+a*o)/i),{width:r=Math.round(r),height:s=Math.round(s)}}({width:r.width+p.x*l,height:r.height+p.y*c,fWidth:r.width},{vx:p.x,vy:p.y},a,l);u.width>=t.config.minWidth&&u.width>0&&u.height>=t.config.minHeight&&u.height>0&&t.$setSize(u.width,u.height),e.x=s.x-5,e.y=s.y-35,"resize"===r.mode&&(o.innerHTML="".concat(t.$width,"x").concat(t.$height)),t.config.liveResize?t.setImageSizes():(p.x<0&&n.style.width&&(n.style.left=r.left-n.style.width+r.width),p.y<0&&n.style.height&&(n.style.top=r.top-n.style.height+r.height))},$dragDestroy:function(e,i){var o=t.getImageNode(),r=o.getAttribute("data-id");t.config.liveResize||t.setImageSizes(),t.config.aspectRatio=o.offsetWidth/o.offsetHeight,t.callEvent("onResize",[o.offsetWidth,o.offsetHeight,r]),webix.html.remove(i)}})},_onDestruction:function(){var t=this;this.attachEvent("onDestruct",(function(){t._adjustOnResize&&webix.eventRemove(t._adjustOnResize),t._onMouseDown&&webix.eventRemove(t._onMouseDown)}))},adjustFrameSizes:function(){if(this.isVisible()){var t=this.getImageNode(),e=this.config.width=t.offsetWidth,i=this.config.height=t.offsetHeight,o=this.config.left=t.offsetLeft,r=this.config.top=t.offsetTop;this.$setSize(e,i),this.setPosition(o,r),this.config.aspectRatio=e/i}},setImageSizes:function(){var t=this.getImageNode(),e=this.config.width=this.$width,i=this.config.height=this.$height;t&&(t.style.width="".concat(e,"px"),t.style.height="".concat(i,"px"),this.setPosition(t.offsetLeft,t.offsetTop))},setPosition:function(t,e){var i=this.config.top=e,o=this.config.left=t;this.$view.style.top="".concat(i,"px"),this.$view.style.left="".concat(o,"px")},resetArea:function(){this.config.image=null,this.config.width=this.config.height=this.config.top=this.config.left=this.config.aspectRatio=0,this.$setSize(0,0),this.setPosition(0,0)},getImageNode:function(){return this.config.image},linkImage:function(t){t!==this.config.image&&"IMG"===t.tagName&&(this.config.image=t),this.adjustFrameSizes()},show:function(t){t&&this.linkImage(t),this.config.hidden=!1,this.$view.style.display="block",this.callEvent("onResizerShow",[])},hide:function(t){t&&this.resetArea(),this._hide()},_hide:function(){this.config.hidden=!0,this.$view.style.display="none",this.callEvent("onResizerHide",[])}},webix.ui.baseview,webix.EventSystem),webix.protoUI({name:"rt-editor-separator",defaults:{template:"<div></div>"},$init:function(t){var e=t.orientation,i=void 0===e?"vertical":e,o="horizontal"===i?"webix_rte_separator_horizontal":"webix_rte_separator_vertical";this.$view.className+=" ".concat(o),"horizontal"===i&&(t.height=1),"vertical"===i&&(t.width=1)}},webix.ui.template),webix.protoUI({name:"rt-editor-scrollview",$init:function(){var t=this;this.$view.className+=" webix_rte_scrollview",this.$ready.push((function(){return t._init_size=!0}))},$getSize:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var i=webix.ui.scrollview.prototype.$getSize.apply(this,t),o=this.getBody().$getSize(0,0),r=this.config.scroll?webix.env.scrollSize:0;return this.config.scroll||(this.$view.style["overflow-x"]="hidden"),i[2]=i[3]=o[2]+r,i},$setSize:function(t,e){var i=this,o=this.getBody().$getSize(0,0),r=this.config.scroll,n=t<o[0]&&"x";if(n!=r)return this._init_size?(this.define({scroll:n}),delete this._init_size,webix.delay((function(){i.$destructed||i.resize()}),null,null,1)):webix.delay((function(){i.define({scroll:n}),i.resize()}),null,null,1);webix.ui.scrollview.prototype.$setSize.apply(this,[t,e])}},webix.ui.scrollview),webix.protoUI({name:"rt-editor-select",$cssName:"richselect",$init:function(t){var e=t.suggestWidth,i=t.options,o="font-family"===t.name?"webix_rte_select_text":"webix_rte_select";this.$view.className+=" ".concat(o," webix_icon_button"),t.suggest={css:"webix_rte_select_popup",fitMaster:!1,width:e||160,template:function(e){var i=e.icon,o=e.value,r=i||t.templateIcon;return r?'<span class="webix_icon '.concat(r,'"></span>'):'<span class="webix_rte_input_label">'.concat(o,"</span>")},data:i||[],on:{onShow:function(){var t=webix.$$(this.config.master).$view.getBoundingClientRect(),e=document.body.clientWidth;if(t.left+this.config.width>e){var i=e-t.right;this.setPosition(this.config.left-i,this.config.top)}}}}}},webix.ui.richselect),webix.protoUI({name:"rt-editor-dataview",$cssName:"dataview",defaults:{scroll:!1,borderless:!0,type:{width:28,height:28},xCount:7,yCount:1,template:function(t){return"<span class='webix_icon ".concat(t.icon,"'></span>")}},$init:function(t){this.$view.className+=" webix_rte_dataview";var e=this.$scope.app.getService("locale")._;t.tooltip=function(t){return e(t.value)}},moveSelection:function(t,e,i){var o=this,r=this.getTopParentView().getList(!0).find((function(t){return t.config.id!==o.config.id}));this.getSelectedId()!==this.getFirstId()||"up"!==t?this.getSelectedId()!==this.getLastId()||"down"!==t?webix.ui.dataview.prototype.moveSelection.call(this,t,e,i):r.select(r.getFirstId()):r.select(r.getLastId())}},webix.ui.dataview),webix.protoUI({name:"rt-editor-style-suggest",defaults:{type:"layout",fitMaster:!1,width:300,height:160,on:{onHide:function(){var t=webix.$$(this.config.master);t&&t.$setValue(t.getValue())}}},$init:function(t){var e=this.$scope.app.getService("locale")._,i=t.data.filter((function(e){return t.groups.text.find((function(t){return t===e.id}))})),o=t.data.filter((function(e){return t.groups.block.find((function(t){return t===e.id}))}));t.body={padding:{left:8,right:8},rows:[{view:"label",height:32,label:e("Text style"),css:"webix_rte_style_suggest_header"},{view:"rt-editor-dataview",data:i,on:{onAfterSelect:function(t){this.getTopParentView().getList(!0)[1].unselect(),webix.$$(this.getTopParentView().config.master).$setValue(t)},onEnter:function(t){t.preventDefault()}}},{height:6},{view:"rt-editor-separator",orientation:"horizontal"},{view:"label",height:32,label:e("Quote"),css:"webix_rte_style-suggest_header"},{view:"rt-editor-dataview",data:o,on:{onAfterSelect:function(t){this.getTopParentView().getList(!0)[0].unselect(),webix.$$(this.getTopParentView().config.master).$setValue(t)},onEnter:function(t){this.getTopParentView().setMasterValue({id:this.getSelectedId()},!1,"user"),t.preventDefault()},onItemClick:function(t){this.getTopParentView().setMasterValue({id:t},!1,"user")}}},{height:6}]}},getList:function(t){var e=this.getBody().queryView("rt-editor-dataview","all");return t?e:e.find((function(t){return!!t.getSelectedId()}))||this.getBody().getChildViews()[1]},setValue:function(t){var e=this.getList(!0);t&&e.forEach((function(e){e.exists(t)?(e.select(t),e.showItem(t)):(e.unselect(),e.showItem(e.getFirstId()))}))}},webix.ui.suggest),webix.protoUI({name:"rt-editor-style-select",$cssName:"richselect",$init:function(t){this.$view.className+=" webix_rte_select webix_icon_button",t.suggest={view:"rt-editor-style-suggest",data:t.options||[],groups:t.groups}},setValue:function(t,e){webix.ui.richselect.prototype.setValue.call(this,t,e),this.getInputNode()&&this.getPopup().setValue(t,"auto")}},webix.ui.richselect),webix.protoUI({name:"rt-editor-colorpicker",$cssName:"richselect",defaults:{icon:"wxi-menu-down"},$init:function(){this.$view.className+=" webix_rte_colorpicker webix_icon_button"},$renderInput:function(t,e,i){var o='<span class="webix_rte_colorpicker_icon webix_icon '.concat(t.topIcon,'"></span>'),r=this.renderColor();return e=e.replace(/([^>]>)(.*)(<\/div)/,(function(t,e,i,n){return e+o+r+n})),webix.ui.colorpicker.prototype.$renderInput.call(this,t,e,i)},$setValue:function(t){void 0===t&&(t=""),this.getColorNode().style.backgroundColor=t},renderColor:function(){return'<div class="webix_rte_colorpicker_color" style="background-color:'.concat(this.config.value,';"> </div>')},getColorNode:function(){return this.$view.firstChild.firstChild.childNodes[1]},$renderIcon:function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return webix.ui.text.prototype.$renderIcon.apply(this,t)}},webix.ui.colorpicker),webix.protoUI({name:"rt-editor-iconselect",$cssName:"rte_iconselect",$skin:function(){webix.ui.icon.prototype.$skin.call(this),this.defaults.buttonWidth=webix.skin.$active.inputHeight,this.defaults.iconWidth=20,this.defaults.width=this.defaults.buttonWidth+this.defaults.iconWidth},$init:function(t){var e=this;t.popupIconName="wxi-menu-down",t.template=function(t){var e="<span class='webix_icon ".concat(t.icon,"'></span>"),i="<button type='button' style='height:".concat(t.aheight,"px;width:").concat(t.buttonWidth,"px;' class='webix_icon_button webix_rte_icon_left'>").concat(e,"</button>"),o="<span class='webix_icon ".concat(t.popupIconName,"'></span>"),r="<button type='button' style='height:".concat(t.aheight,"px;width:").concat(t.iconWidth,"px;' class='webix_icon_button webix_rte_icon_right' rte-icon-popup=\"true\" aria-haspopup='true' aria-expanded='false'>").concat(o,"</button>");return"<div class='webix_el_box' style='width:".concat(t.width,"px;height:").concat(t.aheight,"px;line-height:0px;padding:0px'>").concat(i).concat(r,"</div>")},this.initPopup(t.popupLabel,t.targetProp);var i=this.defaultClicker=t.click;t.click=function(t,o){webix.html.locate(o,"rte-icon-popup")?e.popup.show(e.$view):i({toggle:!0})}},initPopup:function(t,e){var i=this,o="compact"===webix.skin.$name||"mini"===webix.skin.$name;this.popup=webix.ui({view:"popup",width:o?210:220,body:{paddingX:8-webix.skin.$active.popupPadding,paddingY:4-webix.skin.$active.popupPadding,rows:[{view:"switch",label:t,labelWidth:146,checkValue:!0,uncheckValue:!1,on:{onChange:function(t){var o;i.defaultClicker(((o={})[e]=t,o))}}}]}})},setActiveStyle:function(t){t.enabled?this.$view.classList.add("webix_rte_paint_on"):this.$view.classList.remove("webix_rte_paint_on")}},webix.ui.icon);var Ie=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){return{css:"webix_rte_topbar",rows:[{$subview:!0,name:"menubar"},{$subview:!0,name:"toolbar"}]}},e.prototype.init=function(){var t=this;this.State=this.app.getState(),this.on(this.State.$changes,"menubar",(function(e){t.ApplyTopBarState("menubar",e)})),this.on(this.State.$changes,"toolbar",(function(e){t.ApplyTopBarState("toolbar",e)}))},e.prototype.ApplyTopBarState=function(t,e){this.show(e?"topbar.".concat(t):"_hidden",{target:t});var i=this.getRoot();this.State.menubar||this.State.toolbar?i.isVisible()||i.show():i.hide()},e}(u),$e=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this;this.State=this.app.getState();var e=this.app.getService("operations");return{view:"rt-editor-image-resizer",hidden:!0,on:{onBeforeDrag:function(){return t.app.callEvent("resizer:beforedrag")},onResize:function(t,i){return e.applyImageSizes(t,i)},onResizerShow:function(){t.Result&&t.Result.resolve().then((function(){return t.Result=null}))},onResizerHide:function(){t.Result&&t.Result.reject(),t.Result=null}}}},e.prototype.init=function(){this.Resizer=this.getRoot()},e.prototype.Show=function(t){return this.ClearPrevImageCSS(),this.image=t,webix.html.addCss(t,"webix_rte_resize_active"),this.Result=webix.promise.defer(),this.Resizer.show(t),this.Result},e.prototype.Hide=function(t){this.ClearPrevImageCSS(),this.Resizer.hide(t)},e.prototype.ClearPrevImageCSS=function(){this.image&&webix.html.removeCss(this.image,"webix_rte_resize_active")},e.prototype.Adjust=function(){this.Resizer.adjustFrameSizes()},e}(u),Be=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._,i=this.app.getService("operations");return this.State=this.app.getState(),{view:"window",css:"webix_rte_image_popup",head:!1,borderless:!0,width:300,minHeight:48,body:{localId:"icons",borderless:!0,css:"webix_rte_image_icons",padding:4,margin:4,cols:[{view:"icon",name:"align:left",icon:"rti-align-image-left",tooltip:e("Left align"),click:function(){return i.action("align-left")}},{view:"icon",name:"align:center",icon:"rti-align-image-center",tooltip:e("Center align"),click:function(){return i.action("align-center")}},{view:"icon",name:"align:right",icon:"rti-align-image-right",tooltip:e("Right align"),click:function(){return i.action("align-right")}},{view:"rt-editor-separator"},{view:"icon",icon:"rti-edit",tooltip:e("Edit image"),click:function(){var e=t.State.selectedImage,i=e.node,o=i.width,r=i.height,n=i.src,s=i.alt;t.State.editImage={id:e.id,width:o,height:r,src:n,alt:s}}},{view:"icon",icon:"rti-delete",tooltip:e("Delete image"),click:function(){return i.delete()}}]}}},e.prototype.init=function(){var t=this;this._onScroll=webix.event(window,"scroll",(function(){return t.Adjust()}),{capture:!0}),this.on(this.State.$changes,"activeStyles",(function(e){e.align&&t.$$("icons").queryView((function(t){if(t.config.name){var i=t.config.name.split(":")[1]===e.align||void 0;!!t.config.activeMode!=!!i&&(t.config.activeMode=i,t.$view.classList.toggle("webix_rte_active"))}}))}))},e.prototype.destroy=function(){this._onScroll&&webix.eventRemove(this._onScroll)},e.prototype.Adjust=function(){var t=this.getRoot(),e=this.State.selectedImage;if(e){var i=webix.$$(e.node);if(!i)return this.Hide();var o=i.$view.getBoundingClientRect(),r=e.node.getBoundingClientRect(),n=this.GetPosition(e,o,r);n.y<o.top||o.bottom-r.top<0?this.Hide():t.isVisible()?t.setPosition(n.x,n.y):this.Show(n)}},e.prototype.GetPosition=function(t,e,i){var o={x:i.x,y:i.y+i.height+6},r="A"===t.node.parentNode.nodeName,n=e.y+e.height-48;r&&(n-=54);var s=this.getRoot().$width,a=e.x+e.width-(r?we:s);if(o.x>a&&(o.x=i.x+i.width-s),o.y>n){o.y=i.y-48-6;var l=e.y;r&&(o.y-=54),o.y<l&&(o.y=n)}return o},e.prototype.Show=function(t){this.getRoot().show(t)},e.prototype.Hide=function(){this.getRoot().hide()},e}(u),De=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this,e=this._=this.app.getService("locale")._,i=this.app.getService("operations");return this.State=this.app.getState(),{view:"window",head:!1,borderless:!0,css:"webix_rte_link_popup",minWidth:300,maxWidth:we,minHeight:48,escHide:!1,body:{borderless:!0,margin:2,padding:6,rows:[{batch:"display",cols:[{borderless:!0,localId:"link",css:"webix_rte_link_template",template:function(e){return t.LinkTemplate(e)},tooltip:function(){return""}},{view:"icon",icon:"rti-edit",tooltip:e("Edit link"),click:function(){return t.SetMode("edit")}},{view:"icon",icon:"rti-content-copy",tooltip:e("Copy link"),click:function(){t.CopyLinkToClipboard()}},{view:"icon",icon:"rti-unlink",tooltip:e("Unlink"),click:function(){i.unlink(),t.Hide()}}]},{localId:"form-simple",view:"form",borderless:!0,padding:0,batch:"edit-simple",hidden:!0,cols:[{view:"text",name:"url",on:{onKeyPress:function(e,i){return t.HandleKeyPress(e,i)}}},{view:"icon",icon:"wxi-check",tooltip:e("Apply"),click:function(){return t.ApplyLinkChanges()}},{view:"icon",icon:"wxi-close",tooltip:e("Cancel"),click:function(){return t.CancelLinkChanges()}}]},{localId:"form",view:"form",borderless:!0,padding:2,batch:"edit",hidden:!0,elements:[{cols:[{},{view:"icon",icon:"wxi-check",tooltip:e("Apply"),click:function(){return t.ApplyLinkChanges()}},{view:"icon",icon:"wxi-close",tooltip:e("Cancel"),click:function(){return t.CancelLinkChanges()}}]},{view:"text",name:"text",placeholder:e("Enter text to display"),on:{onKeyPress:function(e,i){return t.HandleKeyPress(e,i)}},width:260},{view:"text",name:"url",placeholder:e("Paste link"),on:{onKeyPress:function(e,i){return t.HandleKeyPress(e,i)}}}],elementsConfig:{labelPosition:"top"}}]},on:{onHide:function(){t._preservePopup||t.ResetPopup(),delete t._preservePopup}}}},e.prototype.init=function(){var t=this;this._onScroll=webix.event(window,"scroll",(function(e){t.Adjust(e)}),{capture:!0})},e.prototype.destroy=function(){this._onScroll&&webix.eventRemove(this._onScroll)},e.prototype.Adjust=function(t){var e=this.getRoot(),i=this.app.getService("operations").getCursor()[0];if(i&&this._urlChunk&&(!t||!e.$view.contains(t.target))){var o=webix.$$(this.app._editor.node),r=o.$view.getBoundingClientRect(),n=o.getSelection().getBox(i.id),s=this.GetPosition();n.bottom-r.top<0||r.bottom-n.top<0?this.Hide(!0):e.isVisible()?e.setPosition(s.x,s.y):this.getRoot().show(s)}},e.prototype.GetPosition=function(t){var e=this.app.getService("operations").getCursor(),i=e[0],o=e[1],r="add"!=t||i&&o?48:144,n=webix.$$(this.app._editor.node),s=n.$view.getBoundingClientRect(),a=n.getSelection().getBox(i.id);if(!a.width&&o){var l=n.getDocument().getTape(),c=l.getNext(l.getIndex(i.id),(function(){return!0})).id;a=n.getSelection().getBox(c)}var p={x:a.x,y:a.y+a.height+6},u=s.x+s.width-we;p.x>u&&(p.x=a.x+a.width-we);var h=this.State.selectedImage,d=s.y+s.height-r-6;h&&(p.y+=54);var _=s.y;return p.y>d?(p.y=a.y-r-6,h&&(_+=54),(p.y<_||p.y>d)&&(p.y=d)):p.y<_&&(p.y=_),p},e.prototype.HandleKeyPress=function(t,e){13===t&&(this.ApplyLinkChanges(),e.preventDefault()),27===t&&this.CancelLinkChanges()},e.prototype.LinkTemplate=function(t){var e=t.url;return'<span webix_tooltip="'.concat(e,'">\n\t\t\t<a href="').concat(e,'" target="_blank">').concat(e,"</a>\n\t\t</span>")},e.prototype.CopyLinkToClipboard=function(){var t=navigator.clipboard,e=this.$$("link").getValues().url;t&&t.writeText&&(t.writeText(e),webix.message(this._("Link copied to clipboard")))},e.prototype.SwitchToEditMode=function(){var t=this.app.getService("operations").getCursor(),e=t[0],i=t[1],o=e&&i?"edit-simple":"edit";this.SetMode(o)},e.prototype.SetMode=function(t){var e,i=this.getRoot().getBody(),o=this.app.getService("operations").getCursor(),r=o[0],n=o[1];e="add"===t&&r&&n||"edit"===t?"edit-simple":"add"===t?"edit":t,this._mode=t,this._displayBatch=e,i.showBatch(e),("edit"===e?this.$$("form"):this.$$("form-simple")).queryView({name:"url"}).focus()},e.prototype.Show=function(t,e){void 0===e&&(e="display"),this.getRoot().isVisible()&&this.ResetPopup();var i=this.app.getService("operations"),o=i.getCursor()[0];this._urlChunk=t,this.State.selectedImage?this._image=this.State.selectedImage:this._textChunk=i.getChunk(o.id);var r=t.props&&t.props.url||"";this.$$("link").setValues({url:r}),this.$$("form-simple").setValues({url:r}),"add"==e&&(this.State.selectedImage=null);var n=this.GetPosition(e);this.getRoot().show(n),this.SetMode(e)},e.prototype.Hide=function(t){void 0===t&&(t=!1),this._preservePopup=t,this.getRoot().hide()},e.prototype.CancelLinkChanges=function(){var t="edit-simple"===this._displayBatch,e=this._urlChunk.props;t&&(!t||e&&e.url)?(this.$$("form-simple").setValues({url:e.url}),this.SetMode("display")):this.Hide()},e.prototype.ApplyLinkChanges=function(){var t=this._mode,e=this.app.getService("operations"),i="edit-simple"===this._displayBatch,o=i?this.$$("form-simple").getValues():this.$$("form").getValues(),r=o.url||"",n=i?"":o.text||"";if(r)switch(t){case"edit":this._urlChunk&&e.updateURL(this._urlChunk.id,r);break;case"add":this.InsertNewLink(n,r)}},e.prototype.FormatUrl=function(t){return/^(#|(https?:\/\/))/i.test(t)?t:"http://"+t},e.prototype.InsertNewLink=function(t,e){if(e){var i=this.app.getService("operations");if(this._image)i.link(this.FormatUrl(e));else{var o=i.getCursor()[1];i.link(this.FormatUrl(e)),"add"!==this._mode||o||i.type(t||e)}}},e.prototype.ResetPopup=function(){var t=["_textChunk","_urlChunk","_image","_mode","_displayBatch","_preservePopup"];for(var e in t)delete this[t[e]];this.$$("form").setValues({}),this.$$("form-simple").setValues({})},e}(u),Pe=function(t){function e(e){var i=t.call(this,e)||this;return i.type="emojis",i.action="emoji",i}return i(e,t),e.prototype.config=function(){var t=this,e=this._=this.app.getService("locale")._;return this.Symbols=this.app.getService("symbols"),{view:"popup",body:{margin:0,rows:[{padding:{top:5,bottom:5,left:10,right:10},visibleBatch:"categories",localId:"toolbar",rows:[{batch:"categories",cols:[{view:"icon",localId:"searchBtn",icon:"wxi-search",click:function(){return t.ShowSearchHeader()}},{view:"list",borderless:!0,localId:"categories",css:"webix_rte_".concat(this.type,"_categories_list"),template:function(e){return t.CategoryMenuTemplate(e)},select:!0,layout:"x",scroll:!1,on:{onItemClick:function(e,i){t.ShowCategory(e),webix.html.preventEvent(i)}},data:this.Symbols.getCategories(this.type)}]},{batch:"search",margin:webix.skin.$active.layoutMargin.form,cols:[{view:"icon",localId:"backBtn",icon:"rti-back",click:function(){return t.HideSearchHeader()}},{view:"text",localId:"search",placeholder:e("Search")}]}]},{view:"scrollview",css:"webix_rte_layout_"+this.type,height:200,scroll:!0,localId:"views",body:{visibleBatch:"categories",type:"clean",padding:{left:10,right:10},rows:this.GetLists()}},{localId:"preview",css:"webix_rte_".concat(this.type,"_preview"),view:"template",borderless:!0,hidden:webix.env.mobile,template:" ",height:40}]}}},e.prototype.init=function(){var t=this;this.Preview=this.$$("preview");var e=this.$$("search");e.attachEvent("onTimedKeyPress",(function(){t.Find(e.getValue())})),this.ScrollHandler()},e.prototype.ScrollHandler=function(){var t=this,e=this.$$("views").getBody().getChildViews();this._scrollEvent=webix.event(this.$$("views").$view,"scroll",(function(){for(var i=t.$$("views").$view.scrollTop,o=null,r=0,n=0;n<e.length&&null===o;n++)r+=e[n].$height-5,(n==e.length-1||i<r)&&(o=n);t.$$("categories").select(t.Symbols.getCategories(t.type)[o].id)}))},e.prototype.GetLists=function(){var t=this,e=[],i={};return this.Symbols.getSymbols(this.type).data.each((function(t){i[t.category]||(i[t.category]=[]),i[t.category].push(t)})),this.Symbols.getCategories(this.type).forEach((function(o){e.push(t.ListConfig("category_"+o.id,"basic"==o.id?t.Symbols.getBasicSymbols(t.type):i[o.id],t._(o.name),"categories"))})),e.push(this.ListConfig("searchResults",[],this._("Search results"),"search")),e},e.prototype.ListConfig=function(t,e,i,o){var r=this,n="mini"===webix.skin.$name||"compact"===webix.skin.$name,s={type:"clean",batch:o,rows:[{template:i,css:"webix_rte_".concat(this.type,"_label"),autoheight:!0},{view:"dataview",localId:t,autoheight:!0,xCount:6,type:{css:"webix_rte_".concat(this.type,"_item"),width:n?36:40,height:n?32:40},on:{onItemClick:function(t){var e=this.$scope;e.app.getService("operations").action(e.action,e.unifiedToSymbol(this.getItem(t).unified)),e.Hide()},onMouseMove:function(t){var e=this.getItem(t);this.$scope.ShowPreview(e)}},mouseEventDelay:100,template:function(t){return r.ItemTemplate(t)},data:e}]};return webix.env.mobile||(s.rows[1].on.onMouseMove=function(t){var e=this.getItem(t);this.$scope.ShowPreview(e)}),s},e.prototype.Show=function(t){var e=this;webix.delay((function(){e.HideSearchHeader();var i=e.Symbols.getCategories(e.type)[0].id;e.$$("categories").select(i),e.getRoot().show(t),e.ShowCategory(i),webix.callEvent("onClick",[])}))},e.prototype.Hide=function(){this.getRoot().hide()},e.prototype.ItemTemplate=function(t){return"<span class='webix_rte_".concat(this.type,"_symbol'>").concat(this.unifiedToSymbol(t.unified),"</span>")},e.prototype.unifiedToSymbol=function(t){return String.fromCodePoint(parseInt(t,16))},e.prototype.ShowPreview=function(t){this.Preview.setHTML(this.PreviewTemplate(t))},e.prototype.PreviewTemplate=function(t){var e=this.$$("search"),i="webix_rte_"+this.type,o=e.isVisible()?e.getValue():"",r=this.Symbols.findName(t,o);return r?(r=this.Symbols.shortNameToTitle(r),"<span class='"+i+"_symbol'>"+this.unifiedToSymbol(t.unified)+"</span><div class='"+i+"_name'>"+r+"</div><span class='"+i+"_unicode'>U+"+t.unified+"</span>"):""},e.prototype.Find=function(t){if(t){this.$$("views").getBody().showBatch("search"),t=t.toLowerCase();var e=this.Symbols.getSymbols(this.type).data.find((function(e){for(var i=!1,o=0;o<e.names.length&&!i;o++)i=e.names[o].includes(t);return i}));this.$$("searchResults").clearAll(),this.$$("searchResults").parse(e)}else this.$$("views").getBody().showBatch("categories")},e.prototype.ShowSearchHeader=function(){this.$$("toolbar").showBatch("search"),this.$$("search").setValue(""),this.$$("search").focus()},e.prototype.HideSearchHeader=function(){this.Find(),this.$$("views").getBody().showBatch("categories"),this.$$("toolbar").showBatch("categories")},e.prototype.CategoryMenuTemplate=function(t){return"<span class='webix_icon ".concat(t.icon,"'></span>")},e.prototype.ShowCategory=function(t){var e=this.Symbols.getCategories(this.type).findIndex((function(e){return e.id==t})),i=this.$$("views").getBody().getChildViews()[e].config.id;this.$$("views").showView(i)},e.prototype.destroy=function(){this._scrollEvent&&webix.eventRemove(this._scrollEvent)},e}(u),Te=function(t){function e(e){var i=t.call(this,e)||this;return i.type="characters",i.action="character",i}return i(e,t),e}(Pe),Re={file:{id:"file",value:"File"},new:{id:"new",value:"New",icon:"rti-document"},import:{id:"import",value:"Import",icon:"rti-import"},export:{id:"export",value:"Export",icon:"rti-export"},pdf:{id:"pdf",value:"PDF"},docx:{id:"docx",value:"DOCX"},md:{id:"md",value:"MD"},txt:{id:"txt",value:"TXT"},print:{id:"print",value:"Print...",icon:"rti-print"},edit:{id:"edit",value:"Edit"},undo:{id:"undo",value:"Undo",icon:"rti-undo",hotkey:"Ctrl+Z"},redo:{id:"redo",value:"Redo",icon:"rti-redo",hotkey:"Ctrl+Shift+Z"},cut:{id:"cut",value:"Cut",icon:"rti-content-cut",hotkey:"Ctrl+X"},copy:{id:"copy",value:"Copy",icon:"rti-content-copy",hotkey:"Ctrl+C"},"copy-md":{id:"copy-md",value:"Copy as Markdown",icon:"rti-content-copy"},paste:{id:"paste",value:"Paste",icon:"rti-content-paste",hotkey:"Ctrl+V"},"select-all":{id:"select-all",value:"Select all",hotkey:"Ctrl+A"},view:{id:"view",value:"View"},mode:{id:"mode",value:"Layout mode",data:[{id:"classic",value:"Classic mode",icon:"rti-fit-width"},{id:"document",value:"Document mode",icon:"rti-fit-document"}]},fullscreen:{id:"fullscreen",value:"Fullscreen",icon:"rti-fullscreen"},insert:{id:"insert",value:"Insert"},link:{id:"link",value:"Link",icon:"rti-link"},image:{id:"image",value:"Image",icon:"rti-image"},format:{id:"format",value:"Format"},text:{id:"text",value:"Text"},bold:{id:"bold",value:"Bold",icon:"rti-bold",hotkey:"Ctrl+B"},italic:{id:"italic",value:"Italic",icon:"rti-italic",hotkey:"Ctrl+I"},underline:{id:"underline",value:"Underline",icon:"rti-underline",hotkey:"Ctrl+U"},strike:{id:"strike",value:"Strikethrough",icon:"rti-strike",hotkey:"Ctrl+Shift+X"},superscript:{id:"superscript",value:"Superscript",icon:"rti-superscript"},subscript:{id:"subscript",value:"Subscript",icon:"rti-subscript"},style:{id:"tag",value:"Style",data:[{id:"p",value:"Paragraph"},{id:"blockquote",value:"Quote"},{id:"h1",value:"Heading 1"},{id:"h2",value:"Heading 2"},{id:"h3",value:"Heading 3"},{id:"h4",value:"Heading 4"},{id:"h5",value:"Heading 5"},{id:"h6",value:"Heading 6"}]},"font-family":{id:"font-family",value:"Font family",data:[{id:"Arial",value:"Arial"},{id:"Georgia",value:"Georgia"},{id:"Roboto",value:"Roboto"},{id:"'PT Sans'",value:"PT Sans"},{id:"'Open Sans'",value:"Open Sans"},{id:"Tahoma",value:"Tahoma"},{id:"'Times New Roman'",value:"Times New Roman"},{id:"Verdana",value:"Verdana"},{id:"Calibri",value:"Calibri"}]},"font-size":{id:"font-size",value:"Font size",data:[{id:"12px",value:"12"},{id:"14px",value:"14"},{id:"16px",value:"16"},{id:"18px",value:"18"},{id:"20px",value:"20"},{id:"24px",value:"24"},{id:"28px",value:"28"},{id:"32px",value:"32"},{id:"36px",value:"36"}]},align:{id:"align",value:"Align"},"align-left":{id:"align-left",value:"Left",icon:"rti-align-left"},"align-center":{id:"align-center",value:"Center",icon:"rti-align-center"},"align-right":{id:"align-right",value:"Right",icon:"rti-align-right"},"align-justify":{id:"align-justify",value:"Justified",icon:"rti-align-justify"},"line-height":{id:"line-height",value:"Line height",data:[{id:"1",value:"1"},{id:"1.25",value:"1.25"},{id:"1.5",value:"1.5"},{id:"2",value:"2"},{id:"3",value:"3"}]},indent:{id:"indent",value:"Indent",icon:"rti-indent"},outdent:{id:"outdent",value:"Outdent",icon:"rti-unindent"},lists:{id:"lists",value:"Lists"},"bulleted-list":{id:"bulleted-list",value:"Bulleted list",icon:"rti-list-bulleted"},"numbered-list":{id:"numbered-list",value:"Numbered list",icon:"rti-list-numbered"},clear:{id:"clear",value:"Clear formatting",icon:"rti-clean"},help:{id:"help",value:"Help"},"help-more":{id:"help-more",value:"Help",icon:"rti-help"},hotkeys:{id:"hotkeys",value:"Hotkeys",icon:"rti-keyboard-outline"},hr:{id:"hr",value:"Horizontal line",icon:"rti-hr"},emojis:{id:"emojis",value:"Emoji",icon:"rti-emoticon-outline"},characters:{id:"characters",value:"Special characters",icon:"rti-omega"}},Ne={file:{data:["new","import",{id:"export",data:["pdf","docx","md","txt"]},"print"]},edit:{data:["undo","redo",{$template:"Separator"},"cut","copy","copy-md","paste","select-all"]},view:{data:["mode","fullscreen"]},insert:{data:["link","image","hr","emojis","characters"]},format:{data:[{id:"text",data:["bold","italic","underline","strike","superscript","subscript",{$template:"Separator"},"style","font-family","font-size"]},{id:"align",data:["align-left","align-center","align-right","align-justify"]},{id:"line-height"},{id:"indent"},{id:"outdent"},{$template:"Separator"},{id:"lists",data:["bulleted-list","numbered-list"]},{$template:"Separator"},{id:"clear"}]},help:{data:["help-more","hotkeys"]}},Oe=["file","edit","view","insert","format","help"],Le="undefined"!=typeof navigator&&navigator.platform.indexOf("Mac")>-1?"⌘":"Ctrl";function He(t){return t.replace(/Ctrl/i,Le)}function Me(){return{commonStyles:{"font-family":ye[webix.skin.$name]||"Roboto","font-size":"14px","line-height":"1.25"},blockStyles:{p:{"font-size":"14px"},blockquote:{"font-size":"14px"},h1:{"font-size":"32px"},h2:{"font-size":"24px"},h3:{"font-size":"18px"},h4:{"font-size":"16px"},h5:{"font-size":"14px"},h6:{"font-size":"12px"}}}}var ze=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this;return{borderless:!0,rows:[{view:"menu",localId:"menubar",css:"webix_rte_menubar",on:{onMenuItemClick:function(e){return t.HandleMenuClick(e)}}}]}},e.prototype.init=function(){var t=this;this.State=this.app.getState(),this.Menu=this.$$("menubar"),this.on(this.State.$changes,"menubar",(function(e){t.Menu.clearAll(),t.Menu.parse(t.GetOptions(e,{configs:Re,groups:Ne,structure:Oe}))}))},e.prototype.HandleMenuClick=function(t){var e=this.Menu.getMenu(t),i=e.getItem(t).action||e.config.action||t,o=e.config.action?t:null;"help-more"===i&&window.open("https://docs.webix.com/desktop__rich_text_editor.html","_blank"),this.app.callEvent("menubar:click",[i,o]),this.Action(i,o)},e.prototype.GetOptions=function(t,e){var i=this,r=this.app.getService("locale")._,n=[];return(webix.isArray(t)?t:"object"==typeof t?Object.keys(t):e.structure).forEach((function(s){var a="string"==typeof s?s:s.id,l=e.configs[a]?webix.copy(e.configs[a]):s,c=t[a]&&t[a].data||s.data||e.groups[a]&&e.groups[a].data;if(c){var p=t[a]&&t[a].value||c.value||s.value||l.value,u=c.data||c;n.push({id:a,value:r(p||a),config:i.GetSubmenuConfig(a),data:i.GetMenuData(u,e)})}else n.push(o(o({},l),{value:l.$template?"":r(l.value||l.id)}))})),n},e.prototype.GetMenuData=function(t,e){var i=this,r=this.app.getService("locale")._;return t.map((function(t){var n=t.id||t;if(t.data){var s=e.configs[n]?webix.copy(e.configs[n]):t,a=o(o({},s),{value:r(t.value||s.value),data:i.GetMenuData(t.data,e)});return a.config=i.GetSubmenuConfig(a.id),a}if(t.$template)return t;var l=e.configs[n]?webix.copy(e.configs[n]):o(o({},t),{value:t.value||t.id||t});return l.data&&("font-family"!==l.id&&l.data.forEach((function(t){isNaN(t.value)&&(t.value=r(t.value))})),l.config=i.GetSubmenuConfig(l.id)),l.value=r(l.value),l}))},e.prototype.Action=function(t,e){this.app.getService("operations").action(t,e)},e.prototype.GetSubmenuConfig=function(t){var e=this,i=this.GetActionFromParent(t);return{width:230,css:"webix_rte_style_submenu",template:function(o){return e.MenuOptionTemplate(o,i?t:null)},on:{onBeforeShow:function(){i&&(this.config.action=t),this.refresh()}}}},e.prototype.GetActionFromParent=function(t){return{mode:!0,"line-height":!0,tag:!0,"font-family":!0,"font-size":!0}[t]||!1},e.prototype.ConvertToCamelCase=function(t){var e=t.split("-");return e.length<=1?t:e[0]+e.slice(1).map((function(t){return t.charAt(0).toUpperCase()+t.slice(1)})).join("")},e.prototype.MenuOptionTemplate=function(t,e){var i=this.IsMenuOptionActive(t,e)&&!t.data?"<span class='webix_icon webix_rte_check_style wxi-check'></span>":"",o="<span class='webix_list_icon webix_icon "+(t.icon||"webix_rte_check_style wxi-empty")+"'></span>",r=t.badge||0===t.badge?"<div class='webix_badge'>"+t.badge+"</div>":"",n=!webix.env.touch&&t.hotkey?'<span class="webix_rte_menu_hotkey">'.concat(He(t.hotkey),"</span>"):"";return i+o+t.value+r+n},e.prototype.GetBaseStyles=function(t){void 0===t&&(t={});var e=Me(),i=e.commonStyles,o=e.blockStyles[t.tag||"p"]||{};return{tag:"p",fontFamily:o["font-family"]||i["font-family"]||"",fontSize:o["font-size"]||i["font-size"]||"",lineHeight:o["line-height"]||i["line-height"]||"",align:"left"}},e.prototype.IsMenuOptionActive=function(t,e){var i=this.GetBaseStyles(this.State.activeStyles),r=o(o({},i),this.State.activeStyles);if(r[t.id])return!0;if(e)return r[s=this.ConvertToCamelCase(e)]===t.id;if(0===t.id.indexOf("align-")){var n=t.id.split("-"),s=n[0],a=n[1];return r[s]===a}return!1},e}(u),Ve={cut:{id:"cut",value:"Cut",icon:"rti-content-cut",hotkey:"Ctrl+X"},copy:{id:"copy",value:"Copy",icon:"rti-content-copy",hotkey:"Ctrl+C"},"copy-md":{id:"copy-md",value:"Copy as Markdown",icon:"rti-content-copy"},paste:{id:"paste",value:"Paste",icon:"rti-content-paste",hotkey:"Ctrl+V"},"select-all":{id:"select-all",value:"Select all",hotkey:"Ctrl+A"},bold:{id:"bold",value:"Bold",icon:"rti-bold",hotkey:"Ctrl+B"},italic:{id:"italic",value:"Italic",icon:"rti-italic",hotkey:"Ctrl+I"},underline:{id:"underline",value:"Underline",icon:"rti-underline",hotkey:"Ctrl+U"},strike:{id:"strike",value:"Strikethrough",icon:"rti-strike",hotkey:"Ctrl+Shift+X"},clear:{id:"clear",value:"Clear formatting",icon:"rti-clean"},hr:{id:"hr",value:"Horizontal line",icon:"rti-hr"},link:{id:"link",value:"Link",icon:"rti-link"},image:{id:"image",value:"Image",icon:"rti-image"},emojis:{id:"emojis",value:"Emoji",icon:"rti-emoticon-outline"},characters:{id:"characters",value:"Special characters",icon:"rti-omega"}},je={clipboard:["cut","copy","copy-md","paste","select-all"],format:["bold","italic","underline","strike","clear"],insert:["link","image","hr","emojis","characters"]},Ue=r(r(r(r(r([],je.clipboard,!0),[{$template:"Separator"}],!1),je.format,!0),[{$template:"Separator"}],!1),je.insert,!0),Ge=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this;return{view:"contextmenu",width:webix.env.touch?180:260,css:"webix_rte_style_submenu webix_rte_contextmenu",template:function(e){return t.MenuOptionTemplate(e)},on:{onBeforeShow:function(e){return t.ShowMenu(e)},onMenuItemClick:function(e){return t.HandleMenuClick(e)}}}},e.prototype.init=function(t){var e=this;this.State=this.app.getState(),this.Menu=t,this.on(this.State.$changes,"contextMenu",(function(t){e.Menu.clearAll(),e.Menu.parse(e.GetOptions(t,{configs:Ve,groups:je,structure:Ue}))})),this._onScroll=webix.event(window,"scroll",(function(){return e.Hide()}),{capture:!0})},e.prototype.destroy=function(){this._onScroll&&webix.eventRemove(this._onScroll)},e.prototype.ShowMenu=function(t){var e=this._Locate(t);if("wait-selection-change"!==e)return e&&this.Menu.refresh(),e;t.preventDefault()},e.prototype.AttachTo=function(t,e){this._Locate=e,this.getRoot().attachTo(t)},e.prototype.Show=function(t){this.getRoot().show(t)},e.prototype.Hide=function(){this.getRoot().hide()},e.prototype.HandleMenuClick=function(t){var e=this.Menu.getMenu(t),i=e.getItem(t).action||e.config.action||t,o=e.config.action?t:null;this.app.callEvent("contextmenu:click",[i,o]),this.Action(i,o)},e}(ze),qe=Q.LINK,We=Q.IMAGE,Ke=Q.OTHER,Xe=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this;return this.Compact=this.getParam("compact",!0),this.State=this.app.getState(),{css:this.GetLayoutClassName(),rows:[{view:"rt-editor-area",localId:"editor",on:{onChange:function(){return t.app.callEvent("editor:change")},onCursorSet:function(e,i){e&&e.id&&t.RefreshState(e,i)},onEditorClick:function(){return t.ApplyPaintMode()}}}]}},e.prototype.init=function(){var t=this;this.Editor=this.$$("editor"),this.Document=this.Editor.getDocument(),this.ImagePopup=this.ui(Be),this.LinkPopup=this.ui(De),this.EmojiPopup=this.ui(Pe),this.CharactersPopup=this.ui(Te),this.Resizer=this.ui($e,{container:this.Editor.$view.firstChild}),this.Handlers=this.GetHandlers();var e=this.Ops=this.app.getService("operations"),i=this.app.getService("upload").getUploader();e.linkEditor(this.Editor),i.addDropZone(this.Editor.$view);var o=this.Document.getCursor(),r=o[0],n=o[1];this.RefreshState(r,n),this.on(this.State.$changes,"contextMenu",(function(e){e&&!t.ContextMenu&&(t.ContextMenu=t.ui(Ge),t.ContextMenu.AttachTo(t.Editor.$view,(function(e){return t.ShowContextMenu(e)})))}))},e.prototype.ready=function(){var t=this;this.on(this.app,"editor:value",(function(e,i){return t.Editor.setValue(e,i)})),this.on(this.app,"editor:focus",(function(){return webix.UIManager.setFocus(t.Editor)})),this.on(this.app,"view:resize",(function(){return t.AdjustViews()})),this.on(this.app,"resizer:beforedrag",(function(){t.ImagePopup.Hide(),t.LinkPopup.Hide()})),this.on(this.State.$changes,"selectedImage",(function(e){if(e){var i=e.id,r=e.node;if(t.State.editImage){var n=r.width,s=r.height,a=r.src,l=r.alt;t.State.editImage={id:i,width:n,height:s,src:a,alt:l}}t.Resizer.Show(r).then((function(){if(t.ImagePopup.Adjust(),"A"===r.parentNode.nodeName){var e=t.app.getService("operations").getChunk(parseInt(r.parentNode.getAttribute("data-id")));t.LinkPopup.Show(o(o({},e),{target:r}))}}))}else t.Resizer.Hide(!0),t.ImagePopup.Hide(),t.State.editImage=null})),this.on(this.State.$changes,"layoutMode",G((function(e,i){return t.SetLayoutMode(e,i)}))),this.on(this.State.$changes,"paintMode",(function(e,i){return i&&t.HandlePaintMode(e)})),this.on(this.app,"app:action",(function(e){var i=t.Document.getCursor()[0],o=t.Editor.getSelection().getBox(i.id),r=i.target&&"IMG"===i.target.nodeName?6:0;switch(e){case"link":t.LinkPopup.Show(i,"add"),t._popup=!0,setTimeout((function(){return delete t._popup}),10);break;case"emojis":t.EmojiPopup.Show({x:o.x,y:o.y+o.height+r});break;case"characters":t.CharactersPopup.Show({x:o.x,y:o.y+o.height+r});break;case"new":t.Editor.setValue("");break;case"print":webix.print(t.Editor);break;case"select-all":t.Ops.selectAll()}}))},e.prototype.AdjustViews=function(){this.Resizer.Adjust(),this.ImagePopup.Adjust(),this.LinkPopup.Adjust()},e.prototype.GetHandlers=function(){var t,e=this;return(t={})[qe]=function(t,i){var o=e.Document,r=o.getCursor(),n=r[0],s=r[1];if(i&&i.type===qe){if(e.State.selectedImage=null,s){var a=o.getTape(),l=a.getParent(s,(function(t){return t.type===qe}));if(!l||l.id!==a.getParent(n,(function(t){return t.type===qe})).id)return void e.LinkPopup.Hide()}e.LinkPopup.Show(i)}},t[We]=function(t){var i=e.Document.getCursor()[1];t.target&&(t.target===(i&&i.target)?(e.State.selectedImage={id:t.id,node:t.target},e.AdjustViews()):e.State.selectedImage=null),(!t.target||t.target&&"A"!==t.target.parentNode.nodeName)&&e.LinkPopup.Hide()},t[Ke]=function(){e.State.selectedImage=null,e._popup||e.LinkPopup.Hide()},t},e.prototype.GetProps=function(t,e){return e||(e=t),this.app.getService("operations").getProps(t,e,this.Handlers)},e.prototype.GetLayoutClassName=function(t){return"webix_rte_".concat(t||this.State.layoutMode)},e.prototype.SetLayoutMode=function(t,e){var i=this,o=this.getRoot().$view,r=[e,t].map((function(t){return i.GetLayoutClassName(t)}));this.LinkPopup.Hide(),this.State.selectedImage=null,webix.html.removeCss(o,r[0]),webix.html.addCss(o,r[1])},e.prototype.SetProps=function(t){this.app.getService("operations").setTextProps(t,"replace")},e.prototype.RefreshState=function(t,e){this.State.activeStyles=this.GetProps(t,e)},e.prototype.Refresh=function(){this.Editor.repaint()},e.prototype.HandlePaintMode=function(t){var e=this.Editor.getEditorNode();if(t.enabled){var i=this.Document.getCursor()[0];this._props=this.GetProps(i),webix.html.addCss(e,"paint")}else delete this._props,webix.html.removeCss(e,"paint")},e.prototype.ApplyPaintMode=function(){var t=this.State.paintMode;if(t.enabled){var e=this.Document.getCursor(),i=e[0],r=e[1];i&&r&&this.SetProps(this._props),t.continuous||(this.State.paintMode=o(o({},t),{enabled:!1}))}},e.prototype.ShowContextMenu=function(t){var e=this;if(!this.State.contextMenu)return!1;if(this.HidePopups(),!this._cursorReady)return this._cursorReady=!0,setTimeout((function(){return e.ContextMenu.Show(t)})),"wait-selection-change";this._cursorReady=!1;var i=this.Document.getCursor(),r=i[0],n=i[1];r.target||(r=o(o({},n),{pos:0}));var s=this.GetTargetType(r);if(!n||!n.target)return[s];var a=this.GetTargetType(n);return s.id==a.id?[s]:[s,a]},e.prototype.GetTargetType=function(t){var e=t.target,i=e.nodeName,o=t.id,r=e.parentNode.nodeName;return"IMG"!==i&&"A"==r&&(i=r,o=e.parentNode.dataset.id),{id:o,type:i,parentType:r}},e.prototype.HidePopups=function(){this.EmojiPopup.Hide(),this.CharactersPopup.Hide()},e}(u),Ye=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this;this.TopLayout=this.app.getSubView().Top;var e="",i=this.app.getService("locale")._;return this.GetHotkeys().forEach((function(t){e+='<div class="webix_rte_hotkey_row">\n                <div class="webix_rte_hotkey_action">'.concat(i(t.action),'</div>\n                <div class="webix_rte_hotkey_keys">').concat(He(t.hotkey),"</div>\n            </div>")})),{view:"sidemenu",position:"right",width:300,padding:10,state:function(e){e.top=t.TopLayout.$view.getBoundingClientRect().top,e.height-=e.top},body:{borderless:!0,template:'<div class="webix_rte_shortcut_title">'.concat(i("Hotkeys"),'</div>\n                <div class="webix_rte_shortcut_table">\n                    <div class="webix_rte_shortcut_header">\n                        <div class="webix_rte_action_name">').concat(i("Action"),'</div>\n                        <div class="webix_rte_action_hotkey">').concat(i("Hotkey"),'</div>\n                    </div>\n\t\t\t\t\t<div class="webix_rte_shortcut_body">\n\t\t\t\t\t\t').concat(e,"\n\t\t\t\t\t</div>\n                </div>")}}},e.prototype.init=function(){var t=this;(this.RootObserver=new ResizeObserver((function(e){for(var i=0,o=e;i<o.length;i++){var r=o[i];t.Resize(r.contentRect)}}))).observe(this.TopLayout.$view)},e.prototype.destroy=function(){this.RootObserver.disconnect()},e.prototype.Resize=function(t){var e=this.getRoot();e.isVisible()&&(e.define({top:t.top,height:t.height}),e.adjust())},e.prototype.Show=function(){var t=this;setTimeout((function(){t.getRoot().show()}))},e.prototype.GetHotkeys=function(){return[{action:"Bold",hotkey:"Ctrl+B"},{action:"Italic",hotkey:"Ctrl+I"},{action:"Underline",hotkey:"Ctrl+U"},{action:"Undo",hotkey:"Ctrl+Z"},{action:"Redo",hotkey:"Ctrl+Shift+Z"},{action:"New line",hotkey:"Shift+Enter"},{action:"Copy",hotkey:"Ctrl+C"},{action:"Cut",hotkey:"Ctrl+X"},{action:"Paste",hotkey:"Ctrl+V"}]},e}(u),Je=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){M||(M=!0,webix.protoUI({name:"r-layout",sizeTrigger:function(t,e,i){this._compactValue=i,this._compactHandler=e,this._app=t;var o=t.config;this._forceCompact=void 0!==o.params.forceCompact,this._compactWidth=o.compactWidth,this._forceCompact||this._checkTrigger(this.$view.width,i)},_checkTrigger:function(t,e){return!this._compactWidth||!(t<=this._compactWidth&&!e||t>this._compactWidth&&e)||(this._compactWidth=null,this._compactHandler(!e),!1)},$setSize:function(t,e){(this._forceCompact||this._checkTrigger(t,this._compactValue))&&webix.ui.layout.prototype.$setSize.call(this,t,e),this._app&&this._app.callEvent("view:resize",[])}},webix.ui.layout));var t=this.getParam("forceCompact");webix.isUndefined(t)||this.setParam("compact",t),this.State=this.getParam("state"),this.Compact=this.getParam("compact");var e={cols:[Xe]},i={view:"proxy",maxWidth:400,localId:"edit",css:"webix_rte_image_editor_container webix_shadow_medium",borderless:"dark"!==webix.skin.$name,hidden:!0,body:{$subview:!0,name:"edit"}},o=[{view:"proxy",localId:"top",css:"webix_rte_main_area",body:{view:"r-layout",localId:"main",rows:[Ie,e]}}];return this.Compact?o.push({$subview:!0,name:"edit",popup:!0}):e.cols.push(i),{rows:o,css:"webix_rte_main_layout",borderless:!0}},e.prototype.init=function(){var t=this;this.Top=this.$$("top"),this.Main=this.$$("main"),this.ImageEditor=this.$$("edit"),this.AttachSizeTrigger(),this.on(this.State.$changes,"fullscreen",(function(e,i){e?webix.fullscreen.set(t.Top,{head:!1,css:"webix_rte_fullscreen"}):i&&webix.fullscreen.exit()})),this.on(this.State.$changes,"editImage",(function(e,i){e?t.ShowConfig():i&&t.HideConfig(),t.RestoreModality()})),this.HotkeyInfo=this.ui(Ye),this.on(this.app,"app:action",(function(e){"hotkeys"===e&&t.HotkeyInfo.Show()}))},e.prototype.ShowConfig=function(){this.Compact||this.ImageEditor.show();var t=this.Compact?"popups.config":"image.config";this.show(t,{target:"edit"})},e.prototype.HideConfig=function(){this.Compact||this.ImageEditor.hide(),this.show("_hidden",{target:"edit"})},e.prototype.AttachSizeTrigger=function(){var t=this;this.Main.sizeTrigger(this.app,(function(e){t._ignoreSizeTrigger||t.SetCompactMode(e)}),!!this.Compact)},e.prototype.RestoreModality=function(){var t=this.State.editImage;this.Compact&&t?(this.app.getRoot().enable(),this.Top.disable()):this.Top.enable()},e.prototype.SetCompactMode=function(t){var e=this;webix.delay((function(){var i=e.State.fullscreen;i&&(e._ignoreSizeTrigger=!0,webix.fullscreen.exit()),e.setParam("compact",t),e.refresh().then((function(){i&&(webix.fullscreen.set(e.Top,{head:!1,css:"webix_rte_fullscreen"}),e.RestoreModality(),e.AttachSizeTrigger(),e._ignoreSizeTrigger=!1)}))}))},e}(u),Ze={undo:{view:"icon",name:"undo",icon:"rti-undo",source:"undo",tooltip:"Undo",hotkey:"Ctrl+Z"},redo:{view:"icon",name:"redo",icon:"rti-redo",source:"redo",tooltip:"Redo",hotkey:"Ctrl+Shift+Z"},print:{view:"icon",name:"print",icon:"rti-print",tooltip:"Print"},fullscreen:{view:"icon",name:"fullscreen",icon:"rti-fullscreen",tooltip:"Full screen"},mode:{view:"rt-editor-select",width:60,name:"mode",options:[{id:"classic",value:"Classic mode",icon:"rti-fit-width"},{id:"document",value:"Document mode",icon:"rti-fit-document"}],tooltip:"Layout mode"},style:{view:"rt-editor-style-select",name:"tag",width:60,source:"tag",options:[{id:"p",value:"Paragraph",icon:"rti-paragraph"},{id:"h1",value:"Heading 1",icon:"rti-heading-1"},{id:"h2",value:"Heading 2",icon:"rti-heading-2"},{id:"h3",value:"Heading 3",icon:"rti-heading-3"},{id:"h4",value:"Heading 4",icon:"rti-heading-4"},{id:"h5",value:"Heading 5",icon:"rti-heading-5"},{id:"h6",value:"Heading 6",icon:"rti-heading-6"},{id:"blockquote",value:"Quote",icon:"rti-quote"}],groups:{text:["p","h1","h2","h3","h4","h5","h6"],block:["blockquote"]},tooltip:"Style"},"font-family":{view:"rt-editor-select",name:"font-family",width:120,source:"fontFamily",options:[{id:"Arial",value:"Arial"},{id:"Georgia",value:"Georgia"},{id:"Roboto",value:"Roboto"},{id:"'PT Sans'",value:"PT Sans"},{id:"'Open Sans'",value:"Open Sans"},{id:"Tahoma",value:"Tahoma"},{id:"'Times New Roman'",value:"Times New Roman"},{id:"Verdana",value:"Verdana"},{id:"Calibri",value:"Calibri"}],tooltip:"Font family"},"font-size":{view:"rt-editor-select",name:"font-size",width:60,suggestWidth:100,source:"fontSize",options:[{id:"12px",value:"12"},{id:"14px",value:"14"},{id:"16px",value:"16"},{id:"18px",value:"18"},{id:"20px",value:"20"},{id:"24px",value:"24"},{id:"28px",value:"28"},{id:"32px",value:"32"},{id:"36px",value:"36"}],tooltip:"Font size"},bold:{view:"icon",name:"bold",icon:"rti-bold",source:"bold",tooltip:"Bold",hotkey:"Ctrl+B"},italic:{view:"icon",name:"italic",icon:"rti-italic",source:"italic",tooltip:"Italic",hotkey:"Ctrl+I"},underline:{view:"icon",name:"underline",icon:"rti-underline",source:"underline",tooltip:"Underline",hotkey:"Ctrl+U"},strike:{view:"icon",name:"strike",icon:"rti-strike",source:"strike",tooltip:"Strikethrough",hotkey:"Ctrl+Shift+X"},superscript:{view:"icon",name:"superscript",icon:"rti-superscript",source:"superscript",tooltip:"Superscript"},subscript:{view:"icon",name:"subscript",icon:"rti-subscript",source:"subscript",tooltip:"Subscript"},"text-color":{view:"rt-editor-colorpicker",name:"text-color",width:60,source:"color",topIcon:"rti-color-text",tooltip:"Text color",suggest:{type:"colorboard",body:{clear:!0}}},"background-color":{view:"rt-editor-colorpicker",name:"background-color",width:60,source:"background",topIcon:"rti-color-background",tooltip:"Background color",suggest:{type:"colorboard",body:{clear:!0}}},"paint-format":{view:"rt-editor-iconselect",name:"paint-format",icon:"rti-paint",tooltip:"Paint format",popupLabel:"Continuous painting",targetProp:"continuous"},"align-left":{view:"icon",name:"align-left",icon:"rti-align-left",source:"align:left",tooltip:"Left align"},"align-center":{view:"icon",name:"align-center",icon:"rti-align-center",source:"align:center",tooltip:"Center align"},"align-right":{view:"icon",name:"align-right",icon:"rti-align-right",source:"align:right",tooltip:"Right align"},"align-justify":{view:"icon",name:"align-justify",icon:"rti-align-justify",source:"align:justify",tooltip:"Justify"},"line-height":{view:"rt-editor-select",width:60,suggestWidth:100,name:"line-height",templateIcon:"rti-line-height",options:[{id:"1",value:"1"},{id:"1.25",value:"1.25"},{id:"1.5",value:"1.5"},{id:"2",value:"2"},{id:"3",value:"3"}],source:"lineHeight",tooltip:"Line height"},outdent:{view:"icon",name:"outdent",icon:"rti-unindent",tooltip:"Outdent"},indent:{view:"icon",name:"indent",icon:"rti-indent",tooltip:"Indent"},link:{view:"icon",name:"link",icon:"rti-link",tooltip:"Insert link"},image:{view:"icon",name:"image",icon:"rti-image",tooltip:"Insert image"},"bulleted-list":{view:"icon",name:"bulleted-list",icon:"rti-list-bulleted",tooltip:"Bulleted list"},"numbered-list":{view:"icon",name:"numbered-list",icon:"rti-list-numbered",tooltip:"Numbered list"},clear:{view:"icon",name:"clear",icon:"rti-clean",tooltip:"Clear formatting"},emojis:{view:"icon",name:"emojis",icon:"rti-emoticon-outline",tooltip:"Emoji"},characters:{view:"icon",name:"characters",icon:"rti-omega",tooltip:"Special characters"}},Qe={file:["print"],view:["fullscreen","mode"],history:["undo","redo"],font:["style","font-family","font-size","bold","italic","underline","strike","text-color","background-color","paint-format"],align:["align-left","align-center","align-right","align-justify"],"line-height":["line-height"],indent:["indent","outdent"],insert:["link","image"],lists:["bulleted-list","numbered-list"],clear:["clear"]},ti=["history","font","align","line-height","indent","insert","lists","clear"],ei=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){this.State=this.app.getState();var t=this.State.menubar?"":"webix_rte_toolbar_borderless_top";return{localId:"toolbar",css:"webix_rte_toolbar ".concat(t),borderless:!0,cols:[{view:webix.env.$customScroll?"scrollview":"rt-editor-scrollview",borderless:!0,scroll:"x",body:{view:"toolbar",localId:"buttons",minHeight:webix.skin.$active.inputHeight,padding:4,cols:this.GetButtons(this.State.toolbar)}},{view:"toolbar",localId:"view-mode",css:"webix_rte_view_mode",rows:[{},{borderless:!0,paddingX:4,margin:4,cols:this.GetButtons({view:!0})},{}]}]}},e.prototype.init=function(){var t=this;this.Bar=this.$$("toolbar"),this.Buttons=this.$$("buttons"),this.Modes=this.$$("view-mode"),this.on(this.State.$changes,"activeStyles",(function(e){t.SetStyles(e),t.UpdateButtonState("outdent",!t.State.activeStyles.indent)})),this.on(this.State.$changes,"toolbar",G((function(){return t.refresh()}))),this.on(this.State.$changes,"layoutMode",(function(e){t.GetViews("mode").forEach((function(t){return t.setValue(e)}))})),this.on(this.State.$changes,"fullscreen",(function(e){t.GetViews("fullscreen").forEach((function(t){var i="rti-".concat(e?"fullscreen-exit":"fullscreen");t.config.icon!==i&&(t.define({icon:i}),t.$view.classList.toggle("webix_rte_active"),t.refresh())}))})),this.on(this.app,"editor:change",(function(){return t.UpdateHistoryStatus(!0)}));var e=this.Buttons.queryView({name:"paint-format"});e&&this.on(this.State.$changes,"paintMode",(function(t,i){i&&e.setActiveStyle(t)}))},e.prototype.ready=function(){this.UpdateHistoryStatus()},e.prototype.Action=function(t,e){this.app.getService("operations").action(t,e)},e.prototype.GetViews=function(t){var e=function(e){return"string"==typeof t?e.config.name===t:t(e)};return r(r([],this.Buttons.queryView(e,"all"),!0),this.Modes.queryView(e,"all"),!0)},e.prototype.GetButtons=function(t){var e=this,i=[];if(!t)return i;if(webix.isArray(t))t.forEach((function(t){i.push("string"==typeof t?e.GetButtonConfig(t):t)}));else{var o="object"==typeof t?Object.keys(t):ti;o.forEach((function(r,n){var s=!0===t||!0===t[r]?Qe[r]:t[r];i.push.apply(i,e.GetButtonGroup(s)),n<o.length-1&&i.push({view:"rt-editor-separator"})}))}return i},e.prototype.GetButtonConfig=function(t){var e=this;if("separator"===t)return{view:"rt-editor-separator"};var i=this.app.getService("locale")._,r=Ze[t],n=r.hotkey,s=function(t,e){var i={};for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&e.indexOf(o)<0&&(i[o]=t[o]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(o=Object.getOwnPropertySymbols(t);r<o.length;r++)e.indexOf(o[r])<0&&Object.prototype.propertyIsEnumerable.call(t,o[r])&&(i[o[r]]=t[o[r]])}return i}(r,["hotkey"]),a=o({},s);return a.css=(a.css?a.css+" ":"")+"webix_rte_toolbar_button","icon"!==a.view&&"rt-editor-iconselect"!==a.view||(a.css+=" webix_rte_icon_button",a.click=function(t){return e.Action(a.name,t)}),"rt-editor-select"!==a.view&&"rt-editor-style-select"!==a.view&&"rt-editor-colorpicker"!==a.view||("style"!==a.name&&"mode"!==a.name||(a.options=a.options.map((function(t){return o(o({},t),{value:i(t.value)})}))),a.on={onChange:function(t,i,o){"user"===o&&(e.Action(a.name,t),e.app.callEvent("editor:focus"))}}),"rt-editor-iconselect"===a.view&&(a.popupLabel=i(a.popupLabel)),a.tooltip="".concat(i(a.tooltip)).concat(n?" (".concat(He(n),")"):""),a},e.prototype.GetButtonGroup=function(t){var e=this;return t.map((function(t){return"string"==typeof t?e.GetButtonConfig(t):t}))},e.prototype.GetDefaultValue=function(t,e){if("tag"===t)return"p";var i=Me(),o=i.commonStyles,r=i.blockStyles;return r&&r[e.tag]&&r[e.tag][t]||o&&o[t]||""},e.prototype.SetStyles=function(t){var e=this;this.GetViews((function(t){return!!t.config.source})).forEach((function(i){var o=i.config,r=e.GetDefaultValue(o.name,t),n=t[o.source];if("rt-editor-select"===o.view||"rt-editor-style-select"===o.view||"rt-editor-colorpicker"===o.view){if(n=n||r,"rt-editor-colorpicker"===o.view){var s=i.getPopup();s.isVisible()&&s.getBody().setValue(n)}i.setValue(n)}else{var a=o.source.split(":");a.length>1&&(n=t[a[0]]===a[1]||void 0),!!o.activeMode!=!!n&&(i.config.activeMode=n,i.$view.classList.toggle("webix_rte_active"))}}))},e.prototype.UpdateHistoryStatus=function(t){var e=this.app.getService("operations").getHistory().getState(),i=e[0],o=e[1];this.UpdateButtonState("undo",!i),this.UpdateButtonState("redo",!o),t&&this.app.callEvent("editor:focus")},e.prototype.UpdateButtonState=function(t,e){this.GetViews(t).forEach((function(t){t.config.disabled!==e&&t.define({disabled:e})}))},e}(u),ii=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){var t=this,e=this.app.getService("locale")._,i=this.app.getService("operations");return this.State=this.app.getState(),{minWidth:240,maxWidth:400,css:"webix_rte_image_editor",rows:[{view:"toolbar",css:"webix_rte_image_editor_header",borderless:!0,cols:[{height:48,type:"header",borderless:!0,template:e("Image options")},{padding:8,cols:[{width:1},{view:"icon",icon:"wxi wxi-close",click:function(){return t.State.editImage=null}}]}]},{view:"scrollview",borderless:!0,batch:"form",css:"webix_rte_image_editor_form",scroll:"y",body:{borderless:!0,localId:"form",view:"form",elements:[{view:"text",name:"width",type:"number",label:e("Width")},{view:"text",name:"height",type:"number",label:e("Height")},{view:"checkbox",labelRight:e("Lock aspect ratio"),localId:"fixedRatio",value:1},{view:"text",name:"src",label:e("Source")},{view:"text",name:"alt",label:e("Alternative description")},{view:"label",label:e("Alignment")},{borderless:!0,localId:"icons",padding:4,margin:4,cols:[{view:"icon",name:"align:left",icon:"rti-align-image-left",tooltip:e("Left align"),click:function(){return i.action("align-left")}},{view:"icon",name:"align:center",icon:"rti-align-image-center",tooltip:e("Center align"),click:function(){return i.action("align-center")}},{view:"icon",name:"align:right",icon:"rti-align-image-right",tooltip:e("Right align"),click:function(){return i.action("align-right")}}]},{}],elementsConfig:{labelPosition:"top",on:{onChange:function(t,e,o){var r=this;if("user"===o){var n=this.getFormView().getValues(),s=n.id,a=n.alt,l=n.ratio,c=this.getFormView().getValues(),p=c.width,u=c.height,h=this.$scope.State.selectedImage;if(h&&h.id==s){if("width"!==this.config.name&&"height"!==this.config.name||(this.$scope.$$("fixedRatio").getValue()&&("width"===this.config.name&&(u=Math.round(p/l)),"height"===this.config.name&&(p=Math.round(u*l))),i.applyImageSizes(p,u),webix.delay((function(){return r.focus()}))),"src"===this.config.name){var d=this.getFormView().getValues().src;/^(#|(https?:\/\/))/i.test(d)||(d="http://"+d),h.node.src="",i.updateURL(s,d)}"alt"===this.config.name&&i.patch({id:s,props:{alt:a}})}}}}}}},{batch:"empty",css:"webix_rte_image_editor_placeholder",borderless:!0,template:e("Select an image to see image options"),hidden:!0}]}},e.prototype.init=function(){var t=this;this.on(this.State.$changes,"editImage",(function(e){t.$$("form").setValues(e?o(o({},e),{ratio:e.width/e.height}):{}),t.getRoot().showBatch(e?"form":"empty")})),this.on(this.State.$changes,"activeStyles",(function(e){e.align&&t.$$("icons").queryView((function(t){var i=t.config.name.split(":")[1]===e.align||void 0;!!t.config.activeMode!=!!i&&(t.config.activeMode=i,t.$view.classList.toggle("webix_rte_active"))}))}))},e}(u),oi=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.config=function(){return this.app.getService("jet-win").updateConfig({view:"window",minWidth:200,maxWidth:400,minHeight:200,borderless:!0,position:function(t){var e=window.innerWidth||document.documentElement.offsetWidth,i=e-80,o=(window.innerHeight||document.documentElement.offsetHeight)/2;t.width=i>this.config.maxWidth?this.config.maxWidth:i<this.config.minWidth?this.config.minWidth:i,t.height=o>this.config.minHeight?o:t.height,t.top=t.height/2,t.left=e/2-t.width/2},head:!1,body:ii})},e}(u),ri={JetView:u};ri.top=Je,ri.editor=Xe,ri["topbar/toolbar"]=ei,ri["topbar/menubar"]=ze,ri.topbar=Ie,ri["popups/link"]=De,ri["popups/image"]=Be,ri["popups/hotkeysinfo"]=Ye,ri["popups/emojis"]=Pe,ri["popups/contextmenu"]=Ge,ri["popups/config"]=oi,ri["popups/characters"]=Te,ri["image/resizer"]=$e,ri["image/config"]=ii;var ni=Q.TEXT,si=Q.LINK,ai=Q.IMAGE,li=Q.UL,ci=Q.OL,pi=Q.SUPERSCRIPT,ui=Q.SUBSCRIPT,hi=Q.RULER,di=Q.INLINE,_i=Q.CONTAINS,fi=Q.CHUNK_END_CURSOR,gi=function(t){return t.type&di&&!(t.type&_i)},mi=me.ACTION_SET_PROPERTY,wi=me.ACTION_UNDO,yi=me.ACTION_REDO,vi=me.ACTION_INSERT,bi=me.ACTION_WRAP,Fi=me.ACTION_UNWRAP,xi=me.ACTION_PATCH,ki=me.ACTION_DELETE,Ci=me.ACTION_TYPE,Si=ot.PROPS_TOGGLE,Ei=ot.PROPS_BLOCK,Ai=ot.PROPS_CHUNK,Ii=ot.PROPS_UPDATE,$i=ot.PROPS_REPLACE,Bi={text:ni,link:si,image:ai,bulleted:li,numbered:ci,superscript:pi,subscript:ui,ruler:hi},Di={update:Ii,replace:$i,toggle:Si},Pi=function(){function t(t,e){this.app=t,this.state=e}return t.prototype.linkEditor=function(t){this._doc=t.getDocument(),this._sel=t.getSelection(),this._history=t.getHistory()},t.prototype.action=function(t,e){var i;switch(t){case"fullscreen":this.state.fullscreen=!this.state.fullscreen;break;case"mode":this.state.layoutMode=e;break;case"undo":this.undo();break;case"redo":this.redo();break;case"tag":this.setBlockProps({tag:e});break;case"font-family":this.setTextProps({fontFamily:e});break;case"font-size":this.setTextProps({fontSize:e});break;case"align-left":case"align-center":case"align-right":case"align-justify":this.setBlockProps({align:t.split("-")[1]});break;case"line-height":this.setBlockProps({lineHeight:e});break;case"italic":case"bold":case"underline":case"strike":this.setTextProps(((i={})[t]=!0,i),"toggle");break;case"superscript":case"subscript":this.wrapInsert({tag:Bi[t]});break;case"text-color":this.setTextProps({color:e});break;case"background-color":this.setTextProps({background:e});break;case"indent":case"outdent":var r=this.state.activeStyles.indent,n=void 0===r?0:r,s="indent"===t?20:-20;this.setBlockProps({indent:Math.max(0,n+s)});break;case"clear":this.setTextProps({},"replace");break;case"paint-format":var a=o({},this.state.paintMode);e.toggle&&(a.enabled=!a.enabled),void 0!==e.continuous&&(a.continuous=e.continuous),this.state.paintMode=a;break;case"image":this.app.getService("upload").openDialog();break;case"bulleted-list":case"numbered-list":this.insert({tag:Bi[t.split("-")[0]]});break;case"hr":this.insert({tag:Bi.ruler});break;case"emoji":case"character":this.type(e);break;case"copy":this.handleCopy();break;case"copy-md":this.handleCopy(!1,!0);break;case"cut":this.handleCopy(!0);break;case"paste":this.handlePaste();break;case"pdf":case"docx":case"txt":case"md":this.app.getService("backend").export(t);break;case"import":this.app.getService("backend").import()}this.app.callEvent("app:action",[t,e])},t.prototype.handleCopy=function(t,e){var i=this,o=new ClipboardEvent("copy",{clipboardData:new DataTransfer});Gt(this._doc,t?"cut":"copy",o);var r="";e&&(r=ae(jt)),navigator.clipboard.write([new window.ClipboardItem({"text/plain":r||o.clipboardData.getData("text/plain"),"text/html":r||o.clipboardData.getData("text/html")})]).catch((function(t){return i.clipboardError(t)}))},t.prototype.handlePaste=function(){var t=this;navigator.clipboard.read().then((function(e){if(e.length&&e[0].types.length){for(var i=[],o=new DataTransfer,r=0,n=e;r<n.length;r++)for(var s=n[r],a=function(t){return"text/plain"==t?(i.push(s.getType(t).then((function(t){return t.text().then((function(t){o.setData("text/plain",t)}))}))),"break"):0==t.indexOf("image/")?(i.push(s.getType(t).then((function(e){var i=new File([e],"image-".concat(webix.uid(),".").concat(t.split("/")[1]),{type:t});o.items.add(i)}))),"break"):void 0},l=0,c=s.types;l<c.length;l++){if("break"===a(c[l]))break}webix.promise.all(i).then((function(){Gt(t._doc,"paste",new ClipboardEvent("copy",{clipboardData:o}),t.app.getService("upload").pasteImages)}))}})).catch((function(e){return t.clipboardError(e)}))},t.prototype.clipboardError=function(t){"NotAllowedError"===t.name&&webix.message({type:"error",text:this.app.getService("locale")._("The operation failed! Please check your browser's clipboard permissions.")})},t.prototype.undo=function(){this._doc.exec(wi)},t.prototype.redo=function(){this._doc.exec(yi)},t.prototype.setBlockProps=function(t){this._doc.exec(mi,{target:Ei,props:t})},t.prototype.setTextProps=function(t,e){void 0===e&&(e="update");var i=this._doc.getCursor()[1],o=Di[e]||ot.PROPS_UPDATE,r=i?mi:vi,n={mode:o,props:t};r===vi&&(n.tag=ni),this._doc.exec(r,n)},t.prototype.patch=function(t){this._doc.exec(xi,t)},t.prototype.insert=function(t){this._doc.exec(vi,t)},t.prototype.wrapInsert=function(t){var e=this._doc.getCursor()[1]?bi:vi;this._doc.exec(e,t)},t.prototype.delete=function(){this._doc.exec(ki)},t.prototype.type=function(t){this._doc.exec(Ci,t)},t.prototype.getProps=function(t,e,i){return this._doc.getTape().getProps(t,e,i)},t.prototype.getChunk=function(t){return this._doc.getTape().getChunk(t)},t.prototype.getHistory=function(){return this._history},t.prototype.getCursor=function(){return this._doc.getCursor()},t.prototype.setCursor=function(t,e,i){this._doc.setCursor(t,e),i&&this.paintSelection()},t.prototype.paintSelection=function(){var t=this._doc.getCursor(),e=t[0],i=t[1];this._sel.paint({id:e.start||e.id,pos:e.pos},i)},t.prototype.link=function(t){this.wrapInsert({tag:si,props:{url:t}})},t.prototype.unlink=function(){this._doc.exec(Fi,{tag:si})},t.prototype.updateURL=function(t,e){this.patch({id:t,props:{url:e}})},t.prototype.insertImage=function(t){var e=this.state.selectedImage,i=this._doc.getTape().findChunk((function(t){return t.id===(e&&e.id)})),o={url:t.value,width:t.width,height:t.height,uid:t.id};if(i&&!t.file.drop)this.patch({id:i.id,props:o}),this.app.callEvent("image:update",[i]);else{if(t.file.drop){var r=this._doc.getCursor()[1];e&&this._doc.setCursor(r)}this.insert({tag:ai,props:o}),this.app.callEvent("image:insert",[t.id])}},t.prototype.applyImageSizes=function(t,e){var i=this.state.selectedImage;if(i){var o=this._doc.getTape().findChunk((function(t){return t.id===(i&&i.id)}));o&&(t=Math.max(t,10),e=Math.max(e,10),this._doc.exec(mi,{mode:Ii,target:Ai,cursor:o,props:{width:t,height:e}}))}},t.prototype.selectAll=function(){var t,e=this._doc.getTape(),i=e.getNext(-1,gi),o=e.getPrev(e.getLength(),gi);this.setCursor({id:i.id,pos:0},{id:o.id,pos:(t=o,void 0!==t.text?t.text.length:fi)},!0)},t}(),Ti=function(){function t(t){this.app=t,this.initUploader(),this.pasteImages=this.pasteImages.bind(this)}return t.prototype.initUploader=function(){var t=this.app;this.uploader=webix.ui({view:"uploader",accept:"image/png, image/apng, image/avif, image/gif, image/jpeg, image/svg+xml, image/webp",apiOnly:!0,upload:t.config.upload||"#",on:{onAfterFileAdd:function(t){t.urlData={id:webix.uid()}},onFileUpload:function(e){t.getService("operations").insertImage(e),t.callEvent("image:upload",[])},onBeforeFileDrop:function(t){for(var e=0;e<t.length;e++)t[e].drop=!0}}})},t.prototype.pasteImages=function(t){var e=this;t.forEach((function(t){return e.uploader.addFile(t)}))},t.prototype.openDialog=function(){this.uploader.fileDialog()},t.prototype.getUploader=function(){return this.uploader},t}(),Ri=[[["watch"],"231A",6],[["soccer"],"26BD",3],[["heart"],"2764",7],[["green_apple"],"1F34F",5],[["dog"],"1F436",2],[["grinning"],"1F600",1],[["car","red_car"],"1F697",4],[["apple"],"1F34E",5],[["basketball"],"1F3C0",3],[["cat"],"1F431",2],[["yellow_heart"],"1F49B",7],[["iphone"],"1F4F1",6],[["smiley"],"1F603",1],[["taxi"],"1F695",4],[["pear"],"1F350",5],[["football"],"1F3C8",3],[["mouse"],"1F42D",2],[["green_heart"],"1F49A",7],[["calling"],"1F4F2",6],[["smile"],"1F604",1],[["blue_car"],"1F699",4],[["baseball"],"26BE",3],[["tangerine"],"1F34A",5],[["hamster"],"1F439",2],[["blue_heart"],"1F499",7],[["computer"],"1F4BB",6],[["grin"],"1F601",1],[["bus"],"1F68C",4],[["keyboard"],"2328",6],[["lemon"],"1F34B",5],[["tennis"],"1F3BE",3],[["rabbit"],"1F430",2],[["purple_heart"],"1F49C",7],[["laughing","satisfied"],"1F606",1],[["trolleybus"],"1F68E",4],[["banana"],"1F34C",5],[["racing_car"],"1F3CE",4],[["volleyball"],"1F3D0",3],[["black_heart"],"1F5A4",7],[["desktop_computer"],"1F5A5",6],[["sweat_smile"],"1F605",1],[["fox_face"],"1F98A",2],[["watermelon"],"1F349",5],[["rugby_football"],"1F3C9",3],[["bear"],"1F43B",2],[["broken_heart"],"1F494",7],[["printer"],"1F5A8",6],[["joy"],"1F602",1],[["police_car"],"1F693",4],[["heavy_heart_exclamation_mark_ornament"],"2763",7],[["grapes"],"1F347",5],[["8ball"],"1F3B1",3],[["panda_face"],"1F43C",2],[["three_button_mouse"],"1F5B1",6],[["ambulance"],"1F691",4],[["rolling_on_the_floor_laughing"],"1F923",1],[["relaxed"],"263A",1],[["strawberry"],"1F353",5],[["table_tennis_paddle_and_ball"],"1F3D3",3],[["koala"],"1F428",2],[["two_hearts"],"1F495",7],[["trackball"],"1F5B2",6],[["fire_engine"],"1F692",4],[["melon"],"1F348",5],[["badminton_racquet_and_shuttlecock"],"1F3F8",3],[["tiger"],"1F42F",2],[["revolving_hearts"],"1F49E",7],[["joystick"],"1F579",6],[["blush"],"1F60A",1],[["minibus"],"1F690",4],[["cherries"],"1F352",5],[["heartbeat"],"1F493",7],[["compression"],"1F5DC",6],[["innocent"],"1F607",1],[["truck"],"1F69A",4],[["goal_net"],"1F945",3],[["lion_face"],"1F981",2],[["peach"],"1F351",5],[["ice_hockey_stick_and_puck"],"1F3D2",3],[["cow"],"1F42E",2],[["heartpulse"],"1F497",7],[["minidisc"],"1F4BD",6],[["slightly_smiling_face"],"1F642",1],[["articulated_lorry"],"1F69B",4],[["pineapple"],"1F34D",5],[["field_hockey_stick_and_ball"],"1F3D1",3],[["pig"],"1F437",2],[["sparkling_heart"],"1F496",7],[["floppy_disk"],"1F4BE",6],[["upside_down_face"],"1F643",1],[["tractor"],"1F69C",4],[["cricket_bat_and_ball"],"1F3CF",3],[["pig_nose"],"1F43D",2],[["cupid"],"1F498",7],[["cd"],"1F4BF",6],[["wink"],"1F609",1],[["scooter"],"1F6F4",4],[["kiwifruit"],"1F95D",5],[["golf"],"26F3",3],[["frog"],"1F438",2],[["gift_heart"],"1F49D",7],[["dvd"],"1F4C0",6],[["relieved"],"1F60C",1],[["bike"],"1F6B2",4],[["avocado"],"1F951",5],[["tomato"],"1F345",5],[["bow_and_arrow"],"1F3F9",3],[["monkey_face"],"1F435",2],[["heart_decoration"],"1F49F",7],[["vhs"],"1F4FC",6],[["heart_eyes"],"1F60D",1],[["motor_scooter"],"1F6F5",4],[["eggplant"],"1F346",5],[["fishing_pole_and_fish"],"1F3A3",3],[["racing_motorcycle"],"1F3CD",4],[["camera"],"1F4F7",6],[["kissing_heart"],"1F618",1],[["see_no_evil"],"1F648",2],[["camera_with_flash"],"1F4F8",6],[["kissing"],"1F617",1],[["hear_no_evil"],"1F649",2],[["rotating_light"],"1F6A8",4],[["boxing_glove"],"1F94A",3],[["cucumber"],"1F952",5],[["video_camera"],"1F4F9",6],[["kissing_smiling_eyes"],"1F619",1],[["speak_no_evil"],"1F64A",2],[["oncoming_police_car"],"1F694",4],[["martial_arts_uniform"],"1F94B",3],[["carrot"],"1F955",5],[["ice_skate"],"26F8",3],[["corn"],"1F33D",5],[["movie_camera"],"1F3A5",6],[["monkey"],"1F412",2],[["kissing_closed_eyes"],"1F61A",1],[["oncoming_bus"],"1F68D",4],[["hot_pepper"],"1F336",5],[["ski"],"1F3BF",3],[["chicken"],"1F414",2],[["film_projector"],"1F4FD",6],[["yum"],"1F60B",1],[["oncoming_automobile"],"1F698",4],[["skier"],"26F7",3],[["film_frames"],"1F39E",6],[["penguin"],"1F427",2],[["stuck_out_tongue_winking_eye"],"1F61C",1],[["oncoming_taxi"],"1F696",4],[["potato"],"1F954",5],[["sweet_potato"],"1F360",5],[["snowboarder"],"1F3C2",3],[["bird"],"1F426",2],[["telephone_receiver"],"1F4DE",6],[["stuck_out_tongue_closed_eyes"],"1F61D",1],[["aerial_tramway"],"1F6A1",4],[["phone","telephone"],"260E",6],[["chestnut"],"1F330",5],[["baby_chick"],"1F424",2],[["stuck_out_tongue"],"1F61B",1],[["mountain_cableway"],"1F6A0",4],[["weight_lifter"],"1F3CB",3],[["hatching_chick"],"1F423",2],[["pager"],"1F4DF",6],[["suspension_railway"],"1F69F",4],[["money_mouth_face"],"1F911",1],[["peanuts"],"1F95C",5],[["honey_pot"],"1F36F",5],[["hatched_chick"],"1F425",2],[["fax"],"1F4E0",6],[["railway_car"],"1F683",4],[["hugging_face"],"1F917",1],[["fencer"],"1F93A",3],[["tv"],"1F4FA",6],[["train"],"1F68B",4],[["nerd_face"],"1F913",1],[["wrestlers"],"1F93C",3],[["croissant"],"1F950",5],[["duck"],"1F986",2],[["bread"],"1F35E",5],[["radio"],"1F4FB",6],[["sunglasses"],"1F60E",1],[["mountain_railway"],"1F69E",4],[["eagle"],"1F985",2],[["studio_microphone"],"1F399",6],[["monorail"],"1F69D",4],[["clown_face"],"1F921",1],[["baguette_bread"],"1F956",5],[["owl"],"1F989",2],[["level_slider"],"1F39A",6],[["bullettrain_side"],"1F684",4],[["face_with_cowboy_hat"],"1F920",1],[["person_doing_cartwheel"],"1F938",3],[["bat"],"1F987",2],[["cheese_wedge"],"1F9C0",5],[["control_knobs"],"1F39B",6],[["wolf"],"1F43A",2],[["smirk"],"1F60F",1],[["bullettrain_front"],"1F685",4],[["egg"],"1F95A",5],[["stopwatch"],"23F1",6],[["fried_egg","cooking"],"1F373",5],[["boar"],"1F417",2],[["unamused"],"1F612",1],[["light_rail"],"1F688",4],[["timer_clock"],"23F2",6],[["horse"],"1F434",2],[["disappointed"],"1F61E",1],[["steam_locomotive"],"1F682",4],[["bacon"],"1F953",5],[["alarm_clock"],"23F0",6],[["person_with_ball"],"26F9",3],[["pensive"],"1F614",1],[["train2"],"1F686",4],[["pancakes"],"1F95E",5],[["unicorn_face"],"1F984",2],[["fried_shrimp"],"1F364",5],[["bee","honeybee"],"1F41D",2],[["mantelpiece_clock"],"1F570",6],[["worried"],"1F61F",1],[["metro"],"1F687",4],[["handball"],"1F93E",3],[["hourglass"],"231B",6],[["poultry_leg"],"1F357",5],[["bug"],"1F41B",2],[["confused"],"1F615",1],[["tram"],"1F68A",4],[["hourglass_flowing_sand"],"23F3",6],[["meat_on_bone"],"1F356",5],[["slightly_frowning_face"],"1F641",1],[["station"],"1F689",4],[["butterfly"],"1F98B",2],[["white_frowning_face"],"2639",1],[["pizza"],"1F355",5],[["snail"],"1F40C",2],[["satellite_antenna"],"1F4E1",6],[["helicopter"],"1F681",4],[["hotdog"],"1F32D",5],[["golfer"],"1F3CC",3],[["shell"],"1F41A",2],[["battery"],"1F50B",6],[["persevere"],"1F623",1],[["small_airplane"],"1F6E9",4],[["airplane"],"2708",4],[["hamburger"],"1F354",5],[["beetle"],"1F41E",2],[["electric_plug"],"1F50C",6],[["confounded"],"1F616",1],[["fries"],"1F35F",5],[["surfer"],"1F3C4",3],[["ant"],"1F41C",2],[["bulb"],"1F4A1",6],[["tired_face"],"1F62B",1],[["airplane_departure"],"1F6EB",4],[["flashlight"],"1F526",6],[["spider"],"1F577",2],[["weary"],"1F629",1],[["airplane_arriving"],"1F6EC",4],[["stuffed_flatbread"],"1F959",5],[["taco"],"1F32E",5],[["swimmer"],"1F3CA",3],[["candle"],"1F56F",6],[["spider_web"],"1F578",2],[["triumph"],"1F624",1],[["rocket"],"1F680",4],[["burrito"],"1F32F",5],[["turtle"],"1F422",2],[["wastebasket"],"1F5D1",6],[["angry"],"1F620",1],[["satellite"],"1F6F0",4],[["water_polo"],"1F93D",3],[["snake"],"1F40D",2],[["seat"],"1F4BA",4],[["rage"],"1F621",1],[["oil_drum"],"1F6E2",6],[["green_salad"],"1F957",5],[["money_with_wings"],"1F4B8",6],[["no_mouth"],"1F636",1],[["canoe"],"1F6F6",4],[["shallow_pan_of_food"],"1F958",5],[["lizard"],"1F98E",2],[["boat","sailboat"],"26F5",4],[["spaghetti"],"1F35D",5],[["dollar"],"1F4B5",6],[["neutral_face"],"1F610",1],[["scorpion"],"1F982",2],[["ramen"],"1F35C",5],[["yen"],"1F4B4",6],[["expressionless"],"1F611",1],[["rowboat"],"1F6A3",3],[["motor_boat"],"1F6E5",4],[["crab"],"1F980",2],[["stew"],"1F372",5],[["horse_racing"],"1F3C7",3],[["euro"],"1F4B6",6],[["hushed"],"1F62F",1],[["speedboat"],"1F6A4",4],[["squid"],"1F991",2],[["fish_cake"],"1F365",5],[["octopus"],"1F419",2],[["pound"],"1F4B7",6],[["frowning"],"1F626",1],[["passenger_ship"],"1F6F3",4],[["ferry"],"26F4",4],[["sushi"],"1F363",5],[["moneybag"],"1F4B0",6],[["anguished"],"1F627",1],[["bicyclist"],"1F6B4",3],[["shrimp"],"1F990",2],[["bento"],"1F371",5],[["tropical_fish"],"1F420",2],[["credit_card"],"1F4B3",6],[["open_mouth"],"1F62E",1],[["ship"],"1F6A2",4],[["anchor"],"2693",4],[["curry"],"1F35B",5],[["fish"],"1F41F",2],[["gem"],"1F48E",6],[["astonished"],"1F632",1],[["mountain_bicyclist"],"1F6B5",3],[["scales"],"2696",6],[["rice"],"1F35A",5],[["running_shirt_with_sash"],"1F3BD",3],[["blowfish"],"1F421",2],[["dizzy_face"],"1F635",1],[["construction"],"1F6A7",4],[["fuelpump"],"26FD",4],[["rice_ball"],"1F359",5],[["sports_medal"],"1F3C5",3],[["dolphin","flipper"],"1F42C",2],[["wrench"],"1F527",6],[["flushed"],"1F633",1],[["rice_cracker"],"1F358",5],[["medal"],"1F396",3],[["hammer"],"1F528",6],[["scream"],"1F631",1],[["busstop"],"1F68F",4],[["shark"],"1F988",2],[["hammer_and_pick"],"2692",6],[["oden"],"1F362",5],[["whale"],"1F433",2],[["fearful"],"1F628",1],[["vertical_traffic_light"],"1F6A6",4],[["first_place_medal"],"1F947",3],[["dango"],"1F361",5],[["whale2"],"1F40B",2],[["cold_sweat"],"1F630",1],[["traffic_light"],"1F6A5",4],[["hammer_and_wrench"],"1F6E0",6],[["second_place_medal"],"1F948",3],[["pick"],"26CF",6],[["shaved_ice"],"1F367",5],[["crocodile"],"1F40A",2],[["world_map"],"1F5FA",4],[["cry"],"1F622",1],[["third_place_medal"],"1F949",3],[["ice_cream"],"1F368",5],[["trophy"],"1F3C6",3],[["leopard"],"1F406",2],[["nut_and_bolt"],"1F529",6],[["moyai"],"1F5FF",4],[["disappointed_relieved"],"1F625",1],[["gear"],"2699",6],[["icecream"],"1F366",5],[["rosette"],"1F3F5",3],[["tiger2"],"1F405",2],[["statue_of_liberty"],"1F5FD",4],[["drooling_face"],"1F924",1],[["chains"],"26D3",6],[["fountain"],"26F2",4],[["cake"],"1F370",5],[["reminder_ribbon"],"1F397",3],[["water_buffalo"],"1F403",2],[["sob"],"1F62D",1],[["birthday"],"1F382",5],[["ticket"],"1F3AB",3],[["ox"],"1F402",2],[["gun"],"1F52B",6],[["tokyo_tower"],"1F5FC",4],[["sweat"],"1F613",1],[["custard"],"1F36E",5],[["admission_tickets"],"1F39F",3],[["european_castle"],"1F3F0",4],[["cow2"],"1F404",2],[["bomb"],"1F4A3",6],[["sleepy"],"1F62A",1],[["lollipop"],"1F36D",5],[["circus_tent"],"1F3AA",3],[["japanese_castle"],"1F3EF",4],[["hocho","knife"],"1F52A",6],[["sleeping"],"1F634",1],[["deer"],"1F98C",2],[["candy"],"1F36C",5],[["stadium"],"1F3DF",4],[["dromedary_camel"],"1F42A",2],[["dagger_knife"],"1F5E1",6],[["face_with_rolling_eyes"],"1F644",1],[["juggling"],"1F939",3],[["crossed_swords"],"2694",6],[["chocolate_bar"],"1F36B",5],[["ferris_wheel"],"1F3A1",4],[["camel"],"1F42B",2],[["thinking_face"],"1F914",1],[["popcorn"],"1F37F",5],[["roller_coaster"],"1F3A2",4],[["elephant"],"1F418",2],[["shield"],"1F6E1",6],[["lying_face"],"1F925",1],[["doughnut"],"1F369",5],[["carousel_horse"],"1F3A0",4],[["performing_arts"],"1F3AD",3],[["grimacing"],"1F62C",1],[["smoking"],"1F6AC",6],[["rhinoceros"],"1F98F",2],[["coffin"],"26B0",6],[["umbrella_on_ground"],"26F1",4],[["cookie"],"1F36A",5],[["art"],"1F3A8",3],[["zipper_mouth_face"],"1F910",1],[["gorilla"],"1F98D",2],[["funeral_urn"],"26B1",6],[["clapper"],"1F3AC",3],[["beach_with_umbrella"],"1F3D6",4],[["racehorse"],"1F40E",2],[["nauseated_face"],"1F922",1],[["glass_of_milk"],"1F95B",5],[["baby_bottle"],"1F37C",5],[["microphone"],"1F3A4",3],[["desert_island"],"1F3DD",4],[["amphora"],"1F3FA",6],[["pig2"],"1F416",2],[["sneezing_face"],"1F927",1],[["coffee"],"2615",5],[["mountain"],"26F0",4],[["headphones"],"1F3A7",3],[["goat"],"1F410",2],[["crystal_ball"],"1F52E",6],[["mask"],"1F637",1],[["tea"],"1F375",5],[["musical_score"],"1F3BC",3],[["snow_capped_mountain"],"1F3D4",4],[["ram"],"1F40F",2],[["prayer_beads"],"1F4FF",6],[["face_with_thermometer"],"1F912",1],[["sake"],"1F376",5],[["musical_keyboard"],"1F3B9",3],[["sheep"],"1F411",2],[["barber"],"1F488",6],[["mount_fuji"],"1F5FB",4],[["face_with_head_bandage"],"1F915",1],[["alembic"],"2697",6],[["volcano"],"1F30B",4],[["beer"],"1F37A",5],[["dog2"],"1F415",2],[["smiling_imp"],"1F608",1],[["drum_with_drumsticks"],"1F941",3],[["beers"],"1F37B",5],[["saxophone"],"1F3B7",3],[["desert"],"1F3DC",4],[["poodle"],"1F429",2],[["imp"],"1F47F",1],[["telescope"],"1F52D",6],[["trumpet"],"1F3BA",3],[["camping"],"1F3D5",4],[["cat2"],"1F408",2],[["japanese_ogre"],"1F479",1],[["microscope"],"1F52C",6],[["clinking_glasses"],"1F942",5],[["tent"],"26FA",4],[["wine_glass"],"1F377",5],[["guitar"],"1F3B8",3],[["rooster"],"1F413",2],[["japanese_goblin"],"1F47A",1],[["hole"],"1F573",6],[["violin"],"1F3BB",3],[["pill"],"1F48A",6],[["hankey","poop","shit"],"1F4A9",1],[["railway_track"],"1F6E4",4],[["tumbler_glass"],"1F943",5],[["turkey"],"1F983",2],[["cocktail"],"1F378",5],[["game_die"],"1F3B2",3],[["ghost"],"1F47B",1],[["syringe"],"1F489",6],[["dove_of_peace"],"1F54A",2],[["motorway"],"1F6E3",4],[["thermometer"],"1F321",6],[["tropical_drink"],"1F379",5],[["dart"],"1F3AF",3],[["building_construction"],"1F3D7",4],[["rabbit2"],"1F407",2],[["skull"],"1F480",1],[["skull_and_crossbones"],"2620",1],[["champagne"],"1F37E",5],[["bowling"],"1F3B3",3],[["factory"],"1F3ED",4],[["mouse2"],"1F401",2],[["toilet"],"1F6BD",6],[["video_game"],"1F3AE",3],[["house"],"1F3E0",4],[["rat"],"1F400",2],[["alien"],"1F47D",1],[["potable_water"],"1F6B0",6],[["spoon"],"1F944",5],[["fork_and_knife"],"1F374",5],[["slot_machine"],"1F3B0",3],[["house_with_garden"],"1F3E1",4],[["chipmunk"],"1F43F",2],[["space_invader"],"1F47E",1],[["shower"],"1F6BF",6],[["knife_fork_plate"],"1F37D",5],[["house_buildings"],"1F3D8",4],[["feet","paw_prints"],"1F43E",2],[["bathtub"],"1F6C1",6],[["robot_face"],"1F916",1],[["jack_o_lantern"],"1F383",1],[["derelict_house_building"],"1F3DA",4],[["dragon"],"1F409",2],[["bath"],"1F6C0",6],[["office"],"1F3E2",4],[["dragon_face"],"1F432",2],[["smiley_cat"],"1F63A",1],[["bellhop_bell"],"1F6CE",6],[["cactus"],"1F335",2],[["department_store"],"1F3EC",4],[["key"],"1F511",6],[["smile_cat"],"1F638",1],[["christmas_tree"],"1F384",2],[["post_office"],"1F3E3",4],[["old_key"],"1F5DD",6],[["joy_cat"],"1F639",1],[["evergreen_tree"],"1F332",2],[["european_post_office"],"1F3E4",4],[["heart_eyes_cat"],"1F63B",1],[["door"],"1F6AA",6],[["deciduous_tree"],"1F333",2],[["hospital"],"1F3E5",4],[["smirk_cat"],"1F63C",1],[["couch_and_lamp"],"1F6CB",6],[["palm_tree"],"1F334",2],[["bank"],"1F3E6",4],[["kissing_cat"],"1F63D",1],[["bed"],"1F6CF",6],[["seedling"],"1F331",2],[["hotel"],"1F3E8",4],[["scream_cat"],"1F640",1],[["sleeping_accommodation"],"1F6CC",6],[["herb"],"1F33F",2],[["convenience_store"],"1F3EA",4],[["frame_with_picture"],"1F5BC",6],[["crying_cat_face"],"1F63F",1],[["shamrock"],"2618",2],[["school"],"1F3EB",4],[["pouting_cat"],"1F63E",1],[["shopping_bags"],"1F6CD",6],[["four_leaf_clover"],"1F340",2],[["love_hotel"],"1F3E9",4],[["open_hands"],"1F450",1],[["shopping_trolley"],"1F6D2",6],[["gift"],"1F381",6],[["bamboo"],"1F38D",2],[["wedding"],"1F492",4],[["raised_hands"],"1F64C",1],[["balloon"],"1F388",6],[["tanabata_tree"],"1F38B",2],[["classical_building"],"1F3DB",4],[["clap"],"1F44F",1],[["church"],"26EA",4],[["leaves"],"1F343",2],[["flags"],"1F38F",6],[["pray"],"1F64F",1],[["fallen_leaf"],"1F342",2],[["ribbon"],"1F380",6],[["mosque"],"1F54C",4],[["handshake"],"1F91D",1],[["maple_leaf"],"1F341",2],[["confetti_ball"],"1F38A",6],[["+1","thumbsup"],"1F44D",1],[["synagogue"],"1F54D",4],[["mushroom"],"1F344",2],[["tada"],"1F389",6],[["-1","thumbsdown"],"1F44E",1],[["kaaba"],"1F54B",4],[["shinto_shrine"],"26E9",4],[["ear_of_rice"],"1F33E",2],[["dolls"],"1F38E",6],[["facepunch","punch"],"1F44A",1],[["fist"],"270A",1],[["izakaya_lantern","lantern"],"1F3EE",6],[["bouquet"],"1F490",2],[["japan"],"1F5FE",4],[["tulip"],"1F337",2],[["wind_chime"],"1F390",6],[["rice_scene"],"1F391",4],[["left-facing_fist"],"1F91B",1],[["email","envelope"],"2709",6],[["rose"],"1F339",2],[["national_park"],"1F3DE",4],[["right-facing_fist"],"1F91C",1],[["sunrise"],"1F305",4],[["envelope_with_arrow"],"1F4E9",6],[["hand_with_index_and_middle_fingers_crossed"],"1F91E",1],[["wilted_flower"],"1F940",2],[["v"],"270C",1],[["sunrise_over_mountains"],"1F304",4],[["sunflower"],"1F33B",2],[["incoming_envelope"],"1F4E8",6],[["stars"],"1F320",4],[["blossom"],"1F33C",2],[["e-mail"],"1F4E7",6],[["the_horns","sign_of_the_horns"],"1F918",1],[["cherry_blossom"],"1F338",2],[["sparkler"],"1F387",4],[["ok_hand"],"1F44C",1],[["love_letter"],"1F48C",6],[["hibiscus"],"1F33A",2],[["fireworks"],"1F386",4],[["point_left"],"1F448",1],[["inbox_tray"],"1F4E5",6],[["city_sunrise"],"1F307",4],[["earth_americas"],"1F30E",2],[["point_right"],"1F449",1],[["outbox_tray"],"1F4E4",6],[["city_sunset"],"1F306",4],[["earth_africa"],"1F30D",2],[["point_up_2"],"1F446",1],[["package"],"1F4E6",6],[["earth_asia"],"1F30F",2],[["cityscape"],"1F3D9",4],[["label"],"1F3F7",6],[["point_down"],"1F447",1],[["point_up"],"261D",1],[["night_with_stars"],"1F303",4],[["full_moon"],"1F315",2],[["mailbox_closed"],"1F4EA",6],[["hand","raised_hand"],"270B",1],[["milky_way"],"1F30C",4],[["waning_gibbous_moon"],"1F316",2],[["mailbox"],"1F4EB",6],[["bridge_at_night"],"1F309",4],[["last_quarter_moon"],"1F317",2],[["mailbox_with_mail"],"1F4EC",6],[["raised_back_of_hand"],"1F91A",1],[["foggy"],"1F301",4],[["waning_crescent_moon"],"1F318",2],[["mailbox_with_no_mail"],"1F4ED",6],[["raised_hand_with_fingers_splayed"],"1F590",1],[["new_moon"],"1F311",2],[["postbox"],"1F4EE",6],[["spock-hand"],"1F596",1],[["waxing_crescent_moon"],"1F312",2],[["wave"],"1F44B",1],[["postal_horn"],"1F4EF",6],[["first_quarter_moon"],"1F313",2],[["scroll"],"1F4DC",6],[["call_me_hand"],"1F919",1],[["moon","waxing_gibbous_moon"],"1F314",2],[["muscle"],"1F4AA",1],[["page_with_curl"],"1F4C3",6],[["new_moon_with_face"],"1F31A",2],[["page_facing_up"],"1F4C4",6],[["middle_finger","reversed_hand_with_middle_finger_extended"],"1F595",1],[["writing_hand"],"270D",1],[["full_moon_with_face"],"1F31D",2],[["bookmark_tabs"],"1F4D1",6],[["sun_with_face"],"1F31E",2],[["bar_chart"],"1F4CA",6],[["selfie"],"1F933",1],[["first_quarter_moon_with_face"],"1F31B",2],[["nail_care"],"1F485",1],[["chart_with_upwards_trend"],"1F4C8",6],[["last_quarter_moon_with_face"],"1F31C",2],[["ring"],"1F48D",1],[["chart_with_downwards_trend"],"1F4C9",6],[["crescent_moon"],"1F319",2],[["lipstick"],"1F484",1],[["spiral_note_pad"],"1F5D2",6],[["kiss"],"1F48B",1],[["dizzy"],"1F4AB",2],[["spiral_calendar_pad"],"1F5D3",6],[["star"],"2B50",2],[["lips"],"1F444",1],[["calendar"],"1F4C6",6],[["star2"],"1F31F",2],[["tongue"],"1F445",1],[["date"],"1F4C5",6],[["sparkles"],"2728",2],[["ear"],"1F442",1],[["card_index"],"1F4C7",6],[["zap"],"26A1",2],[["nose"],"1F443",1],[["card_file_box"],"1F5C3",6],[["footprints"],"1F463",1],[["fire"],"1F525",2],[["ballot_box_with_ballot"],"1F5F3",6],[["eye"],"1F441",1],[["boom","collision"],"1F4A5",2],[["file_cabinet"],"1F5C4",6],[["comet"],"2604",2],[["eyes"],"1F440",1],[["clipboard"],"1F4CB",6],[["sunny"],"2600",2],[["file_folder"],"1F4C1",6],[["speaking_head_in_silhouette"],"1F5E3",1],[["mostly_sunny","sun_small_cloud"],"1F324",2],[["bust_in_silhouette"],"1F464",1],[["open_file_folder"],"1F4C2",6],[["partly_sunny"],"26C5",2],[["busts_in_silhouette"],"1F465",1],[["card_index_dividers"],"1F5C2",6],[["barely_sunny","sun_behind_cloud"],"1F325",2],[["baby"],"1F476",1],[["rolled_up_newspaper"],"1F5DE",6],[["partly_sunny_rain","sun_behind_rain_cloud"],"1F326",2],[["boy"],"1F466",1],[["newspaper"],"1F4F0",6],[["rainbow"],"1F308",2],[["girl"],"1F467",1],[["notebook"],"1F4D3",6],[["cloud"],"2601",2],[["man"],"1F468",1],[["notebook_with_decorative_cover"],"1F4D4",6],[["rain_cloud"],"1F327",2],[["woman"],"1F469",1],[["ledger"],"1F4D2",6],[["thunder_cloud_and_rain"],"26C8",2],[["closed_book"],"1F4D5",6],[["lightning","lightning_cloud"],"1F329",2],[["person_with_blond_hair"],"1F471",1],[["green_book"],"1F4D7",6],[["snow_cloud"],"1F328",2],[["older_man"],"1F474",1],[["blue_book"],"1F4D8",6],[["snowman"],"2603",2],[["older_woman"],"1F475",1],[["orange_book"],"1F4D9",6],[["snowman_without_snow"],"26C4",2],[["man_with_gua_pi_mao"],"1F472",1],[["books"],"1F4DA",6],[["snowflake"],"2744",2],[["book","open_book"],"1F4D6",6],[["wind_blowing_face"],"1F32C",2],[["man_with_turban"],"1F473",1],[["bookmark"],"1F516",6],[["dash"],"1F4A8",2],[["link"],"1F517",6],[["tornado","tornado_cloud"],"1F32A",2],[["cop"],"1F46E",1],[["paperclip"],"1F4CE",6],[["fog"],"1F32B",2],[["linked_paperclips"],"1F587",6],[["ocean"],"1F30A",2],[["construction_worker"],"1F477",1],[["triangular_ruler"],"1F4D0",6],[["droplet"],"1F4A7",2],[["straight_ruler"],"1F4CF",6],[["guardsman"],"1F482",1],[["sweat_drops"],"1F4A6",2],[["pushpin"],"1F4CC",6],[["umbrella_with_rain_drops"],"2614",2],[["round_pushpin"],"1F4CD",6],[["scissors"],"2702",6],[["sleuth_or_spy"],"1F575",1],[["lower_left_ballpoint_pen"],"1F58A",6],[["lower_left_fountain_pen"],"1F58B",6],[["black_nib"],"2712",6],[["lower_left_paintbrush"],"1F58C",6],[["lower_left_crayon"],"1F58D",6],[["memo","pencil"],"1F4DD",6],[["pencil2"],"270F",6],[["mag"],"1F50D",6],[["mag_right"],"1F50E",6],[["lock_with_ink_pen"],"1F50F",6],[["closed_lock_with_key"],"1F510",6],[["lock"],"1F512",6],[["unlock"],"1F513",6],[["mother_christmas"],"1F936",1],[["santa"],"1F385",1],[["princess"],"1F478",1],[["prince"],"1F934",1],[["bride_with_veil"],"1F470",1],[["man_in_tuxedo"],"1F935",1],[["angel"],"1F47C",1],[["pregnant_woman"],"1F930",1],[["bow"],"1F647",1],[["information_desk_person"],"1F481",1],[["no_good"],"1F645",1],[["ok_woman"],"1F646",1],[["raising_hand"],"1F64B",1],[["face_palm"],"1F926",1],[["shrug"],"1F937",1],[["person_with_pouting_face"],"1F64E",1],[["person_frowning"],"1F64D",1],[["haircut"],"1F487",1],[["massage"],"1F486",1],[["man_in_business_suit_levitating"],"1F574",1],[["dancer"],"1F483",1],[["man_dancing"],"1F57A",1],[["dancers"],"1F46F",1],[["walking"],"1F6B6",1],[["runner","running"],"1F3C3",1],[["couple","man_and_woman_holding_hands"],"1F46B",1],[["two_women_holding_hands"],"1F46D",1],[["two_men_holding_hands"],"1F46C",1],[["family","man-woman-boy"],"1F46A",1],[["hearts"],"2665",7],[["womans_clothes"],"1F45A",1],[["shirt","tshirt"],"1F455",1],[["jeans"],"1F456",1],[["necktie"],"1F454",1],[["dress"],"1F457",1],[["bikini"],"1F459",1],[["kimono"],"1F458",1],[["high_heel"],"1F460",1],[["sandal"],"1F461",1],[["boot"],"1F462",1],[["mans_shoe","shoe"],"1F45E",1],[["athletic_shoe"],"1F45F",1],[["womans_hat"],"1F452",1],[["tophat"],"1F3A9",1],[["mortar_board"],"1F393",1],[["crown"],"1F451",1],[["helmet_with_white_cross"],"26D1",1],[["school_satchel"],"1F392",1],[["pouch"],"1F45D",1],[["purse"],"1F45B",1],[["handbag"],"1F45C",1],[["briefcase"],"1F4BC",1],[["eyeglasses"],"1F453",1],[["dark_sunglasses"],"1F576",1],[["closed_umbrella"],"1F302",1],[["umbrella"],"2602",1]],Ni=[[["dollar_sign"],"24",1],[["cent_sign"],"A2",1],[["euro_sign"],"20AC",1],[["pound_sign"],"A3",1],[["yen_sign"],"A5",1],[["currency_sign"],"A4",1],[["euro_currency_sign"],"20A0",1],[["colon_sign"],"20A1",1],[["cruzeiro_sign"],"20A2",1],[["french_franc_sign"],"20A3",1],[["lira_sign"],"20A4",1],[["mill_sign"],"20A5",1],[["naira_sign"],"20A6",1],[["peseta_sign"],"20A7",1],[["rupee_sign"],"20A8",1],[["won_sign"],"20A9",1],[["new_sheqel_sign"],"20AA",1],[["dong_sign"],"20AB",1],[["kip_sign"],"20AD",1],[["tugrik_sign"],"20AE",1],[["drachma_sign"],"20AF",1],[["german_penny_symbol"],"20B0",1],[["peso_sign"],"20B1",1],[["guarani_sign"],"20B2",1],[["austral_sign"],"20B3",1],[["hryvnia_sign"],"20B4",1],[["cedi_sign"],"20B5",1],[["livre_tournois_sign"],"20B6",1],[["spesmilo_sign"],"20B7",1],[["tenge_sign"],"20B8",1],[["indian_rupee_sign"],"20B9",1],[["turkish_lira_sign"],"20BA",1],[["nordic_mark_sign"],"20BB",1],[["manat_sign"],"20BC",1],[["ruble_sign"],"20BD",1],[["yen_character"],"5186",1],[["yuan_character"],"5143",1],[["yuan_character,_in_hong_kong_and_taiwan"],"5713",1],[["yen/yuan_character_variant_one"],"5706",1],[["copyright_sign"],"A9",2],[["registered_sign"],"AE",2],[["trade_mark_sign"],"2122",2],[["per_mille_sign"],"2030",2],[["micro_sign"],"B5",2],[["middle_dot"],"B7",2],[["bullet"],"2022",2],[["three_dot_leader"],"2026",2],[["minutes","feet"],"2032",2],[["seconds","inches"],"2033",2],[["section_sign"],"A7",2],[["paragraph_sign"],"B6",2],[["sharp_s","ess_zed"],"DF",2],[["left-pointing_double_angle_quotation_mark"],"AB",3],[["single_left-pointing_angle_quotation_mark"],"2039",3],[["right-pointing_double_angle_quotation_mark"],"BB",3],[["single_right-pointing_angle_quotation_mark"],"203A",3],[["double_low-9_quotation_mark"],"201E",3],[["left_double_quotation_mark"],"201C",3],[["double_high-reversed-9_quotation_mark"],"201F",3],[["right_double_quotation_mark"],"201D",3],[["right_single_quotation_mark"],"2019",3],[["heavy_double_turned_comma_quotation_mark_ornament"],"275D",3],[["heavy_double_comma_quotation_mark_ornament"],"275E",3],[["heavy_left-pointing_angle_quotation_mark_ornament"],"276E",3],[["heavy_right-pointing_angle_quotation_mark_ornament"],"276F",3],[["double_low-reversed-9_quotation_mark"],"2E42",3],[["reversed_double_prime_quotation_mark"],"301D",3],[["double_prime_quotation_mark"],"301E",3],[["low_double_prime_quotation_mark"],"301F",3],[["fullwidth_quotation_mark"],"FF02",3],[["single_low-9_quotation_mark"],"201A",3],[["left_single_quotation_mark"],"2018",3],[["single_high-reversed-9_quotation_mark"],"201B",3],[["heavy_single_turned_comma_quotation_mark_ornament"],"275B",3],[["heavy_single_comma_quotation_mark_ornament"],"275C",3],[["heavy_low_single_comma_quotation_mark_ornament"],"275F",3],[["less_than_sign"],"3C",4],[["greater_than_sign"],"3E",4],[["less_than_or_equal_to"],"2264",4],[["greater_than_or_equal_to"],"2265",4],[["en_dash"],"2013",4],[["em_dash"],"2014",4],[["macron"],"AF",4],[["overline"],"203E",4],[["currency_sign"],"A4",4],[["broken_bar"],"A6",4],[["diaeresis"],"A8",4],[["inverted_exclamation_mark"],"A1",4],[["turned_question_mark"],"BF",4],[["circumflex_accent"],"2C6",4],[["small_tilde"],"2DC",4],[["degree_sign"],"B0",4],[["minus_sign"],"2212",4],[["plus_minus_sign"],"B1",4],[["division_sign"],"F7",4],[["fraction_slash"],"2044",4],[["multiplication_sign"],"D7",4],[["superscript_one"],"B9",4],[["superscript_two"],"B2",4],[["superscript_three"],"B3",4],[["fraction_one_quarter"],"BC",4],[["fraction_one_half"],"BD",4],[["fraction_three_quarters"],"BE",4],[["fraction_one_seventh"],"2150",4],[["fraction_one_ninth"],"2151",4],[["fraction_one_tenth"],"2152",4],[["fraction_one_third"],"2153",4],[["fraction_two_thirds"],"2154",4],[["fraction_one_fifth"],"2155",4],[["fraction_two_fifths"],"2156",4],[["fraction_three_fifths"],"2157",4],[["fraction_four_fifths"],"2158",4],[["fraction_one_sixth"],"2159",4],[["fraction_five_sixths"],"215A",4],[["fraction_one_eighth"],"215B",4],[["fraction_three_eighths"],"215C",4],[["fraction_five_eighths"],"215D",4],[["fraction_seven_eighths"],"215E",4],[["fraction_numerator_one"],"215F",4],[["fraction_zero_thirds"],"2189",4],[["roman_numeral_one"],"2160",4],[["roman_numeral_two"],"2161",4],[["roman_numeral_three"],"2162",4],[["roman_numeral_four"],"2163",4],[["roman_numeral_five"],"2164",4],[["roman_numeral_six"],"2165",4],[["roman_numeral_seven"],"2166",4],[["roman_numeral_eight"],"2167",4],[["roman_numeral_nine"],"2168",4],[["roman_numeral_ten"],"2169",4],[["roman_numeral_eleven"],"216A",4],[["roman_numeral_twelve"],"216B",4],[["function","florin"],"192",4],[["integral"],"222B",4],[["n_ary_summation"],"2211",4],[["infinity"],"221E",4],[["square_root"],"221A",4],[["similar_to"],"223C",4],[["approximately_equal_to"],"2245",4],[["almost_equal_to"],"2248",4],[["not_equal_to"],"2260",4],[["identical_to"],"2261",4],[["element_of"],"2208",4],[["not_an_element_of"],"2209",4],[["contains_as_member"],"220B",4],[["n_ary_product"],"220F",4],[["logical_and"],"2227",4],[["logical_or"],"2228",4],[["not_sign"],"AC",4],[["intersection"],"2229",4],[["union"],"222A",4],[["partial_differential"],"2202",4],[["for_all"],"2200",4],[["there_exists"],"2203",4],[["diameter"],"2205",4],[["backward_difference"],"2207",4],[["asterisk_operator"],"2217",4],[["proportional_to"],"221D",4],[["angle"],"2220",4],[["A_grave"],"C0",5],[["A_acute"],"C1",5],[["A_circumflex"],"C2",5],[["A_tilde"],"C3",5],[["A_diaeresis"],"C4",5],[["A_ring_above"],"C5",5],[["A_macron"],"100",5],[["ligature_AE"],"C6",5],[["C_cedilla"],"C7",5],[["E_grave"],"C8",5],[["E_acute"],"C9",5],[["E_circumflex"],"CA",5],[["E_diaeresis"],"CB",5],[["E_macron"],"112",5],[["I_grave"],"CC",5],[["I_acute"],"CD",5],[["I_circumflex"],"CE",5],[["I_diaeresis"],"CF",5],[["I_macron"],"12A",5],[["ETH"],"D0",5],[["N_tilde"],"D1",5],[["O_grave"],"D2",5],[["O_acute"],"D3",5],[["O_circumflex"],"D4",5],[["O_tilde"],"D5",5],[["O_diaeresis"],"D6",5],[["O_slash"],"D8",5],[["O_macron"],"14C",5],[["ligature_OE"],"152",5],[["S_caron"],"160",5],[["U_grave"],"D9",5],[["U_acute"],"DA",5],[["U_circumflex"],"DB",5],[["U_diaeresis"],"DC",5],[["U_macron"],"16A",5],[["Y_acute"],"DD",5],[["Y_diaeresis"],"178",5],[["Y_macron"],"232",5],[["THORN"],"DE",5],[["a_grave"],"E0",5],[["a_acute"],"E1",5],[["a_circumflex"],"E2",5],[["a_tilde"],"E3",5],[["a_diaeresis"],"E4",5],[["a_ring_above"],"E5",5],[["a_macron"],"101",5],[["ligature_ae"],"E6",5],[["c_cedilla"],"E7",5],[["e_grave"],"E8",5],[["e_acute"],"E9",5],[["e_circumflex"],"EA",5],[["e_diaeresis"],"EB",5],[["e_macron"],"113",5],[["i_grave"],"EC",5],[["i_acute"],"ED",5],[["i_circumflex"],"EE",5],[["i_diaeresis"],"EF",5],[["i_macron"],"12B",5],[["eth"],"F0",5],[["n_tilde"],"F1",5],[["o_grave"],"F2",5],[["o_acute"],"F3",5],[["o_circumflex"],"F4",5],[["o_tilde"],"F5",5],[["o_diaeresis"],"F6",5],[["o_slash"],"F8",5],[["o_macron"],"14D",5],[["ligature_oe"],"153",5],[["s_caron"],"161",5],[["u_grave"],"F9",5],[["u_acute"],"FA",5],[["u_circumflex"],"FB",5],[["u_diaeresis"],"FC",5],[["u_macron"],"16B",5],[["y_acute"],"FD",5],[["thorn"],"FE",5],[["y_diaeresis"],"FF",5],[["y_macron"],"233",5],[["Alpha"],"391",5],[["Beta"],"392",5],[["Gamma"],"393",5],[["Delta"],"394",5],[["Epsilon"],"395",5],[["Zeta"],"396",5],[["Eta"],"397",5],[["Theta"],"398",5],[["Iota"],"399",5],[["Kappa"],"39A",5],[["Lambda"],"39B",5],[["Mu"],"39C",5],[["Nu"],"39D",5],[["Xi"],"39E",5],[["Omicron"],"39F",5],[["Pi"],"3A0",5],[["Rho"],"3A1",5],[["Sigma"],"3A3",5],[["Tau"],"3A4",5],[["Upsilon"],"3A5",5],[["Phi"],"3A6",5],[["Chi"],"3A7",5],[["Psi"],"3A8",5],[["Omega"],"3A9",5],[["alpha"],"3B1",5],[["beta"],"3B2",5],[["gamma"],"3B3",5],[["delta"],"3B4",5],[["epsilon"],"3B5",5],[["zeta"],"3B6",5],[["eta"],"3B7",5],[["theta"],"3B8",5],[["iota"],"3B9",5],[["kappa"],"3BA",5],[["lambda"],"3BB",5],[["mu"],"3BC",5],[["nu"],"3BD",5],[["xi"],"3BE",5],[["omicron"],"3BF",5],[["pi"],"3C0",5],[["rho"],"3C1",5],[["final_sigma"],"3C2",5],[["sigma"],"3C3",5],[["tau"],"3C4",5],[["upsilon"],"3C5",5],[["phi"],"3C6",5],[["chi"],"3C7",5],[["psi"],"3C8",5],[["omega"],"3C9",5],[["leftwards_arrow"],"2190",6],[["upwards_arrow"],"2191",6],[["rightwards_arrow"],"2192",6],[["downwards_arrow"],"2193",6],[["left_right_arrow"],"2194",6],[["up_down_arrow"],"2195",6],[["north_west_arrow"],"2196",6],[["north_east_arrow"],"2197",6],[["south_east_arrow"],"2198",6],[["south_west_arrow"],"2199",6],[["leftwards_arrow_with_stroke"],"219A",6],[["rightwards_arrow_with_stroke"],"219B",6],[["leftwards_wave_arrow"],"219C",6],[["rightwards_wave_arrow"],"219D",6],[["leftwards_two_headed_arrow"],"219E",6],[["upwards_two_headed_arrow"],"219F",6],[["rightwards_two_headed_arrow"],"21A0",6],[["downwards_two_headed_arrow"],"21A1",6],[["leftwards_arrow_with_tail"],"21A2",6],[["rightwards_arrow_with_tail"],"21A3",6],[["leftwards_arrow_from_bar"],"21A4",6],[["upwards_arrow_from_bar"],"21A5",6],[["rightwards_arrow_from_bar"],"21A6",6],[["downwards_arrow_from_bar"],"21A7",6],[["up_down_arrow_with_base"],"21A8",6],[["leftwards_arrow_with_hook"],"21A9",6],[["rightwards_arrow_with_hook"],"21AA",6],[["leftwards_arrow_with_loop"],"21AB",6],[["rightwards_arrow_with_loop"],"21AC",6],[["left_right_wave_arrow"],"21AD",6],[["left_right_arrow_with_stroke"],"21AE",6],[["downwards_zigzag_arrow"],"21AF",6],[["upwards_arrow_with_tip_leftwards"],"21B0",6],[["upwards_arrow_with_tip_rightwards"],"21B1",6],[["downwards_arrow_with_tip_leftwards"],"21B2",6],[["downwards_arrow_with_tip_rightwards"],"21B3",6],[["rightwards_arrow_with_corner_downwards"],"21B4",6],[["downwards_arrow_with_corner_leftwards"],"21B5",6],[["anticlockwise_top_semicircle_arrow"],"21B6",6],[["clockwise_top_semicircle_arrow"],"21B7",6],[["north_west_arrow_to_long_bar"],"21B8",6],[["leftwards_arrow_to_bar_over_rightwards_arrow_to_bar"],"21B9",6],[["anticlockwise_open_circle_arrow"],"21BA",6],[["clockwise_open_circle_arrow"],"21BB",6],[["leftwards_harpoon_with_barb_upwards"],"21BC",6],[["leftwards_harpoon_with_barb_downwards"],"21BD",6],[["upwards_harpoon_with_barb_rightwards"],"21BE",6],[["upwards_harpoon_with_barb_leftwards"],"21BF",6],[["rightwards_harpoon_with_barb_upwards"],"21C0",6],[["rightwards_harpoon_with_barb_downwards"],"21C1",6],[["downwards_harpoon_with_barb_rightwards"],"21C2",6],[["downwards_harpoon_with_barb_leftwards"],"21C3",6],[["rightwards_arrow_over_leftwards_arrow"],"21C4",6],[["upwards_arrow_leftwards_of_downwards_arrow"],"21C5",6],[["leftwards_arrow_over_rightwards_arrow"],"21C6",6],[["leftwards_paired_arrows"],"21C7",6],[["upwards_paired_arrows"],"21C8",6],[["rightwards_paired_arrows"],"21C9",6],[["downwards_paired_arrows"],"21CA",6],[["leftwards_harpoon_over_rightwards_harpoon"],"21CB",6],[["rightwards_harpoon_over_leftwards_harpoon"],"21CC",6],[["leftwards_double_arrow_with_stroke"],"21CD",6],[["left_right_double_arrow_with_stroke"],"21CE",6],[["rightwards_double_arrow_with_stroke"],"21CF",6],[["leftwards_double_arrow"],"21D0",6],[["upwards_double_arrow"],"21D1",6],[["rightwards_double_arrow"],"21D2",6],[["downwards_double_arrow"],"21D3",6],[["left_right_double_arrow"],"21D4",6],[["up_down_double_arrow"],"21D5",6],[["north_west_double_arrow"],"21D6",6],[["north_east_double_arrow"],"21D7",6],[["south_east_double_arrow"],"21D8",6],[["south_west_double_arrow"],"21D9",6],[["leftwards_triple_arrow"],"21DA",6],[["rightwards_triple_arrow"],"21DB",6],[["leftwards_squiggle_arrow"],"21DC",6],[["rightwards_squiggle_arrow"],"21DD",6],[["upwards_arrow_with_double_stroke"],"21DE",6],[["downwards_arrow_with_double_stroke"],"21DF",6],[["leftwards_dashed_arrow"],"21E0",6],[["upwards_dashed_arrow"],"21E1",6],[["rightwards_dashed_arrow"],"21E2",6],[["downwards_dashed_arrow"],"21E3",6],[["leftwards_arrow_to_bar"],"21E4",6],[["rightwards_arrow_to_bar"],"21E5",6],[["leftwards_white_arrow"],"21E6",6],[["upwards_white_arrow"],"21E7",6],[["rightwards_white_arrow"],"21E8",6],[["downwards_white_arrow"],"21E9",6],[["upwards_white_arrow_from_bar"],"21EA",6],[["upwards_white_arrow_on_pedestal"],"21EB",6],[["upwards_white_arrow_on_pedestal_with_horizontal_bar"],"21EC",6],[["upwards_white_arrow_on_pedestal_with_vertical_bar"],"21ED",6],[["upwards_white_double_arrow"],"21EE",6],[["upwards_white_double_arrow_on_pedestal"],"21EF",6],[["rightwards_white_arrow_from_wall"],"21F0",6],[["north_west_arrow_to_corner"],"21F1",6],[["south_east_arrow_to_corner"],"21F2",6],[["up_down_white_arrow"],"21F3",6],[["right_arrow_with_small_circle"],"21F4",6],[["downwards_arrow_leftwards_of_upwards_arrow"],"21F5",6],[["three_rightwards_arrows"],"21F6",6],[["leftwards_arrow_with_vertical_stroke"],"21F7",6],[["rightwards_arrow_with_vertical_stroke"],"21F8",6],[["left_right_arrow_with_vertical_stroke"],"21F9",6],[["leftwards_arrow_with_double_vertical_stroke"],"21FA",6],[["rightwards_arrow_with_double_vertical_stroke"],"21FB",6],[["left_right_arrow_with_double_vertical_stroke"],"21FC",6],[["leftwards_open-headed_arrow"],"21FD",6],[["rightwards_open-headed_arrow"],"21FE",6],[["left_right_open-headed_arrow"],"21FF",6]],Oi=function(){function t(t){this.app=t,this.data={emojis:Ri,characters:Ni}}return t.prototype.getSymbols=function(t){if(this[t])return this[t];var e=this[t]=new webix.DataCollection({}),i=this.prepareData("emojis"==t?Ri:Ni);return e.parse(i),e},t.prototype.prepareData=function(t){return t.map((function(t){return{id:webix.uid(),name:t[0][0],unified:t[1],category:t[2],names:t[0]}}))},t.prototype.getCategories=function(t){return this._categories||(this._categories={emojis:[{id:"basic",icon:"rti-star-outline",name:"Basic"},{id:1,icon:"rti-emoticon-outline",name:"Smileys & People"},{id:2,icon:"rti-cat",name:"Animals & Nature"},{id:3,icon:"rti-soccer",name:"Activity"},{id:4,icon:"rti-earth",name:"Travel & Places"},{id:5,icon:"rti-food-fork-drink",name:"Food & Drink"},{id:7,icon:"rti-heart-outline",name:"Symbols"},{id:6,icon:"rti-bullhorn-outline",name:"Objects"}],characters:[{id:"basic",icon:"rti-star-outline",name:"Basic"},{id:1,icon:"rti-currency",name:"Currency"},{id:2,icon:"rti-text",name:"Text"},{id:3,icon:"rti-quote",name:"Quotations"},{id:4,icon:"rti-math",name:"Mathematical"},{id:5,icon:"rti-latin",name:"Extended Latin"},{id:6,icon:"rti-arrow",name:"Arrows"}]}),this._categories[t]},t.prototype.getBasicSymbols=function(t){var e=this;if(!this._basic){var i={emojis:["+1","-1","smile","frowning","tada","heart"],characters:["dollar_sign","copyright_sign","bullet","function","integral","n_ary_summation"]};this._basic={};var o=function(t){r._basic[t]=new webix.DataCollection({});var o=[];i[t].forEach((function(i){var r=e.findByName(t,i);r&&o.push(r)})),r._basic[t].parse(r.prepareData(o))},r=this;for(var n in i)o(n)}return this._basic[t]},t.prototype.shortNameToTitle=function(t){return(t=t.split("_").join(" "))[0].toUpperCase()+t.substring(1).toLowerCase()},t.prototype.findName=function(t,e){return e?t.names.find((function(t){return-1!=t.toLowerCase().indexOf(e)})):t.name},t.prototype.findByName=function(t,e){return this.data[t].find((function(t){return-1!=t[0].indexOf(e)}))},t}(),Li=function(){function t(t){this.app=t,this.importExportUrl=this.getExportImportUrl(),this._=t.getService("locale")._,this.initUploader()}return t.prototype.getExportImportUrl=function(){return"https://docs.webix.com/richtext-export"},t.prototype.initUploader=function(){var t=this;this.uploader=webix.ui({view:"uploader",accept:this.getAcceptedFileTypes(),apiOnly:!0,upload:this.importExportUrl+"/import/docx",inputName:"document",multiple:!1,on:{onFileUpload:function(e){t.app.setValue(e.html)},onFileUploadError:function(t,e){console.log(t,e)},onBeforeFileAdd:function(e){var i="md"===e.type;if(i||"txt"===e.type){var o=new FileReader;return o.readAsText(e.file),o.onload=function(e){var o=e.target.result.replaceAll("\r","");t.app.setValue(o,i?"markdown":"text")},!1}}}})},t.prototype.export=function(t){var e=this,i="md"===t;if(!i&&"txt"!==t){var o=this.importExportUrl+"/export/".concat(t),r=JSON.stringify({html:this.app.getValue()});return webix.ajax().headers({"Content-type":"application/json"}).response("blob").post(o,r).then((function(i){return e.download(i,t)})).catch((function(t){console.log(t.status?t.statusText:"Request unsent")}))}var n=this.app.getValue(i?"markdown":"text"),s=new Blob([n],{type:"text/"+(i?"markdown":"plain")});this.download(s,t)},t.prototype.download=function(t,e){webix.html.download(t,"".concat(this._("Document"),".").concat(e))},t.prototype.getAcceptedFileTypes=function(){return[".docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document",".txt","text/plain",".md","text/markdown"]},t.prototype.import=function(){this.uploader.fileDialog()},t}(),Hi=function(t){function e(e){var i=this,r=e.layoutMode,n=void 0===r?"classic":r,s=e.fullscreen,a=void 0!==s&&s,l=e.menubar,c=void 0!==l&&l,p=e.contextMenu,u=void 0!==p&&p,h=e.toolbar,d=void 0===h||h,_=e.datatype,f=void 0===_?"html":_,g=e.compact,m=W({layoutMode:n,fullscreen:a,menubar:c,contextMenu:u,toolbar:d,datatype:f,activeStyles:{},selectedImage:null,editImage:null,paintMode:{}}),w={router:v,version:"11.3.0",debug:!0,start:"/top",compactWidth:700,params:{state:m,forceCompact:g}};return e.value||(e.value=""),(i=t.call(this,o(o({},w),e))||this)._pendingValueType=f,i.use(L,i.config.locale||{lang:"en",webix:{en:"en-US"}}),i.setService("operations",new(i.dynamic(Pi))(i,m)),i.setService("upload",new(i.dynamic(Ti))(i)),i.setService("backend",new(i.dynamic(Li))(i)),i.setService("symbols",new(i.dynamic(Oi))(i)),z(i),i}return i(e,t),e.prototype.dynamic=function(t){return this.config.override&&this.config.override.get(t)||t},e.prototype.require=function(t,e){return"jet-views"===t?ri[e]:"jet-locales"===t?zi[e]:null},e.prototype.getState=function(){return this.config.params.state},e.prototype.getValue=function(t){void 0===t&&(t=this.getState().datatype);var e=this.getRoot()&&this.getRoot().queryView("rt-editor-area");return e?e.getValue(t):this.config.value},e.prototype.setValue=function(t,e){void 0===e&&(e=this.getState().datatype),this.config.value=t,this._pendingValueType=e,this.callEvent("editor:value",[t,e])},e}(y);webix.protoUI({name:"editor",app:Hi,$init:function(){var t=this;this.name="editor",this.$view.className+=" webix_rte";var e=this.getState();for(var i in e)q(e,this.config,i);this.$app.attachEvent("editor:change",(function(){return t.callEvent("onChange")})),this.$app.attachEvent("menubar:click",(function(e){return t.callEvent("onMenuItemClick",[e])})),this.$app.attachEvent("contextmenu:click",(function(e){return t.callEvent("onContextMenuItemClick",[e])})),webix.UIManager.addHotKey("esc",(function(){e.fullscreen&&(e.fullscreen=!1)}))},getState:function(){return this.$app.getState()},getService:function(t){return this.$app.getService(t)},getValue:function(t){return this.$app.getValue(t)},setValue:function(t,e){return this.$app.setValue(t,e)},destructor:function(){webix.ui.jetapp.prototype.destructor.call(this),this.$app.destructor()}},webix.ui.jetapp);var Mi={Backend:Li,Operations:Pi,Upload:Ti},zi={en:{Undo:"Undo",Redo:"Redo",Print:"Print","Full screen":"Full screen",Style:"Style","Text style":"Text style","Font family":"Font family","Font size":"Font size",Bold:"Bold",Italic:"Italic",Underline:"Underline",Strikethrough:"Strikethrough",Superscript:"Superscript",Subscript:"Subscript","Text color":"Text color","Background color":"Background color","Paint format":"Paint format","Left align":"Left align","Center align":"Center align","Right align":"Right align",Justify:"Justify","Line height":"Line height",Indent:"Indent",Outdent:"Outdent","Insert link":"Insert link","Insert image":"Insert image","Bulleted list":"Bulleted list","Numbered list":"Numbered list","Clear formatting":"Clear formatting",File:"File",New:"New",Import:"Import",Export:"Export",PDF:"PDF",DOCX:"DOCX",MD:"MD",TXT:"TXT","Print...":"Print...",Edit:"Edit",Cut:"Cut",Copy:"Copy","Copy as Markdown":"Copy as Markdown",Paste:"Paste",View:"View",Fullscreen:"Fullscreen","Layout mode":"Layout mode","Classic mode":"Classic mode","Document mode":"Document mode",Insert:"Insert",Link:"Link",Image:"Image",Format:"Format",Text:"Text",Paragraph:"Paragraph",Quote:"Quote","Heading 1":"Heading 1","Heading 2":"Heading 2","Heading 3":"Heading 3","Heading 4":"Heading 4","Heading 5":"Heading 5","Heading 6":"Heading 6",Default:"Default",Align:"Align",Left:"Left",Center:"Center",Right:"Right",Justified:"Justified",Lists:"Lists",Help:"Help",Hotkeys:"Hotkeys","Edit image":"Edit image","Delete image":"Delete image","Image options":"Image options",Width:"Width",Height:"Height","Lock aspect ratio":"Lock aspect ratio",Source:"Source","Alternative description":"Alternative description",Alignment:"Alignment","Select an image to see image options":"Select an image to see image options","Edit link":"Edit link","Copy link":"Copy link",Unlink:"Unlink",Apply:"Apply",Cancel:"Cancel","Enter text to display":"Enter text to display","Paste link":"Paste link","Link copied to clipboard":"Link copied to clipboard","The operation failed! Please check your browser's clipboard permissions.":"The operation failed! Please check your browser's clipboard permissions.","Horizontal line":"Horizontal line",Search:"Search","Smileys & People":"Smileys & People","Animals & Nature":"Animals & Nature",Activity:"Activity","Travel & Places":"Travel & Places","Food & Drink":"Food & Drink",Objects:"Objects","Search results":"Search results",Symbols:"Symbols",Basic:"Basic",Currency:"Currency",Quotations:"Quotations",Mathematical:"Mathematical","Extended Latin":"Extended Latin",Arrows:"Arrows",Emoji:"Emoji","Special characters":"Special characters","Continuous painting":"Continuous painting",Document:"Document","New line":"New line",Action:"Action",Hotkey:"Hotkey","Select all":"Select all"}};t.App=Hi,t.locales=zi,t.services=Mi,t.views=ri}));
//# sourceMappingURL=editor.min.js.map
