{"version":3,"file":"spreadsheet.js","sources":["../node_modules/@xbs/muon/dist/muon.es6.js","../sources/locales/en.js","../sources/locale.js","../sources/views/align.js","../sources/views/border.js","../sources/views/color.js","../sources/operations/undo_group.js","../sources/mathematics/methods.js","../sources/views/date.js","../sources/operations/save.js","../sources/views/dialog.js","../sources/views/form.js","../sources/views/formlate.js","../sources/views/icons.js","../sources/views/list_suggest.js","../sources/helpers/column_names.js","../sources/toolbar/defaults.js","../sources/helpers/array.js","../sources/operations/styles.js","../sources/operations/formats.js","../sources/mathematics/parser.js","../sources/helpers/suggest_pos.js","../sources/operations/types.js","../sources/views/suggest_formula.js","../sources/helpers/highlight.js","../sources/toolbar/structure.js","../sources/views/live_editor.js","../sources/views/separator.js","../sources/views/sheets.js","../sources/views/toggle.js","../sources/views/toolbar_title.js","../sources/toolbar/buttons.js","../sources/toolbar/helpers.js","../sources/views/button.js","../sources/operations/data.js","../sources/views/multicheckbox.js","../sources/views/formlist.js","../sources/views/ui.js","../sources/views/series.js","../sources/views/bar.js","../sources/sheets.js","../sources/operations/resize.js","../sources/operations/spans.js","../sources/operations/print.js","../sources/operations/zoom.js","../sources/views/zoom.js","../sources/editors/date.js","../sources/editors/richselect.js","../sources/toolbar/actions.js","../sources/toolbar/all_elements.js","../sources/toolbar.js","../sources/operations/column_operations.js","../sources/helpers/conditional.js","../sources/operations/conditional_formats.js","../sources/operations/validation.js","../sources/operations/show_cells.js","../sources/operations/lock_cell.js","../sources/table.js","../sources/hotkeys.js","../sources/editor.js","../sources/dialogs/common.js","../sources/mathematics/writer.js","../sources/dialogs/imagecell.js","../sources/dialogs/imagetop.js","../sources/operations/undo.js","../sources/operations/views.js","../sources/chart.js","../sources/dialogs/sparkline.js","../sources/dialogs/ranges.js","../sources/dialogs/dropdown.js","../sources/mathematics/ranges.js","../sources/operations/filter.js","../sources/dialogs/filter.js","../sources/dialogs/format.js","../sources/dialogs/conditional.js","../sources/dialogs/export.js","../sources/dialogs/link.js","../sources/dialogs/print.js","../sources/dialogs/comments.js","../sources/dialogs/sizing.js","../sources/dialogs/validation.js","../sources/dialogs/find.js","../sources/dialogs/index.js","../sources/context.js","../sources/operations/add_row_col.js","../sources/operations/dropdown.js","../sources/operations/clipboard.js","../sources/operations/hide_row_col.js","../sources/operations/selection.js","../sources/helpers/expand_selection.js","../sources/operations/sorting.js","../sources/mathematics/sheets.js","../sources/operations/hide_gridlines.js","../sources/operations/hide_headers.js","../sources/operations/comments.js","../sources/operations/show_formulas.js","../sources/operations/states.js","../sources/operations/import.js","../sources/helpers/image_export.js","../sources/operations/export.js","../sources/operations/load.js","../sources/operations/clear_styles.js","../sources/api/row_col_operations.js","../sources/api/lock_cell.js","../sources/api/freeze.js","../sources/api/hide_gridlines.js","../sources/api/hide_headers.js","../sources/api/hide_rows.js","../sources/api/math.js","../sources/api/operations.js","../sources/api/core.js","../sources/api/save.js","../sources/api/dropdown.js","../sources/api/filter.js","../sources/api/confirm.js","../sources/api/undo.js","../sources/api/number_formats.js","../sources/api/show_formulas.js","../sources/api/print.js","../sources/api/zoom.js","../sources/toolbar/menu.js","../sources/spreadsheet.js","../sources/operations/index.js","../sources/api/index.js"],"sourcesContent":["const e=1,t=2,r=3,n=4,o=5,i=6,u=7,a=8,s=9,c=10,h=11,l=12,f={1:\"#ERROR\",2:\"#ERROR\",3:\"#REF!\",4:\"#SPILL!\"},d=0,m=1,p=0,g=1,b=2,R=1,T=255;function y(e,t,r){return r+64*t+64*e*4096}function _(e){return[e<2147483648?e>>18:e/262144&16777215,e>>6&4095,63&e]}function w(e){return e<2147483648?e>>18:e/262144&16777215}function N(e){return e>>6&4095}function M(e){return 63&e}function O(e,t,r){const[n,o]=_(e),[i,u]=_(t),a=i-n,s=u-o;for(let t=0;t<=a;t++)for(let n=0;n<=s;n++)r(e+64*n+4096*t*64)}function q(e,t,r,n){let o=0;for(let i=0;i<r;i++)for(let r=0;r<t;r++)n(e+64*r+4096*i*64,o),o++}function E(e,t){const r=e.code,n=e.source;let o,i,u,a,s,c=\"\";const h=r.length;for(let l=0;l<h;l+=3){switch(r[l]){case 5:{let n;9===r[l+6]&&(n=t.pageName(M(r[l+7]))),c+=v(n||e.source.substr(r[l+1],r[l+2]))+\"!\";break}case 7:[o,u,s]=_(r[l+4]),t.z!==s&&5!==r[l-3]&&(c+=v(t.pageName(s))+\"!\"),c+=A(o,u,r[l+5]);break;case 4:c+=n.substr(r[l+1],r[l+2]).toUpperCase();break;case 8:[o,u,s]=_(r[l+4]),[i,a]=_(r[l+7]),t.z!==s&&5!==r[l-3]&&(c+=v(t.pageName(s))+\"!\"),c+=A(o,u,r[l+5]),c+=\":\",c+=A(i,a,r[l+8]);break;case 9:break;case 2:c+=\"{{\"+n.substr(r[l+1],r[l+2])+\"}}\";break;case 3:c+=\"#REF!\";break;case 1:c+='\"'+n.substr(r[l+1],r[l+2])+'\"';break;case 13:{c+=\"{\";const e=r[l+1],t=r[l+2];l+=3;for(let o=0;o<t;o++){for(let t=0;t<e;t++){t>0&&(c+=\",\");const e=r[l];1===e?c+='\"'+n.substr(r[l+1],r[l+2])+'\"':11===e&&(c+=n.substr(r[l+1],r[l+2])),l+=3}o<t-1&&(c+=\";\")}l-=3,c+=\"}\";break}default:c+=n.substr(r[l+1],r[l+2])}}return c}function A(e,t,r){let n=\"\";2&r&&(n+=\"$\");let o=\"\";for(t+=1;t>0;){let e=t%26;0===e&&(e=26),o=String.fromCharCode(64+e)+o,t=(t-e)/26}return n+=o,1&r&&(n+=\"$\"),n+=e+1,n}function v(e){return(/[\\s\\-&.!%()+*=^~,;@#$\"`|{}<>]/.test(e)||/^[0-9]/.test(e)||/^[A-Za-z]{1,3}[0-9]{1,7}$/.test(e))&&(e=`'${e}'`),e}let S;function I(e){return e<=122}function C(e){return e<=122?e>=65&&94!=e||35===e||36===e||46===e:e>191}function x(e){return e>=97}function D(e){const t=e.charCodeAt(0);return t>=48&&t<=57}function L(e,t){for(let r=t;r<e.length;r++){const t=e[r];if(\",\"===t||\";\"===t||\"}\"===t)return r}return e.length}function P(e,t){let r;do{t++,r=e.charCodeAt(t)}while(r>=48&&r<=57);return t}function $(e,t){let r;do{r=e[++t]}while('\"'!==r);return t}function F(e){return\" \"===e||\"\\t\"===e||\"\\n\"===e||\"\\r\"===e}function U(e,t){let r;do{r=e[++t]}while(F(r));return t}function k(e,t){if(\"<\"===e[t]){const r=e[t+1];\">\"!==r&&\"=\"!==r||t++}else\">\"===e[t]&&\"=\"===e[t+1]&&t++;return t+1}function V(e,t,r){const n=e.length;let o=!0,i=t,u=!1,a=!1,s=!1,c=0;for(;i<n;i++){const t=e[i];if(\"'\"!==t){if(!u){s=!0;const e=t.charCodeAt(0);if(C(e)){I(e)?x(e)&&(a=!0):o=!1,1==c&&c++;continue}if(D(t)){0==c&&c++;continue}break}}else{if(s)break;if(u){i++;break}u=!0}}const h=e[i];let l=t,f=i-t;return u&&(f-=1+(\"'\"===e[i-1]?1:0),f<0&&(f=0),l++,r=5),0===r&&(\":\"===h&&o?1!==c?r=3:(r=8,a&&(S=!0)):\"!\"===h?r=\"#\"===e[l]?3:5:\"(\"===h?(function(e,t,r){const n=e.substr(t,r);return n.toUpperCase()!==n}(e,l,f)&&(S=!0),r=4):\"}\"===h&&\"}\"===e[i-1]?r=2:1===c&&o?(r=7,a&&(S=!0)):r=6),[l,f,i,r]}function B(e,t,r){let n=0,o=0,i=1,u=1,a=0,s=!1;for(let e=t.length-1;e>=0;e--){const r=t[e].charCodeAt(0);36!==r?r<58?(o+=(r-48)*i,i*=10):(s||(i=1,n=o,o=0,s=!0,u+=1),o+=(r-(r>96?96:64))*i,i*=26):a+=u}o>4095?e.push(3,0,0):e.push(9,y(n-1,o-1,r),a)}function j(e,t){const r=[];S=!1;let n=-1,o=-1,i=0;for(let a=0;a<e.length;a++){const s=e[a];if(o>-1){if(\"}\"==s){const e=r[o+2]+=1,t=r[o+1]=i/e;t-Math.round(t)!=0&&r.push(3,0,0),o=-1}else if('\"'===s){const t=$(e,a);a++,r.push(1,a,t-a),i++,a=t}else if(\"-\"===s){const t=P(e,a+1);r.push(11,a,t-a),i++,a=t-1}else if(D(s)){const t=P(e,a);r.push(11,a,t-a),i++,a=t-1}else if(\" \"===s||\"\\t\"===s||\",\"===s);else if(\";\"===s)r[o+2]+=1;else{const t=L(e,a);r.push(3,a,t-a),i++,a=t-1}continue}if('\"'==s){n>-1?(r.push(1,n+1,a-n-1),n=-1):n=a;continue}if(n>-1)continue;if(\"{\"==s){if(\"{\"==e[a+1]){const[t,n,o]=V(e,a+2,2);r.push(2,t,n),a=o+2-1;continue}o=r.length,i=0,r.push(13,0,0);continue}if(\"'\"==s||((u=s.charCodeAt(0))<=122?u>=65&&94!=u||35===u||36===u:u>191)){let n,[o,i,u,s]=V(e,a,0);const c=r.length;if(7!==s&&8!==s||5!==r[r.length-3])n=t.z,r.push(s,o,i);else{const u=\"'\"===e[o-2]?1:0,a=r[c-2],h=r[c-1];n=t.page(e.substr(a,h)),void 0===n&&(r.push(3,0,0),n=0),r.push(s,o-h-2*u-1,i+h+2*u+1)}if(a=u-1,6===s)t.name(r,e,t);else if(8===s){const c=r.length;if(B(r,e.substr(o,i),n),[o,i,u,s]=V(e,a+2,0),5===s){const a=e.substr(o,i);n=t.page(a),void 0===n&&(r.push(3,0,0),n=0),[o,i,u,s]=V(e,u+1,0)}if(7!==s){r[c-3]=7;continue}B(r,e.substr(o,i),n),M(r[r.length-2])!=M(r[r.length-5])&&r.push(3,0,0);const h=r[c+1],l=r[c+4];(h>l||w(h)>w(l))&&(r[c+1]=l,r[c+4]=h),r[c-1]+=i+1,a=u-1}else 7===s?B(r,e.substr(o,i),n):3!==s&&5!==s||a++;continue}if(F(s)){const t=U(e,a);r.push(12,a,t-a),a=t-1;continue}if(D(s)){const t=P(e,a);r.push(11,a,t-a),a=t-1;continue}const c=k(e,a);r.push(10,a,c-a),a=c-1}var u;const a={code:r,source:e,exec:null,broken:0,triggers:null};return S&&(a.source=E(a,t)),a}function H(e){return\"            \".substr(0,10-e.length)}const X=[\">\",\"<\",\"=\",\"+\"];function Y(e,t){const r=function(e,t){const r=e.code,n=e.source;let o=\"\",i=0;const u=[],a=r.length;for(let s=0;s<a;s+=3){switch(r[s]){case 4:o+=`ctx.m[\"${n.substr(r[s+1],r[s+2]).toUpperCase()}\"]`;break;case 1:o+='\"'+n.substr(r[s+1],r[s+2])+'\"';break;case 2:o+=`ctx.p(\"${n.substr(r[s+1],r[s+2])}\")`;break;case 6:case 7:{let e,t;if(10===r[s-3]?e=s-3:12===r[s-3]&&10===r[s-6]&&(e=s-6),10===r[s+6]?t=s+6:12===r[s+6]&&10===r[s+9]&&(t=s+9),e||t){const i=e?n[r[e+1]]:null,u=t?n[r[t+1]]:null;if(\"&\"==i||\"&\"==u){o+=`(ctx.v(${r[s+4]}) === null ? \"\" : ctx.v(${r[s+4]}))`;break}if(-1!=X.indexOf(i)||-1!=X.indexOf(u)){o+=`(ctx.v(${r[s+4]}) === null ? 0 : ctx.v(${r[s+4]}))`;break}}o+=`ctx.v(${r[s+4]})`;break}case 8:o+=`ctx.r(${r[s+4]}, ${r[s+7]})`;break;case 10:if(1===r[s+2]){const e=n[r[s+1]];\"&\"===e?o+='+\"\"+':t&&\"+\"==e?o+=\"*1+1*\":\"=\"===e?o+=\"==\":\";\"===e?o+=\",\":\"{\"===e?o+=\"[\":\"}\"===e?o+=\"]\":\"^\"===e?o+=\"**\":\"%\"===e?r[s+3]&&10!==r[s+3]?o+=t?\"/0+\":e:o+=(\"/\"==u[i]?\"*\":\"/\")+\"100\":(\"(\"==e?(i++,u.push(\"+\")):\")\"==e&&(i--,u.pop()),o+=e),\"+\"!=e&&\"-\"!=e&&\"*\"!=e&&\"/\"!=e&&\"&\"!=e||(u[i]=e)}else if(2===r[s+2]){const e=n.substr(r[s+1],r[s+2]);o+=\"<>\"===e?\"!=\":e}else o+=n.substr(r[s+1],r[s+2]);break;case 11:o+=n.substr(r[s+1],r[s+2]);break;case 3:return\"\";case 9:case 5:case 12:break;case 13:{o+=\"ctx.a([\";const t=r[s+1],i=r[s+2];s+=3;const u=s+t*i*3;let a=!1;for(;s<u;s+=3){a&&(o+=\",\");const t=r[s];if(11===t)o+=n.substr(r[s+1],r[s+2]);else if(1===t)o+='\"'+n.substr(r[s+1],r[s+2])+'\"';else if(3===t)return e.broken=3,\"\";a=!0}s-=3,o+=`],${t}, ${i})`;break}}}return o}(e,t);if(!r)return e.broken=3,void(e.exec=null);try{e.exec=new Function(\"ctx\",`return ${r}`)}catch(t){e.broken=1,e.exec=null}}const G={null:\"#NULL!\",div0:\"#DIV/0!\",value:\"#VALUE!\",ref:\"#REF!\",name:\"#NAME?\",num:\"#NUM!\",na:\"#N/A\",data:\"#GETTING_DATA\"};function W(e){const t=new Date(e.getFullYear(),0,0),r=e.valueOf()-t.valueOf()+60*(t.getTimezoneOffset()-e.getTimezoneOffset())*1e3;return Math.floor(r/864e5)}function z(e){const t=new Date(Math.round(86400*(e-25569)*1e3));return new Date(t.getTime()+6e4*t.getTimezoneOffset())}function K(e){return 25569+(e.getTime()-6e4*e.getTimezoneOffset())/864e5}function Q(e){return!(!e&&0!==e||(e*=1,isNaN(e)))&&e}function J(e){if(1===e.length){const t=e[0];return\"object\"==typeof t?t:[t]}let t=[];for(let r=0;r<e.length;r++)t=t.concat(e[r]);return t}function Z(e){return!e&&0!==e}function ee(e){return\"string\"==typeof e?\"TRUE\"===e:!!e}function te(e){const t=\"string\"==typeof e?new Date(e):z(e);if(t.getTime())return t;throw`${e} is invalid date`}function re(e){const t=Q(e);if(\"number\"!=typeof t)throw`${e} is not a number`;return t}function ne(e,t,r,n,o){let i=Q(e);i<0&&8==o&&(t=null);let u,a=t?Q(t):null;if(\"number\"!=typeof i||\"boolean\"==typeof a)throw G.value;if(i<r&&(i=r),i>n&&(i=n),a<-1)throw G.num;a&&(a=Math.floor(+a));const s=e<0&&16===o?\"FF\":\"\";if(u=n<2147483648?(i>>>0&n-r).toString(o):(i>>>0).toString(o),a&&u.length>a)throw G.num;return(s+u).padStart(a,\"0\").toUpperCase()}const oe={int:function(e,t){return(r,n)=>{let o=r[t],i=n[t];return i||0===i?o||0===o?(\"0\"===o&&(o=0),\"0\"===i&&(i=0),o=\"number\"==typeof o?o:parseFloat(o.toString())||e*(1/0),i=\"number\"==typeof i?i:parseFloat(i.toString())||e*(1/0),(o>i?1:o==i?0:-1)*e):1:-1}},str:function(e,t){return(r,n)=>{if(!n[t])return-1;if(!r[t])return 1;const o=r[t].toString().toLowerCase(),i=n[t].toString().toLowerCase();return(o>i?1:o==i?0:-1)*e}}};function ie(e,t){return e.sort(((r,n)=>{for(const o of t){const{index:t,dir:i}=o,u=isNaN(parseFloat(String(e[0][t-1])))?\"str\":\"int\",a=oe[u](i,t-1)(r,n);if(0!==a)return a}return 0})),e}function ue(e){return e[0].map(((t,r)=>e.map((e=>e[r]))))}function ae(e){const t=[];for(let r=0;r<e.$height;r++){const n=[];for(let t=0;t<e.$width;t++)n.push(e[r*e.$width+t]);t.push(n)}return t}function se(e,t,r){return Object.assign([].concat(...e.map((e=>e.slice(0,t))).slice(0,r)),{$width:t,$height:r})}function ce(e,t=0,r=0){let n=[];if(r)for(let t=0;t<e.$width;t++)for(let r=0;r<e.$height;r++)n.push(e[t+e.$width*r]);else n=e;return t&&(n=n.filter((e=>{switch(t){case 1:return e||0===e;case 2:return!(\"string\"==typeof e&&-1!=Object.values(G).indexOf(e));case 3:return(e||0===e)&&!(\"string\"==typeof e&&-1!=Object.values(G).indexOf(e))}}))),n}function he(e,t){const r=+nt(e),n=+ot(e),o=+nt(t),i=+ot(t);return Ge(r*o-n*i,r*i+n*o)}function le(e,t){const r=+nt(e),n=+ot(e);return Ge(r+ +nt(t),n+ +ot(t))}function fe(e){return e>0?Math.floor(e):Math.ceil(e)}function de(e){return e<0?Math.floor(e):Math.ceil(e)}function me(...e){let t=0;const r=J(e);for(let e=0;e<r.length;e++){const n=Q(r[e]);\"number\"==typeof n&&(t+=n)}return t}function pe(...e){let t=0,r=0;const n=J(e);for(let e=0;e<n.length;e++){const o=Q(n[e]);\"number\"==typeof o&&(t+=o,r++)}return r?t/r:0}function ge(...e){const t=J(e);let r=0,n=0;for(let e=0;e<t.length;e++){const o=t[e],i=Q(t[e]);\"number\"==typeof i?(r+=i,n++):(!0===o&&r++,(o||!1===o)&&n++)}return n?r/n:0}function be(...e){let t=0;const r=J(e);for(let e=0;e<r.length;e++){\"number\"==typeof Q(r[e])&&t++}return t}function Re(...e){let t=0;const r=J(e);for(let e=0;e<r.length;e++)r[e]&&1*r[e]!=0&&t++;return t}function Te(...e){let t=-1/0;const r=J(e);for(let e=0;e<r.length;e++){const n=Q(r[e]);\"number\"==typeof n&&n>t&&(t=n)}return t===-1/0?0:t}function ye(...e){let t=1/0;const r=J(e);for(let e=0;e<r.length;e++){const n=Q(r[e]);\"number\"==typeof n&&n<t&&(t=n)}return t===1/0?0:t}function _e(...e){let t=!1,r=1;const n=J(e);for(let e=0;e<n.length;e++){const o=Q(n[e]);\"number\"==typeof o&&(t=!0,r*=o)}return t?r:null}function we(...e){const t=e[0].length;for(const r in e)if(e[r].length!==t)return;let r=0;for(let t=0;t<e[0].length;t++){let n=!1,o=1;for(const r in e){const i=Q(e[r][t]);\"number\"==typeof i&&(o*=i,n=!0)}n&&(r+=o)}return r}function Ne(e,t,r){const n=J(e);let o=t?0:-1;const i=r?ge(...e):pe(...e);let u=0;for(let e=0;e<n.length;e++){const t=n[e];let a=Q(n[e]);if(\"number\"!=typeof a){if(!r||\"boolean\"!=typeof t&&!t)continue;a=!0===t?1:0}o++,u+=Math.pow(a-i,2)}return o?u/o:0}function Me(...e){return Ne(e,!1,!1)}function Oe(...e){return Ne(e,!1,!0)}function qe(...e){return Ne(e,!0,!1)}function Ee(...e){return Ne(e,!0,!0)}function Ae(...e){return Math.sqrt(Me(...e))}function ve(...e){return Math.sqrt(qe(...e))}function Se(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.pow(r,n)}function Ie(e){const t=Q(e);if(\"number\"==typeof t&&t>=0)return Math.sqrt(t)}function Ce(e){const t=Q(e);if(\"number\"==typeof t)return Math.abs(t)}function xe(){return Math.random()}function De(e){const t=Q(e);if(\"number\"==typeof t)return Math.floor(t)}function Le(e,t){const r=Q(e),n=Q(t)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return n<0?Math.round(r/Math.pow(10,Math.abs(n)))*Math.pow(10,Math.abs(n)):parseFloat(r.toFixed(n))}function Pe(e,t){const r=Q(e),n=Q(t)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return Math.floor(r*Math.pow(10,n))/Math.pow(10,n)}function $e(e,t){const r=Q(e),n=Q(t)||0;if(\"number\"==typeof r&&\"number\"==typeof n)return Math.ceil(r*Math.pow(10,n))/Math.pow(10,n)}const Fe={M:1e3,CM:900,D:500,CD:400,C:100,XC:90,L:50,XL:40,X:10,IX:9,V:5,IV:4,I:1};function Ue(e,t=1,r=0){const n=Q(e);let o=Q(t);const i=Q(r);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i)return 0===o?0:(o=Math.abs(o),n>=0?Math.ceil(n/o)*o:0===r?-1*Math.floor(Math.abs(n)/o)*o:-1*Math.ceil(Math.abs(n)/o)*o)}const ke=[];function Ve(e){const t=Q(e);if(\"number\"==typeof t&&t>-1){const e=Math.floor(t);return 0===e||1===e?1:(ke[e]>0||(ke[e]=Ve(e-1)*e),ke[e])}}function Be(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Ve(r)/(Ve(n)*Ve(r-n))}function je(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n){const e=Math.abs(n);return r>=0?Math.floor(r/e)*e:-1*Math.ceil(Math.abs(r)/e)*e}}function He(e,t=10){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.log(r)/Math.log(n)}function Xe(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r+Math.ceil((n-r+1)*Math.random())-1}const Ye=[\"\",\"C\",\"CC\",\"CCC\",\"CD\",\"D\",\"DC\",\"DCC\",\"DCCC\",\"CM\",\"\",\"X\",\"XX\",\"XXX\",\"XL\",\"L\",\"LX\",\"LXX\",\"LXXX\",\"XC\",\"\",\"I\",\"II\",\"III\",\"IV\",\"V\",\"VI\",\"VII\",\"VIII\",\"IX\"];function Ge(e,t,r=\"i\"){const n=Q(e),o=Q(t);if(\"number\"!=typeof n&&\"number\"!=typeof o)throw G.num;let i=\"\",u=\"\";return e&&(i=e.toString()),t&&1!==t?u=t+r:1===t&&(u=r),t>0?`${i?`${i}+`:\"\"}${u}`:i+u}function We(e,t=null){return ne(e,t,-512,511,2)}function ze(e,t=null){return ne(e,t,-274877906944,274877906943,16)}function Ke(e,t=null){return ne(e,t,-536870912,536870911,8)}const Qe=[-1.3026537197817094,.6419697923564902,.019476473204185836,-.00956151478680863,-.000946595344482036,.000366839497852761,42523324806907e-18,-20278578112534e-18,-1624290004647e-18,130365583558e-17];function Je(e){const t=e<0;let r,n=0,o=0;const i=2/(2+(e=Math.abs(e))),u=4*i-2;for(let e=Qe.length-1;e>0;e--)r=u*n-o+Qe[e],o=n,n=r;const a=i*Math.exp(-e*e+.5*(Qe[0]+u*n)-o);return t?a-1:1-a}function Ze(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r)return\"number\"==typeof n?Je(n)-Je(r):Je(r);throw G.value}function et(e){const t=Q(e);if(\"number\"==typeof t)return Math.exp(t);throw G.value}const tt=[.9999999999998099,676.5203681218851,-1259.1392167224028,771.3234287776531,-176.6150291621406,12.507343278686905,-.13857109526572012,9984369578019572e-21,1.5056327351493116e-7];const rt=Math.pow(2,39);function nt(e){if(\"string\"!=typeof e)throw G.value;if([\"i\",\"+i\",\"1i\",\"+1i\",\"-i\",\"-1i\",\"j\",\"+j\",\"1j\",\"+1j\",\"-j\",\"-1j\"].indexOf(e)>=0)return 0;let t=e.indexOf(\"+\"),r=e.indexOf(\"-\");0===t&&(t=e.indexOf(\"+\",1)),0===r&&(r=e.indexOf(\"-\",1));const n=e.substring(e.length-1,e.length),o=\"i\"===n||\"j\"===n;if(t>=0||r>=0){if(!o)throw G.num;if(t>=0){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw G.num;return Number(e.substring(0,t))}if(isNaN(+e.substring(0,r))||isNaN(+e.substring(r+1,e.length-1)))throw G.num;return Number(e.substring(0,r))}if(o){if(isNaN(+e.substring(0,e.length-1)))throw G.num;return 0}if(isNaN(+e))throw G.num;return+e}function ot(e){if(\"string\"!=typeof e)throw G.value;if([\"i\",\"j\"].indexOf(e)>=0)return 1;let t=(e=e.replace(\"+i\",\"+1i\").replace(\"-i\",\"-1i\").replace(\"+j\",\"+1j\").replace(\"-j\",\"-1j\")).indexOf(\"+\"),r=e.indexOf(\"-\");0===t&&(t=e.indexOf(\"+\",1)),0===r&&(r=e.indexOf(\"-\",1));const n=e.substring(e.length-1,e.length),o=\"i\"===n||\"j\"===n;if(t>=0||r>=0){if(!o)throw G.num;if(t>=0){if(isNaN(+e.substring(0,t))||isNaN(+e.substring(t+1,e.length-1)))throw G.num;return Number(e.substring(t+1,e.length-1))}if(isNaN(+e.substring(0,r))||isNaN(+e.substring(r+1,e.length-1)))throw G.num;return-Number(e.substring(r+1,e.length-1))}if(o){const t=+e.substring(0,e.length-1);if(isNaN(t))throw G.num;return t}if(isNaN(+e))throw G.num;return 0}function it(e){const t=+nt(e),r=+ot(e);return Ge(Math.cos(t)*Math.cosh(r),-Math.sin(t)*Math.sinh(r))}function ut(e){const t=+nt(e),r=+ot(e);return Ge(Math.cos(r)*(Math.exp(t)+Math.exp(-t))/2,Math.sin(r)*(Math.exp(t)-Math.exp(-t))/2)}function at(e,t){const r=+nt(e),n=+ot(e),o=+nt(t),i=+ot(t),u=Math.pow(o,2)+Math.pow(i,2);return Ge((r*o+n*i)/u,(n*o-r*i)/u)}function st(e){const t=+nt(e),r=+ot(e);return Ge(Math.sin(t)*Math.cosh(r),Math.cos(t)*Math.sinh(r))}function ct(e){const t=+nt(e),r=+ot(e);return Ge(Math.cos(r)*(Math.exp(t)-Math.exp(-t))/2,Math.sin(r)*(Math.exp(t)+Math.exp(-t))/2)}const ht=Math.pow(2,29);function lt(e,t,r){const n=Q(t);if(\"number\"!=typeof n||t<0||t>1||r&&(0===t||1===t))throw G.value;let o=J(e).sort(((e,t)=>e-t));r&&(o=[0,...o]);const i=(o.length+(r?0:-1))*n,u=Math.floor(i);if(void 0===o[u+1])return o[u];const a=o[u+1]-o[u];return o[u]+a*(i-u)}function ft(e,t,r){const n=Q(t);if(\"number\"!=typeof n)throw G.value;switch(n){case 0:if(r)throw G.value;return ye(...e);case 1:return lt(e,.25,r);case 2:return lt(e,.5,r);case 3:return lt(e,.75,r);case 4:if(r)throw G.value;return Te(...e);default:throw G.num}}function dt(e,t,r,n){const o=re(e),i=re(t),u=re(r);if(1==t)return 1/u;const a=Math.exp(-Math.pow(o/u,i));return n?1-a:i/Math.pow(u,i)*Math.pow(o,i-1)*a}function mt(e,t,r,n=!1){const o=re(e),i=re(t),u=re(r),a=(e,t,r)=>Be(t,e)*Math.pow(r,e)*Math.pow(1-r,t-e);if(!n)return a(o,i,u);let s=0;for(let e=0;e<o+1;e++)s+=a(e,i,u);return s}function pt(e,t,r){const n=e.filter((e=>\"number\"==typeof e)),o=t.filter((e=>\"number\"==typeof e));if(n.length!==o.length)throw G.na;const i=n.length;if(0===i)throw G.div0;const u=n.reduce(((e,t)=>e+t),0)/i,a=o.reduce(((e,t)=>e+t),0)/i;let s=0;for(let e=0;e<i;e++)s+=(n[e]-u)*(o[e]-a);return s/(r?i-1:i)}function gt(e,t){return pt(e,t,!1)}const bt={ABS:Ce,ACOS:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.acos(t)},ACOSH:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.acosh(t)},ACOT:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.atan(1/t)},ACOTH:function(e){const t=Q(e);if(\"number\"==typeof t)return.5*Math.log((t+1)/(t-1))},ADD:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r+n},ARABIC:function(e){if(!Q(e)&&/^M*(?:D?C{0,3}|C[MD])(?:L?X{0,3}|X[CL])(?:V?I{0,3}|I[XV])$/.test(`${e}`)){let t=0;return`${e}`.replace(/[MDLV]|C[MD]?|X[CL]?|I[XV]?/g,(function(e){return t+=Fe[e],e})),+t}},ASIN:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.asin(t)},ASINH:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.asinh(t)},ATAN:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.atan(t)},ATAN2:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Math.atan2(n,r)},ATANH:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.log((1+t)/(1-t))/2},AVEDEV:function(...e){const t=J(e).filter((e=>\"number\"==typeof e)),r=t.length;if(0===r)throw G.div0;const n=t.reduce(((e,t)=>e+t),0)/r;return t.reduce(((e,t)=>e+Math.abs(t-n)),0)/r},AVERAGE:pe,AVERAGEA:ge,BASE:function(e,t,r=0){const n=Q(e),o=Q(t),i=Q(r);if(\"number\"==typeof n&&\"number\"==typeof o&&\"number\"==typeof i){const e=n.toString(o);return new Array(Math.max(i+1-e.length,0)).join(\"0\")+e.toUpperCase()}},BINOMDIST:mt,\"BINOM.INV\":function(e,t,r){const n=re(e),o=re(t),i=re(r);for(let e=0;e<=n;e++){if(mt(e,n,o,!0)>=i)return e}},\"BINOM.DIST.RANGE\":function(e,t,r,n){const o=re(e),i=re(t),u=re(r);let a=Q(n);\"number\"!=typeof a&&(a=u);let s=0;for(let e=u;e<=a;e++){s+=Be(o,e)*Math.pow(i,e)*Math.pow(1-i,o-e)}return s},\"BINOM.DIST\":mt,BITAND:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r&n;throw G.value},BITLSHIFT:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return n>0?r<<n:r>>-n;throw G.value},BITOR:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r|n;throw G.value},BITRSHIFT:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return n>0?r>>n:r<<-n;throw G.value},BITXOR:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r^n;throw G.value},CEILING:Ue,COMBIN:Be,COMBINA:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return 0===r&&0===n?1:Be(r+n-1,r-1)},COMPLEX:Ge,CORREL:function(e,t){if(e.length!==t.length)throw G.na;const r=e.filter((e=>\"number\"==typeof e)),n=t.filter((e=>\"number\"==typeof e)),o=r.length,i=r.reduce(((e,t)=>e+t),0)/o,u=n.reduce(((e,t)=>e+t),0)/o;let a=0,s=0,c=0;for(let e=0;e<o;e++)a+=(r[e]-i)*(n[e]-u),s+=Math.pow(r[e]-i,2),c+=Math.pow(n[e]-u,2);const h=Math.sqrt(s*c);if(!h)throw G.div0;return a/h},COS:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.cos(t)},COSH:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.cosh(t)},COT:function(e){const t=Q(e);if(\"number\"==typeof t)return 1/Math.tan(t)},COTH:function(e){const t=Q(e);if(\"number\"==typeof t){const e=Math.exp(2*t);return(e+1)/(e-1)}},COUNT:be,COUNTA:Re,COUNTBLANK:function(...e){let t=0;const r=J(e);for(let e=0;e<r.length;e++)0===r[e]||r[e]||t++;return t},COVAR:gt,\"COVARIANCE.P\":gt,\"COVARIANCE.S\":function(e,t){return pt(e,t,!0)},CSC:function(e){const t=Q(e);if(\"number\"==typeof t)return 1/Math.sin(t)},CSCH:function(e){const t=Q(e);if(\"number\"==typeof t)return 2/(Math.exp(t)-Math.exp(-t))},DEC2BIN:We,DEC2HEX:ze,DEC2OCT:Ke,DECIMAL:function(e,t){const r=Q(e),n=Q(t);if(!`${r}`.match(\"/[2-9]/\")&&\"number\"==typeof r&&\"number\"==typeof n&&n>1&&n<37)return parseInt(`${r}`,n)},DEGREES:function(e){const t=Q(e);if(\"number\"==typeof t)return 180*t/Math.PI},DELTA:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r||\"number\"==typeof r)return+(r===n);throw G.value},DEVSQ:function(...e){const t=J(e),r=[];t.forEach((e=>{\"number\"==typeof e&&r.push(e)}));const n=r.reduce(((e,t)=>e+t),0)/r.length;return r.reduce(((e,t)=>e+Math.pow(t-n,2)),0)},DIVIDE:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n&&0!==n)return r/n},EQ:function(e,t){return typeof e==typeof t&&e==t},ERF:Ze,ERFC:function(e,t){const r=Q(e);if(\"number\"==typeof r)return 1-Ze(r,t);throw G.value},EVEN:function(e){const t=Q(e);if(\"number\"==typeof t){const e=de(t);return e%2?e+Math.sign(t):e}},EXP:et,FACT:Ve,FACTDOUBLE:function e(t){const r=Q(t);if(\"number\"==typeof r){const t=Math.floor(r);return t<=0?1:t*e(t-2)}},FISHER:function(e){const t=Q(e);if(\"number\"==typeof t&&t>-1&&t<1)return.5*Math.log((1+t)/(1-t));throw G.value},FISHERINV:function(e){const t=Q(e);if(\"number\"==typeof t){const e=Math.exp(2*t);return(e-1)/(e+1)}throw G.value},FLOOR:je,GAMMA:function e(t){let r=Q(t);if(\"number\"!=typeof r)throw G.value;if(!(Number.isInteger(r)&&r<=0)){if(r<.5)return Math.PI/(Math.sin(Math.PI*r)*e(1-r));{r-=1;let e=tt[0];for(let t=1;t<9;t++)e+=tt[t]/(r+t);const t=r+7+.5;return Math.sqrt(2*Math.PI)*Math.pow(t,r+.5)*Math.exp(-t)*e}}throw G.num},GCD:function(...e){const t=J(e),r=t.length;if(!r)return 1;let n=t[0],o=1;for(;\"number\"!=typeof n;){if(n=t[o],o>t.length)throw\"The arguments should contain at least one numeric value\";o++}let i=n<0?-n:n;for(;o<r;o++){const e=Q(t[o]);if(\"number\"==typeof e){let t=e<0?-e:e;for(;i&&t;)i>t?i%=t:t%=i;i+=t}}return i},GEOMEAN:function(...e){const t=J(e);if(t.some((e=>!Number.isFinite(e)||e<=0)))throw G.num;return Math.pow(t.reduce(((e,t)=>t*e),1),1/t.length)},GESTEP:function(e,t=0){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return+(e>=t);throw G.value},GT:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r>n},GTE:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r>=n},HARMEAN:function(...e){const t=J(e);if(t.some((e=>!Number.isFinite(e)||e<=0)))throw G.num;const r=t.reduce(((e,t)=>e+1/t),0);return 1/(1/t.length*r)},HEX2BIN:function(e,t){return We(parseInt(e.toString(),16),t)},HEX2DEC:function(e,t){let r=parseInt(e.toString(),16);if(!Number.isFinite(r))throw G.value;const n=r>rt;n&&(r=-(r-2*rt));const o=t?Q(t):null,i=r.toString();return(n?\"-\":\"\")+(o?i.padStart(o,\"0\"):i)},HEX2OCT:function(e,t=null){let r=parseInt(e.toString(),16);return r>rt&&(r^=rt),Ke(r,t)},IMABS:function(e){const t=nt(e),r=ot(e);if(!Number.isFinite(+t)||!Number.isFinite(+r))throw G.value;return Math.sqrt(Math.pow(+t,2)+Math.pow(+r,2))},IMAGINARY:ot,IMCONJUGATE:function(e){return Ge(+nt(e),-+ot(e))},IMCOS:it,IMCOSH:ut,IMCOT:function(e){return at(it(e),st(e))},IMCSC:function(e){return at(\"1\",st(e))},IMCSCH:function(e){return at(\"1\",ct(e))},IMDIV:at,IMEXP:function(e){const t=+nt(e),r=+ot(e),n=Math.exp(t);return Ge(n*Math.cos(r),n*Math.sin(t))},IMLN:function(e){const t=+nt(e),r=+ot(e);return Ge(Math.log(Math.sqrt(t*t+r*r)),Math.atan(r/t))},IMPOWER:function(e,t){const r=Q(t);if(\"number\"!=typeof r)throw G.value;const n=+nt(e),o=+ot(e),i=Math.sqrt(n*n+o*o),u=Math.pow(i,r),a=Math.atan(o/n);return Ge(u*Math.cos(r*a),u*Math.sin(r*a))},IMPRODUCT:function(...e){if(0===e.length)throw G.value;let t=e[0];for(const r of e.slice(1))t=he(t.toString(),r.toString());return t.toString()},IMREAL:nt,IMSEC:function(e){return at(\"1\",it(e))},IMSECH:function(e){return at(\"1\",ut(e))},IMSIN:st,IMSINH:ct,IMSQRT:function(e){const t=+nt(e),r=+ot(e),n=Math.sqrt(Math.sqrt(t*t+r*r)),o=Math.atan(r/t)/2;return Ge(n*Math.cos(o),n*Math.sin(o))},IMSUB:function(e,t){const r=+nt(e),n=+ot(e);return Ge(r-+nt(t),n-+ot(t))},IMSUM:function(...e){if(0===e.length)throw G.value;let t=e[0];for(const r of e.slice(1))t=le(t.toString(),r.toString());return t.toString()},IMTAN:function(e){return at(st(e),it(e))},INT:De,LARGE:function(e,t){const r=Q(t),n=e.sort(((e,t)=>e-t));if(\"number\"==typeof r&&!e.some((e=>\"number\"!=typeof Q(e))))return n[n.length-r];throw G.value},LN:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.log(t)},LOG:He,LOG10:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.log(t)/Math.log(10)},LT:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r<n},LTE:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r<=n},MAX:Te,MEDIAN:function(...e){const t=J(e);t.sort((function(e,t){return e-t}));const r=Math.floor(t.length/2);return t.length%2?t[r]:(t[r-1]+t[r])/2},MIN:ye,MINUS:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r-n},MOD:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n&&0!==n){const e=Math.abs(r%n);return t>0?e:-e}},MROUND:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n&&r*n>-1)return Math.round(r/n)*n},MULTINOMIAL:function(...e){const t=J(e);let r=0,n=1;for(let e=0;e<t.length;e++){const o=Q(t[e]);\"number\"==typeof o&&(r+=o,n*=Ve(t[e]))}return Ve(r)/n},MULTIPLY:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return r*n},NE:function(e,t){return typeof e!=typeof t||e!=t},OCT2BIN:function(e,t=null){let r=parseInt(e.toString(),8);return r&ht&&(r=-(2*ht-r)),We(r,t)},OCT2DEC:function(e,t=null){const r=t?Q(t):null;let n=parseInt(e.toString(),8);if(n&ht&&(n=-(2*ht-n)),!Number.isFinite(n)||\"boolean\"==typeof r)throw G.value;return n.toString().padStart(r||0,\"0\")},OCT2HEX:function(e,t=null){let r=parseInt(e.toString(),8);return r&ht&&(r=-(2*ht-r)),ze(r,t)},ODD:function(e){const t=Q(e);if(\"number\"==typeof t){const e=de(t);return e%2?e:e+Math.sign(t)}},PERCENTILE:lt,\"PERCENTILE.INC\":lt,\"PERCENTILE.EXC\":function(e,t){return lt(e,t,!0)},PERMUT:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Ve(r)/Ve(r-n);throw G.value},PI:function(){return Math.PI},POW:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return Se(e,t)},POWER:Se,PRODUCT:_e,QUARTILE:ft,\"QUARTILE.INC\":ft,\"QUARTILE.EXC\":function(e,t){return ft(e,t,!0)},QUOTIENT:function(e,t){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n)return fe(r/n)},RADIANS:function(e){const t=Q(e);if(\"number\"==typeof t)return t*Math.PI/180},RAND:xe,RANDBETWEEN:Xe,ROMAN:function(e){const t=Q(e);if(\"number\"==typeof t){const e=String(t).split(\"\");let r=\"\",n=3;for(;n--;)r=(Ye[+e.pop()+10*n]||\"\")+r;return new Array(+e.join(\"\")+1).join(\"M\")+r}},ROUND:Le,ROUNDDOWN:Pe,ROUNDUP:$e,SEC:function(e){const t=Q(e);if(\"number\"==typeof t)return 1/Math.cos(t)},SECH:function(e){const t=Q(e);if(\"number\"==typeof t)return 2/(Math.exp(t)+Math.exp(-t))},SIGN:function(e){const t=Q(e);if(\"number\"==typeof t)return 0===t?0:t/Math.abs(t);throw G.value},SIN:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.sin(t)},SINH:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.sinh(t)},SMALL:function(e,t){const r=Q(t),n=e.sort(((e,t)=>e-t));if(\"number\"==typeof r&&!e.some((e=>\"number\"!=typeof Q(e))))return n[r-1];throw G.value},SQRT:Ie,SQRTPI:function(e){const t=Q(e);if(\"number\"==typeof t&&t>-1)return Math.sqrt(t*Math.PI)},STDEV:Ae,\"STDEV.S\":Ae,\"STDEV.P\":ve,STDEVA:function(...e){return Math.sqrt(Oe(...e))},STDEVP:ve,STDEVPA:function(...e){return Math.sqrt(Ee(...e))},STEYX:function(e,t){if(e.length!==t.length)throw G.na;const r=e.filter((e=>\"number\"==typeof e)),n=t.filter((e=>\"number\"==typeof e)),o=r.length;if(2===o)throw G.div0;const i=r.reduce(((e,t)=>e+t),0)/o,u=n.reduce(((e,t)=>e+t),0)/o;let a=0,s=0,c=0;for(let e=0;e<o;e++)a+=(r[e]-i)*(n[e]-u),s+=Math.pow(r[e]-i,2),c+=Math.pow(n[e]-u,2);if(2===c)throw G.div0;return Math.sqrt((s-Math.pow(a,2)/c)/(o-2))},SUBTOTAL:function(e,...t){const r=Q(e),n=J(t);if(\"number\"==typeof r)switch(r){case 1:case 101:return pe(...n);case 102:case 2:return be(...n);case 103:case 3:return Re(...n);case 104:case 4:return Te(...n);case 105:case 5:return ye(...n);case 106:case 6:return _e(...n);case 107:case 7:case 110:case 10:return;case 108:case 8:return ve(...n);case 109:case 9:return me(...n);case 111:case 11:return qe(...n)}},SUM:me,SUMPRODUCT:we,SUMSQ:function(...e){let t=0;const r=J(e);for(let e=0;e<r.length;e++){const n=Q(r[e]);\"number\"==typeof n&&(t+=Math.pow(n,2))}return t},SUMX2MY2:function(e,t){if(!e.find((e=>\"number\"!=typeof Q(e)))&&!t.find((e=>\"number\"!=typeof Q(e)))){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*e[n]-t[n]*t[n];return r}},SUMX2PY2:function(e,t){if(!e.find((e=>\"number\"!=typeof Q(e)))&&!t.find((e=>\"number\"!=typeof Q(e)))){let r=0;for(let n=0;n<e.length;n++)r+=e[n]*e[n]+t[n]*t[n];return r}},SUMXMY2:function(e,t){if(!e.find((e=>\"number\"!=typeof Q(e)))&&!t.find((e=>\"number\"!=typeof Q(e)))){let r=0;for(let n=0;n<e.length;n++)r+=Math.pow(e[n]-t[n],2);return r}},TAN:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.tan(t)},TANH:function(e){const t=Q(e);if(\"number\"==typeof t)return Math.tanh(t)},TRUNC:function(e){const t=Q(e);if(\"number\"==typeof t)return fe(t)},VAR:Me,\"VAR.S\":Me,\"VAR.P\":qe,VARA:Oe,VARP:qe,VARPA:Ee,WEIBULL:dt,\"WEIBULL.DIST\":dt};function Rt(...e){return J(e).join(\"\")}function Tt(e,t){return Z(e)?\"\":e.toString().substring(0,t)}function yt(e,t,r){return Z(e)?\"\":e.toString().substring(t-1,t-1+r)}function _t(e,t){return Z(e)?\"\":e.toString().substring(e.length-t)}function wt(e){return Z(e)?\"\":e.toString().toLowerCase()}function Nt(e){return Z(e)?\"\":e.toString().toUpperCase()}function Mt(e){if(Z(e))return\"\";const t=e.toString().toLowerCase().split(\" \");e=\"\";for(const r in t)e+=(e?\" \":\"\")+t[r].substring(0,1).toUpperCase()+t[r].substring(1);return e}function Ot(e){return Z(e)?\"\":e.toString().trim()}function qt(e){return Z(e)?0:e.toString().length}const Et=/[\\0-\\x1F]/g;function At(e,t,r=0){const n=Q(r);if(\"number\"==typeof n&&t)return`${t}`.indexOf(`${e}`,n-1)+1;throw\"index cannot be string\"}function vt(e,t,r=0){const n=Q(r);if(\"number\"==typeof n){const r=`${t}`.toLowerCase().indexOf(`${e}`.toLowerCase(),n-1)+1;if(0!==r)return r;throw\"not found\"}}function St(e,t,r,n){if(!e||!t||!r&&\"\"!==r)return`${e}`;if(void 0===n)return`${e}`.replace(new RegExp(`${t}`,\"g\"),`${r}`);{let o=0,i=0;for(;`${e}`.indexOf(`${t}`,o)>0;)if(o=`${e}`.indexOf(`${t}`,o+1),i++,i===n)return`${e}`.substring(0,o)+r+`${e}`.substring(o+`${t}`.length)}}function It(e,t,r,n){const o=Q(t),i=Q(r);if(\"number\"==typeof o&&\"number\"==typeof i){const t=e.toString(),r=n.toString();return t.replace(t.substr(o-1,i),r)}}var Ct=Object.freeze({__proto__:null,CONCATENATE:Rt,LEFT:Tt,MID:yt,RIGHT:_t,LOWER:wt,UPPER:Nt,PROPER:Mt,TRIM:Ot,LEN:qt,CHAR:function(e){const t=Q(e);if(\"number\"==typeof t)return String.fromCharCode(t)},CLEAN:function(e=\"\"){return`${e}`.replace(Et,\"\")},CODE:function(e=\"\"){return`${e}`.charCodeAt(0)},EXACT:function(e,t){return e===t},FIND:At,FIXED:function(e,t=2,r=!1){const n=Q(e),o=Q(t);if(\"number\"==typeof n&&\"number\"==typeof o){const e=n.toFixed(o);if(ee(r))return`${e}`;const[t,i]=`${e}`.split(\".\");return t.replace(/\\B(?=(\\d{3})+(?!\\d))/g,\",\")+\".\"+i}},NUMBERVALUE:function(e,t=\".\",r=\",\"){if(\"string\"==typeof e&&\"string\"==typeof t&&\"string\"==typeof r)return Number(e.replace(t,\".\").replace(r,\"\"))},REGEXEXTRACT:function(e,t){if(\"string\"==typeof e&&\"string\"==typeof t){const r=e.match(new RegExp(t));return r?r[r.length>1?r.length-1:0]:null}},REGEXMATCH:function(e,t){if(\"string\"==typeof e&&\"string\"==typeof t){return!!e.match(new RegExp(t))}},REGEXREPLACE:function(e,t,r){if(\"string\"==typeof e&&\"string\"==typeof t)return e.replace(new RegExp(t),`${r}`)},REPT:function(e,t){const r=Q(t);if(\"number\"==typeof r)return new Array(r+1).join(`${e}`)},SEARCH:vt,SUBSTITUTE:St,T:function(e){return\"string\"==typeof e&&\"TRUE\"!==e&&\"FALSE\"!==e?`${e}`:\"\"},JOIN:function(e,...t){const r=[];return t.forEach((t=>{\"object\"==typeof t?r.push(t.join(`${e}`)):r.push(t)})),r.join(`${e}`)},REPLACE:It,ARRAYTOTEXT:function(e,t){return t?`{${e.map((e=>\"string\"==typeof e?`\"${e}\"`:e)).join(\"; \")}}`:e.join(\"; \")}});const xt=[[],[1,2,3,4,5,6,7],[7,1,2,3,4,5,6],[6,0,1,2,3,4,5],[],[],[],[],[],[],[],[7,1,2,3,4,5,6],[6,7,1,2,3,4,5],[5,6,7,1,2,3,4],[4,5,6,7,1,2,3],[3,4,5,6,7,1,2],[2,3,4,5,6,7,1],[1,2,3,4,5,6,7]],Dt=[void 0,0,1,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,1,2,3,4,5,6,0],Lt=[[],[6,0],[0,1],[1,2],[2,3],[3,4],[4,5],[5,6],void 0,void 0,void 0,[0,0],[1,1],[2,2],[3,3],[4,4],[5,5],[6,6]];function Pt(e,t,r){return K(new Date(e,t-1,r))}function $t(e,t,r){const n=K(new Date(1900,0,1,e,t,r,0));return n-Math.trunc(n)}function Ft(e){return z(e).getDate()}function Ut(e){return z(e).getMonth()+1}function kt(e){return z(e).getFullYear()}function Vt(e){return z(e).getHours()}function Bt(e){return z(e).getMinutes()}function jt(e){return z(e).getSeconds()}function Ht(){return K(new Date)}function Xt(e,t,r){const n=r.toLowerCase();if(\"d\"===n)return t-e;const o=z(e),i=z(t);switch(n){case\"y\":return i.getFullYear()-o.getFullYear();case\"m\":return 12*(i.getFullYear()-o.getFullYear())+i.getMonth()-o.getMonth();case\"d\":return Math.floor(t-e);case\"md\":{const e=i.getDate()-o.getDate();if(e<0){const e=new Date(o.getFullYear(),o.getMonth()+1,0).getDate();return i.getDate()+e-o.getDate()}return e}case\"ym\":{const e=i.getMonth()-o.getMonth();return e<0?12+e:e}case\"yd\":{const e=W(i)-W(o);return e<0?365+e:e}}}function Yt(e,t){const r=te(e),n=te(t);if(r&&n)return Math.round((r.getTime()-n.getTime())/864e5)}function Gt(e){const t=te(e);if(t){t.setHours(0,0,0),t.setDate(t.getDate()+4-(t.getDay()||7));const e=new Date(t.getFullYear(),0,1);return Math.ceil(((t.getTime()-e.getTime())/864e5+1)/7)}}function Wt(e,t,r,n){const o=te(e),i=te(t);if(o&&i){const e=void 0===r?Lt[1]:Lt[r],t=n||[];for(let e=0;e<t.length;e++){const r=z(t[e]);if(r instanceof Error)throw`The ${t[e]} is not a  number`;t[e]=r}const u=(i.getTime()-o.getTime())/864e5+1;let a=Math.round(u);const s=o;for(let r=0;r<u;r++){const r=(new Date).getTimezoneOffset()>0?s.getUTCDay():s.getDay();let n=!1;r!==e[0]&&r!==e[1]||(n=!0);for(let e=0;e<t.length;e++){const r=t[e];if(r.getDate()===s.getDate()&&r.getMonth()===s.getMonth()&&r.getFullYear()===s.getFullYear()){n=!0;break}}n&&a--,s.setDate(s.getDate()+1)}return a}}function zt(e,t,r,n){const o=te(e),i=Q(t);if(o&&\"number\"==typeof i){const e=void 0===r?Lt[1]:Lt[r],t=n||[];for(let e=0;e<t.length;e++){const r=z(t[e]);if(r instanceof Error)throw`The ${t[e]} is not a  number`;t[e]=r}let u=0;for(;u<i;){o.setDate(o.getDate()+1);const r=o.getDay();if(r!==e[0]&&r!==e[1]){for(let e=0;e<t.length;e++){const r=t[e];if(r.getDate()===o.getDate()&&r.getMonth()===o.getMonth()&&r.getFullYear()===o.getFullYear()){u--;break}}u++}}return K(o)}}function Kt(e){return 1===new Date(e,1,29).getMonth()}function Qt(e,t,r=0){const n=te(e),o=te(t);if(n&&o){let e=n.getDate();const t=n.getMonth()+1,i=n.getFullYear();let u=o.getDate();const a=o.getMonth()+1,s=o.getFullYear();let c=365;const h=s-i+1,l=(new Date(s+1,0,1).getTime()-new Date(i,0,1).getTime())/1e3/60/60/24/h;switch(r){case 0:return 31===e&&31===u?(e=30,u=30):31===e?e=30:30===e&&31===u&&(u=30),(u+30*a+360*s-(e+30*t+360*i))/360;case 1:return i===s||i+1===s&&(t>a||t===a&&e>=u)?((i===s&&Kt(i)||function(e,t){const r=e.getFullYear(),n=new Date(r,2,1);if(Kt(r)&&e<n&&t>=n)return!0;const o=t.getFullYear(),i=new Date(o,2,1);return Kt(o)&&t>=i&&e<i}(n,o)||1===a&&29===u)&&(c=366),Yt(o.toDateString(),n.toDateString())/c):Yt(o.toDateString(),n.toDateString())/l;case 2:return Yt(o.toDateString(),n.toDateString())/360;case 3:return Yt(o.toDateString(),n.toDateString())/365;case 4:return(u+30*a+360*s-(e+30*t+360*i))/360}}}const Jt={DATE:Pt,TIME:$t,DAY:Ft,MONTH:Ut,YEAR:kt,HOUR:Vt,MINUTE:Bt,SECOND:jt,NOW:Ht,DATEDIF:Xt,DATEVALUE:function(e){if(\"string\"==typeof e){return K(new Date(new Date(e).toDateString()))}},DAYS:Yt,DAYS360:function(e,t,r=0){const n=te(e),o=te(t);if(n&&o){const e=n.getMonth();let t,i,u=o.getMonth();if(ee(r))t=31===n.getDate()?30:n.getDate(),i=31===o.getDate()?30:o.getDate();else{const r=new Date(n.getFullYear(),e+1,0).getDate(),a=new Date(o.getFullYear(),u+1,0).getDate();t=n.getDate()===r?30:n.getDate(),o.getDate()===a?t<30?(u++,i=1):i=30:i=o.getDate()}return 360*(o.getFullYear()-n.getFullYear())+30*(u-e)+(i-t)}},EDATE:function(e,t){const r=te(e),n=Q(t);if(r&&\"number\"==typeof n)return r.setMonth(r.getMonth()+n),K(r)},EOMONTH:function(e,t){const r=te(e),n=Q(t);if(r&&\"number\"==typeof n)return K(new Date(r.getFullYear(),r.getMonth()+n+1,0))},ISOWEEKNUM:Gt,NETWORKDAYS:function(e,t,r){return Wt(e,t,1,r)},\"NETWORKDAYS.INTL\":Wt,TIMEVALUE:function(e){if(\"string\"==typeof e){const t=e.split(\" \"),r=t[1],n=t[0].split(\":\"),o=new Date;return o.setHours(+n[0]),r&&\"PM\"===r.toUpperCase()&&o.setHours(o.getHours()+12),o.setMinutes(+n[1]),n[2]&&o.setSeconds(+n[2]),(3600*o.getHours()+60*o.getMinutes()+o.getSeconds())/86400}},WEEKNUM:function(e,t=1){const r=te(e);if(21===t)return Gt(t);const n=Dt[t],o=new Date(r.getFullYear(),0,1),i=o.getDay()<n?1:0,u=o.getTime()-24*Math.abs(o.getDay()-n)*60*60*1e3;return Math.floor((r.getTime()-u)/864e5/7+1)+i},WEEKDAY:function(e,t=1){const r=te(e).getDay();return xt[t][r]},WORKDAY:function(e,t,r){return zt(e,t,1,r)},\"WORKDAY.INTL\":zt,YEARFRAC:Qt};function Zt(e){return void 0===e?null:e}function er(e,t,r,n){void 0===r&&(r=0);let o=-1;if(0===r)o=t.indexOf(e);else{let n=\"string\"==typeof e?\"\":-1/0*r;1===r?t.forEach(((t,r)=>{t<=e&&t>n&&(n=t,o=r)})):-1===r&&t.forEach(((t,r)=>{t>=e&&t<n&&(n=t,o=r)}))}return o+1}var tr=Object.freeze({__proto__:null,INDEX:function(e,t,r){const n=t,o=r;return Zt(e[(e.$width?e.$width:1)*(n-1)+(o||1)-1])},XMATCH:function(e,t,r,n){const o=er(e,t,r);if(0===o)throw\"#N/A\";return o},XLOOKUP:function(e,t,r,n,o,i){const u=er(e,t,o);if(0===u){if(void 0!==n)return n;throw\"#N/A\"}return(r||t)[u-1]},LOOKUP:function(e,t,r){const n=er(e,t,1);if(0===n)throw\"#N/A\";return(r||t)[n-1]},HLOOKUP:function(e,t,r,n){let o=!0;void 0!==n&&(o=ee(n));const i=t.$width?t.$width:t.length,u=er(e,t.slice(0,i),o?1:0);if(0===u)throw\"#N/A\";return Zt(t[i*((r||1)-1)+u-1])},VLOOKUP:function(e,t,r,n){let o=!0;void 0!==n&&(o=ee(n));const i=t.$width?t.$width:1,u=t.length/i;let a;if(1===u)a=t;else{a=[];for(let e=0;e<u;e++)a.push(t[i*e])}const s=r,c=er(e,a,o?1:0);if(0===c)throw\"#N/A\";return Zt(t[i*(c-1)+(s||1)-1])},MATCH:function(e,t,r){let n=r;void 0===r&&(n=1);const o=er(e,t,n);if(0===o)throw\"#N/A\";return o},CHOOSE:function(e,...t){let r=Q(e);if(t.length>1&&\"number\"==typeof r){if(t.length<r)throw\"the index number is greater than the length of the array of values\";if(r<=0)throw\"index cannot be less than or equal to 0\";return r--,t[r]}}});var rr=Object.freeze({__proto__:null,IF:function(e,t,r){return e?t:r},AND:function(...e){for(let t=0;t<e.length;t++)if(!ee(e[t]))return!1;return!0},NOT:function(e){return!ee(e)},OR:function(...e){for(let t=0;t<e.length;t++)if(e[t])return!0;return!1},FALSE:function(){return!1},TRUE:function(){return!0}});var nr=Object.freeze({__proto__:null,ISBLANK:function(e){return Z(e)},ISBINARY:function(e){return/^[01]{1,10}$/.test(`${e}`)},ISEVEN:function(e){const t=Q(e);return\"number\"==typeof t&&t%2==0},ISODD:function(e){const t=Q(e);return\"number\"==typeof t&&t%2!=0},ISNONTEXT:function(e){return\"string\"!=typeof e},ISNUMBER:function(e){return\"number\"==typeof Q(e)},ISTEXT:function(e){return\"string\"==typeof e},N:function(e){const t=Q(e);if(\"number\"==typeof t)return t;const r=new Date(e);return r.getTime()?K(r):\"TRUE\"===e||!0===e?1:0}});const or={SUM:me,AVERAGE:pe,AVERAGEA:ge,COUNT:be,COUNTA:Re,MIN:ye,MAX:Te,SQRT:Ie,POWER:Se,LOG:He,EXP:et,PRODUCT:_e,SUMPRODUCT:we,ABS:Ce,RAND:xe,RANDBETWEEN:Xe,ROUND:Le,ROUNDUP:$e,ROUNDDOWN:Pe,INT:De,CEILING:Ue,FLOOR:je},ir={CONCATENATE:Rt,MID:yt,LEFT:Tt,RIGHT:_t,LOWER:wt,UPPER:Nt,PROPER:Mt,TRIM:Ot,LEN:qt,SEARCH:vt,FIND:At,REPLACE:It,SUBSTITUTE:St,NOW:Ht},ur={DATE:Pt,TIME:$t,YEAR:kt,MONTH:Ut,DAY:Ft,HOUR:Vt,MINUTE:Bt,SECOND:jt,DATEDIF:Xt},ar=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},or),ir),ur),tr),nr),rr),sr=Object.assign({},ar),cr=()=>Object.keys(sr);function hr(e,t){sr[e]=t}function lr(e){Object.assign(sr,e)}function fr(e){const t=[];return B(t,e,0),t[1]}function dr(e){const t=[];return B(t,e,0),_(t[1]).slice(0,2)}function mr(e){const t=[];e.split(\":\").map((e=>B(t,e,0)));const[r,n]=_(t[1]),[o,i]=_(t[4]);return[r,n,o,i]}function pr(e,t,r,n,o,i){const[u,a,s]=_(e),[c,h,l]=_(n);return s===l&&(!(u>=c+o)&&(!(u+t<=c)&&(!(a>=h+i)&&!(a+r<=h))))}const gr=Math.pow(10,8);function br(e,t,r){r.add?e.has(t)||r.add(t):e.add(t)}function Rr(e){if(e.keys)return Array.from(e.keys());const t=[];return e.forEach(((e,r)=>t.push(r))),t}function Tr(e){if(e.values)return e.values();const t=[];e.forEach(((e,r)=>t.push(r)));let r=0;return{add:e=>{t.push(e)},next:()=>{const e=t[r];return r++,{done:r>t.length,value:e}}}}class yr{constructor(e){(e=e||{get:null,set:null,strict:!1})&&(this._getter=e.get,this._setter=e.set,this._strict=e.strict),this._parser=j,this._printer=Y,this._parseContext={name:function(){},pageName:()=>\"\",pageObj:()=>null,page:function(){return 0},z:0},this.$count=0,this._data=new Map,this._triggers=new Map,this._holders={},this._context={a:(e,t,r)=>(e.$width=t,e.$height=r,e),v:e=>{if(-1===e)throw new Error;const t=this._getter(e);return void 0===t?null:t},r:(e,t)=>{const[r,n]=_(e),[o,i]=_(t),u=o-r,a=i-n+1,s=[];s.$width=a,s.$height=u+1;for(let t=0;t<=u;t++)for(let r=0;r<a;r++)s[t*a+r]=this._getter(e+64*r+4096*t*64);return s},m:sr,e:e=>{throw e},p:e=>this.getPlaceholder(e)}}getTriggerList(e){return this._triggers.get(e)}setValue(e,t,r,n){\"\"===t&&(t=null),this._removeTriggers(e,null),this._setter(e,t,r)&&(n||this.trigger(e))}clean(e){this._removeTriggers(e,null)}getValue(e){return this._getter(e)}getMeta(){return this._meta}setMeta(e){this._meta=Object.assign(Object.assign({},this._meta),e)}setPlaceholder(e,t){\"*\"===e?Object.entries(t).forEach((e=>this.setPlaceholder(e[0],e[1]))):(null===t?delete this._holders[e]:this._holders[e]=t,this.each(((t,r)=>{(function(e,t,r){for(let n=0;n<e.length;n+=3)if(2===e[n]&&t.substr(e[n+1],e[n+2])==r)return!0;return!1})(r.code,r.source,e)&&this.setMath(t,r.source,this._parseContext)})))}getPlaceholder(e){if(\"*\"===e)return this._holders;const t=this._holders[e];return void 0===t?null:t}setMath(e,t,r,n){const o=this._generate(t,r),i=this._setMathAt(e,o);n||this._execAndTrigger(i)}refresh(e){this._execAndTrigger(e)}getMath(e){return this._data.get(e)}trigger(e,t){const r=this._triggers.get(e);if(r){const e=!t;t||(t=new Set);for(let e=0;e<r.length;e++)t.add(r[e]);e&&this.triggerSet(t)}return null}triggerSet(e){const t=new Map;for(;e.size;){const r=Tr(e);let n=!1;e:for(let o=r.next();!o.done;o=r.next()){const r=this._data.get(o.value);let i=t.get(o.value);if(i&&(1==i&&(i=this._check_for_loops(o.value,r.triggers,t)),2==i))continue;const u=r.triggers;if(u)for(let t=0;t<u.length;t++)if(e.has(u[t]))continue e;this._execAndTrigger(o.value,e),i||t.set(o.value,1),e.delete(o.value),n=!0}if(!n)return void e.forEach((t=>this._errorAndTrigger(t,e)))}}getStats(){return{math:this._data.size,trigger:this._triggers.size}}_check_for_loops(e,t,r){const n=new Set;t.forEach((e=>n.add(e)));const o=Tr(n);for(let t=o.next();!t.done;t=o.next()){if(t.value==e)return r.set(e,2),2;const i=r.get(t.value);if(i&&i>1)return r.set(e,i),i;const u=this._data.get(t.value);u&&u.triggers&&u.triggers.forEach((e=>br(n,e,o)))}return r.set(e,3),3}_setMathAt(e,t){if(this._removeTriggers(e,t)){if(t.triggers)if(-1===t.triggers.indexOf(e)&&3!==t.broken)for(let r=0;r<t.triggers.length;r++){const n=t.triggers[r];let o=this._triggers.get(n);void 0===o&&(o=[],this._triggers.set(n,o)),o.push(e)}else t=Object.assign(Object.assign({},t),{broken:3});return this._data.set(e,t),e}}_removeTriggers(e,t){const r=this._data.get(e);if(!r)return!0;if(r===t)return!1;r.$width&&this._clearArea(e,!1);const n=r.triggers;if(n&&3!==r.broken)for(let t=0;t<n.length;t++){const r=n[t],o=this._triggers.get(r);if(o){const t=o.filter((t=>t!==e));t.length?this._triggers.set(r,t):this._triggers.delete(r)}}return this._data.delete(e),!0}parse(e,t){return this._parser(e,t||this._parseContext)}exec(e,t){const r=this._generate(e,t);return this._exec(r)}each(e){Rr(this._data).forEach((t=>e(t,this._data.get(t))))}setLogger(e){this._err_handler=e}_setErr(e,t){return e.broken=2,t&&this._err_handler&&this._err_handler(t),f[e.broken]}_exec(e){if(e.broken>0&&2!==e.broken)return f[e.broken];try{const t=e.exec(this._context);return e.broken=0,\"number\"==typeof t?isFinite(t)?Math.round(t*gr)/gr:this._setErr(e):t}catch(t){return this._setErr(e,t)}}toString(e,t){return E(e,t||this._parseContext)}regenerate(e,t,r){r=Object.assign({},r||this._parseContext),Rr(this._data).forEach((n=>{let o=!1;const i=this._data.get(n),u=M(n);if(t&&u===e)this._removeTriggers(n,null);else{for(let t=0;t<i.code.length;t+=3)if(9===i.code[t]&&M(i.code[t+1])===e){o=!0;break}o&&(r.z=u,t?this.setMath(n,i.source,r):(i.source=E(i,r),i.code=this._parser(i.source,r).code))}}))}recalculate(e,t){t=Object.assign({},t||this._parseContext);const r=new Set;this.each((n=>{if(e){const e=this._data.get(n);if(e.broken&&2!==e.broken)return t.z=M(n),void this.setMath(n,e.source,t)}r.add(n)})),this.triggerSet(r)}_generate(e,t,r){const n=r||this._parser(e,t||this._parseContext);return this._printer(n,this._strict),n.triggers=function(e){let t=[];const r=e.code,n=r.length;for(let e=0;e<n;e+=3){switch(r[e]){case 7:case 6:{const n=r[e+4];t.push(n);break}case 8:O(r[e+4],r[e+7],(e=>t.push(e)))}}if(t.length>10){const e=new Set;t=t.filter((t=>!e.has(t)&&(e.add(t),!0)))}return t.length?t:null}(n),n}_execAndTrigger(e,t){this.$count+=1;const r=this._data.get(e);if(r){const n=this._exec(r);if(Array.isArray(n)){if(63!==M(e))return void this._complexSetter(e,n,t)}this._setter(e,n,2)&&this.trigger(e,t)}}_complexSetter(e,t,r){const{$width:n,$height:o}=t,i=this._data.get(e);i.$width=n,i.$height=o;try{q(e,n,o,((n,o)=>{this._setter(n,t[o],2,0===o?null:e)&&this.trigger(n,r)}))}catch(t){this._clearArea(e,!0)}}_clearArea(e,t){const{$width:r,$height:n}=this._data.get(e);q(e,r,n,((r,n)=>{if(0===n&&t)this._setter(r,f[4],1)&&this.trigger(r);else{(t?this._setter(r,null,3,e):this._setter(r,null,3,-1))&&this.trigger(r)}}))}_errorAndTrigger(e,t){const r=this._data.get(e),n=this._setErr(r);this._setter(e,n,2)&&this.trigger(e,t)}debug(e,t=!1){const r=function(e){const t=e.code,r=e.source;let n=\"\";const o=t.length;for(let e=0;e<o;e+=3){const o=t[e];let i;switch(o){case 4:i=\"method\";break;case 1:i=\"text\";break;case 5:i=\"page\";break;case 2:i=\"holder\";break;case 6:i=\"name\";break;case 7:i=\"arg\";break;case 8:i=\"range\";break;case 9:i=\"data\";break;case 10:i=\"op\";break;case 11:i=\"number\";break;case 3:i=\"error\";break;case 12:i=\"extra\";break;case 13:i=\"arr\"}n+=9===o?`            ${t[e+1]}.${t[e+2]}\\n`:13===o?`[${i}]${H(i)}${t[e+1]} x ${t[e+2]}\\n`:`[${i}]${H(i)}${r.substr(t[e+1],t[e+2])}\\n`}return n}(this.parse(e));if(t)return r;console.log(r)}transpose(e,t,r,n){n=n||this._parseContext;const[o,i,u]=_(e),a=new Map,s=new Map,c=new Set;Rr(this._data).forEach((e=>{const[h,l,f]=_(e),d=this._data.get(e),m=f===n.z?n:Object.assign(Object.assign({},n),{z:f}),p=this._transpose(d,o,i,t,r,n,m);let g=e;if(f===u&&(l>=i||h>=o)&&(g=y(h>=o?h+t:h,l>=i?l+r:l,f)),d!==p||e!==g){if(s.set(e,p),f===u&&(r<0&&l>=i&&l<i-r||t<0&&h>=o&&h<o-t))return;a.set(g,p),d.broken!==p.broken&&c.add(g)}})),Rr(a).forEach((e=>this._setMathAt(e,a.get(e)))),Array.from(s.keys()).forEach((e=>{a.has(e)||this._removeTriggers(e,null)})),t>0&&this._triggerRow(o,t,c),r>0&&this._triggerColumn(i,r,c),t<0&&this._triggerRow(o-1,2,c),r<0&&this._triggerColumn(i-1,2,c),this.triggerSet(c)}_triggerColumn(e,t,r){const n=t?e+t:e;Rr(this._triggers).forEach((t=>{const o=N(t);o>=e&&o<n&&this.trigger(t,r)}))}_triggerRow(e,t,r){const n=t?e+t:e;Rr(this._triggers).forEach((t=>{const o=w(t);o>=e&&o<n&&this.trigger(t,r)}))}moveMath(e,t,r,n,o,i,u){\"string\"==typeof e&&(e=this.parse(e,i));return this._moveMath(e,t,r,n,o,u||i).source}_moveMath(e,t,r,n,o,i){const u=e.code;for(let e=0;e<u.length;e+=3)if(7===u[e]){let[i,a]=_(u[e+4]);pr(o.id,o.h,o.w,u[e+4],1,1)&&(i+=t,a+=r,u[e+4]=y(i,a,n)),e+=3}else if(8===u[e]){let[i,a]=_(u[e+4]),[s,c]=_(u[e+7]);pr(o.id,o.h,o.w,u[e+4],s-i+1,c-a+1)&&(i+=t,a+=r,s+=t,c+=r,u[e+4]=y(i,a,n),u[e+7]=y(s,c,n)),e+=6}let a={code:u,broken:e.broken,source:e.source,triggers:null,exec:null};return a=this._parser(E(a,i),i),this._generate(a.source,i,a)}transposeMath(e,t,r,n){\"string\"==typeof e&&(e=this.parse(e,n)),n=n||this._parseContext;return this._transpose(e,-1,-1,t,r,n,n).source}_transpose(e,t,r,n,o,i,u){let a=!0,s=e.code;const c=!(t<0||r<0);for(let e=0;e<s.length;e+=3)if(7===s[e]){let[u,h,l]=_(s[e+4]);if(i.z!==l)continue;const f=s[e+5];if(!c&&3==f)continue;(c||0==(1&f))&&0!==n&&u>=t&&(a&&(s=[].concat(s),a=!1),u+=n,(u<t||u<0)&&(s[e]=3)),(c||0==(2&f))&&0!==o&&h>=r&&(a&&(s=[].concat(s),a=!1),h+=o,(h<r||h<0)&&(s[e]=3)),a||(s[e+4]=y(u,h,l)),e+=3}else if(8===s[e]){const u=s[e+5],h=s[e+8];if(!c&&3===u&&3===h)continue;let[l,f,d]=_(s[e+4]),[m,p]=_(s[e+7]);if(i.z!==d)continue;0!==n&&((c||0==(1&u))&&(n>0?l>=t:l>t)&&(a&&(s=[].concat(s),a=!1),l+=n,l<0&&(s[e]=3)),(c||0==(1&h))&&m>=t&&(a&&(s=[].concat(s),a=!1),m+=n,m<l&&(s[e]=3))),0!==o&&((c||0==(2&u))&&(o>0?f>=r:f>r)&&(a&&(s=[].concat(s),a=!1),f+=o,f<0&&(s[e]=3)),(c||0==(2&h))&&p>=r&&(a&&(s=[].concat(s),a=!1),p+=o,p<f&&(s[e]=3))),a||(s[e+4]=y(l,f,d),s[e+7]=y(m,p,d)),e+=6}if(a)return e;let h={code:s,broken:e.broken,source:e.source,triggers:null,exec:null};return h=this._parser(E(h,u),u),this._generate(h.source,u,h)}}class _r{constructor(e,t,r){this._id=e,this._store=t,this._meta={},this._parseContext=Object.assign(Object.assign({},r),{z:e}),this.reset(),this._parseMode=!1}reset(){this._data=[],this._rows=[],this._cols=[],this._spans=[]}getMeta(){return this._meta}setMeta(e){this._meta=Object.assign(Object.assign({},this._meta),e)}getID(){return this._id}cellID(e,t){return y(e,t,this._id)}getSize(){const e=this._data.length;let t=0;return this._data.forEach((e=>{e&&e.length>t&&(t=e.length)})),[e,t]}getContext(){return this._parseContext}addRow(e,t){this._data.splice.apply(this._data,wr(e,t)),this._store.transpose(y(e,0,this._id),t,0,this._parseContext),this._rows.splice.apply(this._rows,wr(e,t)),this._recalculateSpans(e,t,0)}removeRow(e,t){return this._data.splice(e,t),this._store.transpose(y(e,0,this._id),-t,0,this._parseContext),this._rows.splice(e,t),this._recalculateSpans(e,-t,0)}addColumn(e,t){const r=wr(e,t);this._data.forEach((e=>{e&&e.splice.apply(e,r)})),this._store.transpose(y(0,e,this._id),0,t,this._parseContext),this._cols.splice.apply(this._cols,wr(e,t)),this._recalculateSpans(e,0,t)}removeColumn(e,t){this._data.forEach((r=>{r&&r.splice(e,t)})),this._store.transpose(y(0,e,this._id),0,-t,this._parseContext),this._cols.splice(e,t),this._recalculateSpans(e,0,-t)}setCell(e,t,r){let n=this._data[e];n||(n=this._data[e]=[]);const o=n[t];n[t]=o?Object.assign(Object.assign(Object.assign({},o),r),{value:o.value}):r,void 0!==r.value&&this.setValue(e,t,r.value)}clearCell(e,t){const r=this._data[e];r&&r[t]&&(r[t]=null,this._store.setValue(y(e,t,this._id),\"\"))}setValue(e,t,r,n){if(this.getCell(e,t,!0).$locked)return;const o=y(e,t,this._id);\"string\"==typeof r&&r.length>1&&\"=\"===r[0]?this._store.setMath(o,r.substr(1),this._parseContext):this._store.setValue(o,r,n)}getCell(e,t,r){let n=this._data[e],o=n?n[t]:null;return o||!r||(n||(n=this._data[e]=[]),o=n[t],o||(o=n[t]={value:null})),o}getValue(e,t,r){if(r){const r=this._store.getMath(y(e,t,this._id));if(r)return\"=\"+r.source}const n=this.getCell(e,t,!1);return n?n.value:null}getRange(e,t,r,n){const o=[];for(let i=e;i<=r;i++)for(let e=t;e<=n;e++)o.push(this.getValue(i,e,!1));return o}getCellRange(e,t,r,n){const o=[];for(let i=e;i<=r;i++)for(let e=t;e<=n;e++)o.push(this.getCell(i,e));return o}eachCell(e){this._data.forEach(((t,r)=>{t&&t.forEach(((t,n)=>{t&&e(r,n,t)}))}))}serialize(e){const t=[];return this.eachCell(((r,n,o)=>{if(o=Object.assign({},o),e){const e=this._store.getMath(y(r,n,this.getID()));e&&(o.value=\"=\"+e.source)}t.push([r,n,o])})),t}serializeBlock(e,t,r,n,o){const i=[];for(let u=t;u<=n;u++)for(let t=e;t<=r;t++){const e=this.getCell(u,t);if(null==e)continue;const r=Object.assign({},e);if(o){const e=this._store.getMath(y(u,t,this.getID()));e&&(r.value=\"=\"+e.source)}i.push([u,t,r])}return i}parse(e,t){this.reset(),this._store.each((e=>{M(e)===this._id&&this._store.clean(e)})),this.parseBlock(e,t,!0)}parseBlock(e,t,r){const n=new Set;this._parseMode=!0,e.forEach((([e,o,i])=>{const u=y(e,o,this._id);r||this._store.clean(u);let a=this._data[e];a||(a=this._data[e]=[]);const s=(i=a[o]=Object.assign({},i)).value;if(s)if(\"string\"==typeof s&&s.length>1&&\"=\"===s[0]){const e=s.substr(1);this._store.setMath(u,e,this.getContext(),!0),n.add(u)}else t&&(i.value=null,this._store.setValue(u,s,null,!0),this._store.trigger(u,n))})),this._store.triggerSet(n),this._parseMode=!1}throwError(e){if(!this._parseMode)throw e}setRowMeta(e,t){const r=this._rows[e]||{};this._rows[e]=r?Object.assign(Object.assign({},r),t):t}getRowMeta(e,t){const r=this._rows[e];if(t&&!r){const t={};return this._rows[e]=t,t}return r||null}setColumnMeta(e,t){const r=this._cols[e]||{};this._cols[e]=r?Object.assign(Object.assign({},r),t):t}getColumnMeta(e,t){const r=this._cols[e];if(t&&!r){const t={};return this._cols[e]=t,t}return r||null}sort(e,t,r=0,n=\"asc\"){const[o,i]=_(e),[u,a]=_(t),s=\"asc\"===n,c=[],h=[];for(let e=o;e<=u;e++){const t=[];for(let r=i;r<=a;r++){const n=this._store.getMath(this.cellID(e,r));t.push({value:this.getValue(e,r),row:e,math:n||null})}c.push(t)}c.sort(((e,t)=>{const n=e[r].value,o=t[r].value;return\"string\"==typeof n&&\"string\"==typeof o||\"number\"==typeof n&&\"number\"==typeof o?n<o?s?-1:1:n>o?s?1:-1:0:\"number\"==typeof n?-1:1}));for(let e=o;e<=u;e++)for(let t=i;t<=a;t++){const r=c[e-o][t-i];if(r.math){const t=r.row-e,n=this._store.transposeMath(r.math,-t,0,this._parseContext);r.value=`=${n}`}h.push([e,t,{value:r.value}])}this.parseBlock(h)}addSpan(e,t,r){let n;if(!(t>1||r>1))return n=this._spans.findIndex((t=>t.id===e)),void(-1!==n&&this._spans.splice(n,1));for(let n=0;n<=this._spans.length-1;n++){const o=this._spans[n];pr(e,t,r,o.id,o.info.width,o.info.height)&&this._spans.splice(n,1)}this._spans.push({id:e,info:{width:t,height:r}})}getSpan(e){return this._spans.find((t=>t.id===e))||null}getSpans(){return this._spans}_recalculateSpans(e,t,r){if(this._spans.length)for(let n=this._spans.length-1;n>=0;n--){const o=this._spans[n];let{height:i,width:u}=o.info,[a,s]=_(o.id);t&&([a,i]=this._adjustSpan(a,i,e,t)),r&&([s,u]=this._adjustSpan(s,u,e,r)),u<1||i<1||u+i<=2?this._spans.splice(n,1):(o.id=y(a,s,this._id),o.info.height=i,o.info.width=u)}}_adjustSpan(e,t,r,n){const o=e+t;if(n<0){const i=r+(n=-n);r>e?r<=o&&(t-=Math.min(n,e+t-r)):i>e?(t-=i-e,e=n-(i-e)):e-=n}else r<=e?e+=n:r<=o&&(t+=n);return[e,t]}}function wr(e,t){const r=[e,0];for(let e=0;e<t;e++)r.push(null);return r}class Nr{constructor(e,t,r){this._ranges=new Map,this._counter=1,this._rangeOrder=[],this._store=e,this._page=t,this._pageGetter=r}get(e){return this._store.getMath(this._ranges.get(e))}toId(e){return this._ranges.get(e)}add(e,t){const r=this._ranges.get(e)||this._next_id();this._store.setMath(r,t,this._page.getContext()),this._ranges.set(e,r),this._refresh(e)}remove(e){this._ranges.delete(e),this._counter=1,this._refresh(e)}serialize(){return Array.from(this._ranges.keys()).map((e=>[e,this.get(e).source]))}parse(e){e.forEach((e=>this.add(e[0],e[1])))}_refresh(e){const t=e.indexOf(\"!\");let r=\"\";-1!==t&&(r=e.substr(0,t),e=e.substr(t+1)),this._store.each(((t,n)=>{if(function(e,t,r,n){for(let o=0;o<e.length;o+=3)if(6===e[o]){if(\"\"!==r){if(5===e[o-3]&&t.substr(e[o-2],e[o-1])!==r)continue;return!0}if(t.substr(e[o+1],e[o+2])===n)return!0}return!1}(n.code,n.source,r,e)){const e=M(t);this._store.setMath(t,n.source,this._pageGetter(e).getContext())}}))}_next_id(){for(;this._rangeOrder[this._counter];)this._counter++;return this._rangeOrder[this._counter]=!0,y(this._counter,0,this._page.getID())}renamePage(e,t){e+=\"!\",t&&(t+=\"!\"),this._ranges.forEach(((r,n,o)=>{0===n.indexOf(e)&&(t?o.set(n.replace(e,t),r):this._store.clean(r),o.delete(n))}))}}class Mr{constructor(e,t){this._store=e,this._pageGetter=t}copy(e,t){t||(t=e);const r=this._serialize(e,t);return this._store.setMeta({$clipboard:r}),r}paste(e,t,r,n,o=this._updateCurrentCell){var i;if(n=n||0,!(null===(i=r=r||this._store.getMeta().$clipboard)||void 0===i?void 0:i.data.length))return;const[u,a,s]=_(e),[c,h]=_(t),l=this._pageGetter(s),[f,d]=_(r.from||0),m=r.data,p=[],g=u-f,b=a-d,R=[];if(0===n){const e=m[0].length-1;for(let t=0;t<=m.length-1;t++)for(let r=0;r<=e;r++){const e=m[t][r],n=u+t,i=a+r,c=this._updateCell(n,i,s,e,g,b,o);c&&this._addCellToPasteData(p,c,R,n,i,s)}}if(1===n)for(let e=u;e<=c;e++)for(let t=a;t<=h;t++){const r=t-a,n=m[e-u][r],i=this._updateCell(e,t,s,n,g,b,o);i&&this._addCellToPasteData(p,i,R,e,t,s)}if(2===n){let e=0;for(let t=u;t<=c;t++){let r=0;e===m.length&&(e=0);for(let n=a;n<=h;n++){r===m[0].length&&(r=0);const i=m[e][r],u=t-(f+e),a=n-(d+r),c=this._updateCell(t,n,s,i,u,a,o);c&&this._addCellToPasteData(p,c,R,t,n,s),r++}e++}}l.parseBlock(p),this._refreshRelatedFormulas(R)}_addCellToPasteData(e,t,r,n,o,i){e.push(t);const u=y(n,o,i),a=this._store.getTriggerList(u);a&&r.push(...a)}clean(e,t,r){r=r||255;const[n,o,i]=_(e),[u,a]=_(t),s=this._pageGetter(i),c=[],h=[];for(let e=n;e<=u;e++)for(let t=o;t<=a;t++){const n=s.getCell(e,t),o=y(e,t,i),u=255!==r||n.$locked?Object.assign({},n):{};if(1&r&&!n.$locked){const e=this._store.getTriggerList(o);e&&h.push(...e),delete u.value}c.push([e,t,u])}s.parseBlock(c),this._refreshRelatedFormulas(h)}_refreshRelatedFormulas(e){Or(e).forEach((e=>this._store.refresh(e)))}_serialize(e,t){const[r,n,o]=_(e),[i,u]=_(t),a=this._pageGetter(o),s={from:e,data:[]};for(let e=r;e<=i;e++){const t=[];for(let r=n;r<=u;r++){const n=a.getCell(e,r),i=this._store.getMath(y(e,r,o));let u;i&&(u=i.source);let s=null;n&&(s=Object.assign({},n),delete s.$locked);const c=[s];u&&c.push(u),t.push(c)}s.data.push(t)}return s}reset(){this._store.setMeta({$clipboard:null})}move(e,t){const{data:r,from:n}=t||this._store.getMeta().$clipboard,[o,i,u]=_(n),a=r.length,s=r[0].length,[c,h,l]=_(e),f=[],d=[],m=this._pageGetter(l),p={id:n,h:a,w:s};for(let e=0;e<a;e++)for(let t=0;t<s;t++){const g=c+e,b=h+t,R=m.getCell(g,b);if(R&&R.$locked){d.push([g,b,R]);continue}const T=r[e][t],[_,w]=T,N=y(o+e,i+t,u),M=this._store.getTriggerList(N);if(M){const e=this._getTriggersOutsideCutRange(M,n,a,s);e.length&&f.push(...e)}if(_){if(w){const e=this._pageGetter(u).getContext(),t=this._store.moveMath(w,c-o,h-i,l,p,e,m.getContext());_.value=`=${t}`}d.push([g,b,_])}else d.push([g,b,{}])}m.parseBlock(d),this._updateRelatedFormulas(f,c-o,h-i,l,p)}_updateRelatedFormulas(e,t,r,n,o){Or(e).forEach((e=>{const[,,i]=_(e),u=this._store.getMath(e),a=this._pageGetter(i).getContext(),s=this._store.moveMath(u,t,r,n,o,a);this._store.setMath(e,s,a)}))}_getTriggersOutsideCutRange(e,t,r,n){const o=[];return e.forEach((e=>{pr(t,r,n,e,1,1)||o.push(e)})),o}_updateCell(e,t,r,n,o,i,u){const[a,s]=n,c=this._pageGetter(r),h=a?Object.assign({},a):{value:null},l=c.getCell(e,t)||{};if(l.$locked)return null;h.formula=s?`=${this._store.transposeMath(s,o,i)}`:null;const f=u(l,h);return f?[e,t,f]:null}_updateCurrentCell(e,t){return t.formula&&(t.value=t.formula),t}fromCSV(e,t=\"\\n\",r=\"\\t\"){return{data:e.split(t).map((e=>e.split(r).map((e=>[{value:e}]))))}}}function Or(e){const t=new Set(e);return Array.from(t)}class qr{constructor(e){this._cfg=e||{strict:!1},this._pages=[],this._pageNames=[],this._pageName2ID=new Map,this._pCounter=0,this._parseContext={page:e=>this._pageName2ID.get(e),pageName:e=>this._pageNames[e],pageObj:e=>this._pages[e],name:(e,t,r)=>{const n=e.length,o=t.substr(e[n-2],e[n-1]);let i;if(5===e[n-6]){const r=t.substr(e[n-5],e[n-4]);i=this._ranges.toId(r+\"!\"+o)||this._ranges.toId(o)}else i=this._ranges.toId(r.pageName(r.z)+\"!\"+o)||this._ranges.toId(o);e.push(9,i||-1,0)},z:0};const t=this._store=new yr(Object.assign(Object.assign({},this._cfg),{get:e=>{const[t,r,n]=_(e);return this._pages[n].getValue(t,r)},set:(e,r,n,o)=>{const[i,u,a]=_(e),s=this._pages[a].getCell(i,u,!0),c=0===o||o?null:\"number\"==typeof s.spill?s.spill:r||0===r?s.source:null;if(3===n){if(o>=0&&(s.spill=o,s.source!==o))return!1;s.source=o=null}else if(null===r&&0!==o&&!o&&s.source)return!1;if((o||0===o)&&e!==o&&s.source!==o&&(s.value||0===s.value||\"number\"==typeof s.source&&s.source!==o)){this._pages[a].throwError(\"spill error\")}s.source!==o&&(s.source=o);const h=2===n||3===n;if((null==n||h)&&(n=s.$format||0),s.$format=n,\"string\"==typeof r&&1!=n&&r){let e=parseFloat(r);h&&(e=e.toString()),e!=r||\"0\"===r[0]&&\"e\"!==r[1]&&r[1]>\"9\"||(r=parseFloat(r))}const l=s.value!==r;return l&&(s.value=r),\"number\"==typeof c&&t.triggerSet(new Set([c])),l}})),r=this._pages[63]=new _r(63,this._store,this._parseContext);this._ranges=new Nr(this._store,r,this.getPage.bind(this)),this._cm=new Mr(this._store,this.getPage.bind(this))}addPage(e){for(;this._pages[this._pCounter];)this._pCounter++;const t=this._pCounter,r=new _r(t,this._store,this._parseContext);return this._pageName2ID.set(e,t),this._pages[t]=r,this._pageNames[t]=e,r}renamePage(e,t){if(e===t)return;const r=this._pageName2ID.get(e);this._pageName2ID.delete(e),this._pageName2ID.set(t,r),this._pageNames[r]=t,this._ranges.renamePage(e,t);const n=this._pages[r].getContext();this._store.regenerate(r,!1,n)}removePage(e){const t=this._pageName2ID.get(e),r=this._pages[t].getContext();this._pageName2ID.delete(e),this._pages[t]=this._pageNames[t]=null,this._pCounter=0,this._ranges.renamePage(e,null),this._store.regenerate(t,!0,r)}getPage(e){return\"string\"==typeof e&&(e=this._pageName2ID.get(e)),this._pages[e]}getRanges(){return this._ranges}getStore(){return this._store}find(e,{firstOnly:t,resultsLimit:r=100}){const n=[];return this._pages.forEach(((o,i)=>{o.eachCell(((o,u,a)=>{const s=a.value;e(s)&&(t&&0===n.length||!t&&n.length<r)&&n.push({id:y(o,u,i),value:s})}))})),n}getCopyManager(){return this._cm}}const Er={UNIQUE:function(e,t,r){const n=Object.assign([],{$width:0,$height:0});if(r)for(let t=0;t<e.length;t++)-1==e.indexOf(e[t],e.indexOf(e[t])+1)&&n.push(e[t]);else n.push(...e.filter(((e,t,r)=>r.indexOf(e)==t)));const o=n.length;return t?(n.$height=1,n.$width=o):(n.$height=o,n.$width=1),n},RANDARRAY:function(e=1,t=1,r=0,n=1,o=0){const i=Object.assign([],{$width:0,$height:0});for(let u=0;u<e*t;u++){const e=Math.random()*(n-r)+r;i.push(o?Math.round(e):e)}return i.$width=t,i.$height=e,i},TOROW:function(e,t=0,r=0){const n=ce(e,t,r);return Object.assign(n,{$width:n.length,$height:1})},TOCOL:function(e,t=0,r=0){const n=ce(e,t,r);return Object.assign(n,{$width:1,$height:n.length})},TEXTSPLIT:function(e,t,r,n,o,i=G.na){let u;if(r){let t=r;\"string\"!=typeof r&&(t=r.map((e=>e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\"))).join(\"|\")),u=e.split(new RegExp(t,o?\"i\":void 0))}else u=[e];n&&(u=u.filter((e=>e)));let a=0;u=u.map((e=>{let r=[e];if(t){let n=t;\"string\"!=typeof t&&(n=t.map((e=>e.replace(/[.*+?^${}()|[\\]\\\\]/g,\"\\\\$&\"))).join(\"|\")),r=e.split(new RegExp(n,o?\"i\":void 0))}return n&&(r=r.filter((e=>e))),a=Math.max(r.length,a),r})),u=u.map((e=>(e.length<a&&(e=e.concat(Array(a-e.length).fill(i))),e)));const s=Object.assign([],{$width:a,$height:u.length});for(let e=0;e<u.length;e++)for(let t=0;t<a;t++)s.push(u[e][t]);return s},WRAPROWS:function(e,t,r=G.na){const n=Math.ceil(e.length/t);return Object.assign(e.concat(new Array(t*n%e.length).fill(r)),{$width:t,$height:n})},WRAPCOLS:function(e,t,r=G.na){const n=Math.ceil(e.length/t),o=t*n,i=Object.assign(new Array(o),{$width:0,$height:0});for(let o=0;o<n;o++)for(let u=0;u<t;u++){const a=o*t+u;i[u*n+o]=a<e.length?e[a]:r}return i.$width=n,i.$height=t,i},TAKE:function(e,t,r){const n=e.$width,o=e.$height;let i=o;\"number\"==typeof t&&(i=Math.min(Math.abs(t),o),t<0&&(i*=-1));let u=n;\"number\"==typeof r&&(u=Math.min(Math.abs(r),n),r<0&&(u*=-1));const a=i>=0?0:o+i,s=i>=0?a+i:o,c=u>=0?0:n+u,h=u>=0?c+u:n,l=Object.assign([],{$width:0,$height:0});for(let t=a;t<s;t++)for(let r=c;r<h;r++){const o=t*n+r;l.push(e[o])}return l.$height=s-a,l.$width=h-c,l},DROP:function(e,t,r){const n=e.$width,o=e.$height;let i=0,u=o;\"number\"==typeof t&&(t>0?i=Math.min(t,o):t<0&&(u=o-Math.min(-t,o)));let a=0,s=n;\"number\"==typeof r&&(r>0?a=Math.min(r,n):r<0&&(s=n-Math.min(-r,n)));const c=Object.assign([],{$width:0,$height:0});for(let t=i;t<u;t++)for(let r=a;r<s;r++)c.push(e[t*n+r]);return c.$height=u-i,c.$width=s-a,c},SEQUENCE:function(e,t=1,r=1,n=1){const o=Object.assign([],{$width:0,$height:0});for(let i=0;i<e;i++)for(let e=0;e<t;e++){const u=r+(i*t+e)*n;o.push(u)}return o.$height=e,o.$width=t,o},CHOOSEROWS:function(e,...t){const r=e.$width,n=e.$height,o=Object.assign([],{$width:0,$height:0}),i=t.map((e=>e>0?e-1:n+e));for(const t of i){if(!(t>=0&&t<n))throw\"incorrect row index\";for(let n=0;n<r;n++)o.push(e[t*r+n])}return o.$width=r,o.$height=i.length,o},CHOOSECOLS:function(e,...t){const r=e.$width,n=e.$height,o=Object.assign([],{$width:0,$height:0}),i=t.map((e=>e>0?e-1:r+e));for(let t=0;t<n;t++)for(const n of i){if(!(n>=0&&n<r))throw\"incorrect column index\";o.push(e[t*r+n])}return o.$width=i.length,o.$height=n,o},EXPAND:function(e,t=0,r=0,n=G.na){const o=Object.assign([],{$width:0,$height:0});o.$height=Math.max(t,e.$height),o.$width=Math.max(r,e.$width);for(let t=0;t<o.$height;t++)for(let r=0;r<o.$width;r++)t<e.$height&&r<e.$width?o.push(e[t*e.$width+r]):o.push(n);return o},SORT:function(e,t=1,r=1,n=0){let o=ae(e);return n&&(o=ue(o)),ie(o,[{index:t,dir:r}]),n&&(o=ue(o)),se(o,e.$width,e.$height)},SORTBY:function(e,...t){const r=ae(e),n=[];for(let e=0;e<t.length;e++){const o=t[e];e%2?\"number\"==typeof o&&(n[n.length-1].dir=o):\"number\"!=typeof o&&(r.map(((e,t)=>{const r=o[t];e.push(void 0===r?\"\":r)})),n.push({index:r[0].length,dir:1}))}return ie(r,n),se(r,e.$width,e.$height)}};function Ar(e,t,r,n=0,o=0){const i=re(e),u=re(t),a=re(r),s=re(n);let c;if(0===i)c=(a+s)/u;else{const e=Math.pow(1+i,u);c=i*(a*e+s)/(e-1),1===o&&(c/=1+i)}return-c}function vr(e,t,r,n=0,o=0){const i=re(e),u=re(t),a=re(r),s=re(n);let c;if(0!==i){const e=Math.pow(1+i,u);return c=s*e+a*(e-1)/i,1===o&&(c=s*e+a*(1+i)*(e-1)/i),-c}c=s+a*u}function Sr(e,t,r,n,o=0,i=0){const u=re(e),a=re(r),s=re(t),c=re(n),h=Ar(u,a,c,re(o),i);let l;return l=1===s?1===i?0:-c:1===i?vr(u,s-2,h,c,1)-h:vr(u,s-1,h,c,0),l*u}var Ir=Object.freeze({__proto__:null,ACCRINT:function(e,t,r,n,o=0,i,u=0){const a=te(e),s=te(r),c=re(n),h=re(o),l=re(i),f=re(u);if(1!==l)throw\"This function is only supported with frequency 1\";if(-1===[0,1,2,3,4].indexOf(f))throw`Basis is ${u}. It's should be 0, 1, 2, 3 or 4`;if(s<=a)throw\"Settlement canot be before or equal to issue\";return h*c*Qt(e,r,f)},PMT:Ar,FV:vr,DB:function(e,t,r,n,o=12){const i=re(e),u=re(t),a=re(r),s=re(n),c=re(o);if(i<0||u<0||a<0||s<0)throw\"Parameters cannot be negative\";if(-1===[1,2,3,4,5,6,7,8,9,10,11,12].indexOf(c))throw`Month is ${o}. It's should be beetwen 1 and 12`;if(s>a)throw\"Period cannot be greater than life\";if(u>=i)return 0;const h=+(1-Math.pow(u/i,1/a)).toFixed(3),l=i*h*c/12;let f=l,d=0;const m=n===a?a-1:n;for(let e=2;e<=+m;e++)d=(i-f)*h,f+=d;return 1===n?l:n===a?(i-f)*h:d},DDB:function(e,t,r,n,o=2){const i=re(e),u=re(t),a=re(r),s=re(n),c=re(o);if(i<0||u<0||a<0||s<0||c<0)throw\"Parameters cannot be negative\";if(s>a)throw\"Period cannot be greater than life\";if(u>=i)return 0;let h=0,l=0;for(let e=1;e<=+n;e++)l=Math.min(c/a*(i-h),i-u-h),h+=l;return l},DOLLAR:function(e,t=2){const r=Q(e),n=Q(t);if(\"number\"==typeof r&&\"number\"==typeof n){if(n>=0)return`$${r.toFixed(n)}`;const e=Math.pow(10,-n);return\"$\"+Math.trunc(r/e)*e}},DOLLARDE:function(e,t){const r=re(e);let n=re(t);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(`${n}`,10);let o=parseInt(`${e}`,10);o+=r%1*Math.pow(10,Math.ceil(Math.log(n)/Math.LN10))/n;const i=Math.pow(10,Math.ceil(Math.log(n)/Math.LN2)+1);return o=Math.round(o*i)/i,o},DOLLARFR:function(e,t){const r=re(e);let n=re(t);if(n<0)throw\"Fraction cannot be negative\";if(n>=0&&n<1)throw\"Fraction cannot be zero\";n=parseInt(`${n}`,10);let o=parseInt(`${e}`,10);return o+=r%1*Math.pow(10,-Math.ceil(Math.log(n)/Math.LN10))*n,o},EFFECT:function(e,t){const r=re(e);let n=re(t);if(r<=0)throw\"Rate cannot be less than or equal to zero\";if(n<1)throw\"Periods cannot be less than 1\";return n=parseInt(`${n}`,10),Math.pow(1+r/n,n)-1},FVSCHEDULE:function(e,t){const r=re(e),n=t.map((e=>re(e))),o=n.length;let i=r;for(let e=0;e<o;e++)i*=1+n[e];return i},IRR:function(e,t=0){const r=J(e).map((e=>re(e)));let n=re(t);const o=function(e,t,r){const n=r+1;let o=e[0];for(let r=1;r<e.length;r++)o+=e[r]/Math.pow(n,(t[r]-t[0])/365);return o},i=function(e,t,r){const n=r+1;let o=0;for(let r=1;r<e.length;r++){const i=(t[r]-t[0])/365;o-=i*e[r]/Math.pow(n,i+1)}return o},u=[];let a=!1,s=!1;for(let e=0;e<r.length;e++)u[e]=0===e?0:u[e-1]+365,r[e]>0&&(a=!0),r[e]<0&&(s=!0);if(!a||!s)throw\"Values should contain at least one positive value and one negative value\";n=void 0===t?.1:n;let c,h,l,f=n,d=!0;do{l=o(r,u,f),c=f-l/i(r,u,f),h=Math.abs(c-f),f=c,d=h>1e-10&&Math.abs(l)>1e-10}while(d);return f},IPMT:Sr,ISPMT:function(e,t,r,n){const o=re(e),i=re(t),u=re(r);return re(n)*o*(i/u-1)},NPV:function(...e){const t=J(e).map((e=>re(e))),r=re(t[0]);let n=0;for(let e=1;e<t.length;e++)n+=t[e]/Math.pow(1+r,e);return n},NOMINAL:function(e,t){const r=re(e);let n=re(t);if(r<=0)throw\"Rate cannot be less then or equal to zero\";if(n<1)throw\"Periods cannot be less then 1\";return n=parseInt(`${n}`,10),(Math.pow(r+1,1/n)-1)*n},NPER:function(e,t,r,n=0,o=0){const i=re(e),u=re(t),a=re(r),s=re(n),c=re(o),h=u*(1+i*c)-s*i,l=a*i+u*(1+i*c);return Math.log(h/l)/Math.log(1+i)},PDURATION:function(e,t,r){const n=re(e),o=re(t),i=re(r);if(n<=0)throw\"Rate cannot be less then or equal to zero\";return(Math.log(i)-Math.log(o))/Math.log(1+n)},PPMT:function(e,t,r,n,o=0,i=0){const u=re(e),a=re(t),s=re(r),c=re(n),h=re(o),l=re(i);return Ar(u,s,c,h,l)-Sr(u,a,s,c,h,l)},PV:function(e,t,r,n=0,o=0){const i=re(e),u=re(t),a=re(r),s=re(n),c=re(o);return 0===i?-a*u-s:((1-Math.pow(1+i,u))/i*a*(1+i*c)-s)/Math.pow(1+i,u)},SYD:function(e,t,r,n){const o=re(e),i=re(t),u=re(r);return(o-i)*(u-re(n)+1)*2/(u*(u+1))},TBILLPRICE:function(e,t,r){const n=te(e),o=te(t),i=re(r);if(\"number\"==typeof i&&o>n){return 100*(1-i*Math.round((o.getTime()-n.getTime())/864e5)/360)}},TBILLYIELD:function(e,t,r){const n=te(e),o=te(t),i=re(r);if(\"number\"==typeof i&&o>n){return(100-i)/i*360/Math.round((o.getTime()-n.getTime())/864e5)}}});const Cr=()=>({SUM:[[\"Number1\",\"Required. The first value to sum.\"],[\"Number2\",\"Optional. The second value to sum.\"],[\"Number3\",\"Optional. The third value to sum.\"]],AVERAGE:[[\"Number1\",\"Required. A number or cell reference that refers to numeric values.\"],[\"Number2\",\"Optional. A number or cell reference that refers to numeric values.\"]],AVERAGEA:[[\"Value1\",\"Required. A value or reference to a value that can be evaluated as a number.\"],[\"Value2\",\"Optional. A value or reference to a value that can be evaluated as a number.\"]],COUNT:[[\"Value1\",\"Required. An item, cell reference, or range.\"],[\"Value2\",\"Optional. An item, cell reference, or range.\"]],COUNTA:[[\"Value1\",\"Required. An item, cell reference, or range.\"],[\"Value2\",\"Optional. An item, cell reference, or range.\"]],MIN:[[\"Number1\",\"Required. Number, reference to numeric value, or range that contains numeric values.\"],[\"Number2\",\"Optional. Number, reference to numeric value, or range that contains numeric values.\"]],MAX:[[\"Number1\",\"Required. Number, reference to numeric value, or range that contains numeric values.\"],[\"Number2\",\"Optional. Number, reference to numeric value, or range that contains numeric values.\"]],SQRT:[[\"Number\",\"Required. The number to get the square root of.\"]],POWER:[[\"Number\",\"Required. Number to raise to a power.\"],[\"Power\",\"Required. Power to raise number to (the exponent).\"]],LOG:[[\"Number\",\"Required. Number for which you want the logarithm.\"],[\"Base\",\"Optional. Base of the logarithm. Defaults to 10.\"]],EXP:[[\"Number\",\"Required. The power that e is raised to.\"]],PRODUCT:[[\"Number1\",\"Required. The first number or range to multiply.\"],[\"Number2\",\"Optional. The second number or range to multiply.\"]],SUMPRODUCT:[[\"Array1\",\"Required. The first array or range to multiply, then add.\"],[\"Array2\",\"Optional. The second array or range to multiply, then add.\"]],ABS:[[\"Number\",\"Required. The number to get the absolute value of.\"]],RAND:[],RANDBETWEEN:[[\"Bottom\",\"Required. An integer representing the lower value of the range.\"],[\"Top\",\"Required. An integer representing the upper value of the range.\"]],ROUND:[[\"Number\",\"Required. The number to round.\"],[\"Num_digits\",\"Required. The place at which number should be rounded.\"]],ROUNDUP:[[\"Number\",\"Required. The number to round up.\"],[\"Num_digits\",\"Required. The place at which number should be rounded.\"]],ROUNDDOWN:[[\"Number\",\"Required. The number to round down.\"],[\"Num_digits\",\"Required. The place at which number should be rounded.\"]],INT:[[\"Number\",\"Required. The number from which you want an integer.\"]],CEILING:[[\"Number\",\"Required. The number that should be rounded.\"],[\"Significance\",\"Required. The multiple to use when rounding.\"]],FLOOR:[[\"Number\",\"Required. The number that should be rounded.\"],[\"Significance\",\"Required. The multiple to use when rounding.\"]],CONCATENATE:[[\"Text1\",\"Required. The first text value to join together.\"],[\"Text2\",\"Required. The second text value to join together.\"],[\"Text3\",\"Optional. The third text value to join together.\"]],MID:[[\"Text\",\"Required. The text to extract from.\"],[\"Start_num\",\"Required. The location of the first character to extract.\"],[\"Num_chars\",\"Required. The number of characters to extract.\"]],LEFT:[[\"Text\",\"Required. The text from which to extract characters.\"],[\"Num_chars\",\"Optional. The number of characters to extract, starting on the left side of text. Default = 1.\"]],RIGHT:[[\"Text\",\"Required. The text from which to extract characters on the right.\"],[\"Num_chars\",\"Optional. The number of characters to extract, starting on the right. Optional, default = 1.\"]],LOWER:[[\"Text\",\"Required. The text that should be converted to lower case.\"]],UPPER:[[\"Text\",\"Required. The text thatto convert to upper case.\"]],PROPER:[[\"Text\",\"Required. The text that should be converted to proper case.\"]],TRIM:[[\"Text\",\"Required. The text from which to remove extra space.\"]],LEN:[[\"Text\",\"Required. The text for which to calculate length.\"]],SEARCH:[[\"Find_text\",\"Required. The substring to find.\"],[\"Within_text\",\"Required. The text to search within.\"],[\"Start_num\",\"Optional. Starting position. Optional, defaults to 1.\"]],FIND:[[\"Find_text\",\"Required. The substring to find.\"],[\"Within_text\",\"Required. The text to search within.\"],[\"Start_num\",\"Optional. The starting position in the text to search. Optional, defaults to 1.\"]],REPLACE:[[\"Old_text\",\"Required. The text to replace.\"],[\"Start_num\",\"Required. The starting location in the text to search.\"],[\"Num_chars\",\"Required. The number of characters to replace.\"],[\"New_text\",\"Required. The text to replace old_text with.\"]],SUBSTITUTE:[[\"Text\",\"Required. The text to change.\"],[\"Old_text\",\"Required. The text to replace.\"],[\"New_text\",\"Required. The text to replace with.\"],[\"Instance\",\"Optional. The instance to replace. If not supplied, all instances are replaced.\"]],NOW:[],DATE:[[\"Year\",\"Required. Number for year.\"],[\"Month\",\"Required. Number for month.\"],[\"Day\",\"Required. Number for day.\"]],TIME:[[\"Hour\",\"Required. The hour for the time you wish to create.\"],[\"Minute\",\"Required. The minute for the time you wish to create.\"],[\"Second\",\"Required. The second for the time you wish to create.\"]],YEAR:[[\"Date\",\"Required. A valid Excel date.\"]],MONTH:[[\"Serial_number\",\"Required. A valid Excel date.\"]],DAY:[[\"Date\",\"Required. A valid Excel date.\"]],HOUR:[[\"Serial_number\",\"Required. A valid Excel time.\"]],MINUTE:[[\"Serial_number\",\"Required. A valid date or time.\"]],SECOND:[[\"Serial_number\",\"Required. A valid time in a format Excel recognizes.\"]],DATEDIF:[[\"Start_date\",\"Required. Start date in Excel date serial number format.\"],[\"End_date\",\"Required. End date in Excel date serial number format.\"],[\"Unit\",\"Required. The time unit to use (years, months, or days).\"]],LOOKUP:[[\"Lookup_value\",\"Required. The value to search for.\"],[\"Lookup_vector\",\"Required. The one-row, or one-column range to search.\"],[\"Result_vector\",\"Optional. The one-row, or one-column range of results.\"]],HLOOKUP:[[\"Lookup_value\",\"Required. The value to look up.\"],[\"Table_array\",\"Required. The table from which to retrieve data.\"],[\"Row_index\",\"Required. The row number from which to retrieve data.\"],[\"Range_lookup\",\"Optional. A Boolean to indicate exact match or approximate match. Default = TRUE = approximate match.\"]],VLOOKUP:[[\"Lookup_value\",\"Required. The value to look for in the first column of a table.\"],[\"Table_array\",\"Required. The table from which to retrieve a value.\"],[\"Column_index_num\",\"Required. The column in the table from which to retrieve a value.\"],[\"Range_lookup\",\"Optional. TRUE = approximate match (default). FALSE = exact match.\"]],XLOOKUP:[[\"Lookup\",\"Required. The lookup value.\"],[\"Lookup_array\",\"Required. The array or range to search.\"],[\"Return_array\",\"Required. The array or range to return.\"],[\"Not_found\",\"Optional. Value to return if no match found.\"],[\"Match_mode\",\"Optional. 0 = exact match (default), -1 = exact match or next smallest, 1 = exact match or next larger, 2 = wildcard match.\"],[\"Search_mode\",\"Optional. 1 = search from first (default), -1 = search from last, 2 = binary search ascending, -2 = binary search descending.\"]],INDEX:[[\"Array\",\"Required. A range of cells, or an array constant.\"],[\"Row_num\",\"Required. The row position in the reference or array.\"],[\"Col_num\",\"Optional. The column position in the reference or array.\"],[\"Area_num\",\"Optional. The range in reference that should be used.\"]],MATCH:[[\"Lookup_value\",\"Required. The value to match in lookup_array.\"],[\"Lookup_array\",\"Required. A range of cells or an array reference.\"],[\"Match_type\",\"Optional. 1 = exact or next smallest (default), 0 = exact match, -1 = exact or next largest.\"]],XMATCH:[[\"Lookup_value\",\"Required. The lookup value.\"],[\"Lookup_array\",\"Required. The array or range to search.\"],[\"Match_mode\",\"Optional. 0 = exact match (default), -1 = exact match or next smallest, 1 = exact match or next larger, 2 = wildcard match.\"],[\"Search_mode\",\"Optional. 1 = search from first (default), -1 = search from last, 2 = binary search ascending, -2 = binary search descending.\"]],CHOOSE:[[\"Index_num\",\"Required. The value to choose. A number between 1 and 254.\"],[\"Value1\",\"Required. The first value from which to choose.\"],[\"Value2\",\"Optional. The second value from which to choose.\"]],ISBLANK:[[\"Value\",\"Required. The value to check.\"]],ISBINARY:[[\"Value\",\"Required. The value to check.\"]],ISEVEN:[[\"Value\",\"Required. The numeric value to check.\"]],ISODD:[[\"Value\",\"Required. The numeric value to check.\"]],ISNONTEXT:[[\"Value\",\"Required. The value to check.\"]],ISNUMBER:[[\"Value\",\"Required. The value to check.\"]],ISTEXT:[[\"Value\",\"Required. The value to check.\"]],N:[[\"Value\",\"Required. The value to convert to a number.\"]],IF:[[\"Logical_test\",\"Required. A value or logical expression that can be evaluated as TRUE or FALSE.\"],[\"Value_if_true\",\"Optional. The value to return when logical_test evaluates to TRUE.\"],[\"Value_if_false\",\"Optional. The value to return when logical_test evaluates to FALSE.\"]],AND:[[\"Logical1\",\"Required. The first condition or logical value to evaluate.\"],[\"Logical2\",\"Optional. The second condition or logical value to evaluate.\"]],NOT:[[\"Logical\",\"Required. A value or logical expression that can be evaluated as TRUE or FALSE.\"]],OR:[[\"Logical1\",\"Required. The first condition or logical value to evaluate.\"],[\"Logical2\",\"Optional. The second condition or logical value to evaluate.\"]],FALSE:[],TRUE:[],ACOS:[[\"Number\",\"Required. The value to get the inverse cosine of. The number must be between -1 and 1 inclusive.\"]],ACOSH:[[\"Number\",\"Required. Any real number equal to or greater than 1.\"]],ACOT:[[\"Number\",\"Required. Number is the cotangent of the angle you want. This must be a real number.\"]],ACOTH:[[\"Number\",\"Required. The absolute value of Number must be greater than 1.\"]],ADD:[[\"Number1\",\"Required. The first value to sum.\"],[\"Number2\",\"Required. The second value to sum.\"]],ARABIC:[[\"Roman_text\",\"Required. The Roman numeral in text that you want to convert.\"]],ASIN:[[\"Number\",\"Required. The value to get the inverse sine of. The number must be between -1 and 1 inclusive.\"]],ASINH:[[\"Number\",\"Required. Any real number.\"]],ATAN:[[\"Number\",\"Required. The value to get the inverse tangent of.\"]],ATAN2:[[\"X_num\",\"Required. The x coordinate of the input point.\"],[\"Y_num\",\"Required. The y coordinate of the input point.\"]],ATANH:[[\"Number\",\"Required. Any real number between 1 and -1.\"]],AVEDEV:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],BASE:[[\"Number\",\"Required. The number to convert to a given base.\"],[\"Radix\",\"Required. The base to convert to.\"],[\"Min_length\",\"Optional. The minimum string length to return, achieved by padding with zeros.\"]],BINOMDIST:[[\"Number_s\",\"Required. The number of successes.\"],[\"Trials\",\"Required. The number of independent trials.\"],[\"Probability_s\",\"Required. The probability of success on each trial.\"],[\"Cumulative\",\"Required. TRUE = cumulative distribution function, FALSE=probability mass function.\"]],\"BINOM.INV\":[[\"Trials\",\"Required. The number of Bernoulli trials.\"],[\"Probability_s\",\"Required. The probability of a success on each trial.\"],[\"Alpha\",\"Required. The criterion value.\"]],\"BINOM.DIST.RANGE\":[[\"Trials\",\"Required. The number of independent trials. Must be greater than or equal to 0.\"],[\"Probability_s\",\"Required. The probability of success in each trial. Must be greater than or equal to 0 and less than or equal to 1.\"],[\"Number_s\",\"Required. The number of successes in trials. Must be greater than or equal to 0 and less than or equal to Trials.\"],[\"Number_s2\",\"Optional. If provided, returns the probability that the number of successful trials will fall between Number_s and number_s2. Must be greater than or equal to Number_s and less than or equal to Trials.\"]],\"BINOM.DIST\":[[\"Number_s\",\"Required. The number of successes.\"],[\"Trials\",\"Required. The number of independent trials.\"],[\"Probability_s\",\"Required. The probability of success on each trial.\"],[\"Cumulative\",\"Required. TRUE = cumulative distribution function, FALSE=probability mass function.\"]],BITAND:[[\"Number1\",\"Required. A positive decimal number.\"],[\"Number2\",\"Required. A positive decimal number.\"]],BITLSHIFT:[[\"Number\",\"Required. The number to be bit shifted.\"],[\"Shift_amount\",\"Required. The amount of bits to shift, if negative shifts bits to the right instead.\"]],BITOR:[[\"Number1\",\"Required. A positive decimal number.\"],[\"Number2\",\"Required. A positive decimal number.\"]],BITRSHIFT:[[\"Number\",\"Required. The number to be bit shifted.\"],[\"Shift_amount\",\"Required. The amount of bits to shift to the right, if negative shifts bits to the left instead.\"]],BITXOR:[[\"Number1\",\"Required. A positive decimal number.\"],[\"Number2\",\"Required. A positive decimal number.\"]],COMBIN:[[\"Number\",\"Required. The total number of items.\"],[\"Number_chosen\",\"Required. The number of items in each combination.\"]],COMBINA:[[\"Number\",\"Required. The total number of items.\"],[\"Number_chosen\",\"Required. The number of items in each combination.\"]],COMPLEX:[[\"Real_num\",\"Required. The real number.\"],[\"I_num\",\"Required. The imaginary number.\"],[\"Suffix\",'Optional. The suffix, either \"i\" or \"j\".']],CORREL:[[\"Array1\",\"Required. A range of cell values.\"],[\"Array2\",\"Required. A second range of cell values.\"]],COS:[[\"Number\",\"Required. The angle in radians for which you want the cosine.\"]],COSH:[[\"Number\",\"Required. The hyperbolic angle.\"]],COT:[[\"Number\",\"Required. The angle provided in radians.\"]],COTH:[[\"Number\",\"Required.\"]],COUNTBLANK:[[\"Range\",\"Required. The range in which to count blank cells.\"]],COVAR:[[\"Array1\",\"Required. The first cell range of integers.\"],[\"Array2\",\"Required. The second cell range of integers.\"]],\"COVARIANCE.P\":[[\"Array1\",\"Required. The first cell range of integers.\"],[\"Array2\",\"Required. The second cell range of integers.\"]],\"COVARIANCE.S\":[[\"Array1\",\"Required. The first cell range of integers.\"],[\"Array2\",\"Required. The second cell range of integers.\"]],CSC:[[\"Number\",\"Required. The angle provided in radians.\"]],CSCH:[[\"Number\",\"Required.\"]],DEC2BIN:[[\"Number\",\"Required. The decimal number you want to convert to binary.\"],[\"Places\",\"Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],DEC2HEX:[[\"Number\",\"Required. The decimal number you want to convert to hexadecimal.\"],[\"Places\",\"Optional. Pads the resulting number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],DEC2OCT:[[\"Number\",\"Required. The decimal number you want to convert to octal.\"],[\"Places\",\"Optional. Pads the resulting octal number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],DECIMAL:[[\"Number\",\"Required. A text string representing a number.\"],[\"Radix\",\"Required. The base of the number to be converted, an integer between 2-36.\"]],DEGREES:[[\"Angle\",\"Required. Angle in radians that you want to convert to degrees.\"]],DELTA:[[\"Number1\",\"Required. The first number.\"],[\"Number2\",\"Optional. The second number.\"]],DEVSQ:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],DIVIDE:[[\"Number1\",\"Required. The number we are dividing.\"],[\"Number2\",\"Required. The number by which we divide.\"]],EQ:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],ERF:[[\"Lower_limit\",\"Required. The lower bound for integrating ERF.\"],[\"Upper_limit\",\"Optional. The upper bound for integrating ERF. If omitted, ERF integrates between zero and lower_limit.\"]],ERFC:[[\"X\",\"Required. The lower bound for integrating ERFC.\"]],EVEN:[[\"Number\",\"Required. The number to round up to an even integer.\"]],FACT:[[\"Number\",\"Required. The number to get the factorial of.\"]],FACTDOUBLE:[[\"Number\",\"Required. A number greater than or equal to -1.\"]],FISHER:[[\"X\",\"Required. A numeric value for which you want the transformation.\"]],FISHERINV:[[\"Y\",\"Required. The value for which you want to perform the inverse of the transformation.\"]],GAMMA:[[\"Number\",\"Required. Returns a number.\"]],GCD:[[\"Number1\",\"Required. The first number.\"],[\"Number2\",\"Optional. The second number.\"]],GEOMEAN:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],GESTEP:[[\"Number\",\"Required. The value to test against step.\"],[\"Step\",\"Optional. The threshold value. If you omit a value for step, GESTEP uses zero.\"]],GT:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],GTE:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],HARMEAN:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Optional. Second value or reference.\"]],HEX2BIN:[[\"Number\",\"Required. The hexadecimal number you want to convert to binary.\"],[\"Places\",\"Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],HEX2DEC:[[\"Number\",\"Required. The hexadecimal number you want to convert to decimal.\"]],HEX2OCT:[[\"Number\",\"Required. The hexadecimal number you want to convert to octal.\"],[\"Places\",\"Optional. Pads the resulting binary number with zeros up to the specified number of digits. If omitted returns the least number of characters required to represent the number.\"]],IMABS:[[\"Inumber\",\"Required. A complex number.\"]],IMAGINARY:[[\"Inumber\",\"Required. A complex number.\"]],IMCONJUGATE:[[\"Inumber\",\"Required. A complex number for which you want the conjugate.\"]],IMCOS:[[\"Inumber\",\"Required. A complex number for which you want the cosine.\"]],IMCOSH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic cosine.\"]],IMCOT:[],IMCSC:[[\"Inumber\",\"Required. A complex number for which you want the cosecant.\"]],IMCSCH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic cosecant.\"]],IMDIV:[[\"Inumber1\",\"Required. The complex numerator or dividend.\"],[\"Inumber2\",\"Required. The complex denominator or divisor.\"]],IMEXP:[[\"Inumber\",\"Required. A complex number for which you want the exponential.\"]],IMLN:[[\"Inumber\",\"Required. A complex number for which you want the natural logarithm.\"]],IMPOWER:[[\"Inumber\",\"Required. A complex number.\"],[\"Number\",\"Required. Power to raise number.\"]],IMPRODUCT:[[\"Inumber1\",\"Required. Complex number 1.\"],[\"Inumber2\",\"Optional. Complex number 2.\"]],IMREAL:[[\"Inumber\",\"Required. A complex number.\"]],IMSEC:[[\"Inumber\",\"Required. A complex number for which you want the secant.\"]],IMSECH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic secant.\"]],IMSIN:[[\"Inumber\",\"Required. A complex number for which you want the sine.\"]],IMSINH:[[\"Inumber\",\"Required. A complex number for which you want the hyperbolic sine.\"]],IMSQRT:[[\"Inumber\",\"Required. A complex number for which you want the square root.\"]],IMSUB:[[\"Inumber1\",\"Required. Complex number 1.\"],[\"Inumber2\",\"Required. Complex number 2.\"]],IMSUM:[[\"Inumber1\",\"Required. Complex number 1.\"],[\"Inumber2\",\"Optional. Complex number 2.\"]],IMTAN:[[\"Inumber\",\"Required. A complex number for which you want the tangent.\"]],LARGE:[[\"Array\",\"Required. An array or range of numeric values.\"],[\"K\",\"Required. Position as an integer, where 1 corresponds to the largest value.\"]],LN:[[\"Number\",\"Required. A number to take the natural logarithm of.\"]],LOG10:[[\"Number\",\"Required. Number for which you want the logarithm.\"]],LT:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],LTE:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],MEDIAN:[[\"Number1\",\"Required. A number or cell reference that refers to numeric values.\"],[\"Number2\",\"Optional. A number or cell reference that refers to numeric values.\"]],MINUS:[[\"Number1\",\"Required. The number from which we subtract.\"],[\"Number2\",\"Required. The number by which we subtract.\"]],MOD:[[\"Number\",\"Required. The number to be divided.\"],[\"Divisor\",\"Required. The number to divide with.\"]],MROUND:[[\"Number\",\"Required. The number that should be rounded.\"],[\"Significance\",\"Required. The multiple to use when rounding.\"]],MULTINOMIAL:[[\"Number1, number2, ...\",\"Required. Number1 is required, subsequent numbers are optional. 1 to 255 values for which you want the multinomial.\"]],MULTIPLY:[[\"Number1\",\"Required. The number to multiply.\"],[\"Number2\",\"Required. The number to multiply by.\"]],NE:[[\"Number1\",\"Required. First value or reference.\"],[\"Number2\",\"Required. Second value or reference.\"]],OCT2BIN:[[\"Number\",\"Required. The octal number you want to convert. Number may not contain more than 10 characters. The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\"],[\"Places\",\"Optional. The number of characters to use. If places is omitted, OCT2BIN uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\"]],OCT2DEC:[[\"Number\",\"Required. The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\"]],OCT2HEX:[[\"Number\",\"Required. The octal number you want to convert. Number may not contain more than 10 octal characters (30 bits). The most significant bit of number is the sign bit. The remaining 29 bits are magnitude bits. Negative numbers are represented using two's-complement notation.\"],[\"Places\",\"Optional. The number of characters to use. If places is omitted, OCT2HEX uses the minimum number of characters necessary. Places is useful for padding the return value with leading 0s (zeros).\"]],ODD:[[\"Number\",\"Required. The number to round up to an odd integer.\"]],PERCENTILE:[[\"Array\",\"Required. Data values.\"],[\"K\",\"Required. Number representing kth percentile.\"]],\"PERCENTILE.INC\":[[\"Array\",\"Required. Data values.\"],[\"K\",\"Required. Number representing kth percentile.\"]],\"PERCENTILE.EXC\":[[\"Array\",\"Required. Data values.\"],[\"K\",\"Required. A value between 0 and 1 that represents the k:th percentile.\"]],PERMUT:[[\"Number\",\"Required. The total number of items.\"],[\"Number_chosen\",\"Required. The number of items in each combination.\"]],PI:[],POW:[[\"Number\",\"Required. Number to raise to a power.\"],[\"Power\",\"Required. Power to raise number to (the exponent).\"]],QUARTILE:[[\"Array\",\"Required. A reference containing data to analyze.\"],[\"Quart\",\"Required. The quartile value to return.\"]],\"QUARTILE.INC\":[[\"Array\",\"Required. A reference containing data to analyze.\"],[\"Quart\",\"Required. The quartile value to return.\"]],\"QUARTILE.EXC\":[[\"Array\",\"Required. A reference containing data to analyze.\"],[\"Quart\",\"Required. The quartile value to return, 1-3.\"]],QUOTIENT:[[\"Numerator\",\"Required. The number to be divided.\"],[\"Denominator\",\"Required. The number to divide by.\"]],RADIANS:[[\"Angle\",\"Required. Angle in degrees to convert to radians.\"]],ROMAN:[[\"Number\",\"Required. Number (in Arabic numeral) you want to convert to Roman numeral.\"],[\"Form\",\"Optional. The type of Roman numeral you want.\"]],SEC:[[\"Number\",\"Required. The angle in radians for which you want the secant.\"]],SECH:[],SIGN:[[\"Number\",\"Required. The number to get the sign of.\"]],SIN:[[\"Number\",\"Required. The angle in radians for which you want the sine.\"]],SINH:[[\"Number\",\"Required. The hyperbolic angle.\"]],SMALL:[[\"Array\",\"Required. An array or range of numeric values.\"],[\"K\",\"Required. Position as an integer, where 1 corresponds to the smallest value.\"]],SQRTPI:[[\"Number\",\"Required. The number by which pi is multiplied.\"]],STDEV:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"STDEV.S\":[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"STDEV.P\":[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STDEVA:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STDEVP:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STDEVPA:[[\"Number1\",\"Required. First number or reference in the sample.\"],[\"Number2\",\"Optional. Second number or reference.\"]],STEYX:[[\"Known_y's\",\"Required. An array or range of dependent data points.\"],[\"Known_x's\",\"Required. An array or range of independent data points.\"]],SUBTOTAL:[[\"Function_num\",\"Required. A number that specifies which function to use in calculating subtotals within a list. See table below for full list.\"],[\"Ref1\",\"Required. A named range or reference to subtotal.\"],[\"Ref2\",\"Optional. A named range or reference to subtotal.\"]],SUMSQ:[[\"Number1\",\"Required. The first argument containing numeric values.\"],[\"Number2\",\"Optional. The first argument containing numeric values.\"]],SUMX2MY2:[[\"Array_x\",\"Required. The first range or array containing numeric values.\"],[\"Array_y\",\"Required. The second range or array containing numeric values.\"]],SUMX2PY2:[[\"Array_x\",\"Required. The first range or array containing numeric values.\"],[\"Array_y\",\"Required. The second range or array containing numeric values.\"]],SUMXMY2:[[\"Array_x\",\"Required. The first range or array containing numeric values.\"],[\"Array_y\",\"Required. The second range or array containing numeric values.\"]],TAN:[[\"Number\",\"Required. The angle in radians for which you want the tangent.\"]],TANH:[[\"Number\",\"Required. Any real number.\"]],TRUNC:[[\"Number\",\"Required. The number to truncate.\"],[\"Num_digits\",\"Optional. The precision of the truncation (default is 0).\"]],VAR:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"VAR.S\":[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],\"VAR.P\":[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],VARA:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],VARP:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],VARPA:[[\"Number1\",\"Required. First number or reference.\"],[\"Number2\",\"Optional. Second number or reference.\"]],WEIBULL:[[\"X\",\"Required. The value at which to evaluate the function.\"],[\"Alpha\",\"Required. A parameter to the distribution.\"],[\"Beta\",\"Required. A parameter to the distribution.\"],[\"Cumulative\",\"Required. Determines the form of the function.\"]],\"WEIBULL.DIST\":[[\"X\",\"Required. The value at which to evaluate the function.\"],[\"Alpha\",\"Required. A parameter to the distribution.\"],[\"Beta\",\"Required. A parameter to the distribution.\"],[\"Cumulative\",\"Required. Determines the form of the function.\"]],CHAR:[[\"Number\",\"Required. A number between 1 and 255.\"]],CLEAN:[[\"Text\",\"Required. The text to clean.\"]],CODE:[[\"Text\",\"Required. The text for which you want a numeric code.\"]],EXACT:[[\"Text1\",\"Required. The first text string to compare.\"],[\"Text2\",\"Required. The second text string to compare.\"]],FIXED:[[\"Number\",\"Required. The number to round and format.\"],[\"Decimals\",\"Optional. Number of decimals to use. Default is 2.\"],[\"No_commas\",\"Optional. Suppress commas. TRUE = no commas, FALSE = commas. Default is FALSE.\"]],NUMBERVALUE:[[\"Text\",\"Required. The text to convert to a number.\"],[\"Decimal_separator\",\"Optional. The character for decimal values.\"],[\"Group_separator\",\"Optional. The character for grouping by thousands.\"]],REGEXEXTRACT:[[\"Text\",\"Required. The input text.\"],[\"Regular_expression\",\"Required. The first part of text that matches this expression will be returned.\"]],REGEXMATCH:[[\"Text\",\"Required. The text to be tested against the regular expression.\"],[\"Regular_expression\",\"Required. The regular expression to test the text against.\"]],REGEXREPLACE:[[\"Text\",\"Required. The text, a part of which will be replaced.\"],[\"Regular_expression\",\"Required. The regular expression. All matching instances in text will be replaced.\"],[\"Replacement\",\"Required. The text which will be inserted into the original text.\"]],REPT:[[\"Text\",\"Required. The text to repeat.\"],[\"Number_times\",\"Required. The number of times to repeat text.\"]],T:[[\"Value\",\"Required. The value to return as text.\"]],JOIN:[[\"Text1, text2, ...\"],[\"Text you want to combine\"]],ARRAYTOTEXT:[[\"Array\",\"Required. The array or range to convert to text.\"],[\"Format\",\"Optional. Output format. 0 = concise (default), and 1 = strict.\"]],DATEVALUE:[[\"Date_text\",\"Required. A valid date in text format.\"]],DAYS:[[\"End_date\",\"Required. The end date.\"],[\"Start_date\",\"Required. The start date.\"]],DAYS360:[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Method\",\"Optional. Day count method. FALSE (default) = US method, TRUE = European method.\"]],EDATE:[[\"Start_date\",\"Required. Start date as a valid Excel date.\"],[\"Months\",\"Required. Number of months before or after start_date.\"]],EOMONTH:[[\"Start_date\",\"Required. A date that represents the start date in a valid Excel serial number format.\"],[\"Months\",\"Required. The number of months before or after start_date.\"]],ISOWEEKNUM:[[\"Date\",\"Required. A valid Excel date in serial number format.\"]],NETWORKDAYS:[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Holidays\",\"Optional. A list of non-work days as dates.\"]],\"NETWORKDAYS.INTL\":[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Weekend\",\"Optional. Setting for which days of the week should be considered weekends.\"],[\"Holidays\",\"Optional. A reference to dates that should be considered non-work days.\"]],TIMEVALUE:[[\"Time_text\",\"Required. A date and/or time in a text format recognized by Excel.\"]],WEEKNUM:[[\"Serial_num\",\"Required. A valid Excel date in serial number format.\"],[\"Return_type\",\"Optional. The day the week begins. Default is 1.\"]],WEEKDAY:[[\"Serial_number\",\"Required. The date for which you want to get the day of week.\"],[\"Return_type\",\"Optional. A number representing day of week mapping scheme. Default is 1.\"]],WORKDAY:[[\"Start_date\",\"Required. The date from which to start.\"],[\"Days\",\"Required. The working days before or after start_date.\"],[\"Holidays\",\"Optional. A list dates that should be considered non-work days.\"]],\"WORKDAY.INTL\":[[\"Start_date\",\"Required. The start date.\"],[\"Days\",\"Required. The end date.\"],[\"Weekend\",\"Optional. Setting for which days of the week should be considered weekends.\"],[\"Holidays\",\"Optional. A list of one or more dates that should be considered non-work days.\"]],YEARFRAC:[[\"Start_date\",\"Required. The start date.\"],[\"End_date\",\"Required. The end date.\"],[\"Basis\",\"Optional. The type of day count basis to use (see below).\"]],ACCRINT:[[\"Id\",\"Required. Issue date of the security.\"],[\"Fd\",\"Required. First interest date of security.\"],[\"Sd\",\"Required. Settlement date of security.\"],[\"Rate\",\"Required. Interest rate of security.\"],[\"Par\",\"Required. Par value of security.\"],[\"Freq\",\"Required. Coupon payments per year (annual = 1, semiannual = 2; quarterly = 4).\"],[\"Basis\",\"Optional. Day count basis (see below, default =0).\"],[\"Calc\",\"Optional. Calculation method (see below, default = TRUE).\"]],PMT:[[\"Rate\",\"Required. The interest rate for the loan.\"],[\"Nper\",\"Required. The total number of payments for the loan.\"],[\"Pv\",\"Required. The present value, or total value of all loan payments now.\"],[\"Fv\",\"Optional. The future value, or a cash balance you want after the last payment is made. Defaults to 0 (zero).\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],FV:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Nper\",\"Required. The total number of payment periods.\"],[\"Pmt\",\"Required. The payment made each period. Must be entered as a negative number.\"],[\"Pv\",\"Optional. The present value of future payments. If omitted, assumed to be zero. Must be entered as a negative number.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period, 1 = beginning of period. Default is 0.\"]],DB:[[\"Cost\",\"Required. Initial cost of asset.\"],[\"Salvage\",\"Required. Asset value at the end of the depreciation.\"],[\"Life\",\"Required. Periods over which asset is depreciated.\"],[\"Period\",\"Required. Period to calculation depreciation for.\"],[\"Month\",\"Optional. Number of months in the first year. Defaults to 12.\"]],DDB:[[\"Cost\",\"Required. Initial cost of asset.\"],[\"Salvage\",\"Required. Asset value at the end of the depreciation.\"],[\"Life\",\"Required. Periods over which asset is depreciated.\"],[\"Period\",\"Required. Period to calculation depreciation for.\"],[\"Factor\",\"Optional. Rate at which the balance declines. If omitted, defaults to 2.\"]],DOLLAR:[[\"Number\",\"Required. The number to convert.\"],[\"Decimals\",\"Required. The number of digits to the right of the decimal point. Default is 2.\"]],DOLLARDE:[[\"Fractional_dollar\",\"Required. Dollar component in special fractional notation.\"],[\"Fraction\",\"Required. The denominator in the fractional unit. 8 = 1/8, 16 = 1/16, 32 = 1/32, etc.\"]],DOLLARFR:[[\"Decimal_dollar\",\"Required. Pricing as a normal decimal number.\"],[\"Fraction\",\"Required. The denominator in the fractional unit. 8 = 1/8, 16 = 1/16, 32 = 1/32, etc.\"]],EFFECT:[[\"Nominal_rate\",\"Required. The nominal or stated interest rate.\"],[\"Npery\",\"Required. Number of compounding periods per year.\"]],FVSCHEDULE:[[\"Principal\",\"Required. The initial investment sum.\"],[\"Schedule\",\"Required. Schedule of interest rates, provided as range or array.\"]],IRR:[[\"Values\",\"Required. Array or reference to cells that contain values.\"],[\"Guess\",\"Optional. An estimate for expected IRR. Default is .1 (10%).\"]],IPMT:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Per\",\"Required. The payment period of interest.\"],[\"Nper\",\"Required. The total number of payment periods.\"],[\"Pv\",\"Required. The present value, or total value of all payments now.\"],[\"Fv\",\"Optional. The cash balance desired after last payment is made. Defaults to 0.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],ISPMT:[[\"Rate\",\"Required. Interest rate.\"],[\"Per\",\"Required. Period (starts with zero, not 1).\"],[\"Nper\",\"Required. Number of periods.\"],[\"Pv\",\"Required. Present value.\"]],NPV:[[\"Rate\",\"Required. Discount rate over one period.\"],[\"Value1\",\"Required. First value(s) representing cash flows.\"],[\"Value2\",\"Optional. Second value(s) representing cash flows.\"]],NOMINAL:[[\"Effect_rate\",\"Required. The effective annual interest rate.\"],[\"Npery\",\"Required. Number of compounding periods per year.\"]],NPER:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Pmt\",\"Required. The payment made each period.\"],[\"Pv\",\"Required. The present value, or total value of all payments now.\"],[\"Fv\",\"Optional. The future value, or a cash balance you want after the last payment is made. Defaults to 0.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],PDURATION:[[\"Rate\",\"Required. Interest rate per period.\"],[\"Pv\",\"Required. Present value of the investment.\"],[\"Fv\",\"Required. Future value of the investment.\"]],PPMT:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Per\",\"Required. The payment period of interest.\"],[\"Nper\",\"Required. The total number of payments for the loan.\"],[\"Pv\",\"Required. The present value, or total value of all payments now.\"],[\"Fv\",\"Optional. The cash balance desired after last payment is made. Defaults to 0.\"],[\"Type\",\"Optional. When payments are due. 0 = end of period. 1 = beginning of period. Default is 0.\"]],PV:[[\"Rate\",\"Required. The interest rate per period.\"],[\"Nper\",\"Required. The number of payment periods.\"],[\"Pmt\",\"Required. The payment made each period.\"],[\"Fv\",\"Optional. Future value. If omitted, defaults to zero.\"],[\"Type\",\"Optional. Payment type, 0 = end of period, 1 = beginning of period. Default is 0.\"]],SYD:[[\"Cost\",\"Required. Initial cost of asset.\"],[\"Salvage\",\"Required. Asset value at the end of the depreciation.\"],[\"Life\",\"Required. Periods over which asset is depreciated.\"],[\"Period\",\"Required. Period to calculation depreciation for.\"]],TBILLPRICE:[[\"Settlement\",\"Required. Settlement date of the security.\"],[\"Maturity\",\"Required. Maturity date of the security.\"],[\"Discount\",\"Required. The discount rate for the security.\"]],TBILLYIELD:[[\"Settlement\",\"Required. Settlement date of the security.\"],[\"Maturity\",\"Required. Maturity date of the security.\"],[\"Price\",\"Required. Price per $100.\"]],UNIQUE:[[\"Array\",\"Required. Range or array from which to extract unique values.\"],[\"By_col\",\"Optional. How to compare and extract. By row = FALSE (default); by column = TRUE.\"],[\"Exactly_once\",\"Optional. TRUE = values that occur once, FALSE= all unique values (default).\"]],RANDARRAY:[[\"Rows\",\"Optional. Row count. Default = 1.\"],[\"Columns\",\"Optional. Column count. Default = 1.\"],[\"Min\",\"Optional. Minimum value. Default = 0.\"],[\"Max\",\"Optional. Maximum value. Default = 1.\"],[\"Integer\",\"Optional. Whole numbers. Boolean, TRUE or FALSE. Default = FALSE.\"]],TOROW:[[\"Array\",\"Required. The array to transform.\"],[\"Ignore\",\"Required. Control to ignore blanks and errors.\"],[\"Scan_by_column\",\"Required. Scan array by column. TRUE = by column, FALSE = by row (default).\"]],TOCOL:[[\"Array\",\"Required. The array to transform.\"],[\"Ignore\",\"Required. Setting to ignore blanks and errors.\"],[\"Scan_by_column\",\"Required. Scan array by column. TRUE = by column, FALSE = by row (default).\"]],TEXTSPLIT:[[\"Text\",\"Required. The text string to split.\"],[\"Col_delimiter\",\"Required. The character(s) to delimit columns.\"],[\"Row_delimiter\",\"Optional. The character(s) to delimit rows.\"],[\"Ignore_empty\",\"Optional. Ignore empty values. TRUE = ignore, FALSE = preserve. Default is FALSE.\"],[\"Match_mode\",\"Optional. Case-sensitivity. 0 = enabled, 1 = disabled. Default is 0.\"],[\"Pad_with\",\"Optional. Value to pad missing values in 2d arrays.\"]],WRAPROWS:[[\"Vector\",\"Required. The array or range to wrap.\"],[\"Wrap_count\",\"Required. Max values in each row.\"],[\"Pad_with\",\"Optional. Value to use for unfilled places.\"]],WRAPCOLS:[[\"Vector\",\"Required. The array or range to wrap.\"],[\"Wrap_count\",\"Required. Max values in each column.\"],[\"Pad_with\",\"Optional. Value to use for unfilled places.\"]],TAKE:[[\"Array\",\"Required. The source array or range.\"],[\"Rows\",\"Optional. Number of rows to return as an integer.\"],[\"Col\",\"Optional. Number of columns to return as an integer.\"]],DROP:[[\"Array\",\"Required. The source array or range.\"],[\"Rows\",\"Optional. Number of rows to drop.\"],[\"Col\",\"Optional. Number of columns to drop.\"]],SEQUENCE:[[\"Rows\",\"Required. Number of rows to return.\"],[\"Columns\",\"Optional. Number of columns to return.\"],[\"Start\",\"Optional. Starting value (defaults to 1).\"],[\"Step\",\"Optional. Increment between each value (defaults to 1).\"]],CHOOSEROWS:[[\"Array\",\"Required. The array to extract rows from.\"],[\"Row_num1\",\"Required. The numeric index of the first row to return.\"],[\"Row_num2\",\"Optional. The numeric index of the second row to return.\"]],CHOOSECOLS:[[\"Array\",\"Required. The array to extract columns from.\"],[\"Col_num1\",\"Required. The numeric index of the first column to return.\"],[\"Col_num2\",\"Optional. The numeric index of the second column to return.\"]],EXPAND:[[\"Array\",\"Required. The array to expand.\"],[\"Rows\",\"Optional. The final number of rows. Default is total rows.\"],[\"Columns\",\"Optional. The final number of columns. Default is total columns.\"],[\"Pad_with\",\"Optional. Value to use for new cells. Default is #N/A.\"]],SORT:[[\"Array\",\"Required. Range or array to sort.\"],[\"Sort_index\",\"Optional. Column index to use for sorting. Default is 1.\"],[\"Sort_order\",\"Optional. 1 = Ascending, -1 = Descending. Default is ascending order.\"],[\"By_col\",\"Optional. TRUE = sort by column. FALSE = sort by row. Default is FALSE.\"]],SORTBY:[[\"Array\",\"Required. Range or array to sort.\"],[\"By_array\",\"Required. Range or array to sort by.\"],[\"Sort_order\",\"Optional. Sort order. 1 = ascending (default), -1 = descending.\"],[\"Array/order\",\"Optional. Additional array and sort order pairs.\"]]});export{T as CLEAN_MODE_ALL,R as CLEAN_MODE_DATA,d as D_COMMON,m as D_STRING,_r as DataPage,qr as DataStore,p as PASTE_MODE_OVERLAP,g as PASTE_MODE_RANGE,b as PASTE_MODE_REPEAT,yr as Store,u as T_ARG,s as T_DATA,r as T_ERROR,n as T_METHOD,i as T_NAME,h as T_NUMBER,c as T_OPERATOR,o as T_PAGE,t as T_PLACEHOLDER,a as T_RANGE,l as T_SPACE,e as T_TEXT,hr as addMethod,lr as addMethodBatch,Er as arrayMethods,N as column,Jt as dateMethods,Ir as financialMethods,_ as fromId,Cr as getMethodParams,cr as getMethods,nr as informationMethods,rr as logicalMethods,tr as lookupMethods,bt as numberMethods,M as page,w as row,fr as str2id,dr as str2pos,mr as str2range,Ct as textMethods,y as toId};\n//# sourceMappingURL=muon.es6.js.map\n","import {getMethodParams} from \"@xbs/muon\";\n\nexport default {\n\tlabels:{\n\t\t// formats\n\t\t\"common\": \"Common\",\n\t\t\"currency\": \"Currency\",\n\t\t\"number\": \"Number\",\n\t\t\"percent\": \"Percent\",\n\t\t\"date\": \"Date\",\n\t\t\"string\": \"Text\",\n\t\t\"custom-format\": \"Custom\",\n\t\t\"decimal-places\":\"Decimal places\",\n\t\t\"separator\":\"Group separator\",\n\t\t\"negative\":\"Negative number\",\n\t\t\"currency-symbol\":\"Currency\",\n\t\t\"date-format\":\"Date format\",\n\t\t\"format-docs\":\"How to create a format\",\n\t\t// titles\n\t\t\"undo-redo\": \"Undo/Redo\",\n\t\t\"font\": \"Font\",\n\t\t\"text\": \"Text\",\n\t\t\"cell\": \"Cell\",\n\t\t\"align\": \"Align\",\n\t\t\"format\": \"Number\",\n\t\t\"column\": \"Column\",\n\t\t\"borders\": \"Borders\",\n\t\t\"px\": \"px\",\n\t\t\"apply\": \"Apply\",\n\t\t// popups and dialogs\n\t\t\"cancel\": \"Cancel\",\n\t\t\"save\": \"Save\",\n\t\t// multisheets\n\t\t\"sheet\": \"Sheet\",\n\t\t// conditions\n\t\t\"conditional-format\": \"Conditional Format\",\n\t\t\"conditional-common\": \"Common\",\n\t\t\"conditional-text\": \"Text\",\n\t\t\"condition\": \"Condition\",\n\t\t\"conditional-style\": \"Style\",\n\t\t\"conditional-operator\": \"Operator\",\n\t\t\"conditional-between\":\"between\",\n\t\t\"conditional-not-equal\":\"not equal\",\n\t\t// ranges\n\t\t\"range\": \"Range\",\n\t\t\"range-title\": \"Named ranges\",\n\t\t\"range-name\": \"Name\",\n\t\t\"range-cells\": \"Range\",\n\t\t\"range-scope\": \"Scope\",\n\t\t\"range-global\": \"Book\",\n\t\t// images\n\t\t\"image-or\": \"or\",\n\t\t\"image-title\": \"Add image\",\n\t\t\"image-upload\": \"Select file for upload\",\n\t\t\"image-url\": \"URL (e.g. http://*)\",\n\t\t// sparklines\n\t\t\"sparkline-title\": \"Add sparkline\",\n\t\t\"sparkline-type\": \"Type\",\n\t\t\"sparkline-range\": \"Range\",\n\t\t\"sparkline-color\": \"Color\",\n\t\t\"sparkline-positive\": \"Positive\",\n\t\t\"sparkline-negative\": \"Negative\",\n\t\t// custom format\n\t\t\"format-title\": \"Set format\",\n\t\t\"format-pattern\": \"Format pattern\",\n\t\t//dropdown\n\t\t\"dropdown-empty\": \"Empty cells\",\n\t\t\"dropdown-empty-option\": \"Empty option\",\n\t\t\"dropdown-title\": \"Add dropdown\",\n\t\t\"dropdown-range\": \"Range\",\n\t\t// confirm\n\t\t\"ok\": \"OK\",\n\t\t// import/export\n\t\t\"import-title\": \"Import\",\n\t\t\"import-not-support\": \"Sorry, your browser does not support import\",\n\t\t\"export-title\": \"Export\",\n\t\t\"export-name\": \"Name of xslx file\",\n\t\t\"export-all-sheets\":\"Export all sheets\",\n\t\t// add link\n\t\t\"link-title\": \"Add Link\",\n\t\t\"link-name\": \"Text\",\n\t\t\"link-url\": \"URL\",\n\t\t//images\n\t\t\"image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t//charts\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t//controls\n\t\t\"controls\":\"Controls\",\n\t\t\"add-checkbox\":\"Add checkbox\",\n\t\t\"add-radio\":\"Add radio group\",\n\t\t//conditional format labels\n\t\t\"display\" : \"Display\",\n\t\t\"value\" : \"Value\",\n\t\t// confirm messages\n\t\t\"range-remove-confirm\": \"Are you sure you want to remove the range permanently?\",\n\t\t\"sheet-remove-confirm\": \"Are you sure you want to remove the sheet permanently?\",\n\t\t\"merge-cell-confirm\":\"Only the left top value will remain after merging. Continue?\",\n\t\t\"error-range\": \"The range is incorrect!\",\n\t\t\"error-link\": \"The link is incorrect!\",\n\t\t//print\n\t\t\"print\":\"Print\",\n\t\t\"print-title\":\"Before you print..\",\n\t\t\"print-settings\":\"General settings\",\n\t\t\"print-paper\":\"Paper size\",\n\t\t\"print-layout\":\"Layout\",\n\t\t\"sheets\":\"Sheets:\",\n\t\t\"selection\":\"Selected cells\",\n\t\t\"borderless\":\"Hide gridlines\",\n\t\t\"sheet-names\":\"Show sheet names\",\n\t\t\"skip-rows\":\"Skip empty rows\",\n\t\t\"margin\":\"Hide margins\",\n\t\t\"page-letter\":\"Letter\",\n\t\t\"page-a4\":\"A4 (210x297mm)\",\n\t\t\"page-a3\":\"A3 (297x420mm)\",\n\t\t\"page-width\":\"Page width\",\n\t\t\"page-actual\":\"Actual Size\",\n\t\t\"page-portrait\":\"Portrait\",\n\t\t\"page-landscape\":\"Landscape\",\n\t\t\"external-ui\":\"External UI\",\n\t\t\"print-borders\": \"Show print borders\",\n\t\t//comment\n\t\t\"comment\":\"Comment\",\n\t\t//resize\n\t\t\"width\":\"Width\",\n\t\t\"height\":\"Height\",\n\t\t\"fit-content\": \"Fit to content\",\n\t\t\"default-size\":\"Reset to default\",\n\t\t//views\n\t\t\"edit-view\":\"Edit\",\n\t\t\"remove-view\":\"Remove\",\n\t\t\"chart-edit\":\"Edit chart\",\n\n\t\t\"chart-common\":\"Common\",\n\t\t\"chart-series\":\"Series\",\n\t\t\"chart-extras\":\"Extras\",\n\n\t\t\"export-view\":\"Download\",\n\t\t\"export-view-pdf\":\"PDF document\",\n\t\t\"export-view-png\":\"PNG image\",\n\t\t\"export-view-excel\":\"Excel file\",\n\n\t\t\"line-chart\":\"Line\",\n\t\t\"area-chart\":\"Area\",\n\t\t\"bar-chart\":\"Bar\",\n\t\t\"donut-chart\":\"Donut\",\n\t\t\"pie-chart\":\"Pie\",\n\t\t\"radar-chart\":\"Radar\",\n\t\t\"spline-chart\":\"Spline\",\n\t\t\"splinearea-chart\":\"Spline Area\",\n\t\t\"scatter-chart\":\"Scatter\",\n\n\t\t\"chart-scale\":\"Scale\",\n\t\t\"chart-x-axis\":\"X axis\",\n\t\t\"chart-y-axis\":\"Y axis\",\n\t\t\"chart-lines\":\"Lines\",\n\t\t\"chart-scale-color\":\"Scale color\",\n\t\t\"chart-xAxis-title\":\"Title\",\n\t\t\"chart-yAxis-title\":\"Title\",\n\t\t\"chart-col-xAxis\":\"Use left column as xAxis\",\n\t\t\"chart-col-yAxis\":\"Use left column as yAxis\",\n\t\t\"chart-row-xAxis\":\"Use top row as xAxis\",\n\t\t\"chart-row-yAxis\":\"Use top row as yAxis\",\n\t\t\"chart-xAxis-range\":\"Range\",\n\t\t\"chart-yAxis-origin\":\"Origin\",\n\t\t\"chart-yAxis-start\":\"Start\",\n\t\t\"chart-yAxis-end\":\"End\",\n\t\t\"chart-yAxis-step\":\"Step\",\n\t\t\"chart-yAxis-note\":\"* Set all the following parameters to see the effect\",\n\n\t\t\"chart-legend\":\"Legend\",\n\t\t\"chart-row-legend\":\"Use top row as legend\",\n\t\t\"chart-col-legend\":\"Use left column as legend\",\n\t\t\"chart-legend-range\":\"Legend range\",\n\t\t\"chart-legend-align\":\"Align\",\n\t\t\"chart-legend-left\":\"Left\",\n\t\t\"chart-legend-right\":\"Right\",\n\t\t\"chart-legend-center\":\"Center\",\n\t\t\"chart-legend-valign\":\"Vertical align\",\n\t\t\"chart-legend-top\":\"Top\",\n\t\t\"chart-legend-middle\":\"Middle\",\n\t\t\"chart-legend-bottom\":\"Bottom\",\n\n\t\t\"chart-item\":\"Data\",\n\t\t\"stacked-chart\":\"Stacked\",\n\t\t\"horizontal-chart\":\"Horizontal\",\n\t\t\"chart-range\":\"Range\",\n\t\t\"chart-series-color\":\"Color\",\n\t\t\"add-line\":\"Add line\",\n\t\t\"chart-type\":\"Type\",\n\t\t\"chart-tooltip\":\"Tooltips\",\n\t\t\"chart-label\":\"Labels\",\n\n\t\t\"chart-data-from\":\"Data series from\",\n\t\t\"chart-columns\":\"columns\",\n\t\t\"chart-rows\":\"rows\",\n\n\t\t\"chart-markers\":\"Markers\",\n\t\t\"chart-markers-square\":\"Square\",\n\t\t\"chart-markers-triangle\":\"Triangle\",\n\t\t\"chart-markers-diamond\":\"Diamond\",\n\t\t\"chart-markers-round\":\"Round\",\n\n\t\t\"chart-pie-3d\":\"3D\",\n\n\t\t\"chart-radar-circle\":\"Circled lines\",\n\n\t\t//validation\n\t\t\"add-cell-validation\": \"Add data validation\",\n\t\t\"remove-cell-validation\": \"Remove data validation\",\n\t\t\"highlight-invalid-data\": \"Highlight invalid data\",\n\t\t\"remove-highlight-invalid-data\": \"Remove highlighting of invalid data\",\n\t\t\"validation-placeholder-text\": \"Some text\",\n\t\t\"validation-type\": \"Type\",\n\t\t\"validation-any\": \"Any\",\n\t\t\"validation-date\": \"Date\",\n\t\t\"validation-number\": \"Number\",\n\t\t\"validation-text\": \"Text\",\n\t\t\"validation-text-length\": \"Text length\",\n\t\t\"validation-range\": \"Range\",\n\t\t\"validation-integer\": \"Integers only\",\n\t\t\"validation-ignore-empty\": \"Ignore empty\",\n\t\t\"validation-input-message\": \"Input message\",\n\t\t\"validation-error-title\": \"Error title\",\n\t\t\"validation-error-message\": \"Error message\",\n\t\t\"validation-error-handle\": \"Error handle\",\n\t\t\"validation-error-stop\": \"Stop\",\n\t\t\"validation-error-warning\": \"Warning\",\n\t\t\"validation-error-information\": \"Information\",\n\t\t\"validation-error-title-text\": \"Error\",\n\t\t\"validation-error-message-text\": \"Invalid data\",\n\t\t\"validation-error-save\": \"Save\",\n\t\t\"validation-error-restore\": \"Restore\",\n\t\t//find and replace\n\t\t\"find-replace-title\": \"Find and Replace\",\n\t\t\"find-title\": \"Find\",\n\t\t\"find-what\": \"Find what:\",\n\t\t\"replace-with\": \"Replace with:\",\n\t\t\"find-within\": \"Within:\",\n\t\t\"find-sheet\": \"Sheet\",\n\t\t\"find-book\": \"Book\",\n\t\t\"find-match-case\": \"Match case\",\n\t\t\"find-match-entire-content\": \"Match entire cell contents\",\n\t\t\"find-look-in\": \"Look in\",\n\t\t\"find-formulas\": \"Formulas\",\n\t\t\"find-values\": \"Values\",\n\t\t\"find-all-sheet\": \"Sheet\",\n\t\t\"find-all-cell\": \"Cell\",\n\t\t\"find-all-value\": \"Value\",\n\t\t\"find-all-formula\": \"Formula\",\n\t\t\"replace-all\": \"Replace all\",\n\t\t\"replace\": \"Replace\",\n\t\t\"find-all\": \"Find all\",\n\t\t\"find-next\": \"Find next\"\n\t},\n\ttooltips: {\n\t\t// \"font\" block\n\t\t\"color\": \"Font color\",\n\t\t\"background\": \"Background color\",\n\t\t\"borders\": \"Borders\",\n\t\t\"borders-no\": \"Clear borders\",\n\t\t\"borders-left\": \"Left border\",\n\t\t\"borders-top\": \"Top border\",\n\t\t\"borders-right\": \"Right border\",\n\t\t\"borders-bottom\": \"Bottom border\",\n\t\t\"borders-all\": \"All borders\",\n\t\t\"borders-outer\": \"Outer borders\",\n\t\t\"borders-top-bottom\": \"Top and bottom borders\",\n\t\t\"borders-color\": \"Border color\",\n\t\t\"borders-line\": \"Border line type\",\n\n\t\t\"add-sheet\": \"Add Sheet\",\n\t\t\"sheet\": \"Sheet\",\n\t\t\"scale\": \"Scale\",\n\t\t\"show-sheet\": \"Show sheet\",\n\t},\n\tmenus:{\n\t\t\"rename-sheet\": \"Rename sheet\",\n\t\t\"copy-sheet\": \"Copy to new sheet\",\n\t\t\"remove-sheet\": \"Remove sheet\",\n\t\t\"hide-sheet\": \"Hide sheet\",\n\n\t\t\"new\": \"New\",\n\t\t\"graph\": \"Graph\",\n\t\t\"image\": \"Image\",\n\t\t\"data\": \"Data\",\n\t\t\"sort\": \"Sort\",\n\t\t\n\t\t// \"copy-paste\" context menu\n\t\t\"cut\": \"Cut\",\n\t\t\"copy\": \"Copy\",\n\t\t\"paste\": \"Paste\",\n\t\t\"special-paste\": \"Special paste\",\n\t\t\"paste-values\": \"Values\",\n\t\t\"paste-formulas\": \"Formulas\",\n\t\t\"paste-styles\": \"Styles\",\n\t\t\"paste-conditions\": \"Conditional formats\",\n\t\t\"paste-validation\": \"Validation\",\n\t},\n\tactions: {\n\t\t// \"file\" block\n\t\t\"file\": \"File\",\n\t\t\"sheet\": \"Sheets\",\n\t\t\"new-sheet\": \"New sheet\",\n\t\t\"copy-sheet\": \"Copy to new sheet\",\n\t\t\"remove-sheet\": \"Remove sheet\",\n\t\t\"hide-sheet\": \"Hide sheet\",\n\t\t\"excel-import\": \"Import from Excel\",\n\t\t\"excel-export\": \"Export to Excel\",\n\t\t\"print\": \"Print\",\n\t\t\"print-borders\": \"Hide/show print borders\",\n\t\t// \"undo-redo\" block\n\t\t\"undo-redo\": \"Undo/Redo\",\n\t\t\"undo\": \"Undo\",\n\t\t\"redo\": \"Redo\",\n\t\t// \"font\" block\n\t\t\"font\": \"Font\",\n\t\t\"font-family\": \"Font family\",\n\t\t\"font-weight\": \"Bold\",\n\t\t\"font-style\": \"Italic\",\n\t\t\"underline\": \"Underline\",\n\t\t\"strike\": \"Strike\",\n\t\t\"font-size\": \"Font size\",\n\t\t// \"align\" block\n\t\t\"align\": \"Align\",\n\t\t\"text-align\": \"Horizontal align\",\n\t\t\"text-align-left\": \"Left align\",\n\t\t\"text-align-center\": \"Center align\",\n\t\t\"text-align-right\": \"Right align\",\n\t\t\"vertical-align\": \"Vertical align\",\n\t\t\"vertical-align-top\": \"Top align\",\n\t\t\"vertical-align-middle\": \"Middle align\",\n\t\t\"vertical-align-bottom\": \"Bottom align\",\n\t\t\"span\": \"Merge\",\n\t\t\"wrap\": \"Text wrap\",\n\t\t\"increase-indent\" : \"Increase indent\",\n\t\t\"decrease-indent\": \"Decrease indent\",\n\t\t// \"number\" block\n\t\t\"number\": \"Number\",\n\t\t\"format\": \"Number format\",\n\t\t\"price\": \"Currency\",\n\t\t\"int\": \"Number\",\n\t\t\"custom\": \"Custom\",\n\t\t\"format-common\": \"Common\",\n\t\t\"format-price\": \"Currency\",\n\t\t\"format-int\": \"Number\",\n\t\t\"format-percent\": \"Percent\",\n\t\t\"format-date\": \"Date\",\n\t\t\"format-string\": \"Text\",\n\t\t\"format-custom\": \"Custom\",\n\t\t\"increase-decimals\":\"Increase decimal places\",\n\t\t\"decrease-decimals\":\"Decrease decimal places\",\n\t\t// \"edit\" block\n\t\t\"edit\": \"Edit\",\t\n\t\t\"sort-asc\": \"Sort A to Z\",\n\t\t\"sort-desc\": \"Sort Z to A\",\n\t\t\"create-filter\": \"Create/remove filters\",\n\t\t\"add-range\": \"Named ranges\",\n\t\t\"conditional-format\": \"Conditional format\",\n\t\t\"lock-cell\": \"Lock/unlock cell\",\n\t\t\"add-link\": \"Add link\",\n\t\t\"add-dropdown\": \"Add dropdown\",\n\t\t\"clear\": \"Clear\",\n\t\t\"clear-value\":\"Values\",\n\t\t\"clear-style\":\"Styles\",\n\t\t\"clear-conditional-formats\":\"Conditional formats\",\n\t\t\"clear-dropdown-editors\":\"Dropdowns\",\n\t\t\"clear-filters\":\"Filters\",\n\t\t\"clear-comments\":\"Comments\",\n\t\t\"clear-all\":\"All\",\n\t\t\"validation\": \"Validation\",\n\t\t\"add-cell-validation\": \"Add data validation\",\n\t\t\"remove-cell-validation\": \"Remove data validation\",\n\t\t\"highlight-invalid-data\": \"Highlight invalid data\",\n\t\t\"remove-highlight-invalid-data\": \"Remove highlighting of invalid data\",\n\t\t\"find\": \"Find and Replace\",\n\t\t// \"insert\" block\n\t\t\"insert\": \"Insert\",\n\t\t\"image\": \"Image\",\n\t\t\"add-image\": \"Image\",\n\t\t\"add-image-cell\":\"Add to cell\",\n\t\t\"add-image-top\":\"Add above cells\",\n\t\t\"graph\": \"Graph\",\n\t\t\"add-sparkline\":\"Add to cell\",\n\t\t\"add-chart\":\"Add above cells\",\n\t\t\"add-comment\": \"Comment\",\n\t\t\"controls\":\"Controls\",\n\t\t\"add-checkbox\":\"Add checkbox\",\n\t\t\"add-radio\":\"Add radio group\",\n\t\t// \"view\" block\n\t\t\"view\": \"View\",\n\t\t\"row\": \"Rows\",\n\t\t\"add-row\": \"Insert row\",\n\t\t\"del-row\": \"Delete row\",\n\t\t\"show-row\": \"Show row\",\n\t\t\"hide-row\": \"Hide row\",\n\t\t\"resize-row\": \"Resize row\",\n\t\t\"format-row\":\"Row format\",\n\t\t\"column\": \"Columns\",\n\t\t\"add-column\": \"Insert column\",\n\t\t\"del-column\": \"Delete column\",\n\t\t\"show-column\": \"Show column\",\n\t\t\"hide-column\": \"Hide column\",\n\t\t\"resize-column\": \"Resize column\",\n\t\t\"format-column\":\"Column format\",\n\t\t\"hide-gridlines\": \"Hide/show gridlines\",\n\t\t\"hide-headers\": \"Hide/show headers\",\n\t\t\"freeze-rows\": \"Freeze/unfreeze rows\",\n\t\t\"freeze-columns\": \"Freeze/unfreeze columns\",\n\t\t\"show-formulas\": \"Hide/Show formulas\",\n\t\t// \"other\" block\n\t\t\"other\": \"Other\",\n\t\t\"find-readonly\": \"Find\"\n\t},\n\ttable:{\n\t\t\"math-error\":\"#ERROR!\",\n\t\t\"math-ref-error\":\"#REF!\",\n\t\t\"format-error\":\"INCORRECT FORMAT\",\n\t\t\"math-xss-error\": \"#XSS!\"\n\t},\n\tliveEditor:{\n\t\t\"edit\":\"Edit:\",\n\t\t\"date\": \"Date\",\n\t\t\"number\": \"Number\",\n\t\t\"text\": \"Text\",\n\t\t\"financial\": \"Financial\",\n\t\t\"array\": \"Array\",\n\t\t\"common\": \"Common\",\n\t\t\"search\": \"Search\",\n\t\t\"category\": \"Category\",\n\t\t\"functions-syntax\": Object.assign(getMethodParams() , {\n\t\t\t\"IMAGE\": [\n\t\t\t\t[\n\t\t\t\t\t\"Url\",\n\t\t\t\t\t\"Required. Image link\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"HYPERLINK\": [\n\t\t\t\t[\n\t\t\t\t\t\"Link_location\",\n\t\t\t\t\t\"Required. The path and file name to the document to be opened. Link_location can refer to a place in a document  such as a specific cell or named range.\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Friendly_name\",\n\t\t\t\t\t\"Optional. The jump text or numeric value that is displayed in the cell. Friendly_name is displayed in blue and is underlined. If friendly_name is omitted, the cell displays the link_location as the jump text.\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"SPARKLINE\": [\n\t\t\t\t[\n\t\t\t\t\t\"Range\",\n\t\t\t\t\t\"Required. Range or named range\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Type\",\n\t\t\t\t\t\"Required. Sparkline type\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Positive_color\",\n\t\t\t\t\t\"Required. Positive color\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Negative_color\",\n\t\t\t\t\t\"Required. Negative color\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"CHECKBOX\": [\n\t\t\t\t[\n\t\t\t\t\t\"State\",\n\t\t\t\t\t\"Optional. Checkbox state\"\n\t\t\t\t]\n\t\t\t],\n\t\t\t\"RADIO\": [\n\t\t\t\t[\n\t\t\t\t\t\"Y_position\",\n\t\t\t\t\t\"Required. Y-axis position in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"X_position\",\n\t\t\t\t\t\"Required. X-axis position in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Row_count\",\n\t\t\t\t\t\"Required. Rows count in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"Col_count\",\n\t\t\t\t\t\"Required. Columns count in radio group\"\n\t\t\t\t],\n\t\t\t\t[\n\t\t\t\t\t\"State\",\n\t\t\t\t\t\"Optional. Radio button state\"\n\t\t\t\t]\n\t\t\t]\n\t\t})\n\t},\n\tformats:{\n\t\t\"dateFormat\": \"mm/dd/yyyy\",\n\t\t\"timeFormat\": \"hh:mm AM/PM\",\n\t\t\"longDateFormat\": \"dd mmmm yyyy\",\n\t\t\"fullDateFormat\": \"mm/dd/yyyy hh:mm AM/PM\",\n\t\t\"parseDateTime\": \"%m/%d/%Y %G:%i:%s\",\n\t\t\"parseDate\": \"%m/%d/%Y\",\n\t\t\"currencies\": [\n\t\t\t\"{obj} \",\n\t\t\t\"{obj}\",\n\t\t\t\"R$ {obj}\",\n\t\t\t\"{obj} rub.\"\n\t\t]\n\t}\n};\n","import en from \"./locales/en\";\nwebix.i18n.spreadsheet = en;","webix.protoUI({\n\tname: \"ssheet-align\",\n\t$cssName:\"richselect\",\n\t$init: function(config){\n\t\tconfig.options =  {\n\t\t\tview:\"datasuggest\",\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-icons\",\n\t\t\t\ttooltip: {\n\t\t\t\t\ttemplate:\"#tooltip#\"\n\t\t\t\t},\n\t\t\t\txCount:3, yCount:1\n\t\t\t},\n\t\t\tdata: config.data\n\t\t};\n\t}\n},webix.ui.richselect);","webix.protoUI({\n\tname: \"ssheet-borders-suggest\",\n\tdefaults:{\n\t\twidth: 300\n\t},\n\t$init: function(config){\n\t\tconst skin = webix.skin.$name;\n\t\tconfig.body = {\n\t\t\tmargin: 6,\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-icons\", scroll: false, select: true,\n\t\t\t\t\txCount: 4,\n\t\t\t\t\tyCount: 2,\n\t\t\t\t\ttooltip: { template: obj => obj.tooltip },\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonAfterSelect: function(){\n\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView();\n\t\t\t\t\t\t\tsuggest.updateMasterValue(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\tconst css = \"webix_ssheet_button_icon webix_ssheet_icon ssi-borders-\" + obj.id;\n\t\t\t\t\t\treturn `<span class='${css}'></span>`;\n\t\t\t\t\t},\n\t\t\t\t\tdata: config.data\n\t\t\t\t},\n\t\t\t\t{ view: \"ssheet-separator\"},\n\t\t\t\t{\n\t\t\t\t\trows:[\n\t\t\t\t\t\t{ \n\t\t\t\t\t\t\tview: \"ssheet-color\", \n\t\t\t\t\t\t\tcss: config.css, \n\t\t\t\t\t\t\tname: config.name, \n\t\t\t\t\t\t\twidth: 68,\n\t\t\t\t\t\t\tvalue: (skin == \"contrast\" || skin == \"dark\") ? \"#ffffff\" : \"#000000\",\n\t\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"borders-color\"],\n\t\t\t\t\t\t\ttitle: \"<span class='webix_icon wxi-pencil'></span>\",\n\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\t\tvar suggest = this.getParentView().getParentView().getParentView();\n\t\t\t\t\t\t\t\t\tsuggest.updateMasterValue(false);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tview: \"richselect\", \n\t\t\t\t\t\t\tcss:\"webix_ssheet_border_type\", \n\t\t\t\t\t\t\tvalue:\"thin\", \n\t\t\t\t\t\t\ttooltip: webix.i18n.spreadsheet.tooltips[\"borders-line\"],\n\t\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\t\tfitMaster:false,\n\t\t\t\t\t\t\t\twidth:130,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\t\ttemplate:\"<div class='webix_ssheet_border webix_ssheet_border_#id#'></div>\",\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata:[\n\t\t\t\t\t\t\t\t\t{ id:\"thin\" },\n\t\t\t\t\t\t\t\t\t{ id:\"medium\" },\n\t\t\t\t\t\t\t\t\t{ id:\"thick\" },\n\t\t\t\t\t\t\t\t\t{ id:\"dashed\" }, \n\t\t\t\t\t\t\t\t\t{ id:\"dotted\" },\n\t\t\t\t\t\t\t\t\t{ id:\"double\" }\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ }\n\t\t\t\t\t]\n\t\t\t\t}\n\n\t\t\t]\n\t\t};\n\t},\n\tupdateMasterValue: function(hide){\n\t\tconst value = this.getValue();\n\t\tconst master = webix.$$(this.config.master);\n\t\tmaster.setValue(value, \"user\");\n\t\tif(hide)\n\t\t\tthis.hide();\n\t},\n\tsetValue: function(value){\n\t\tif(value[0])\n\t\t\tthis.getList().select(value[0]);\n\t\tif(value[1])\n\t\t\tthis.getColorView().setValue(value[1]);\n\t\tif(value[2])\n\t\t\tthis.getTypeView().setValue(value[2]);\n\t},\n\tgetValue: function(){\n\t\treturn [this.getList().getSelectedId(), this.getColorView().getValue()||\"\", this.getTypeView().getValue()||\"\"];\n\t},\n\tgetList: function(){\n\t\treturn this.getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[0];\n\t},\n\tgetTypeView: function(){\n\t\treturn this.getBody().getChildViews()[2].getChildViews()[1];\n\t},\n\tgetItemText:function(){\n\t\treturn \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-borders-all'>\";\n\t}\n},webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-borders\",\n\t$cssName: \"richselect\",\n\t$init: function(config){\n\t\tconfig.options = {\n\t\t\tview: \"ssheet-borders-suggest\",\n\t\t\tfitMaster: false,\n\t\t\tdata: config.data\n\t\t};\n\n\t\tthis.$ready.push(webix.bind(function(){\n\t\t\tthis.getPopup().config.master = this.config.id;\n\t\t},this));\n\n\t},\n\tsetValue: function(value, config){\n\t\tif(webix.isArray(value)){\n\t\t\tif(!this.config.value || value[0] !=  this.config.value[0] || value[1] !=  this.config.value[1]){\n\t\t\t\tthis.getPopup().setValue(value);\n\t\t\t}\n\t\t\tconst old = this.config.value;\n\t\t\tthis.config.value = value;\n\t\t\tif (value[0])\n\t\t\t\tthis.callEvent(\"onChange\", [this.getValue(), old, config]);\n\t\t}\n\t\treturn value;\n\t},\n\tgetValue: function(){\n\t\treturn  this.getPopup().getValue().join(\",\");\n\t},\n\tgetList: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[0];\n\t},\n\tgetColorView: function(){\n\t\treturn this.getPopup().getBody().getChildViews()[1].getChildViews()[0];\n\t}\n},webix.ui.richselect);","// toolbar: color selector\nwebix.protoUI({\n\t$cssName: \"colorboard\",\n\tname: \"ssheet-colorboard\",\n\tdefaults:{\n\t\theight: 196,\n\t\twidth: 244,\n\t\tcss: \"webix_ssheet_colorboard\",\n\t\tpalette: [\n\t\t\t[\"#000000\", \"#434343\", \"#666666\", \"#999999\", \"#b7b7b7\", \"#cccccc\", \"#d9d9d9\", \"#efefef\", \"#f3f3f3\", \"#ffffff\"],\n\t\t\t[\"#980000\", \"#ff0000\", \"#ff9900\", \"#ffff00\", \"#00ff00\", \"#00ffff\", \"#4a86e8\", \"#0000ff\", \"#9900ff\", \"#ff00ff\"],\n\t\t\t[\"#e6b8af\", \"#f4cccc\", \"#fce5cd\", \"#fff2cc\", \"#d9ead3\", \"#d0e0e3\", \"#c9daf8\", \"#cfe2f3\", \"#d9d2e9\", \"#ead1dc\"],\n\t\t\t[\"#dd7e6b\", \"#ea9999\", \"#f9cb9c\", \"#ffe599\", \"#b6d7a8\", \"#a2c4c9\", \"#a4c2f4\", \"#9fc5e8\", \"#b4a7d6\", \"#d5a6bd\"],\n\t\t\t[\"#cc4125\", \"#e06666\", \"#f6b26b\", \"#ffd966\", \"#93c47d\", \"#76a5af\", \"#6d9eeb\", \"#6fa8dc\", \"#8e7cc3\", \"#c27ba0\"],\n\t\t\t[\"#a61c00\", \"#cc0000\", \"#e69138\", \"#f1c232\", \"#6aa84f\", \"#45818e\", \"#3c78d8\", \"#3d85c6\", \"#674ea7\", \"#a64d79\"],\n\t\t\t[\"#85200c\", \"#990000\", \"#b45f06\", \"#bf9000\", \"#38761d\", \"#134f5c\", \"#1155cc\", \"#0b5394\", \"#351c75\", \"#741b47\"],\n\t\t\t[\"#5b0f00\", \"#660000\", \"#783f04\", \"#7f6000\", \"#274e13\", \"#0c343d\", \"#1c4587\", \"#073763\", \"#20124d\", \"#4c1130\"]\n\t\t]\n\t},\n\t$init:function(){\n\t\tthis.attachEvent(\"onSelect\", function(value){\n\t\t\tthis.getParentView().setMasterValue({ value }, false, \"user\");\n\t\t});\n\t}\n}, webix.ui.colorboard);\n\nwebix.protoUI({\n\t$cssName: \"richselect\",\n\tname: \"ssheet-color\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_color\",\n\t\ticon: \"wxi-menu-down\",\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\"\n\t\t\t}\n\t\t}\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_color\";\n\t},\n\t$renderInput: function(config, divStart, id){\n\t\tconst color  = this.renderColor.call(this);\n\t\tdivStart = divStart.replace(/([^>]>)(.*)(<\\/div)/, function(match, p1, p2, p3){\n\t\t\treturn p1+config.title +color+p3;\n\t\t});\n\n\t\treturn webix.ui.colorpicker.prototype.$renderInput.call(this,config, divStart, id);\n\t},\n\t$setValue: function(value){\n\t\tvalue = value || \"\";\n\t\tthis.getColorNode().style.backgroundColor = value;\n\t},\n\trenderColor: function(){\n\t\treturn \"<div class='webix_ssheet_cp_color' style='background-color:\"+this.config.value+\";'> </div>\";\n\t},\n\tgetColorNode: function(){\n\t\treturn this.$view.firstChild.firstChild.childNodes[1];\n\t},\n\t$renderIcon:function(){\n\t\treturn webix.ui.text.prototype.$renderIcon.apply(this,arguments);\n\t}\n},webix.ui.colorpicker);","const group = {\n\tvalue: null,\n\tset: function(method, master){\n\t\tif(!this.value){\n\t\t\tthis.start();\n\t\t\tmethod.call(master);\n\t\t\tthis.end();\n\t\t}\n\t\telse\n\t\t\tmethod.call(master);\n\t},\n\tstart(){\n\t\tthis.value = webix.uid();\n\t},\n\tend(){\n\t\tthis.value = null;\n\t}\n};\n\nexport default group;","import {addMethod, addMethodBatch, numberMethods, dateMethods, textMethods, financialMethods, arrayMethods} from \"@xbs/muon\";\nimport group from \"../operations/undo_group\";\n\nexport const methodsWithCategories = {};\nexport const mathCategories = [];\n\nexport function addMathMethods(methods){\n\tmethods = methods || [];\n\t[\n\t\t[\"date\", dateMethods],\n\t\t[\"text\", textMethods],\n\t\t[\"number\", numberMethods],\n\t\t[\"financial\", financialMethods],\n\t\t[\"array\", arrayMethods]\n\t].forEach(arr => {\n\t\tif(methods == \"all\" || methods.indexOf(arr[0]) != -1){\n\t\t\tmathCategories.push(arr[0]);\n\t\t\taddMethodBatch(arr[1]);\n\t\t\tObject.keys(arr[1]).forEach(value => methodsWithCategories[value] = arr[0]);\n\t\t}\n\t});\n}\n\nexport const htmlMath = [\"IMAGE\", \"HYPERLINK\", \"SPARKLINE\", \"CHECKBOX\", \"RADIO\"];\n\nexport function init(view){\n\tconst math = {\n\t\tIMAGE: url => {\n\t\t\tif(view.config.xssSafe && url.indexOf(\"data:image/\") != 0 && new URL(document.baseURI).origin != new URL(url, document.baseURI).origin)\n\t\t\t\treturn \"#XSS!\";\n\t\t\treturn `<img class=\"webix_ssheet_cimage\" src=\"${webix.template.escape(url)}\">`;\n\t\t},\n\t\tHYPERLINK: (url, text) => webix.template.escape(text || url),\n\t\tSPARKLINE: (arr, type, color1, color2) => {\n\t\t\tconst config = { type, color: color1, negativeColor:color2, paddingX:2, paddingY:2 };\n\n\t\t\tif(type == \"donut\")\n\t\t\t\twebix.extend(config, {type:\"pie\", donut:1}, true);\n\t\t\telse if(type == \"barH\")\n\t\t\t\twebix.extend(config, {type:\"bar\", horizontal:1}, true);\n\n\t\t\tfor(let i = 0 ; i < arr.length; i++)\n\t\t\t\tarr[i] = arr[i]||0;\n\n\t\t\tconst tableConfig = view.$$(\"cells\").config;\n\n\t\t\t//[FIXME] we do not know from which cell the method was called, so this is not the real width and height\n\t\t\tconst isCircle = config.type == \"pie\" || type == \"radar\";\n\t\t\tconst width = isCircle ? 100 : tableConfig.columnWidth;\n\t\t\tconst height = isCircle ? 100 : tableConfig.rowHeight;\n\t\t\treturn webix.Sparklines.getTemplate(config)(arr, { width, height });\n\t\t},\n\t\tCHECKBOX: state => !!state,\n\t\tRADIO: (rowPos, colPos, rowCount, colCount, state) => !!state\n\t};\n\n\tconst keys = Object.keys(math);\n\tkeys.forEach((key, i) => addMath(view, key, math[key], i == keys.length - 1));\n\n\tconst grid = view.$$(\"cells\");\n\tgrid.on_click[\"ssheet_checkbox\"] = function(ev, cell){\n\t\tconst value = view.getCellValue(cell.row, cell.column, false);\n\t\tview.setCellValue(cell.row, cell.column, `=checkbox(${value ? 0 : 1})`);\n\t\tview.refresh();\n\t};\n\tgrid.on_click[\"ssheet_radio\"] = function(ev, cell){\n\t\tsetRadioState(view, cell.row, cell.column);\n\t};\n\n\tview.attachEvent(\"onCommand\", action =>{\n\t\tif(action.id == \"add-radio\")\n\t\t\tview.addRadio();\n\t\telse if(action.id == \"add-checkbox\")\n\t\t\tview.addCheckbox();\n\t});\n}\n\nexport function setRadioState(view, row, column, state, page){\n\tconst math = view.getCellValue(row, column, true, page);\n\tif(/^=(radio)\\(/i.test(math)){\n\t\tconst [rowPos, colPos, rowCount, colCount] = math.match(/\\((.+?)\\)/)[1].split(\",\").map(v => v.trim());\n\n\t\tif(state === false){\n\t\t\tview.setCellValue(row, column, `=radio(${rowPos}, ${colPos}, ${rowCount}, ${colPos}, 0)`, page);\n\t\t\tview.refresh();\n\t\t}\n\t\telse{\n\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\tif(!value)\n\t\t\t\tgroup.set(()=>{\n\t\t\t\t\tfor(let r = 1; r <= rowCount; r++)\n\t\t\t\t\t\tfor(let c = 1; c <= colCount; c++)\n\t\t\t\t\t\t\tview.setCellValue(\n\t\t\t\t\t\t\t\trow - rowPos + r,\n\t\t\t\t\t\t\t\tcolumn - colPos + c,\n\t\t\t\t\t\t\t\t`=radio(${r}, ${c}, ${rowCount}, ${colCount}, ${r == rowPos && c == colPos ? 1 : 0})`,\n\t\t\t\t\t\t\t\tpage\n\t\t\t\t\t\t\t);\n\t\t\t\t\tview.refresh();\n\t\t\t\t});\n\t\t}\n\t}\n}\n\nexport function addMath(view, name, handler, sort, category, generateHTML){\n\tname = name.toUpperCase();\n\taddMethod(name, handler);\n\n\tif(category)\n\t\tmethodsWithCategories[name] = category;\n\tif(generateHTML)\n\t\thtmlMath.push(name);\n\n\tif(view.$$(\"liveEditor\")){\n\t\tconst formulaButtonViews = webix.$$(view.$$(\"formulaButton\").config.popup).getBody().getChildViews();\n\t\t[\n\t\t\twebix.$$(view.$$(\"liveEditor\").config.suggest).getList(),\n\t\t\tformulaButtonViews[3]\n\t\t].forEach(list => {\n\t\t\tif(!list.exists(name)){\n\t\t\t\tlist.add({id:name, value:name});\n\t\t\t\tif(sort)\n\t\t\t\t\tlist.sort(\"value\", \"asc\", \"string\");\n\t\t\t}\n\t\t});\n\n\t\tif(category){\n\t\t\tconst categoryFilter = formulaButtonViews[0];\n\t\t\tconst categoryList = categoryFilter.getList();\n\t\t\tif(!categoryList.exists(category)){\n\t\t\t\tcategoryList.add({id:category, value:webix.i18n.spreadsheet.liveEditor[category]||category});\n\t\t\t\tif(!categoryFilter.isVisible()) categoryFilter.show();\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function getJsDateFromExcel(excelDate) {\n\tconst date = new Date(Math.round((excelDate - 25569) * 86400 * 1000));\n\treturn new Date(date.getTime() + date.getTimezoneOffset() * 60000);\n}\n\nexport function getExcelDateFromJs(jsDate) {\n\tconst returnDateTime = 25569 + ((jsDate.getTime() - (jsDate.getTimezoneOffset() * 60000)) / (86400 * 1000));\n\treturn returnDateTime.toString();\n}\n\nexport function getMathTemplate(view, math, value){\n\tif(typeof math == \"string\"){\n\t\tif(/^=checkbox\\(/i.test(math))\n\t\t\treturn `<span class='webix_icon ssheet_checkbox wxi-checkbox-${value ? \"marked\" : \"blank\"}'></span>`;\n\t\telse if(/^=radio\\(/i.test(math))\n\t\t\treturn `<span class='webix_icon ssheet_radio wxi-radiobox-${value ? \"marked\" : \"blank\"}'></span>`;\n\t\telse if(/^=hyperlink\\(/i.test(math)){\n\t\t\tlet quotes, urlEndPos;\n\t\t\tconst startIndex = math.indexOf(\"(\") + 1;\n\t\t\tfor(let i = startIndex; i < math.length; i++){\n\t\t\t\tif(math[i] == \"\\\"\") quotes = !quotes;\n\t\t\t\telse if(math[i] == \",\" && !quotes){\n\t\t\t\t\turlEndPos = i;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(!urlEndPos)\n\t\t\t\turlEndPos = math.indexOf(\")\");\n\n\t\t\tconst url = view._mData.getStore().exec(math.substring(startIndex, urlEndPos), view._mPage.getContext());\n\t\t\tconst escape = webix.template.escape;\n\t\t\tlet attrs;\n\n\t\t\tif(url[0] == \"#\")\n\t\t\t\tattrs = `href=\"javascript:void(0);\" class=\"webix_ssheet_ref\" data-ref=\"${escape(url.substr(1))}\"`;\n\t\t\telse\n\t\t\t\tattrs = `target=\"blank\" href=\"${escape(url)}\"`;\n\n\t\t\treturn `<a ${attrs}>${value}</a>`;\n\t\t}\n\t}\n\treturn value;\n}","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\n\nfunction getJsDate(value){\n\tif ((value || value === 0) && !(value instanceof Date) && !isNaN(value)){\n\t\tvalue = getJsDateFromExcel(value);\n\t}\n\treturn value;\n}\n\nfunction getExcelDate(value){\n\tif (value && value instanceof Date){\n\t\tvalue = getExcelDateFromJs(value);\n\t}\n\treturn value;\n}\n\nwebix.protoUI({\n\t$cssName: \"datepicker\",\n\tname: \"ssheet-datepicker\",\n\tgetValue:function(){\n\t\tconst value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\treturn getExcelDate(value) || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tvalue = getJsDate(value);\n\t\treturn webix.ui.datepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.datepicker);\n\nwebix.protoUI({\n\t$cssName: \"daterangepicker\",\n\tname: \"ssheet-daterangepicker\",\n\tgetValue:function(){\n\t\tlet value = webix.ui.datepicker.prototype.getValue.apply(this);\n\t\tif (value){\n\t\t\tvalue = webix.copy(value);\n\t\t\tvalue.start = getExcelDate(value.start);\n\t\t\tvalue.end = getExcelDate(value.end);\n\t\t}\n\t\treturn value || \"\";\n\t},\n\t$prepareValue:function(value){\n\t\tif (!value){\n\t\t\tvalue = { start:null, end:null };\n\t\t}\n\t\telse if (!value.start && !value.end)\n\t\t\tvalue = { start:value };\n\n\t\tvalue.start = getJsDate(value.start);\n\t\tvalue.end = getJsDate(value.end);\n\n\t\treturn webix.ui.daterangepicker.prototype.$prepareValue.apply(this, [value]);\n\t}\n}, webix.ui.daterangepicker);","export function init(view){\n\tconst events = [\n\t\t{name:\"onSheetAdd\", type:\"insert\"},\n\t\t{name:\"onSheetRemove\", type:\"remove\"},\n\t\t{name:\"onSheetRename\", type:\"rename\"},\n\t\t{name:\"onSheetStateChange\", type:\"state\"},\n\t\t{name:\"onCellChange\"},\n\t\t{name:\"onStyleChange\"},\n\t\t{name:\"onAction\"},\n\t\t{name:\"onRowOperation\"},\n\t\t{name:\"onColumnOperation\"},\n\t\t{name:\"onAfterConditionSet\"},\n\t\t{name:\"onAfterRangeSet\"},\n\t\t{name:\"onAfterSpan\"},\n\t\t{name:\"onAfterSplit\"},\n\t\t{name:\"onZoom\"},\n\t\t{name:\"onAfterFilter\", view: \"cells\"},\n\t\t{name:\"onRowResize\", view: \"cells\"},\n\t\t{name:\"onColumnResize\", view: \"cells\"}\n\t];\n\n\tlet thread;\n\tfor (let i = 0; i < events.length; i++){\n\t\tconst handler = events[i];\n\t\t(handler.view ? view.$$(handler.view) : view).attachEvent(handler.name, function(name, newName, _, p1, p2){\n\t\t\tif (view._loading_data || view._type_change) return;\n\n\t\t\tlet params;\n\t\t\tif(handler.type)\n\t\t\t\tparams = handler.type == \"rename\" ? [handler.type, newName, name] : [handler.type, name];\n\t\t\telse{\n\t\t\t\tlet activeSheet = view.getActiveSheet();\n\t\t\t\tif(handler.name == \"onAction\" && newName.page && newName.page != activeSheet)\n\t\t\t\t\tactiveSheet = newName.page;\n\t\t\t\telse if([\"onAfterSplit\", \"onAfterSpan\", \"onCellChange\", \"onColumnOperation\", \"onRowOperation\"].indexOf(handler.name) != -1 && p1 != activeSheet)\n\t\t\t\t\tactiveSheet = p1;\n\t\t\t\telse if([\"onStyleChange\", \"onAfterConditionSet\"].indexOf(handler.name) != -1 && p2 != activeSheet)\n\t\t\t\t\tactiveSheet = p2;\n\t\t\t\telse if(handler.name == \"onZoom\")\n\t\t\t\t\tactiveSheet = _;\n\t\t\t\tparams = [\"update\", activeSheet];\n\t\t\t}\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(() => view.callEvent(\"onChange\", params));\n\t\t});\n\t}\n\n\tview.attachEvent(\"onChange\", function(){\n\t\tsave(view, \"all\");\n\t});\n}\n\nexport function save(view, name, data){\n\tvar save = view.config.save;\n\tvar url;\n\tif (!save) return;\n\n\tif(name == \"all\"){\n\t\tif(!save.all)\n\t\t\treturn;\n\t\tdata = { data: view.serialize({ sheets: true }) };\n\t\turl = save.all;\n\t}\n\telse{\n\t\turl = typeof save === \"string\" ? save + \"/\" + name : save[name];\n\t}\n\n\turl = webix.proxy.$parse(url);\n\n\tif(url){\n\t\tif (typeof url === \"function\")\n\t\t\treturn url(name, data);\n\n\t\tif (url.$proxy && url.save)\n\t\t\treturn url.save(view, data, null, null);\n\n\t\tvar ajax = webix.ajax();\n\t\tif (name === \"all\")\n\t\t\tajax.headers({ \"Content-type\" : \"application/json\" });\n\t\tajax.post(url, data);\n\t}\n}","webix.protoUI({\n\t$cssName: \"window\",\n\tname: \"ssheet-dialog\",\n\t$init: function(config){\n\t\tthis.$view.className += \" webix_ssheet_dialog\";\n\t\tthis.config.buttons = config.buttons;\n\t\tthis.config.close = true;\n\t},\n\tgetBodyConfig: function(content){\n\t\tcontent.borderless = true;\n\t\tvar elements = this.getFormElements(content);\n\t\tvar config = {\n\t\t\tview: \"form\",\n\t\t\tcss: \"webix_ssheet_form\",\n\t\t\tpadding: webix.skin.$active.layoutPadding.form,\n\t\t\telements: elements\n\t\t};\n\t\treturn config;\n\t},\n\tgetFormElements: function(content){\n\t\tvar elements;\n\t\tif(webix.isArray(content))\n\t\t\telements= content;\n\t\telse{\n\t\t\telements = [];\n\t\t\telements.push(content);\n\t\t}\n\t\tif(this.config.buttons){\n\t\t\telements.push({height:1});\n\t\t\telements.push( {\n\t\t\t\tmargin: 10,\n\t\t\t\tcols:[\n\t\t\t\t\t{},\n\t\t\t\t\t{view: \"button\", css: \"ssheet_cancel_button\", label: webix.i18n.spreadsheet.labels.cancel, autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onCancelClick\",[]);\n\t\t\t\t\t}},\n\t\t\t\t\t{view: \"button\", label: webix.i18n.spreadsheet.labels.save, hotkey: \"enter\", autowidth:true, click: function(){\n\t\t\t\t\t\tvar parentView = this.getTopParentView();\n\t\t\t\t\t\tparentView.callEvent(\"onSaveClick\",[]);\n\t\t\t\t\t}}\n\t\t\t\t]\n\t\t\t});\n\t\t}\n\t\treturn elements;\n\t},\n\tbody_setter: function(value){\n\t\tif(typeof value == \"object\"){\n\t\t\tif(webix.isUndefined(value.padding))\n\t\t\t\tvalue.padding = webix.skin.$active.layoutPadding.form;\n\t\t\tif(value.view == \"form\" && value.elements){\n\t\t\t\tvalue.elements = this.getFormElements(value.elements);\n\t\t\t\tif(!value.css)\n\t\t\t\t\tvalue.css = \"webix_ssheet_form\";\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this.getBodyConfig(value);\n\t\t}\n\n\t\treturn webix.ui.window.prototype.body_setter.call(this,value);\n\t},\n\tdefaults:{\n\t\tmove:true,\n\t\thead: \"Dialog\",\n\t\tbuttons: true,\n\t\tclose:true,\n\t\t//we need to retain focus in table area, so disabling the autofocusing feature\n\t\tautofocus:false,\n\t\twidth: 350\n\t}\n}, webix.ui.window, webix.IdSpace);\n\n\n\nwebix.protoUI({\n\t$cssName: \"datatable\",\n\tname: \"ssheet-dialog-table\",\n\t$init: function(config){\n\t\tif(!config.headerRowHeight)\n\t\t\tconfig.headerRowHeight = 34;\n\t\tthis.$view.className += \" webix_ssheet_dialog_table\";\n\t}\n},webix.ui.datatable);","webix.protoUI({\n\tname: \"ssheet-suggest-labels\",\n\tdefaults:{\n\t\tfitMaster:false,\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t},\n\tgetItemText: function(id){\n\t\treturn this.getList().getItem(id).value;\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\tname: \"ssheet-form-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_suggest\";\n\t}\n}, webix.ui.suggest);\n\nwebix.protoUI({\n\t$cssName: \"colorpicker\",\n\tname: \"ssheet-colorpicker\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_colorpicker\";\n\t},\n\tdefaults:{\n\t\tsuggest:{\n\t\t\tborderless: true,\n\t\t\tbody:{\n\t\t\t\tview: \"ssheet-colorboard\",\n\t\t\t}\n\t\t}\n\t}\n}, webix.ui.colorpicker);","webix.protoUI({\n\tname:\"formlate\",\n\tsetValue:function(a){ return this.setHTML(a); },\n\tgetValue:function(){ return \"\"; }\n}, webix.ui.template);","webix.protoUI({\n\tname:\"ssheet-icons\",\n\t$cssName: \"dataview\",\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_dataview\";\n\t},\n\tdefaults:{\n\t\tborderless: true,\n\t\ttemplate: \"<span class='webix_ssheet_button_icon #css#' ></span>\",\n\t\ttype:{\n\t\t\twidth: 36,\n\t\t\theight: 36\n\t\t}\n\t}\n},webix.ui.dataview);","webix.protoUI({\n\tname: \"ssheet-suggest\",\n\tdefaults:{\n\t\tpadding:0,\n\t\tcss: \"webix_ssheet_suggest\"\n\t}\n},webix.ui.contextmenu);","export const decode = {};\nexport const encode = {};\n\nconst alpha = \"ABCDEFGHIJKLMNOPQRSTUVWXYZ\";\n\nfunction indexToHeader(index){\n\tconst chars = alpha.length;\n\tconst quotient = Math.floor(--index / chars);\n\tif (quotient > 0)\n\t\treturn indexToHeader(quotient) + alpha[index % chars];\n\n\treturn alpha[index % chars];\n}\n\nexport function updateMaxColumn(maxColumn){\n\tconst lastColumn = Object.keys(encode).length;\n\n\tif(!maxColumn)\n\t\tmaxColumn = lastColumn + 1;\n\n\tfor(let i = lastColumn + 1; i <= maxColumn; i++){\n\t\tlet str = indexToHeader(i);\n\n\t\tdecode[str] = i;\n\t\tencode[i] = str;\n\t}\n}\n\nexport function adress(text){\n\tlet size;\n\tfor(let i = 0; i < text.length; i++)\n\t\tif(text.charCodeAt(i) < 59){\n\t\t\tsize = i;\n\t\t\tbreak;\n\t\t}\n\n\tconst col = text.substr(0, size);\n\tconst row = text.substr(size);\n\n\tif(!decode[col])\n\t\twhile(!decode[col])\n\t\t\tupdateMaxColumn();\n\n\treturn [row*1, decode[col]];\n}\n\nexport function range(text, view, page){\n\tconst nind = text.indexOf(\"!\");\n\tlet sheet = page || \"\";\n\n\t//parse sheet names\n\tif (nind !== -1){\n\t\tsheet = text.substr(0, nind);\n\t\tif (sheet[0] === \"'\")\n\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\ttext = text.substr(nind+1);\n\t}\n\n\tlet parts = text.split(\":\");\n\tif (parts.length != 2){\n\t\tif(parts.length != 1) return null;\n\t\tif(isCell(parts[0])) parts.push(parts[0]);\n\t\telse if(view){\n\t\t\tlet code = view.ranges.getCode(text, sheet);\n\t\t\tif(!code){\n\t\t\t\t// global named range\n\t\t\t\tcode = view.ranges.getCode(text, true);\n\t\t\t\tif(!code)\n\t\t\t\t\treturn null;\n\t\t\t}\n\t\t\tconst rangeParts = code.split(\"!\");\n\t\t\tif(rangeParts[0] != page || view.getActiveSheet())\n\t\t\t\tsheet = rangeParts[0].replace(/'/g,\"\");\n\t\t\tcode = rangeParts[1];\n\t\t\tparts = code.split(\":\");\n\t\t}\n\t\telse return null;\n\t}\n\n\tif(!isCell(parts[0]) || !isCell(parts[1])) return null;\n\n\tconst d1 = adress(parts[0]);\n\tconst d2 = adress(parts[1]);\n\n\tif(d1[0] && d1[1] && d2[0] && d2[1])\n\t\treturn [d1[0], d1[1], d2[0], d2[1], sheet];\n}\n\nexport function escapeSheet(sheet){\n\tconst specialChars = /[\\s\\-&.!%()+*=^~,;@#$\"`|{}<>]/;\n\tconst startsWithDigit = /^[0-9]/;\n\tconst looksLikeCellRef = /^[A-Za-z]{1,3}[0-9]{1,7}$/;\n\n\tif(specialChars.test(sheet) || startsWithDigit.test(sheet) || looksLikeCellRef.test(sheet))\n\t\tsheet = `'${sheet}'`;\n\n\treturn sheet;\n}\n\nexport function toRange(x,y,x2,y2,sheet){\n\tif(typeof y == \"number\" && y > 0 && !encode[y])\n\t\twhile(!encode[y])\n\t\t\tupdateMaxColumn();\n\tif(x2 && typeof y2 == \"number\" && y2 > 0 && !encode[y2])\n\t\twhile(!encode[y2])\n\t\t\tupdateMaxColumn();\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+encode[y]+x+(x2&&!(x==x2&&y==y2)?(\":\"+encode[y2]+x2):\"\");\n}\nexport function toSheetRange(x,y,sheet){\n\treturn (sheet?(escapeSheet(sheet)+\"!\"):\"\")+x+\":\"+y;\n}\n\nexport function rangeObj(text, view){\n\tif (typeof text === \"object\") return text;\n\tconst a = range(text, view);\n\treturn { start:{ row:a[0], column:a[1]}, end:{ row:a[2], column:a[3] }, sheet: a[4] };\n}\n\nexport function eachRange(text, view, callback, data){\n\tconst range = rangeObj(text);\n\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\tfor (let column = range.start.column; column <=  range.end.column; column++) {\n\t\t\tcallback(view, {row: row, column: column}, data);\n\t\t}\n\t}\n}\n\nexport function isRange(text){\n\tif(typeof text == \"string\"){\n\t\tconst cells = text.split(\":\");\n\t\tif(cells.length == 2){\n\t\t\tfor(let i = 0; i < cells.length; i++){\n\t\t\t\tconst parts = cells[i].split(\"!\");\n\t\t\t\tif(!isCell(parts.pop()))\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\treturn true;\n\t\t}\n\t}\n}\n\nconst cellTest = /^[A-Z]{1,3}[0-9]{1,7}$/;\nexport function isCell(text){\n\treturn cellTest.test(text);\n}\n\nexport function changeRange(text,name,inc,start){\n\tlet updated = false;\n\n\tif(isRange(text)){\n\t\tlet [r1,c1,r2,c2,sheet] = range(text);\n\n\t\t//ranges like B2:A1\n\t\tif(r1 > r2)\n\t\t\t[r1, r2] = [r2, r1];\n\t\tif(c1 > c2)\n\t\t\t[c1, c2] = [c2, c1];\n\n\t\tif (name === \"row\" && start.row <= r2){\n\t\t\tif((inc < 0 && start.row < r1) || (inc > 0 && start.row <= r1))\n\t\t\t\tr1 += inc;\n\t\t\tr2 += inc;\n\n\t\t\tif(r2<r1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\telse if (name === \"column\" && start.column <= c2){\n\t\t\tif((inc < 0 && start.column < c1) || (inc > 0 && start.column <= c1))\n\t\t\t\tc1 += inc;\n\t\t\tc2 += inc;\n\n\t\t\tif(c2<c1)\n\t\t\t\treturn \"\";\n\n\t\t\tupdated = true;\n\t\t}\n\t\tif(updated)\n\t\t\ttext = toRange(r1,c1,r2,c2,sheet);\n\t}\n\n\treturn text;\n}","export const toolbarSizes = {\n\twidth:38,\n\tmargin: 7,\n\tpaddingY: 1,\n\tsectorPadding: 5,\n\tsectorMargin: 0\n};\n\n// default styles for toolbar elements\nexport let defaultStyles = {\n\t\"color\"         : \"#666666\",\n\t\"background\"    : \"#ffffff\",\n\t\"font-family\"   : \"'PT Sans', Tahoma\",\n\t\"font-size\" : \"15\",\n\t\"text-align\": \"left\",\n\t\"vertical-align\": \"middle\",\n\t\"white-space\": \"nowrap\",\n\t\"format\":\"common\"\n};\n\nconst fonts = {\n\tmaterial: \"'Roboto', sans-serif\",\n\tmini: \"'Roboto', sans-serif\",\n\tflat: \"'PT Sans', Tahoma\",\n\tcompact: \"'PT Sans', Tahoma\",\n\tcontrast: \"'PT Sans', Tahoma\",\n\twillow: \"'Open Sans', sans-serif\",\n\tdark: \"'Open Sans', sans-serif\",\n};\n\nexport function setSkinDefaults(){\n\tconst skin = webix.skin.$name;\n\ttoolbarSizes.width = webix.skin.$active.inputHeight + 2;\n\ttoolbarSizes.titleHeight = (skin == \"mini\" || skin == \"compact\") ? 18 : 20;\n\n\tif(webix.skin.$active.spreadsheet)\n\t\treturn defaultStyles = webix.skin.$active.spreadsheet;\n\n\tdefaultStyles[\"font-family\"] = fonts[skin];\n\n\tif (skin == \"contrast\"){\n\t\tdefaultStyles.background = \"#393939\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t} else if (skin == \"material\" || skin == \"mini\"){\n\t\tdefaultStyles.color = \"#475466\";\n\t} else if (skin == \"willow\"){\n\t\tdefaultStyles.color = \"#2C2F3C\";\n\t} else if (skin == \"dark\"){\n\t\tdefaultStyles.background = \"#2A2B2D\";\n\t\tdefaultStyles.color = \"#ffffff\";\n\t}\n}","export function find(arr, func){\n\tvar result = findIndex(arr, func);\n\treturn arr[result];\n}\n\nexport function findIndex(arr, func){\n\tvar result = -1;\n\tfor(var i =0; result<0 && i < arr.length; i++){\n\t\tif(func(arr[i]))\n\t\t\tresult = i;\n\t}\n\treturn result;\n}\n\nexport function getDimension(data, spans, rows, cols, filters){\n\tfor(let i=0; i<data.length; i++){\n\t\t// data[i] - [ row, column, value, style]\n\t\tlet line = data[i];\n\t\tif (line[0]>rows) rows=line[0];\n\t\tif (line[1]>cols) cols=line[1];\n\t}\n\n\tif(spans)\n\t\tfor(let i = 0; i < spans.length; i++){\n\t\t\t// spans[i] - [ row, column, colCount, rowCount ]\n\t\t\tconst spanEndRow = spans[i][0] + spans[i][3] - 1;\n\t\t\tconst spanEndCol = spans[i][1] + spans[i][2] - 1;\n\n\t\t\tif(spanEndRow > rows) rows = spanEndRow;\n\t\t\tif(spanEndCol > cols) cols = spanEndCol;\n\t\t}\n\n\tif(filters)\n\t\tfor(let i=0; i<filters.length; i++){\n\t\t\tif(filters[i][0] > rows) rows = filters[i][0];\n\t\t\tif(filters[i][1] > cols) cols = filters[i][1];\n\t\t}\n\n\treturn [rows*1, cols*1];\n}","import group from \"./undo_group\";\nimport {save} from \"./save\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {defaultStyles} from \"../toolbar/defaults\";\nimport {find} from \"../helpers/array\";\n\n//do not change order, it will break server side compatibility\n//add new options to the end of this list\nexport const style_names = [\n\t\"color\",\"background\",\"text-align\",\n\t\"font-family\",\"font-size\",\n\t\"font-style\",\"underline\",\"font-weight\",\n\t\"vertical-align\", \"wrap\", \"borders\", \"format\",\n\t\"border-right\", \"border-bottom\",\"border-left\", \"border-top\",\n\t\"strike\", \"indent\"\n];\n\nconst _style_map = {\n\tformat: () => \"\",\n\t\"text-align\": {\n\t\tleft: () => \"justify-content:flex-start;\",\n\t\tcenter: () => \"justify-content:center;text-align:center;\",\n\t\tright: () => \"justify-content:flex-end;text-align:right;\"\n\t},\n\t\"vertical-align\": {\n\t\ttop: () => \"align-items:flex-start;\",\n\t\tmiddle: () => \"align-items:center;\",\n\t\tbottom: () => \"align-items:flex-end;\"\n\t},\n\twrap: {\n\t\twrap: () => {\n\t\t\treturn \"white-space: normal !important;\";\n\t\t}\n\t},\n\t\"border-left\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-left\", obj, zoom);\n\t},\n\t\"border-top\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-top\", obj, zoom);\n\t},\n\t\"border-right\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-right\", obj, zoom);\n\t},\n\t\"border-bottom\": (obj, zoom) => {\n\t\treturn getBorderCss(\"border-bottom\", obj, zoom);\n\t},\n\t\"font-weight\": obj => {\n\t\t//Roboto bold - font-weight:500 (looks better, than 700). Roboto is default font for material skins.\n\t\tif (obj[\"font-weight\"] == \"bold\") {\n\t\t\tconst family = obj[\"font-family\"] || defaultStyles[\"font-family\"];\n\t\t\treturn \"font-weight:\" + (family == \"'Roboto', sans-serif\" ? 500 : 700) + \";\";\n\t\t}\n\t\treturn \"\";\n\t},\n\tunderline: obj => {\n\t\tconst underline = obj.underline == \"underline\" ? \"underline\" : \"\";\n\t\tif (underline) {\n\t\t\tconst strike = obj.strike == \"strike\" ? \"line-through\" : \"\";\n\t\t\treturn `text-decoration: ${underline} ${strike};`;\n\t\t}\n\t\treturn \"\";\n\t},\n\tstrike: obj => {\n\t\tif (obj.underline != \"underline\" && obj.strike == \"strike\")\n\t\t\treturn \"text-decoration: line-through;\";\n\t\treturn \"\";\n\t},\n\tindent: (obj, zoom) => {\n\t\tconst count = obj.indent * 1;\n\t\tif (count > 0){\n\t\t\tconst pos = obj[\"text-align\"] == \"right\" ? \"right\" : \"left\";\n\t\t\treturn { innerCss: `margin-${pos}:${(count * 8 + 12)*zoom}px;` }; // 12 - default cell margin\n\t\t}\n\t},\n\t\"font-size\": (obj, zoom) => {\n\t\tlet fontSize = obj[\"font-size\"];\n\n\t\tif (zoom != 1)\n\t\t\tfontSize = obj[\"font-size\"].replace(\"px\",\"\") * zoom + \"px\";\n\n\t\treturn \"font-size:\"+fontSize+\";\";\n\t},\n};\n\nfunction getBorderCss(pos, obj, zoom){\n\tlet border = obj[pos];\n\tif(border){\n\t\tlet [color, type] = border.split(\",\");\n\n\t\ttype = type || \"thin\";\n\t\tlet size = 1;\n\t\tif(type == \"medium\")\n\t\t\tsize = 2;\n\t\telse if(type == \"thick\" || type == \"double\")\n\t\t\tsize = 3;\n\n\t\tsize = size * zoom + \"px\";\n\n\n\t\tif([\"thin\", \"medium\", \"thick\"].indexOf(type) != -1)\n\t\t\ttype = \"solid\";\n\n\t\treturn `${pos}: ${size} ${type} ${color} !important;`;\n\t}\n\treturn \"\";\n}\n\nconst border_checks = {\n\t\"border-left\":\t\tfunction(cell, area, mode){ return cell.column == area.start.column || mode ==\"no\"; },\n\t\"border-right\":\t\tfunction(cell, area, mode){ return cell.column == area.end.column || mode == \"all\" || mode ==\"no\"; },\n\t\"border-top\":\t\tfunction(cell, area , mode){ return cell.row == area.start.row || mode ==\"no\"; },\n\t\"border-bottom\":\tfunction(cell, area, mode){ return cell.row == area.end.row || mode == \"all\"|| mode ==\"no\"; }\n};\n\nconst _style_handlers = {\n\t\"borders\": function(view, style, value, cell){\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tvalue = value.split(\",\");\n\t\tconst type = value[0];\n\t\tlet color = value[1];\n\t\tlet lineStyle = value[2];\n\n\t\tvar modes = [\"border-left\", \"border-right\", \"border-bottom\", \"border-top\"];\n\n\t\tif(type == \"top-bottom\"){\n\t\t\tmodes = [\"border-top\",\"border-bottom\"];\n\t\t}\n\t\telse if (type != \"no\" && type != \"all\" && type != \"outer\")\n\t\t\tmodes = [\"border-\"+type];\n\n\t\tfor (var i = 0; i < modes.length; i++){\n\t\t\tvar mode = modes[i];\n\t\t\tlet result = view.callEvent(\"onAction\", [\"check-borders\", {row:cell.row, column:cell.column, area, type, mode}]);\n\t\t\tif (result === true || border_checks[mode](cell, area, type)){\n\t\t\t\tconst border = type == \"no\" ? \"\" : `${color},${lineStyle}`;\n\t\t\t\tstyle = _updateStyle(view, style, mode, border, cell);\n\t\t\t}\n\t\t}\n\t\treturn style;\n\t}\n};\n\nconst toggleableStyles = {\n\t\"font-weight\": [\"normal\", \"bold\"],\n\t\"font-style\": [\"normal\", \"italic\"],\n\t\"underline\": [\"normal\", \"underline\"],\n\t\"strike\": [\"normal\", \"strike\"],\n\t\"wrap\": [\"nowrap\", \"wrap\"],\n};\n\nvar sizeEl;\nexport function init(view){\n\tview.attachEvent(\"onStyleSet\", (name, value) => _applyStyles(view, name, value));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, style) => {\n\t\tif(type == \"style\")\n\t\t\t_undoStyle(view, row, column, style);\n\t});\n\n\treset(view);\n\n\tif (!sizeEl)\n\t\tsizeEl = webix.html.create(\"DIV\", { style:\"visibility:hidden; position:absolute; top:0px; left:0px; height:auto;\"}, \"\");\n}\n\nfunction reset(view){\n\tview._styles = {};\n\tview._styles_cache = {};\n\tview._styles_max = 1;\n\n\tlet prefix = \".wss_\"+view.$index;\n\twebix.html.removeStyle(prefix);\n}\n\nexport function zoomStyles(view){\n\tconst data = {};\n\t_serialize(view, data);\n\treset(view);\n\t_parse(view, data, true);\n}\n\nexport function getStyle(view, cell, page, exportStyles){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = view._mData.getPage(page);\n\t\tif(sheet){\n\t\t\tconst obj = sheet.getCell(cell.row-1, cell.column-1);\n\t\t\tif (obj && obj.style){\n\t\t\t\tconst styles = find(view._sheets, sheet => sheet.name == page).content.styles || [];\n\t\t\t\tconst style = find(styles, stl => stl[0] == obj.style);\n\t\t\t\tif(style)\n\t\t\t\t\treturn {\n\t\t\t\t\t\tid: obj.style,\n\t\t\t\t\t\ttext: style[1],\n\t\t\t\t\t\tprops: styleFromText(style[1])\n\t\t\t\t\t};\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\n\t\tif(span && (exportStyles || (span[0] == cell.row && span[1] == cell.column))){\n\t\t\tconst spanStyles = span[5].split(\" \");\n\t\t\tfor (let i = 0; i < spanStyles.length; i++){\n\t\t\t\tconst spanStyle = view._styles[spanStyles[i]];\n\t\t\t\tif(spanStyle)\n\t\t\t\t\treturn spanStyle;\n\t\t\t}\n\t\t}\n\n\t\tif (obj && obj.style)\n\t\t\treturn view._styles[obj.style];\n\t}\n\n\treturn null;\n}\n\nexport function getFormat(view, row, column){\n\tvar obj = view._mPage.getCell(row-1, column-1);\n\treturn (obj && obj.format) || \"\";\n}\n\n// undo\nfunction _undoStyle(view, row, column, style){\n\tvar cell = {row: row, column: column};\n\tsetStyle(view, cell, style);\n}\n\nfunction _serialize(view, obj){\n\tvar styles = [];\n\n\tfor (var key in view._styles_cache)\n\t\tstyles.push([view._styles_cache[key].id, key]);\n\n\tobj.styles = styles;\n}\n\nexport function addStyle(view, props, origin, page){\n\tconst style = {\n\t\tprops: styleFromText( style_names.map(()=>\"\").join(\";\") )\n\t};\n\n\tif (origin)\n\t\tfor (let key in origin.props)\n\t\t\tstyle.props[key] = origin.props[key];\n\n\tfor (let  key in props)\n\t\tstyle.props[key] = props[key];\n\n\tstyle.text = styleToText(style);\n\n\tlet sheet;\n\tif(page && page != view.getActiveSheet()){\n\t\tsheet = find(view._sheets, sheet => sheet.name == page);\n\t\tif(!sheet)\n\t\t\treturn null;\n\t\tif(sheet.content.styles){\n\t\t\tconst sameStyle = find(sheet.content.styles, stl => stl[1] == style.text);\n\t\t\tif(sameStyle)\n\t\t\t\treturn webix.extend(style, {id: sameStyle[0]});\n\t\t}\n\t\telse\n\t\t\tsheet.content.styles = [];\n\t}\n\telse{\n\t\tconst cache = view._styles_cache[style.text];\n\t\tif (cache)\n\t\t\treturn cache;\n\t}\n\n\t_addStyle(view, style, false, sheet);\n\n\treturn style;\n}\n\nfunction _parse(view, obj, zoom){\n\tif (obj.styles)\n\t\tfor (let i=0; i < obj.styles.length; i++){\n\t\t\tvar styleObj = obj.styles[i];\n\t\t\tvar style = {\n\t\t\t\tid: styleObj[0],\n\t\t\t\ttext:styleObj[1],\n\t\t\t\tprops: styleFromText(styleObj[1])\n\t\t\t};\n\n\t\t\t_addStyle(view, style, true);\n\t\t}\n\n\tif(!zoom)\n\t\tfor (let i = 0; i < obj.data.length; i++){\n\t\t\tvar [row, column, , css] = obj.data[i];\n\n\t\t\tif (css)\n\t\t\t\tupdate_style_data(view, row, column, view._styles[css]);\n\t\t}\n}\n\nfunction _applyStyles(view, name, value){\n\tif(!view.getSelectedId())\n\t\treturn;\n\tgroup.set(function(){\n\t\tview.eachSelectedCell(function(cell){\n\t\t\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\t\t\tif(!span || (span && span[0] == cell.row && span[1] == cell.column))\n\t\t\t\t_applyCellStyles(view, cell, name, value);\n\t\t});\n\t});\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n\tview.refresh();\n}\n\nfunction _applyCellStyles(view, cell, name, value){\n\tconst ostyle = getStyle(view, cell);\n\n\tif(name == \"indent\"){\n\t\tconst oldVal = ((ostyle && ostyle.props[name]) || 0) * 1;\n\n\t\tif(!oldVal && value == -1)\n\t\t\treturn;\n\n\t\tvalue += oldVal;\n\t}\n\n\tconst nstyle = _updateStyle(view, ostyle, name, value, cell);\n\n\tif (nstyle && nstyle != ostyle)\n\t\t_setStyle(view, cell, nstyle, null, false);\n}\n\nfunction _updateStyle(view, style, name, value, cell){\n\tif (_style_handlers[name]) {\n\t\treturn _style_handlers[name](view, style, value, cell);\n\t}\n\tconst toggledStyle = value === undefined && toggleableStyles[name]; \n\n\tif (style && style.props[name] == value && !toggledStyle) return style;\n\n\tconst nstyle = {\n\t\ttext: \"\", \n\t\tid: 0, \n\t\tprops: (style ? webix.copy(style.props) : {}) \n\t};\n\n\tif (toggledStyle) {\n\t\tconst old = nstyle.props[name];\n\t\tconst i = !old ? 0 : toggledStyle.findIndex(s => s == old);\n\t\tvalue = toggledStyle[i^1];\n\t}\n\n\tnstyle.props[name] = value;\n\tnstyle.text = styleToText(nstyle);\n\n\tconst cache = view._styles_cache[nstyle.text];\n\tif (cache)\n\t\treturn cache;\n\n\t_addStyle(view, nstyle);\n\n\treturn nstyle;\n}\n\nfunction update_style_data(view, row, column, style, page){\n\tconst isActiveSheet = !page || page == view.getActiveSheet();\n\tconst sheet = isActiveSheet ? view._mPage : view._mData.getPage(page);\n\tif(sheet){\n\t\tconst obj = sheet.getCell(row-1, column-1, true);\n\t\tobj.style = style && style.id;\n\t\tobj.format = style && style.props.format;\n\t\tif(!isActiveSheet){\n\t\t\tconst data = find(view._sheets, sheet => sheet.name == page).content.data;\n\t\t\tconst item = find(data, item => item[0] == row && item[1] == column);\n\t\t\tif(item) item[3] = obj.style;\n\t\t\telse data.push([row, column, \"\", obj.style]);\n\t\t}\n\t}\n}\n\nexport function setStyle(view, cell, style, page){\n\treturn _setStyle(view, cell, style, page);\n}\n\nexport function setRangeStyle(view, range, style, page) {\n\teachRange(range, view, (view, cell, data) => _setStyle(view, cell, data.style, data.page, false), {style, page});\n\tif(!page || page == view.getActiveSheet())\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n}\n\nexport function getTextSize(view, text, css, baseWidth){\n\tsizeEl.innerHTML = text;\n\tsizeEl.style.width = baseWidth ? baseWidth+\"px\" : \"auto\";\n\n\tsizeEl.className = \"webix_table_cell webix_cell \"+css;\n\tview._table.$view.appendChild(sizeEl);\n\n\tconst width = Math.max(0, sizeEl.offsetWidth+1);\n\tconst height = Math.max(0, sizeEl.offsetHeight+1);\n\n\tview._table.$view.removeChild(sizeEl);\n\tsizeEl.innerHTML = \"\";\n\n\treturn { width, height };\n}\n\nfunction _setStyle(view, cell, style, page, updateToolbar){\n\tconst old = getStyle(view, cell, page);\n\tconst activeSheet = view.getActiveSheet();\n\tif(!page)\n\t\tpage = activeSheet;\n\tif(view.callEvent(\"onBeforeStyleChange\", [cell.row, cell.column, style, old, page])){\n\t\tgroup.set(()=>{\n\t\t\tconst format = style && style.props.format || null;\n\t\t\tconst oldFormat = old && old.props.format || null;\n\t\t\tconst formatChanged = format != oldFormat;\n\t\t\tif(!formatChanged || (formatChanged && view.callEvent(\"onBeforeFormatChange\", [cell.row, cell.column, format, oldFormat, page]))){\n\t\t\t\tupdate_style_data(view, cell.row, cell.column, style, page);\n\t\t\t\tview.callEvent(\"onStyleChange\", [cell.row, cell.column, style, old, page]);\n\n\t\t\t\tif(formatChanged)\n\t\t\t\t\tview.callEvent(\"onFormatChange\", [cell.row, cell.column, format, oldFormat, page ]);\n\n\t\t\t\tview.saveCell(cell.row,cell.column,page);\n\n\t\t\t\tif(updateToolbar !== false && page == activeSheet)\n\t\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction _buildCssString(view, style) {\n\tlet css = \"\";\n\tlet innerCss = \"\";\n\n\tfor (var key in style){\n\t\tif (style[key]){\n\t\t\tif( _style_map[key]){\n\t\t\t\tif(_style_map[key][style[key]])\n\t\t\t\t\tcss += _style_map[key][style[key]](style);\n\t\t\t\telse if(typeof  _style_map[key] == \"function\"){\n\t\t\t\t\tconst outCss = _style_map[key](style, view._zoom);\n\n\t\t\t\t\tif(typeof outCss == \"object\"){\n\t\t\t\t\t\tcss += outCss.css || \"\";\n\t\t\t\t\t\tinnerCss += outCss.innerCss || \"\";\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tcss += outCss;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse\n\t\t\t\tcss+= key+\":\"+style[key]+\";\";\n\t\t}\n\t}\n\n\treturn {css, innerCss};\n}\n\nfunction _addStyle(view, style, silent, sheet){\n\tif(sheet && sheet.name != view.getActiveSheet()){\n\t\tlet index = 1;\n\t\twhile(!style.id || find(sheet.content.styles, stl => stl[0] == style.id))\n\t\t\tstyle.id = \"wss\"+(index++);\n\t\tsheet.content.styles.push([style.id, style.text]);\n\t}\n\telse {\n\t\tview._styles_cache[style.text] = style;\n\n\t\twhile (!style.id || view._styles[style.id])\n\t\t\tstyle.id = \"wss\"+(view._styles_max++);\n\t\tview._styles[style.id] = style;\n\n\t\tconst {css, innerCss} = _buildCssString(view, style.props);\n\t\tconst prefix = \".wss_\"+view.$index;\n\t\twebix.html.addStyle(prefix+\" .\"+style.id+\"{\"+css+\"}\", prefix);\n\t\twebix.html.addStyle(prefix+\" .\"+style.id+\" div:first-child{\"+innerCss+\"}\", prefix);\n\t}\n\n\tif (!silent)\n\t\tsave(view, \"styles\", {\n\t\t\tname: style.id,\n\t\t\ttext: style.text,\n\t\t\tpage: sheet ? sheet.name : view.getActiveSheet()\n\t\t});\n}\n\nexport function styleToText(style){\n\tvar id = [];\n\tfor (var i=0; i<style_names.length; i++)\n\t\tid.push(style.props[style_names[i]]);\n\treturn id.join(\";\");\n}\n\nexport function styleFromText(text){\n\tvar parts = text.split(\";\");\n\tvar props = {};\n\tfor (var i=0; i<style_names.length; i++)\n\t\tprops[style_names[i]] = parts[i];\n\treturn props;\n}\n\n\n\nexport function clearRangeStyle(view, range, page){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tlet style = getStyle(view, cell, page);\n\t\t\tif (style)\n\t\t\t\t_setStyle(view, cell, null, page, false);\n\t\t});\n\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n\t});\n}\n\nexport function compactStyles(view){\n\tconst serialized = view.serialize();\n\tserialized.styles = removeUnusedStyles(serialized);\n\n\treset(view);\n\t_parse(view, serialized);\n}\n\nexport function removeUnusedStyles(serialized){\n\tconst data = serialized.data;\n\tconst styles = serialized.styles;\n\n\tconst used = {};\n\tfor (let i=0; i<data.length; i++){\n\t\tconst name = data[i][3];\n\t\tif (name)\n\t\t\tused[name] = 1;\n\t}\n\n\tconst newStyles = [];\n\tfor(let i = 0; i<styles.length; i++){\n\t\tconst name = styles[i][0];\n\t\tif (used[name])\n\t\t\tnewStyles.push(styles[i]);\n\t}\n\n\treturn newStyles;\n}","import {addStyle, styleFromText} from \"./styles\";\nimport {getJsDateFromExcel} from \"../mathematics/methods\";\nimport group from \"./undo_group\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => serialize(view, data, config));\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif ([\"int\", \"price\", \"percent\", \"date\", \"string\", \"common\"].indexOf(action.id) != -1) {\n\t\t\taddAreaFormat(view, action.group, action.id == \"common\" ? \"\" : action.id);\n\t\t}\n\t});\n}\n\nexport function addAreaFormat(view, group, name, values){\n\tconst sel = view._table.getSelectArea();\n\tif(sel){\n\t\tview.groupUndo(()=>{\n\t\t\tif(values)\n\t\t\t\tname = createFormat(view, name, values);\n\n\t\t\tif(group == \"row\")\n\t\t\t\tfor(let r = sel.start.row; r <= sel.end.row; r++)\n\t\t\t\t\tapplyAreaFormat(view, r, name, true);\n\t\t\telse\n\t\t\t\tfor(let c = sel.start.column; c <= sel.end.column; c++)\n\t\t\t\t\tapplyAreaFormat(view, c, name);\n\n\t\t\tview.refresh();\n\t\t});\n\t}\n}\n\nexport function processAreaFormats(view, action, start, end){\n\tview.groupUndo(()=>{\n\t\tif(action.group == \"column\"){\n\t\t\tif(action.id == \"add\")\n\t\t\t\tfor(let r = 1; r <= view.config.rowCount; r++){\n\t\t\t\t\tconst prevCellFormat = getFormatName(view, r, start.column-1);\n\t\t\t\t\tif(prevCellFormat)\n\t\t\t\t\t\tfor(let c = start.column; c <= end.column; c++)\n\t\t\t\t\t\t\tsetFormat(view, r, c, prevCellFormat);\n\t\t\t\t}\n\t\t}\n\t\telse if(action.id == \"add\")\n\t\t\tfor(let c = 1; c <= view.config.columnCount; c++){\n\t\t\t\tconst prevCellFormat = getFormatName(view, start.row-1, c);\n\t\t\t\tif(prevCellFormat)\n\t\t\t\t\tfor(let r = start.row; r <= end.row; r++)\n\t\t\t\t\t\tsetFormat(view, r, c, prevCellFormat);\n\t\t\t}\n\t});\n}\n\nexport let currencies = [];\nexport function initCurrencies(){\n\tif(currencies.length) return;\n\tcurrencies = [ webix.i18n.price ];\n\tcurrencies = currencies.concat(webix.copy(webix.i18n.spreadsheet.formats.currencies));\n\n\tcurrencies = currencies.map(format => {\n\t\tconst id = getCurrencySymbol(format);\n\t\treturn {\n\t\t\tformat,\n\t\t\tid,\n\t\t\tvalue: id.trim()\n\t\t};\n\t});\n}\n\nconst defaultFormats = {common:1};\n\nfunction getCurrencySymbol(format){\n\treturn webix.template(format)(\"\");\n}\n\nexport function setDefaultFormats(view){\n\tinitCurrencies();\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\n\tconst formats = view._formats = {\n\t\tformats: {},\n\t\tformatsCount: 0,\n\t\tformatSources: {},\n\t\tformatCache: {},\n\t\tformatHelpers: {\n\t\t\tprice : {\n\t\t\t\tgetFormat : function(value, extra){\n\t\t\t\t\textra.css = \"webix_ssheet_format_price\";\n\t\t\t\t\treturn webix.i18n.priceFormat(value);\n\t\t\t\t},\n\t\t\t\tvalues:webix.extend({\n\t\t\t\t\tzeros: webix.i18n.priceSettings.decimalSize, \n\t\t\t\t\tsymbol: webix.i18n.price.replace(\"{obj}\",\"\"),\n\t\t\t\t\tseparator: 1, negative:1, type: \"price\"\n\t\t\t\t}, getDelimiters(\"price\"))\n\t\t\t},\n\t\t\t\"int\" : {\n\t\t\t\tgetFormat : function(value, extra){\n\t\t\t\t\textra.css = \"webix_ssheet_format_int\";\n\t\t\t\t\treturn webix.i18n.numberFormat(value);\n\t\t\t\t},\n\t\t\t\tvalues:webix.extend({\n\t\t\t\t\tzeros: webix.i18n.decimalSize,\n\t\t\t\t\tseparator: 1, negative:1, type: \"int\",\n\t\t\t\t}, getDelimiters(\"int\"))\n\t\t\t},\n\t\t\tpercent : {\n\t\t\t\tgetFormat : function(value, extra){\n\t\t\t\t\textra.css = \"webix_ssheet_format_percent\";\n\t\t\t\t\treturn Math.round(value*100)+\"%\";\n\t\t\t\t},\n\t\t\t\tvalues:webix.extend({\n\t\t\t\t\tzeros: 0, separator: 0, negative:1, type: \"percent\",\n\t\t\t\t}, getDelimiters(\"percent\"))\n\t\t\t},\n\t\t\tdate : {\n\t\t\t\tgetFormat : function(value, extra){\n\t\t\t\t\textra.css = \"webix_ssheet_format_date\";\n\t\t\t\t\treturn format2code(formatsLocale.dateFormat, getDelimiters(\"date\"))(value);\n\t\t\t\t},\n\t\t\t\tvalues: { type:\"date\", date:formatsLocale.dateFormat }\n\t\t\t},\n\t\t\tstring : {\n\t\t\t\tgetFormat : function(value, extra){\n\t\t\t\t\textra.css = \"webix_ssheet_format_text\";\n\t\t\t\t\treturn value;\n\t\t\t\t},\n\t\t\t\tvalues: { type:\"string\" }\n\t\t\t}\n\t\t}\n\t};\n\n\tfor(let i in formats.formatHelpers){\n\t\tdefaultFormats[i] = 1;\n\t\tconst source = formats.formatSources[i] = serializeFormat(formToValues(i, formats.formatHelpers[i].values));\n\t\tformats.formatCache[source] = i;\n\t}\n}\n\nexport function getDelimiters(type){\n\tif(type == \"price\")\n\t\treturn { groupSign:webix.i18n.priceSettings.groupDelimiter, decimalSign:webix.i18n.priceSettings.decimalDelimiter };\n\telse \n\t\treturn { groupSign:webix.i18n.groupDelimiter, decimalSign:webix.i18n.decimalDelimiter };\n}\n\nfunction serialize(view, data){\n\tconst formats = [];\n\tfor(let i in view._formats.formatSources)\n\t\tif(!defaultFormats[i]) //exclude default formats\n\t\t\tformats.push([i, view._formats.formatSources[i]]);\n\tdata.formats = formats;\n}\n\nfunction load(view, data){\n\tconst formats = data.formats;\n\tif(formats)\n\t\tfor(let i = 0; i < formats.length; i++)\n\t\t\tcreateFormatName(view, formats[i][1],formats[i][0]);\n}\n\nexport function getFormat(view, name){\n\tconst formatHelpers = view._formats.formatHelpers;\n\treturn formatHelpers[name] ? formatHelpers[name].getFormat : formatHelpers[name];\n}\n\nexport function getFormatSource(view, name, toexcel){\n\tif(toexcel){\n\t\tconst parsed = parseFormat({values: view._formats.formatHelpers[name].values, format: view._formats.formatSources[name]});\n\t\treturn serializeFormat(parsed, true);\n\t}\n\telse\n\t\treturn view._formats.formatSources[name];\n}\n\nfunction createFormatName(view, str, values){\n\tif (view._formats.formatCache[str]) return view._formats.formatCache[str];\n\n\tlet name = typeof(values) == \"object\" ? \"fmt\"+(view._formats.formatsCount) : values;\n\tview._formats.formatsCount++;\n\n\tview._formats.formats[name] = str;\n\n\tif(typeof(values) == \"string\")\n\t\tvalues = formatToForm(str);\n\n\twebix.extend(\n\t\tvalues,\n\t\tgetDelimiters(\"custom\")\n\t);\n\n\tconst formats = view._formats;\n\tformats.formatHelpers[name] = {\n\t\tgetFormat:format2code(str, {decimalSign: values.decimalSign, groupSign: values.groupSign}),\n\t\tvalues: values\n\t};\n\n\tformats.formatSources[name] = str;\n\tformats.formatCache[str] = name;\n\n\treturn name;\n}\n\nexport function createFormat(view, format, type) {\n\tif(!type)\n\t\ttype = {format, type: \"custom\"};\n\tconst name = createFormatName(view, format, type);\n\n\tview._sheets.map(sheet => {\n\t\tif(!sheet.content.formats)\n\t\t\tsheet.content.formats = [];\n\t\tif(!arr.find(sheet.content.formats, format => format[0] == name))\n\t\t\tsheet.content.formats.push([name, format]);\t\n\t});\n\n\treturn name;\n}\n\nexport function setFormat(view, row, column, name, page){\n\tconst oldStyle = view.getStyle(row, column, page);\n\tconst newStyle = addStyle(view, { format: name }, oldStyle, page);\n\tview.setStyle(row, column, newStyle, page);\n}\n\nfunction applyAreaFormat(view, index, name, isRow) {\n\tlet last = isRow ? view.config.columnCount : view.config.rowCount;\n\tfor (let i = 1; i <= last; i++) {\n\t\tconst row = isRow ? index : i;\n\t\tconst column = isRow ? i : index;\n\t\tsetFormat(view, row, column, name);\n\t}\n}\n\nexport function addFormat(view, row, column, format, type, page){\n\tconst name = createFormat(view, format, type);\n\tsetFormat(view, row, column, name, page);\n\treturn name;\n}\n\nexport function removeFormat(view, row, column, page){\n\tsetFormat(view, row, column, \"\", page);\n}\n\nfunction splitFormat(str){\n\tvar conditional = str.match(/.*\\[[><=].*/g);\n\tvar parts = str.split(\";\");\n\tif (!conditional){\n\t\tif (parts.length > 1){\n\t\t\tparts[0] = (parts.length > 2 ? \"[>0]\" : \"[>=0]\")+parts[0];\n\t\t\tparts[1] = \"[<0]\"+parts[1];\n\t\t\tif (parts[2])\n\t\t\t\tparts[2] = \"[=0]\"+parts[2];\n\t\t}\n\t}\n\treturn parts;\n}\n\nexport function format2code(str, delimiters){\n\tconst errorMessage = webix.i18n.spreadsheet.table[\"format-error\"];\n\tlet parts = splitFormat(str);\n\tlet code = [\"var spaces = \\\"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\\\";\"];\n\tfor (var i=0; i<parts.length; i++){\n\t\tvar separated = separateFmt(parts[i]);\n\t\tcode.push(genCode(separated.condition, separated.color.toLowerCase(), separated.symbol, separated.fmt, i, parts.length > 0, delimiters));\n\t}\n\n\tlet method;\n\ttry {\n\t\tmethod = new Function(\"val\",\"extra\", `try{ ${code.join(\"\\n\")} return val; } catch(err) { return \"${errorMessage}\"; }`);\n\t}\n\tcatch(err){\n\t\tmethod = function(){return errorMessage;};\n\t}\n\treturn method;\n}\n\nfunction genCode(check, color, symbol, line, ind, isAbs, delimiters){\n\tvar str = \"\";\n\tif (check){\n\t\tif (!ind) str+=\"if\"; else str+=\"else if\";\n\t\tif (check[0] === \"=\") check = \"=\"+check;\n\t\tstr+=\"(val\"+check+\"){\";\n\t\tif (isAbs) str+=\"val = Math.abs(val);\";\n\t}\n\tif (color)\n\t\tstr+=\"extra.css = \\\"webix_ssheet_format_\"+color+\"\\\";\";\n\n\tstr += genFormatCode(line, delimiters, symbol);\n\n\treturn str+(check?\"}\":\"\");\n}\n\nconst dateTypes = {\n\t\"yy\": \"%y\",\n\t\"yyyy\": \"%Y\",\n\t\"m\": \"%n\",\n\t\"mm\": \"%m\",\n\t\"mmm\": \"%M\",\n\t\"mmmm\": \"%F\",\n\t\"mmmmm\":\"%F\", //not supported by webix\n\t\"d\": \"%j\",\n\t\"dd\": \"%d\",\n\t\"ddd\": \"%D\",\n\t\"dddd\": \"%l\"\n};\n\nconst timeTypes = {\n\t\"h\": \"%G\",\n\t\"hh\": \"%H\",\n\t\"m\": \"%i\", //not supported by webix\n\t\"mm\": \"%i\",\n\t\"s\": \"%s\", //not supported by webix\n\t\"ss\": \"%s\",\n\t\"AM/PM\": \"%A\"\n};\n\nconst dateOrder = Object.keys(dateTypes).sort((a, b) => b.length - a.length);\nconst timeOrder = Object.keys(timeTypes).sort((a, b) => b.length - a.length);\n\nfunction excelDateToWebix(text, lastDateType){\n\tconst typesOrder = [\n\t\t{name:\"date\", order:dateOrder, types:dateTypes}, \n\t\t{name:\"time\", order:timeOrder, types:timeTypes}\n\t];\n\n\t// \"m\"/\"mm\" format can be either date (%n/%m) or time (%i), so check last date type\n\tconst basedOnLast = /^m{1,2}(?!m)/.test(text);\n\tif(basedOnLast && lastDateType != \"date\")\n\t\ttypesOrder.reverse();\n\n\tfor(let i = 0; i < typesOrder.length; i++){\n\t\tconst type = typesOrder[i];\n\t\tfor(let j = 0; j < type.order.length; j++)\n\t\t\tif(text.indexOf(type.order[j]) == 0)\n\t\t\t\treturn {\n\t\t\t\t\tformat: type.types[type.order[j]],\n\t\t\t\t\tlength: type.order[j].length,\n\t\t\t\t\ttype: type.name\n\t\t\t\t};\n\t}\n}\n\nfunction genFormatCode(line, delimiters, symbol){\n\tif (!line)\n\t\treturn \"return val;\";\n\n\tlet str = \"return \\\"\\\"\";\n\n\tlet isQuote;\n\tlet fmt = \"\";\n\tlet multiply = 1;\n\tlet comma, numberPlaceholder, textPlaceholder;\n\tlet date = [];\n\tlet lastDateType = \"date\";\n\n\tlet symbolPos;\n\tif(symbol){\n\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\tsymbolPos = \"left\";\n\n\t\tif(currency)\n\t\t\tsymbolPos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\t}\n\n\tfor (var i=0; i<line.length; i++){\n\t\tvar betweenPlaceholders = placeholder(line[i-1])&&placeholder(line[i+1]);\n\t\tif (line[i] == \"\\\"\"){\n\t\t\tif(webix.isUndefined(isQuote))\n\t\t\t\tisQuote = i;\n\t\t\telse {\n\t\t\t\tstr += `+\"${line.substr(isQuote+1, i-isQuote-1)}\"`;\n\t\t\t\tisQuote = undefined;\n\t\t\t}\n\t\t\tcontinue;\n\t\t}\n\t\tif (!webix.isUndefined(isQuote))\n\t\t\tcontinue;\n\t\tif(line[i] == \"%\")\n\t\t\tmultiply = multiply*100;\n\n\t\tif(/[a-zA-Z]/.test(line[i])){\n\t\t\tconst datePart = excelDateToWebix(line.substr(i), lastDateType);\n\t\t\tif(datePart){\n\t\t\t\tif(numberPlaceholder || textPlaceholder)\n\t\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\t\tdate.push(datePart.format);\n\t\t\t\tstr += \"/*date*/\"; //update this value after date format is ready\n\t\t\t\tlastDateType = datePart.type;\n\t\t\t\ti += datePart.length-1;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\telse\n\t\t\t\tstr += `+\"${line[i]}\"`;\n\t\t}\n\t\telse if (line[i] === delimiters.decimalSign && betweenPlaceholders){\n\t\t\tfmt+= delimiters.decimalSign;\n\t\t}\n\t\telse if(line[i]==\"@\"){\n\t\t\tif(numberPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected number placeholder\\\";\";\n\t\t\tif(!textPlaceholder){\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\ttextPlaceholder = true;\n\t\t\t}\n\t\t\tfmt+=line[i];\t\t\n\t\t}\n\t\telse if (placeholder(line[i])){\n\t\t\tif(textPlaceholder || date.length)\n\t\t\t\treturn \"throw \\\"unexpected text placeholder\\\";\";\n\t\t\tif (!numberPlaceholder) {\n\t\t\t\tif(symbolPos == \"left\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tstr+=\"+fmt\";\n\t\t\t\tif(symbolPos == \"right\")\n\t\t\t\t\tstr += `+\"${symbol}\"`;\n\t\t\t\tnumberPlaceholder=true;\n\t\t\t}\n\t\t\tfmt+=line[i];\n\t\t}\n\t\telse if (line[i] === delimiters.groupSign && betweenPlaceholders)\n\t\t\tcomma = true;\n\t\telse\n\t\t\tstr += `+\"${line[i]}\"`;\n\t}\n\n\tif(date.length){\n\t\t// 12-hour or 24-hour clock depends on AM/PM in format\n\t\tif(date.indexOf(\"%A\") != -1)\n\t\t\tdate = date.map(datePart => {\n\t\t\t\tswitch(datePart){\n\t\t\t\t\tcase \"%G\": return \"%g\";\n\t\t\t\t\tcase \"%H\": return \"%h\";\n\t\t\t\t\tdefault: return datePart;\n\t\t\t\t}\n\t\t\t});\n\n\t\tfor(let i = 0; i < date.length; i++)\n\t\t\tstr = str.replace(\"/*date*/\", `+dateParts[${i}]`);\n\t}\n\n\treturn `\n\t\t${date.length ? `val = (${getJsDateFromExcel})(val); var dateParts = webix.Date.dateToStr(\"${date.join(\";\")}\")(val).split(\";\");` : \"\"}\n\t\t${fmt ? `${numberFormat(fmt, comma, delimiters, multiply)};` : \"\"}\n\t\t${str};`;\n}\n\nfunction numberFormat(fmt, comma, delimiters, multiply){\n\tvar str = `if(/^@+$/.test(\"${fmt}\") || isNaN(val)){ var fmt = val; }else {`;\n\tvar decimal = delimiters.decimalSign;\n\tvar [left, right] = getParts(fmt, decimal);\n\tright = (right || \"\").split(\"\").reverse().join(\"\");\n\n\t//calculate indexes in mask\n\tvar lzeros = left.indexOf(\"0\"); if (lzeros>=0) lzeros = left.length - lzeros;\n\tvar lfills = left.indexOf(\"?\"); if (lfills>=0) lfills = left.length - lfills;\n\tvar rzeros = right.indexOf(\"0\"); if (rzeros>=0) rzeros = right.length - rzeros;\n\tvar rfills = right.indexOf(\"?\"); if (rfills>=0) rfills = right.length - rfills;\n\tvar rmax = right.length;\n\n\tstr += `\n\tval = val*${multiply};\n\tvar parts = val.toFixed(${rmax}).split(\".\");\n\tvar left = parts[0];\n\tvar lsize = left.length; \n\tvar right = parts[1] || \"\";\n\tif (left.length < ${lzeros}) left = \"0000000000\".substr(0, ${lzeros} - left.length)+left;\n\tif (left.length < ${lfills}) left = spaces.substr(0, 6*(${lfills} - left.length))+left;\n\tif (${comma}) {\n\t\tvar buf = [];\n\t\tvar start = 3;\n\t\twhile (lsize > start) { buf.push(left.substr(left.length-start,3)); start+=3; }\n\t\tvar last = left.substr(0,left.length-start+3);\n\t\tif (last !== \"-\")\n\t\t\tbuf.push(last);\n\t\telse\n\t\t\tbuf.push(\"-\"+buf.pop());\n\n\t\tleft = buf.reverse().join(\"${delimiters.groupSign}\");\n\t}\n\tif (right){\n\t\tvar zpoint = right.length-1;\n\t\twhile (zpoint >= ${rzeros}){\n\t\t\tif (right[zpoint] !== \"0\"){\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tzpoint--;\n\t\t}\n\n\t\tif (zpoint <= right.length)\n\t\t\tright = right.substr(0, zpoint+1);\n\n\t\tif (right.length < ${rfills}){\n\t\t\tright += spaces.substr(0, 6*(${rfills} - right.length));\n\t\t}\n\t}\n\tvar fmt = left+(right?\"${decimal}\":\"\")+right;\n\t`;\n\n\treturn str+\"}\\n\";\n}\n\nfunction updateDecimals(fmt, inc, val){\n\tlet parsed = parseFormat(fmt);\n\tfor(let i = 0; i < parsed.length; i++){\n\t\tif(parsed[i].decimals){\n\t\t\tif(inc>0)\n\t\t\t\tparsed[i].right.placeholders += Array(inc+1).join(\"0\");\n\t\t\telse\n\t\t\t\tparsed[i].right.placeholders = parsed[i].right.placeholders.slice(0, inc);\n\t\t}\n\t\telse{\n\t\t\tconst withoutText = !parsed[i].left.text && !parsed[i].right.text;\n\t\t\tconst withoutPlaceholders = !parsed[i].left.placeholders && !parsed[i].right.placeholders;\n\t\t\t//check if cell value have decimals (not cell format)\n\t\t\tif(inc < 0 && withoutText && withoutPlaceholders && webix.rules.isNumber(val) && val.indexOf(\".\") > -1){\n\t\t\t\tparsed[i].left.placeholders = \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(val.split(\".\")[1].length).join(Array(inc+1).join(\"0\"));\n\t\t\t}\n\t\t\t//ignore text\n\t\t\telse if(inc > 0 && (parsed[i].left.placeholders || withoutText)){\n\t\t\t\tparsed[i].left.placeholders = parsed[i].left.placeholders || \"0\";\n\t\t\t\tparsed[i].right.placeholders = Array(inc+1).join(\"0\");\n\t\t\t\tparsed[i].decimals = true;\n\t\t\t}\n\t\t}\n\t\tparsed[i].decimals = parsed[i].right.placeholders.length > 0;\n\t}\n\n\treturn serializeFormat(parsed);\n}\n\nexport function changeAreaDecimals(view, inc, row, column, page){\n\tconst isActiveSheet = !page || page == view.getActiveSheet();\n\tconst sheet = isActiveSheet ? view._mPage : view._mData.getPage(page);\n\tif(!sheet)\n\t\treturn;\n\n\tconst cells = getCells(view, row, column);\n\tif(cells.length == 0)\n\t\treturn;\n\n\tconst obj = sheet.getCell(cells[0].row-1, cells[0].column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\t\n\tif(webix.rules.isNumber(value) || oldFormat){\n\t\tgroup.set(function(){\n\t\t\tfor(let i = 0; i < cells.length; i++)\n\t\t\t\tchangeCellDecimals(view, inc, cells[i], page, sheet);\n\t\t});\n\n\t\tif(isActiveSheet){\n\t\t\tview.refresh();\n\n\t\t\tlet format = getFormatName(view, cells[0].row, cells[0].column) || \"common\";\n\t\t\tformat = isCustom(format) ? \"custom\" : format;\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t}\n\t}\n}\n\nfunction changeCellDecimals(view, inc, cell, page, sheet){\n\tlet format;\n\tconst obj = sheet.getCell(cell.row-1, cell.column-1);\n\tconst oldFormat = obj && obj.format;\n\tconst value = (obj && obj.value) ? obj.value.toString() : \"\";\n\n\tif(oldFormat){\n\t\tformat = webix.copy({values:view._formats.formatHelpers[oldFormat].values, format:getFormatSource(view, oldFormat)});\n\t\tformat.format = updateDecimals(format, inc, value);\n\n\t\tif(format.values && Object.prototype.hasOwnProperty.call(format.values, \"zeros\"))\n\t\t\tformat.values.zeros = Math.max(format.values.zeros+inc, 0);\n\t}\n\t//add format for cell without format\n\telse{\n\t\tconst zeros = webix.rules.isNumber(value) && value.split(\".\")[1] ? Math.max(value.split(\".\")[1].length+inc, 0) : Math.max(inc, 0);\n\n\t\tformat = {values:{negative:1, zeros:zeros, separator:0, type:\"int\"}};\n\t\tformat.format = serializeFormat(formToValues(format.values.type, format.values));\n\t}\n\taddFormat(view, cell.row, cell.column, format.format, format.values, page);\n}\n\nexport function isCustom(name){\n\treturn !defaultFormats[name];\n}\n\nexport function formToValues(type, formValues){\n\tif(type == \"string\")\n\t\treturn [{left:{text:\"@\"}}];\n\tif(formValues.date)\n\t\treturn [{left:{text:formValues.date}}];\n\n\tlet values = [{condition:\">=0\", left:{text:\"\"},right:{text:\"\"}}, {condition:\"<0\", left:{text:\"\"}, right:{text:\"\"}}];\n\twebix.extend(values, getDelimiters(type));\n\tvalues[0].right.placeholders = values[1].right.placeholders = formValues.zeros ? Array(formValues.zeros + 1).join(\"0\") : \"\";\n\tvalues[0].separator = values[1].separator = formValues.separator && type != \"percent\";\n\tvalues[0].left.placeholders = values[1].left.placeholders = values[0].separator ? \"#\"+values.groupSign +\"0\" : \"0\";\n\tvalues[0].decimals = values[1].decimals = formValues.zeros ? true : false;\n\tvalues[1].color = formValues.negative != 1 ? \"red\" : \"\";\n\tvalues[1].left.text += formValues.negative < 3 ? \"-\" : \"\";\n\tif(formValues.negative == 4)\n\t\tvalues[1].left.text += \"(\";\n\n\tif(type === \"percent\")\n\t\tvalues[0].right.text = values[1].right.text += \"%\";\n\telse if(type === \"price\"){\n\t\tconst symbolId = formValues.symbol;\n\t\tconst currency = arr.find(currencies, val => val.id == symbolId);\n\t\tconst pos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\tvalues[0][pos].symbol = values[1][pos].symbol = symbolId;\n\t}\n\n\tif(formValues.negative == 4)\n\t\tvalues[1].right.text += \")\";\n\n\treturn values;\n}\n\nfunction formatToForm(format){\n\tconst formatsLocale = webix.i18n.spreadsheet.formats;\n\tconst dates = [\n\t\tformatsLocale.dateFormat,\n\t\tformatsLocale.timeFormat,\n\t\tformatsLocale.fullDateFormat,\n\t\tformatsLocale.longDateFormat\n\t];\n\tconst form = {format, type:\"custom\"};\n\n\tif(arr.find(dates, date => date == format)){\n\t\twebix.extend(form, {\n\t\t\ttype:\"date\", date:format\n\t\t}, true);\n\t}\n\telse{\n\t\tlet [first, second] = format.split(\";\");\n\t\tif(first && second){\n\t\t\tif(first.indexOf(\"[>=0]\") == 0 && second.indexOf(\"[<0]\") == 0){\n\t\t\t\tfirst = first.replace(\"[>=0]\", \"\");\n\t\t\t\tsecond = second.replace(\"[<0]\", \"\");\n\n\t\t\t\tlet red;\n\t\t\t\tif(second.indexOf(\"[red]\") == 0){\n\t\t\t\t\tsecond = second.replace(\"[red]\", \"\");\n\t\t\t\t\tred = true;\n\t\t\t\t}\n\n\t\t\t\tif(second[0] == \"-\"){\n\t\t\t\t\tsecond = second.substring(1);\n\t\t\t\t\tform.negative = red ? 2 : 1;\n\t\t\t\t}\n\t\t\t\telse if(red){\n\t\t\t\t\tif(second[0] == \"(\" && second[second.length-1] == \")\"){\n\t\t\t\t\t\tform.negative = 4;\n\t\t\t\t\t\tsecond = second.substring(1, second.length-1);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tform.negative = 3;\n\t\t\t\t}\n\n\t\t\t\tif(form.negative && first == second){\n\t\t\t\t\tlet type = \"int\";\n\t\t\t\t\tlet priceBrackets = first.indexOf(\"[$\") != -1;\n\n\t\t\t\t\tif(first[first.length-1] == \"%\"){\n\t\t\t\t\t\tfirst = first.substring(0, first.length-1);\n\t\t\t\t\t\ttype = \"percent\";\n\t\t\t\t\t}\n\t\t\t\t\telse{\n\t\t\t\t\t\tfor(let i = 0; i < currencies.length; i++){\n\t\t\t\t\t\t\tconst currency = currencies[i].id;\n\t\t\t\t\t\t\tlet isPrice;\n\n\t\t\t\t\t\t\tif(priceBrackets){\n\t\t\t\t\t\t\t\tif(first.indexOf(`[$${currency}]`) != -1){\n\t\t\t\t\t\t\t\t\tfirst = first.replace(`[$${currency}]`, \"\");\n\t\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse if(first.indexOf(currency) != -1){\n\t\t\t\t\t\t\t\tfirst = first.replace(currency, \"\");\n\t\t\t\t\t\t\t\tisPrice = true;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(isPrice){\n\t\t\t\t\t\t\t\ttype = \"price\";\n\t\t\t\t\t\t\t\tform.symbol = currency;\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\tconst delimiters = getDelimiters(type);\n\n\t\t\t\t\tif(first.indexOf(\"#\"+delimiters.groupSign) == 0){\n\t\t\t\t\t\tfirst = first.replace(\"#\"+delimiters.groupSign, \"\");\n\t\t\t\t\t\tform.separator = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst [integer, decimal] = first.split(delimiters.decimalSign);\n\t\t\t\t\tif((!integer || integer == \"0\") && (!decimal || /^[0]+$/.test(decimal))){\n\t\t\t\t\t\tform.type = type;\n\t\t\t\t\t\tform.delimiters = delimiters;\n\t\t\t\t\t\tform.zeros = decimal ? decimal.length : 0;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn form;\n}\n\nexport function serializeFormat(values, toExcel){\n\tlet fmt = \"\";\n\tfor(let i = 0; i < values.length; i++){\n\t\tif(values[i].condition)\n\t\t\tfmt += \"[\"+values[i].condition+\"]\";\n\t\tif(values[i].color)\n\t\t\tfmt += \"[\"+values[i].color+\"]\";\n\n\t\tif(values[i].left){\n\t\t\tif(values[i].left.text){\n\t\t\t\tlet leftText = values[i].left.text;\n\t\t\t\tfmt += leftText;\n\t\t\t}\n\t\t\tif(values[i].left.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].left.symbol+\"]\";\n\t\t\tif(values[i].left.placeholders){\n\t\t\t\tlet leftPlaceholders = values[i].left.placeholders;\n\t\t\t\tfmt += toExcel ? leftPlaceholders.replace(values.groupSign, \",\") : leftPlaceholders;\n\t\t\t}\n\t\t}\n\n\t\tif(values[i].decimals)\n\t\t\tfmt += toExcel ? \".\" : values.decimalSign;\n\n\t\tif(values[i].right){\n\t\t\tif(values[i].right.placeholders)\n\t\t\t\tfmt += values[i].right.placeholders;\n\t\t\tif(values[i].right.symbol)\n\t\t\t\tfmt += \"[$\"+values[i].right.symbol+\"]\";\n\t\t\tif(values[i].right.text){\n\t\t\t\tlet rightText = values[i].right.text;\n\n\t\t\t\tfmt += rightText;\n\t\t\t}\n\t\t}\n\t\tif(i != values.length - 1)\n\t\t\tfmt += \";\";\n\t}\n\treturn fmt;\n}\n\nfunction parseFormat(fmt){\n\tconst fmtParts = fmt.format.split(\";\");\n\tlet values = [];\n\n\tfor(let i = 0; i < fmtParts.length; i++){\n\t\tlet separated = separateFmt(fmtParts[i]);\n\t\tvalues[i] = {color:separated.color, condition:separated.condition ,left:{}, right:{}};\n\n\t\tconst format = separated.fmt;\n\n\t\tvalues.groupSign = fmt.values.groupSign;\n\t\tvalues.decimalSign = fmt.values.decimalSign;\n\n\t\tif(format.indexOf(values.groupSign) > -1)\n\t\t\tvalues[i].separator = true;\n\n\t\tconst sepFmtParts = getParts(format, values.decimalSign);\n\n\t\tlet left = sepFmtParts[0];\n\t\tlet right = sepFmtParts[1] || \"\";\n\n\t\tif(sepFmtParts[1])\n\t\t\tvalues[i].decimals = true;\n\n\t\tleft = getFmtPartValues(left, \"left\", values.groupSign);\n\t\tright = getFmtPartValues(right, \"right\", values.groupSign);\n\n\t\tvalues[i].left = {\n\t\t\ttext: left.leftText,\n\t\t\tplaceholders: left.placeholders\n\t\t};\n\n\t\tvalues[i].right = {\n\t\t\ttext: left.rightText + right.rightText,\n\t\t\tplaceholders: right.placeholders\n\t\t};\n\n\t\tconst symbol = separated.symbol;\n\t\tif(symbol){\n\t\t\tconst currency = arr.find(currencies, val => val.id == symbol);\n\t\t\tlet pos = \"left\";\n\n\t\t\tif(currency)\n\t\t\t\tpos = arr.findIndex(currency.format.split(\"{obj}\"), val => val) ? \"right\" : \"left\";\n\n\t\t\tvalues[i][pos].symbol = symbol;\n\t\t}\n\t}\n\treturn values;\n}\n\nfunction getFmtPartValues(fmtPart, type, groupSign){\n\tlet firstPlaceholder;\n\tif(type == \"left\"){\n\t\tfirstPlaceholder = fmtPart.match(/[#?0]/);\n\t\tfirstPlaceholder = firstPlaceholder ? firstPlaceholder.index : Infinity;\n\t}\n\n\tlet leftText = \"\";\n\tlet rightText = \"\";\n\tlet placeholders = \"\";\n\tfor(let k = 0; k < fmtPart.length; k++){\n\t\tif(!placeholder(fmtPart[k])){\n\t\t\tif(fmtPart[k] == groupSign && placeholder(fmtPart[k+1]) && placeholder(fmtPart[k-1])){\n\t\t\t\tplaceholders += fmtPart[k];\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif(type == \"left\")\n\t\t\t\tif(k < firstPlaceholder){\n\t\t\t\t\tleftText += fmtPart[k];\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\trightText += fmtPart[k];\n\t\t}\n\t\telse\n\t\t\tplaceholders += fmtPart[k];\n\t}\n\treturn {leftText: leftText, rightText: rightText, placeholders: placeholders};\n}\n\nfunction separateFmt(line){\n\tlet color = \"\";\n\tlet check = \"\";\n\tlet symbol = \"\";\n\n\tlet start = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tif (line[1].match(/[><=]/)){\n\t\t\tlet end = line.indexOf(\"]\");\n\t\t\tcheck = line.substr(start+1, end-start-1);\n\t\t\tline = line.substr(end+1);\n\t\t}\n\t}\n\n\tstart = line.indexOf(\"[$\");\n\tif(start != -1){\n\t\tlet end = start + line.substr(start).indexOf(\"]\");\n\t\tsymbol = line.substr(start+2, end-start-2);\n\t\tline = line.substr(0, start)+line.substr(end+1);\n\t}\n\n\tstart = line.indexOf(\"[\");\n\tif (start != -1){\n\t\tlet end = line.indexOf(\"]\");\n\t\tcolor = line.substr(start+1, end-start-1);\n\t\tline = line.substr(end+1);\n\t}\n\treturn {condition:check, color, symbol, fmt:line};\n}\n\nfunction getCells(view, row, column){\n\tif(row && column){\n\t\tif (typeof row === \"object\" && typeof column === \"object\"){\n\t\t\tlet cells = [];\n\t\t\tfor (let r = row.row; r<=column.row; r++)\n\t\t\t\tfor (let c = row.column; c<=column.column; c++)\n\t\t\t\t\tcells.push({row: r, column: c});\n\t\t\treturn cells;\n\t\t}\n\t\telse\n\t\t\treturn [{row: row, column: column}];\n\t}\n\telse\n\t\treturn view.getSelectedId(true);\n}\n\nfunction placeholder(val){\n\treturn val === \"0\" || val === \"#\" || val === \"?\";\n}\n\nfunction getParts(str, decimal){\n\t// it is nessesary to use \"/\" before decimal to escape regex special characters\n\tconst match = str.match(\"[#?0][/\"+decimal+\"][#?0]\");\n\tif(match)\n\t\treturn [str.substring(0, match.index+1), str.substring(match.index+2)];\n\telse\n\t\treturn [str];\n}\n\n//simple check: take into account only first condition\nexport function checkFormat(view, format, type, checkTime){\n\tformat = format && format.fmt ? format.fmt : getFormatSource(view, format);\n\tif(!format) return;\n\tconst parts = splitFormat(format);\n\tconst separated = separateFmt(parts[0]).fmt;\n\n\tlet quot;\n\tif(separated)\n\t\tfor(let i = 0; i < separated.length; i++){\n\t\t\tif(separated[i] == \"\\\"\")\n\t\t\t\tquot = !quot;\n\t\t\tif(quot) continue;\n\n\t\t\tif(type == \"date\" && /[a-zA-Z]/.test(separated)){\n\t\t\t\tconst datePart = excelDateToWebix(separated.substr(i), \"date\");\n\t\t\t\tif(datePart){\n\t\t\t\t\tif(checkTime){\n\t\t\t\t\t\tif(datePart.type == \"time\")\n\t\t\t\t\t\t\treturn true;\n\t\t\t\t\t\telse if(checkTime == \"onlyTime\")\n\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif(type == \"string\" && separated[i] == \"@\")\n\t\t\t\treturn true;\n\t\t}\n}\n\nexport function getFormatName(view, row, col, page){\n\tconst isActiveSheet = !page || page == view.getActiveSheet();\n\tconst sheet = isActiveSheet ? view._mPage : view._mData.getPage(page);\n\tif(!sheet)\n\t\treturn;\n\tconst item = sheet.getCell(row-1, col-1);\n\treturn (item && item.format) || null;\n}\n\nexport function isDateInvalid(value){\n\treturn value < -99974430.925 || value > 100025569.125;\n}\n\nexport function getDateEditFormat(view, row, col){\n\tconst formatName = getFormatName(view, row, col);\n\tconst locale = webix.i18n.spreadsheet.formats;\n\tconst isTime = checkFormat(view, formatName, \"date\", true);\n\n\treturn webix.Date.dateToStr( locale[isTime ? \"parseDateTime\" : \"parseDate\"] );\n}\n\nexport function getFormatFromData(view, data, array){\n\tconst styleName = array[3];\n\tlet fmt;\n\tif(styleName){\n\t\tlet style = arr.find(data.styles, arr => arr[0] == styleName);\n\t\tif(style){\n\t\t\tstyle = style[1];\n\t\t\tconst fmtName = styleFromText(style).format;\n\t\t\tif(fmtName){\n\t\t\t\tif(data.formats)\n\t\t\t\t\tfmt = arr.find(data.formats, arr => arr[0] == fmtName);\n\n\t\t\t\tif(fmt)\n\t\t\t\t\tfmt = fmt[1];\n\t\t\t\telse\n\t\t\t\t\tfmt = getFormatSource(view, fmtName); //default formats (int, percent, etc.)\n\t\t\t}\n\t\t}\n\t}\n\treturn fmt;\n}","import {getFormatName, getFormatSource} from \"../operations/formats\";\n\nexport function isChar(char) {\n\tconst code = char.charCodeAt(0);\n\treturn code <= 122 ? code >= 65 || code == 35 || code == 36 || code == 46 : code > 191;\n}\n\nexport function getLastCharIndex(str, includeNumbers){\n\tlet lastChar = str.length;\n\tfor(let i = lastChar - 1; i >= 0; i--){\n\t\tif(!isChar(str[i])){\n\t\t\tif(includeNumbers && isNumber(str[i]))\n\t\t\t\tcontinue;\n\t\t\treturn lastChar;\n\t\t}\n\t\telse\n\t\t\tlastChar = i;\n\t}\n}\n\nfunction isNumber(char){\n\tvar code = char.charCodeAt(0);\n\treturn code>=48 && code<=57;\n}\n\nfunction getWord(formula, i){\n\tlet sheet = \"\";\n\tlet quotes = false;\n\n\tlet j;\n\tfor(j=i; j<formula.length; j++){\n\t\tconst key =  formula[j];\n\t\tif (key === \"'\"){\n\t\t\tquotes = !quotes;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (!quotes){\n\t\t\tif (key == \"!\"){\n\t\t\t\tif(formula[i] == \"#\") //error\n\t\t\t\t\tcontinue;\n\t\t\t\telse{\n\t\t\t\t\t//multi-sheet math\n\t\t\t\t\tsheet = formula.substr(i, j-i);\n\t\t\t\t\tif (sheet[0] === \"'\")\n\t\t\t\t\t\tsheet = sheet.substr(1, sheet.length-2);\n\t\t\t\t\ti=j+1;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse if (!isChar(key) && !isNumber(key)){\n\t\t\t\treturn [formula.substr(i, j-i), j, i, sheet];\n\t\t\t}\n\t\t}\n\t}\n\n\treturn [formula.substr(i), j, i, sheet];\n}\n\nvar operand = /^[A-Z$]+[0-9]+$/i;\nfunction isPosition(text){\n\treturn operand.test(text);\n}\n\nexport function position(word){\n\tvar row = 0, sum = 0, x = 1, mode = 1, flags = 0;  \n\tvar chars = false;\n\n\tfor (var j =word.length-1; j>=0; j--){\n\t\tvar key = word[j].charCodeAt(0);\n\t\tif (key === 36) {\n\t\t\tflags = flags+mode;\n\t\t\tcontinue;\n\t\t}\n\n\t\tif (key < 58){\n\t\t\t//numeric\n\t\t\tsum += (key - 48)*x;\n\t\t\tx *= 10;\n\t\t} else {\n\t\t\tif (!chars){\n\t\t\t\tx = 1; row = sum; sum = 0; chars = true; mode += 1;\n\t\t\t}\n\t\t\t//alpha\n\t\t\tsum += (key - 64)*x;\n\t\t\tx*=26;\n\t\t}\n\t}\n\n\t/*\n\t\t$X$Y => flags = 3\n\t\t$XY  => flags = 2\n\t\tX$Y  => flags = 1\n\t\tXY   => flags = 0\n\t*/\n\treturn [row, sum, flags];\n}\n\nexport function split(formula, view, crosssheet, fromSheet){\n\tconst activeSheet = view.getActiveSheet();\n\tvar lines = [];\n\tvar index = 0;\n\tvar quotes = false, ph = false;\n\tfor (var i = formula[i] === \"=\" ? 1 : 0; i < formula.length; i++){\n\t\tvar key = formula[i];\n\t\tif (key == \"\\\"\"){\n\t\t\tquotes = !quotes;\n\t\t} else if (!quotes){\n\t\t\tif (key == \"{\" && formula[i+1] == \"{\"){\n\t\t\t\tph = true;\n\t\t\t} else if (key == \"}\" && formula[i+1] == \"}\"){\n\t\t\t\tph = false;\n\t\t\t} else if (!ph){\n\t\t\t\tconst escaped = key === \"'\";\n\t\t\t\tif (escaped || isChar(key)){\n\t\t\t\t\tlet [word, end, ,sheet] = getWord(formula, i);\n\t\t\t\t\tlet next = end - 1;\n\t\t\t\t\tlet value;\n\n\t\t\t\t\tif(formula[next+1] !== \"(\"){\n\t\t\t\t\t\tif(isPosition(word)){\n\t\t\t\t\t\t\tif(!sheet || sheet == activeSheet || crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tif(crosssheet){\n\t\t\t\t\t\t\t\tvalue = sheet ? [sheet, word, escaped] : word;\n\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t//specified sheet or active sheet (if not specified) range\n\t\t\t\t\t\t\t\tlet range = view.ranges.getCode(word, sheet || fromSheet);\n\n\t\t\t\t\t\t\t\t//global range\n\t\t\t\t\t\t\t\tif(!range)\n\t\t\t\t\t\t\t\t\trange = view.ranges.getCode(word, true);\n\n\t\t\t\t\t\t\t\tif(range){\n\t\t\t\t\t\t\t\t\tconst parts = range.split(\"!\");\n\t\t\t\t\t\t\t\t\tif(parts[0] == activeSheet){\n\t\t\t\t\t\t\t\t\t\tvalue = [sheet, word, escaped, parts[1]];\n\t\t\t\t\t\t\t\t\t\tpushLine(lines, formula, i, index, value);\n\t\t\t\t\t\t\t\t\t\tindex = next+1;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\ti = next;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tif (index!=formula.length)\n\t\tlines.push(formula.substr(index));\n\treturn lines;\n}\n\nfunction pushLine(lines, formula, i, index, value){\n\tif (i!==0)\n\t\tlines.push(formula.substr(index, i-index));\n\tlines.push(value);\n}\n\nexport function getMathFormat(view, value){\n\tlet level = 0;\n\tlet blockLevel;\n\n\tconst parts = split(value, view);\n\n\tfor(let i = 0; i < parts.length; i++){\n\t\t// parts[i] can contain numbers, math operators, formulas, etc.\n\t\tif(i%2 === 0){\n\t\t\t// check formulas and round brackets which are not in quotes\n\t\t\tconst methods = parts[i].match(/(([a-zA-Z]*\\()|\\))(?=(?:[^\"]|\"[^\"]*\")*$)/g);\n\t\t\tif(methods)\n\t\t\t\tmethods.forEach(part => {\n\t\t\t\t\tif(part.indexOf(\"(\") > -1){\n\t\t\t\t\t\tlevel++;\n\t\t\t\t\t\t// some methods block format addition (like count,odd,etc.)\n\t\t\t\t\t\tconst safeMethods = /^(SUM|AVERAGE|MAX|MIN|INT|ROUND|ROUNDDOWN|ROUNDUP|TRUNC)?\\($/gi;\n\t\t\t\t\t\tif(!blockLevel && !safeMethods.test(part))\n\t\t\t\t\t\t\tblockLevel = level;\n\t\t\t\t\t}\n\t\t\t\t\telse if(--level < blockLevel)\n\t\t\t\t\t\tblockLevel = null;\n\t\t\t\t});\n\t\t}\n\t\t// parts[i] can be named range, cell from the active / non-active sheet\n\t\telse if(!blockLevel){\n\t\t\tif(webix.isArray(parts[i])){\n\t\t\t\tif(/^[A-Za-z]+$/.test(parts[i][1]))\n\t\t\t\t\tparts[i] = parts[i][3].split(\":\")[0];\n\t\t\t\telse if(parts[i][0] == view.getActiveSheet())\n\t\t\t\t\tparts[i] = parts[i][1];\n\t\t\t\telse\n\t\t\t\t\tcontinue; // ignore non-active sheets\n\t\t\t}\n\n\t\t\t// if range - check first cell position\n\t\t\tconst cell = position(parts[i]);\n\t\t\tconst name = getFormatName(view, cell[0], cell[1]);\n\n\t\t\t// first cell with number format\n\t\t\tif(name)\n\t\t\t\treturn {fmt: getFormatSource(view, name)};\n\t\t}\n\t}\n}","export function getSuggestPos(editor){\n\tconst text = editor.getValue();\n\tconst node = editor.getInputNode();\n\n\tconst sizes = webix.html.offset(node);\n\n\tconst selectionStart = node.selectionStart;\n\tconst textWidth = webix.html.getTextSize(text.substring(0, selectionStart), \"webix_ssheet_formula\").width;\n\n\treturn {\n\t\tx: sizes.x + textWidth,\n\t\ty: sizes.y + sizes.height\n\t};\n}","import {getFormatName, checkFormat, isDateInvalid, getFormatFromData, getFormatSource} from \"./formats\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getMathFormat} from \"../mathematics/parser\";\n\nexport function init(view){\n\tview.attachEvent(\"onBeforeFormatChange\", function(row, col, formatName, oldFormat, page){\n\t\tif(!this._setType){\n\t\t\tconst cell = {\n\t\t\t\trow,\n\t\t\t\tcol,\n\t\t\t\tvalue: view.getCellValue(row, col, true, page),\n\t\t\t\tfmt: {fmt:getFormatSource(view, formatName)}\n\t\t\t};\n\t\t\tsetType(this, cell, true, page);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", function(action, values){\n\t\tif(action == \"dropdown\" && values.newValue && values.newValue.editor == \"excel_date\"){\n\t\t\tconst format = getFormatName(this, values.row, values.column, values.page);\n\t\t\tif(getFormatType(view, format) != \"date\")\n\t\t\t\tthis.setFormat(values.row, values.column, webix.i18n.spreadsheet.formats.dateFormat, values.page);\n\t\t}\n\t});\n}\n\nexport function loadCell(view, data, item){\n\tconst fmt = getFormatFromData(view, data, item);\n\tconst cell = {\n\t\tvalue: item[2],\n\t\tfmt: fmt ? {fmt} : null,\n\t\ttype: item[3]\n\t};\n\tsetType(view, cell);\n\treturn cell;\n}\n\nexport function handleChange(view, row, col, value){\n\tif(!view._setType){\n\t\tconst formatName = getFormatName(view, row, col);\n\t\tconst cell = {\n\t\t\trow,\n\t\t\tcol,\n\t\t\tvalue,\n\t\t\tfmt: formatName ? {fmt: getFormatSource(view, formatName)} : null\n\t\t};\n\t\tsetType(view, cell);\n\t}\n}\n\nfunction getExpectType(view, cell, parseDate, isFormula, formatType, style, page){\n\t//date based math\n\tlet type = \"string\";\n\tif(!webix.isUndefined(cell.value) && !(typeof cell.value == \"string\" && /^0[xob][0-9a-f]+$/i.test(cell.value))){\n\t\tif(isFormula){\n\t\t\ttype = \"number\";\n\n\t\t\tif(/^=(now|date|time)\\(/i.test(cell.value))\n\t\t\t\ttype = \"date\";\n\t\t\telse if(/^=(sparkline|image)\\(/i.test(cell.value))\n\t\t\t\ttype = \"string\";\n\t\t}\n\t\telse if(!isNaN(cell.value))\n\t\t\ttype = \"number\";\n\t\telse if(formatType != \"string\" && parseDate){\n\t\t\t//if user types a date string, or it comes from Excel import\n\t\t\t//set date type and convert string to Excel date\n\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\tconst value  = parser(cell.value);\n\t\t\tif(value != \"\" && !isNaN(value)){\n\t\t\t\t//change cell style - value changes once (some value -> 35767.5)\n\t\t\t\t//change cell value - value changes twice (some value -> \"12/03/97\" -> 35767.5)\n\t\t\t\t//so ignore undo for cell value change\n\t\t\t\tif(style)\n\t\t\t\t\tdateToExcel(view, cell, value, page);\n\t\t\t\telse\n\t\t\t\t\tview.ignoreUndo(() => dateToExcel(view, cell, value));\n\n\t\t\t\ttype = \"date\";\n\t\t\t}\n\t\t}\n\t}\n\treturn type;\n}\n\nfunction dateToExcel(view, cell, date, page){\n\tdate = getExcelDateFromJs(date);\n\tcell.value = date;\n\n\tif(!(view._loading_data || view._page_value_set))\n\t\tview.setCellValue(cell.row, cell.col, date, page);\n}\n\nfunction checkType(type, expectType, formatType, isFormula, value){\n\ttype = type || expectType;\n\n\t//strings will always have string type regardless of format\n\tif(expectType == \"string\")\n\t\ttype = \"string\";\n\telse if(formatType)\n\t\ttype = formatType;\n\n\tif(type == \"date\" && !isFormula && isDateInvalid(value))\n\t\ttype = \"number\";\n\n\treturn type;\n}\n\nfunction getFormatType(view, format){\n\tlet formatType = format ? \"number\" : null;\n\tif(checkFormat(view, format, \"string\"))\n\t\tformatType = \"string\";\n\telse if(checkFormat(view, format, \"date\"))\n\t\tformatType = \"date\";\n\treturn formatType;\n}\n\nexport function getType(view, row, column, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\tconst item = page.getCell(row-1, column-1);\n\treturn (item && item.type) || null;\n}\n\nfunction setType(view, cell, style, page){\n\tconst parseToStore = !(cell.row && cell.col);\n\n\t//prevent type change during value or format change\n\tview._setType = true;\n\n\tconst isFormula = typeof cell.value == \"string\" && cell.value[0] == \"=\";\n\tconst parseDate = (!style || cell.fmt == getFormatSource(view, \"date\")) && (!view._loading_data || view._page_value_set || cell.type == \"date\");\n\n\tlet mathFormat;\n\tif(!parseToStore && (!page || page == view.getActiveSheet()))\n\t\tmathFormat = isFormula && !cell.fmt ? getMathFormat(view, cell.value) : null;\n\n\tconst formatType = getFormatType(view, cell.fmt || mathFormat);\n\tconst expectType = getExpectType(view, cell, parseDate, isFormula, formatType, style, page);\n\n\tcell.type = checkType(cell.type, expectType, formatType, isFormula, cell.value);\n\n\tif(!parseToStore){\n\t\tconst sheet = !page || page == view.getActiveSheet() ? view._mPage : view._mData.getPage(page);\n\t\tconst item = sheet.getCell(cell.row-1, cell.col-1, true);\n\t\titem.$format = formatType == \"string\" ? 1 : 0;\n\t\tupdateCell(view, cell, expectType, formatType, mathFormat, page);\n\t\titem.type = cell.type;\n\t}\n\n\tdelete view._setType;\n}\n\nfunction updateCell(view, cell, expectType, formatType, mathFormat, page){\n\tconst row = cell.row;\n\tconst col = cell.col;\n\tconst isString = typeof cell.value == \"string\";\n\n\tconst isFormula = isString && cell.value[0] == \"=\";\n\tconst cellEditor = view.getCellEditor(row, col, page);\n\n\t//update cell value if set number format (5e5 -> 500000, 005 -> 5)\n\tif(!(view._loading_data || view._page_value_set) && cell.type === \"number\" && isString && !isFormula && cell.value !== \"\")\n\t\tview.setCellValue(row, col, cell.value*1, page);\n\n\tif(mathFormat)\n\t\tview.setFormat(row, col, mathFormat.fmt);\n\telse if(cell.type == \"date\"){\n\t\t// add default date format\n\t\tif(formatType != \"date\"){\n\t\t\tconst isTime = isFormula && cell.value.toUpperCase().indexOf(\"=TIME(\") == 0;\n\t\t\tconst locale = webix.i18n.spreadsheet.formats;\n\t\t\tconst format = isTime ? locale.timeFormat : locale.dateFormat;\n\t\t\tview.setFormat(row, col, format, page);\n\t\t}\n\n\t\t//set date editor for cells with date type\n\t\tif(!isFormula && !cellEditor)\n\t\t\tview.setCellEditor(row, col, {editor: \"excel_date\"}, page);\n\t}\n\telse if(formatType != \"string\" && cell.type == \"string\" && expectType != \"string\"){\n\t\t//force text format for numbers typed as strings\n\t\tview.setFormat(row, col, \"@\", page);\n\t}\n\n\t//remove date editor\n\tif((cell.type != \"date\" || isFormula) && cellEditor && cellEditor.editor == \"excel_date\")\n\t\tview.setCellEditor(row, col, null, page);\n}\n","import {isChar, getLastCharIndex} from \"../mathematics/parser\";\nimport {getSuggestPos} from \"../helpers/suggest_pos\";\n\nwebix.protoUI({\n\tname: \"suggest-formula\",\n\tdefaults: {\n\t\tfitMaster: false,\n\t\tfilter(item, value) {\n\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\n\t\t\tif(val.charAt(0) !== \"=\") return;\n\n\t\t\tconst str = val.substring(0, cursor);\n\t\t\tconst search = str.substring( getLastCharIndex(str, true) );\n\t\t\tconst nextSymbol = val.charAt(cursor);\n\n\t\t\tif(search && (cursor === val.length || !(isChar(nextSymbol) || /^[0-9]/.test(nextSymbol))))\n\t\t\t\tvalue = search;\n\n\t\t\treturn item.value.toString().toLowerCase().indexOf(value.toLowerCase()) === 0;\n\t\t}\n\t},\n\t$init() {\n\t\tthis.attachEvent(\"onBeforeShow\", (node) => {\n\t\t\tif(node.tagName){\n\t\t\t\tconst editor = webix.$$(this.config.master);\n\t\t\t\tconst text = editor.getValue();\n\n\t\t\t\t//only for formulas\n\t\t\t\tif(!text || text.charAt(0) !== \"=\") return false;\n\n\t\t\t\twebix.ui.popup.prototype.show.apply(this, [getSuggestPos(editor)]);\n\t\t\t\treturn false;\n\t\t\t}\n\t\t});\n\t},\n\tsetMasterValue(data, refresh) {\n\t\tconst text = data.id ? this.getItemText(data.id) : (data.text||data.value);\n\t\twebix.$$(this.config.master).setValueHere(text);\n\n\t\tif (!refresh)\n\t\t\tthis.hide(true);\n\n\t\tthis.callEvent(\"onValueSuggest\", [data, text]);\n\t},\n\t$enterKey: function() {\n\t\tif (this.isVisible())\n\t\t\treturn webix.ui.suggest.prototype.$enterKey.apply(this, arguments);\n\t}\n}, webix.ui.suggest);","import {split, position, getLastCharIndex} from \"../mathematics/parser\";\nimport {escapeSheet} from \"./column_names\";\n\nexport function getHighlightValue(view, value, activeMath, updateCells) {\n\tconst cellsColor = {}; \n\tlet html = \"\";\n\n\tconst escapeText = webix.template.escape;\n\n\t//value can be null\n\tif(value && value[0]==\"=\"){\n\t\tconst parts = split(value, view, null, activeMath);\n\t\tconst sheet = view.getActiveSheet();\n\n\t\tlet colorIndex = 1;\n\n\t\tfor(let i = 0; i < parts.length; i++){\n\t\t\tif(i%2 === 0)\n\t\t\t\thtml += escapeText(parts[i]);\n\t\t\telse{\n\t\t\t\tconst crossheet = webix.isArray(parts[i]);\n\t\t\t\tconst cellSheet = crossheet ? prepareSheet(parts[i][0], parts[i][2]) : \"\";\n\n\t\t\t\tconst activeSheet = !crossheet && (!activeMath || activeMath == sheet);\n\t\t\t\tlet cell = position((crossheet ? parts[i][1] : parts[i]).toUpperCase());\n\t\t\t\tconst cellText = crossheet ? cellSheet+parts[i][1] : parts[i];\n\n\t\t\t\tconst rangeName = crossheet && !getLastCharIndex(parts[i][1]);\n\n\t\t\t\tif(rangeName || activeSheet || (crossheet && parts[i][0] == sheet)){\n\t\t\t\t\tlet repeatedColor;\n\t\t\t\t\t//range\n\t\t\t\t\tif((parts[i+1] == \":\" && parts[i+2]) || rangeName){\n\t\t\t\t\t\tlet nextCell, nextCellText;\n\n\t\t\t\t\t\tif(rangeName){\n\t\t\t\t\t\t\tconst cells = parts[i][3].split(\":\");\n\n\t\t\t\t\t\t\tcell = position(cells[0]);\n\t\t\t\t\t\t\tnextCell = position(cells[1]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse{\n\t\t\t\t\t\t\tnextCell = position((webix.isArray(parts[i+2]) ? parts[i+2][1] : parts[i+2]).toUpperCase());\n\t\t\t\t\t\t\tnextCellText = webix.isArray(parts[i+2]) ? cellSheet+parts[i+2][1] : parts[i+2];\n\t\t\t\t\t\t\ti+=2;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\trepeatedColor = setColor(view, cell[0], cell[1], nextCell[0], nextCell[1], colorIndex, cellsColor, updateCells);\n\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${rangeName ? cellText : cellText+\":\"+nextCellText}</span>`;\n\t\t\t\t\t}\n\t\t\t\t\t//OtherSheet!A1:A3 - do not highlight A3\n\t\t\t\t\telse if(parts[i-1] && parts[i-1][ parts[i-1].length-1 ] == \":\"){\n\t\t\t\t\t\thtml += cellText;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\t//cell\n\t\t\t\t\telse{\n\t\t\t\t\t\trepeatedColor = setColor(view, cell[0], cell[1], cell[0], cell[1], colorIndex, cellsColor, updateCells);\n\t\t\t\t\t\thtml += `<span class=\"webix_ssheet_highlight_color_${repeatedColor||colorIndex}\">${cellText}</span>`;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst colors = 7;\n\t\t\t\t\tif(!repeatedColor)\n\t\t\t\t\t\tcolorIndex += colorIndex == colors ? -1*(colors-1) : 1;\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\thtml += cellText;\n\t\t\t}\n\t\t}\n\t}\n\telse\n\t\thtml = escapeText(value);\n\n\tif(updateCells)\n\t\tview._highlightedCells = cellsColor;\n\n\treturn html;\n}\n\nexport function removeOldHighlight(view){\n\tif(view._highlightedCells)\n\t\tfor(let area in view._highlightedCells){\n\t\t\tconst cells = view._highlightedCells[area];\n\t\t\tchangeCellCss(view, cells[0], cells[1], cells[2], true);\n\t\t}\n\tview._highlightedCells = {};\n}\n\nexport function prepareSheet(sheet, escaped){\n\tif(!sheet)\n\t\treturn \"\";\n\tif(webix.isUndefined(escaped))\n\t\tsheet = escapeSheet(sheet);\n\treturn (escaped ? `'${sheet}'` : sheet) + \"!\";\n}\n\nfunction prepareArea(first, second){\n\treturn {\n\t\tstart: Math.min(first, second),\n\t\tend: Math.max(first, second)\n\t};\n}\n\nfunction setColor(view, row1, col1, row2, col2, color, colors, updateCells){\n\tconst row = prepareArea(row1, row2);\n\tconst col = prepareArea(col1, col2);\n\tconst index = [row.start, row.end, col.start, col.end].join(\",\");\n\tconst coloredArea = colors[index];\n\n\tif(!coloredArea){\n\t\tcolors[index] = [row, col, color];\n\t\tif(updateCells)\n\t\t\tchangeCellCss(view, row, col, color);\n\t}\n\telse\n\t\treturn coloredArea[2];\n}\n\nfunction changeCellCss(view, row, col, index, remove){\n\tconst css = `webix_ssheet_highlight_background_${index}`;\n\tfor (let r = row.start; r <= row.end; r++)\n\t\tfor (let c = col.start; c <=  col.end; c++)\n\t\t\tview.$$(\"cells\")[remove?\"removeCellCss\":\"addCellCss\"](r, c, css, true);\n}","function getControlOptions() {\n\treturn [\n\t\t{ id: \"add-checkbox\" },\n\t\t{ id: \"add-radio\" }\n\t];\n}\n\nfunction getImageOptions() {\n\treturn [\n\t\t{ id: \"add-image-cell\" },\n\t\t{ id: \"add-image-top\" }\n\t];\n}\n\nfunction getGraphOptions() {\n\treturn [\n\t\t{ id: \"add-sparkline\" },\n\t\t{ id: \"add-chart\" }\n\t];\n}\n\n// options for 'format' select\nfunction getCellFormats(group){\n\tconst suffix = group ? `-${group}` : \"\";\n\treturn [\n\t\t{ id: \"common\" + suffix },\n\t\t{ id: \"price\" + suffix, example: \"98.20\" },\n\t\t{ id: \"int\" + suffix, example: \"2120.02\" },\n\t\t{ id: \"percent\" + suffix, example: \"0.5\" },\n\t\t{ id: \"date\" + suffix, example: \"45000\" },\n\t\t{ id: \"string\" + suffix, example: \"012345\" },\n\t\t{ id: \"custom\" + suffix },\n\t];\n}\n\n// options for 'font-family' select\nexport const fontFamily = [\n\t{ id: \"Arial\", value: \"Arial\" },\n\t{ id: \"'Roboto', sans-serif\", value: \"Roboto\" },\n\t{ id: \"'PT Sans', Tahoma\", value: \"PT Sans\" },\n\t{ id: \"'Open Sans', sans-serif\", value: \"Open Sans\" },\n\t{ id: \"Tahoma\", value: \"Tahoma\" },\n\t{ id: \"Verdana\", value: \"Verdana\" },\n\t{ id: \"Calibri, Tahoma\", value: \"Calibri\" },\n];\n\nexport function getColumnOperation(){\n\treturn [\n\t\t{ id: \"add-column\" },\n\t\t{ id: \"del-column\" },\n\t\t{ id: \"show-column\" },\n\t\t{ id: \"hide-column\" },\n\t\t{ id: \"resize-column\" },\n\t\t{ id: \"format-column\", submenu: getCellFormats(\"column\") },\n\t];\n}\n\nexport function getRowOperation(){\n\treturn [\n\t\t{ id: \"add-row\" },\n\t\t{ id: \"del-row\" },\n\t\t{ id: \"show-row\" },\n\t\t{ id: \"hide-row\" },\n\t\t{ id: \"resize-row\" },\n\t\t{ id: \"format-row\", submenu: getCellFormats(\"row\")},\n\t];\n}\n\nexport function getClearOperation(){\n\treturn [\n\t\t{ id: \"clear-value\" },\n\t\t{ id: \"clear-style\" },\n\t\t{ id: \"clear-conditional-formats\" },\n\t\t{ id: \"clear-dropdown-editors\" },\n\t\t{ id: \"clear-filters\" },\n\t\t{ id: \"clear-comments\" },\n\t\t{ $template: \"Separator\" },\n\t\t{ id: \"clear-all\" },\n\t];\n}\n\nexport function getValidationOptions(){\n\treturn [\n\t\t{ id: \"add-cell-validation\" },\n\t\t{ id: \"remove-cell-validation\" },\n\t\t{ id: \"highlight-invalid-data\" },\n\t\t{ id: \"remove-highlight-invalid-data\" }\n\t];\n}\n\nfunction getVerticalAlignOptions(){\n\treturn [\n\t\t{ id: \"top\", css: \"webix_ssheet_icon ssi-top\" },\n\t\t{ id: \"middle\", css: \"webix_ssheet_icon ssi-middle\" },\n\t\t{ id: \"bottom\", css: \"webix_ssheet_icon ssi-bottom\" }\n\t];\n}\n\nfunction getTextAlignOptions() {\n\treturn [\n\t\t{ id: \"left\", css: \"webix_ssheet_icon ssi-left\" },\n\t\t{ id: \"center\", css: \"webix_ssheet_icon ssi-center\" },\n\t\t{ id: \"right\", css: \"webix_ssheet_icon ssi-right\" }\n\t];\n}\n\n// options for 'font-size' select\nfunction getFontSize(){\n\treturn [\n\t\t{ id: \"8px\", value: \"8\" },\n\t\t{ id: \"9px\", value: \"9\" },\n\t\t{ id: \"10px\", value: \"10\" },\n\t\t{ id: \"11px\", value: \"11\" },\n\t\t{ id: \"12px\", value: \"12\" },\n\t\t{ id: \"14px\", value: \"14\" },\n\t\t{ id: \"15px\", value: \"15\" },\n\t\t{ id: \"16px\", value: \"16\" },\n\t\t{ id: \"18px\", value: \"18\" },\n\t\t{ id: \"20px\", value: \"20\" },\n\t\t{ id: \"22px\", value: \"22\" },\n\t\t{ id: \"24px\", value: \"24\" },\n\t\t{ id: \"28px\", value: \"28\" },\n\t\t{ id: \"36px\", value: \"36\" },\n\t];\n}\n\nfunction getBorderOptions() { \n\treturn [\n\t\t{ id: \"no\" },\n\t\t{ id: \"left\" },\n\t\t{ id: \"top\" },\n\t\t{ id: \"right\" },\n\t\t{ id: \"bottom\" },\n\t\t{ id: \"all\" },\n\t\t{ id: \"outer\" },\n\t\t{ id: \"top-bottom\" },\n\t];\n}\n\nexport const toolbarOptionMap = {\n\tformat: getCellFormats(),\n\t\"font-family\": fontFamily,\n\tcolumn: getColumnOperation(),\n\trow: getRowOperation(),\n\tclear: getClearOperation(),\n\tvalidation: getValidationOptions(),\n\t\"vertical-align\": getVerticalAlignOptions(),\n\t\"text-align\": getTextAlignOptions(),\n\t\"font-size\": getFontSize(),\n\tborders: getBorderOptions(),\n\timage: getImageOptions(),\n\tgraph: getGraphOptions(),\n\tcontrols: getControlOptions(),\n};\n\nexport function editMenu(){\n\treturn [\n\t\t{ id: \"sort-asc\", menuOrder: 0 },\n\t\t{ id: \"create-filter\", menuOrder: 2 },\n\t\t{ id: \"conditional-format\", menuOrder: 4 },\n\t\t{ id: \"add-link\", menuOrder: 6 },\n\t\t{ id: \"clear\", submenu: toolbarOptionMap[\"clear\"], menuOrder: 8 },\n\t\t{ id: \"find\", menuOrder: 10 },\n\t\t\n\t\t{ id: \"sort-desc\", menuOrder: 1 },\n\t\t{ id: \"add-range\", menuOrder: 3 },\n\t\t{ id: \"lock-cell\", menuOrder: 5 },\n\t\t{ id: \"add-dropdown\", menuOrder: 7 },\n\t\t{ id: \"validation\", submenu: toolbarOptionMap[\"validation\"], menuOrder: 9 },\n\t];\n}\n\nexport const commonStructure = [\n\t{\n\t\tid: \"file\",\n\t\tsubmenu: [\n\t\t\t{\n\t\t\t\tid: \"sheet\",\n\t\t\t\ttoolbarHeight: 2,\n\t\t\t\ttoolbarWidth: 2,\n\t\t\t\tmenuOrder: 0,\n\t\t\t\ttoolbarLabel: true,\n\t\t\t\tview: \"ssheet-button-icon-top\",\n\t\t\t\tsubmenu:[\n\t\t\t\t\t{ id: \"new-sheet\" },\n\t\t\t\t\t{ id: \"copy-sheet\" },\n\t\t\t\t\t{ id: \"remove-sheet\" },\n\t\t\t\t\t{ id: \"hide-sheet\" },\n\t\t\t\t]\n\t\t\t},\n\t\t\t{ id: \"excel-import\", menuOrder: 1 },\n\t\t\t{ id: \"print\", menuOrder: 3 },   \n\t\t\t{ id: \"excel-export\", menuOrder: 2 }, \n\t\t\t{ id: \"print-borders\", menuOrder: 4 }\n\t\t]\n\t},\n\t{\n\t\tid: \"undo-redo\",\n\t\tsubmenu: [\n\t\t\t{ \n\t\t\t\tid: \"undo\", \n\t\t\t\ttoolbarWidth: 2, \n\t\t\t\ttoolbarLabel: true, \n\t\t\t\tview: \"ssheet-button\" \n\t\t\t},\n\t\t\t{ \n\t\t\t\tid: \"redo\", \n\t\t\t\ttoolbarWidth: 2, \n\t\t\t\ttoolbarLabel: true, \n\t\t\t\tview: \"ssheet-button\" \n\t\t\t},\n\t\t]\n\t},\n\t{\n\t\tid: \"font\",\n\t\tsubmenu: [\n\t\t\t{ id: \"font-family\", toolbarWidth: 4, submenu: toolbarOptionMap[\"font-family\"] },\n\t\t\t{ id: \"font-size\", submenu: toolbarOptionMap[\"font-size\"] },\n\t\t\t{ id: \"borders\", menu: false, submenu: toolbarOptionMap[\"borders\"] },\n\t\t\t{ id: \"font-weight\", toolbarWidth: 1 },\n\t\t\t{ id: \"font-style\", toolbarWidth: 1 },\n\t\t\t{ id: \"underline\", toolbarWidth: 1 },\n\t\t\t{ id: \"strike\", toolbarWidth: 1 },\n\t\t\t{ id: \"background\", menu: false },\n\t\t\t{ id: \"color\", menu: false },\n\t\t]\n\t},\n\t{\n\t\tid: \"align\",\n\t\tsubmenu: [\n\t\t\t{ id: \"text-align\", submenu: toolbarOptionMap[\"text-align\"], menuOrder: 0 },\n\t\t\t{ id: \"span\", menuOrder: 2 },\n\t\t\t{ id: \"increase-indent\", menuOrder: 4 },\n\t\t\t{ id: \"vertical-align\", submenu: toolbarOptionMap[\"vertical-align\"], menuOrder: 1 },\n\t\t\t{ id: \"wrap\", menuOrder: 3 },\n\t\t\t{ id: \"decrease-indent\", menuOrder: 5 },\n\t\t]\n\t},\n\t{\n\t\tid: \"number\",\n\t\tsubmenu: [\n\t\t\t{ \n\t\t\t\tid: \"format\", \n\t\t\t\ttoolbarWidth: 3,\n\t\t\t\tsubmenu: toolbarOptionMap[\"format\"]\n\t\t\t},\n\t\t\t{ id: \"increase-decimals\" },\n\t\t\t{ id: \"decrease-decimals\" },\n\t\t]\n\t},\n\t{\n\t\tid: \"edit\",\n\t\tsubmenu: editMenu()\n\t},\n\t{\n\t\tid: \"insert\",\n\t\tsubmenu: [\n\t\t\t{\n\t\t\t\tid: \"image\",\n\t\t\t\ttoolbarWidth: 3,\n\t\t\t\tview: \"ssheet-button\", \n\t\t\t\ttoolbarLabel: true,\n\t\t\t\tsubmenu: toolbarOptionMap[\"image\"]\n\t\t\t},\n\t\t\t{ \n\t\t\t\tid: \"add-comment\", \n\t\t\t\ttoolbarWidth: 3,\n\t\t\t\tview: \"ssheet-button\", \n\t\t\t\ttoolbarLabel: true, \n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"graph\",\n\t\t\t\ttoolbarWidth: 3,\n\t\t\t\tview: \"ssheet-button\", \n\t\t\t\ttoolbarLabel: true,\n\t\t\t\tsubmenu: toolbarOptionMap[\"graph\"]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"controls\", \n\t\t\t\ttoolbarWidth: 3,\n\t\t\t\tview: \"ssheet-button\", \n\t\t\t\ttoolbarLabel: true,\n\t\t\t\tsubmenu: toolbarOptionMap[\"controls\"]\n\t\t\t},\n\t\t]\n\t},\n\t{\n\t\tid: \"view\",\n\t\tsubmenu: [\n\t\t\t{ id: \"row\", submenu: toolbarOptionMap[\"row\"], menuOrder: 0 },\n\t\t\t{ id: \"hide-gridlines\", menuOrder: 2 },\n\t\t\t{ id: \"freeze-rows\", menuOrder: 4 },\n\t\t\t{ id: \"show-formulas\", menuOrder: 6 },\n\t\t\t{ id: \"column\", submenu: toolbarOptionMap[\"column\"], menuOrder: 1 },\n\t\t\t{ id: \"hide-headers\", menuOrder: 3 },\n\t\t\t{ id: \"freeze-columns\", menuOrder: 5 },\n\t\t]\n\t},\n];\n\nexport const readonlyStructure = [\n\t{\n\t\tid: \"file\",\n\t\tsubmenu: [\n\t\t\t{ id: \"excel-export\" },\n\t\t\t{ id: \"print\" },\n\t\t\t{ id: \"print-borders\" },\n\t\t]\n\t},\n\t{\n\t\tid: \"view\",\n\t\tsubmenu: [\n\t\t\t{ id: \"hide-gridlines\" },\n\t\t\t{ id: \"hide-headers\" },\n\t\t\t{ id: \"show-formulas\" },\n\t\t]\n\t},\n\t{\n\t\tid: \"other\",\n\t\tsubmenu: [\n\t\t\t{ id: \"find-readonly\" }\n\t\t]\n\t},\n];","import \"./suggest_formula\";\nimport {getJsDateFromExcel, methodsWithCategories} from \"../mathematics/methods\";\nimport {getType} from \"../operations/types\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getLastCharIndex} from \"../mathematics/parser\";\nimport {getSuggestPos} from \"../helpers/suggest_pos\";\nimport {getHighlightValue, removeOldHighlight} from \"../helpers/highlight\";\n\nwebix.protoUI({\n\tname: \"live-editor\",\n\t$cssName:\"texthighlight\",\n\t$init(config){\n\t\tconst master = this.getTopParentView();\n\n\t\tthis.paramsPopup = webix.ui({\n\t\t\tview: \"popup\",\n\t\t\twidth: 350,\n\t\t\tmaxHeight: 300,\n\t\t\tbody:{\n\t\t\t\tscroll: \"auto\",\n\t\t\t\tautoheight: true,\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tlet category = methodsWithCategories[obj.method] || \"common\";\n\t\t\t\t\tcategory = webix.i18n.spreadsheet.liveEditor[category] || category;\n\t\t\t\t\tlet html = `<p><span class = \"webix_ssheet_method_name\">${obj.method}</span><span class=\"webix_ssheet_method_category\">${category}</span></p>`;\n\n\t\t\t\t\tconst params = obj.params;\n\t\t\t\t\tfor(let i = 0; i < params.length; i++){\n\t\t\t\t\t\tconst param = `<span class = \"webix_ssheet_method_param_name\">${params[i][0]+\": \"}</span>`;\n\t\t\t\t\t\thtml += `<p${obj.number == i ? \" class = 'webix_ssheet_method_param_active'\":\"\"}>${param}<span class=\"webix_ssheet_method_param_description\">${params[i][1]}</p>`;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn html;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\tmaster._destroy_with_me.push(this.paramsPopup);\n\n\t\tconfig.suggest = {\n\t\t\twidth: 350,\n\t\t\theight: 200,\n\t\t\tview: \"suggest-formula\",\n\t\t\tcss: \"webix_ssheet_math_suggest\",\n\t\t\tdata: config.suggestData,\n\t\t\ttemplate: obj => obj.pos ? obj.id : obj.value,\n\t\t\tbody: {\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(obj.id.indexOf(\"$range_\") == 0)\n\t\t\t\t\t\treturn `<span class=\"webix_ssheet_left\">${obj.value}</span><span class=\"webix_ssheet_range webix_ssheet_right\">${obj.pos}</span>`;\n\t\t\t\t\telse\n\t\t\t\t\t\treturn obj.value;\n\t\t\t\t}\n\t\t\t},\n\t\t\ton: {\n\t\t\t\tonBeforeShow: function(){\n\t\t\t\t\tconst list = this.getList();\n\n\t\t\t\t\tconst oldRanges = list.find(obj => obj.id.indexOf(\"$range_\") == 0);\n\t\t\t\t\tif(oldRanges)\n\t\t\t\t\t\toldRanges.forEach(obj => list.remove(obj.id));\n\n\t\t\t\t\tconst allRanges = master.ranges.serialize(master.getActiveSheet()).map(r => ({\n\t\t\t\t\t\tid: \"$range_\" + r[0],\n\t\t\t\t\t\tvalue: r[0],\n\t\t\t\t\t\tpos: r[1],\n\t\t\t\t\t\tglobal: r[2]\n\t\t\t\t\t}));\n\n\t\t\t\t\tconst suggestRanges = allRanges.filter(range => !range.global);\n\t\t\t\t\t\n\t\t\t\t\tallRanges.filter(range => range.global).forEach(range => {\n\t\t\t\t\t\tif(!suggestRanges.find(sRange => sRange.value == range.value))\n\t\t\t\t\t\t\tsuggestRanges.push(range);\n\t\t\t\t\t});\n\n\t\t\t\t\tsuggestRanges.forEach(range => list.add(range));\n\n\t\t\t\t\tlist.filter(item => this.config.filter.apply(this, [item, this.getMasterValue()]));\n\t\t\t\t\tlist.sort(\"value\", \"asc\", \"string\");\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t\tconfig.highlight = this.highlight;\n\n\t\tthis._highlightedCells = {};\n\t\tthis.$view.className += \" webix_ssheet_formula\";\n\n\t\tthis.attachEvent(\"onKeyPress\", (code, e) => {\n\t\t\tdelete this._update_range;\n\t\t\tif(code == 13) {\n\t\t\t\t//ignore Enter key if it was pressed to select some value from suggest\n\t\t\t\tif ((new Date() - (this._last_value_set || 0)) > 300){\n\t\t\t\t\tconst cell = this.config.activeCell;\n\t\t\t\t\tthis.showActiveSheet(true);\n\t\t\t\t\tthis.updateCellValue(cell);\n\t\t\t\t\t//blur to avoid calling highlight function after selection move\n\t\t\t\t\tthis.getInputNode().blur();\n\t\t\t\t\t//we have 'enter' hot key to activate editor\n\t\t\t\t}\n\t\t\t\twebix.html.preventEvent(e);\n\t\t\t}\n\t\t\t//esc - cancel editing\n\t\t\telse if(code == 27){\n\t\t\t\tthis.showActiveSheet();\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tconst cell = master.getSelectedId();\n\t\t\t\t\tconst oldVal = this.getCellValue(cell.row, cell.column);\n\n\t\t\t\t\tif(this.getValue() == oldVal)\n\t\t\t\t\t\tmaster.$$(\"cells\").refresh(cell.row);\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.setValue(oldVal);\n\n\t\t\t\t\tdelete master.$handleSelection;\n\n\t\t\t\t\twebix.UIManager.setFocus(master.$$(\"cells\"));\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if(code >= 33 && code <= 40) // arrow navigation\n\t\t\t\tthis.showParamsPopup();\n\t\t});\n\n\t\t// caret move\n\t\tthis.attachEvent(\"onItemClick\", function(){\n\t\t\tthis.showParamsPopup();\n\t\t});\n\n\t\tthis.attachEvent(\"onAfterRender\", function(){\n\t\t\twebix.eventRemove(this.keydownEv);\n\n\t\t\tthis.keydownEv = webix.event(this.getInputNode(), \"keydown\", e => {\n\t\t\t\tthis.endEdit(e);\n\t\t\t});\n\t\t});\n\t},\n\tshowParamsPopup(){\n\t\twebix.delay(()=>{\n\t\t\tconst popup = this.paramsPopup;\n\t\t\tconst text = this.getValue();\n\n\t\t\tif(text[0] == \"=\"){\n\t\t\t\tconst cursor = this.getInputNode().selectionStart;\n\n\t\t\t\tlet number = 0;\n\t\t\t\tlet brackets = 0;\n\t\t\t\tfor(let i = cursor-1; i > 0; i--){\n\t\t\t\t\tswitch (text[i]){\n\t\t\t\t\t\tcase \",\":\n\t\t\t\t\t\t\tif(!brackets)\n\t\t\t\t\t\t\t\tnumber++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \")\":\n\t\t\t\t\t\t\tbrackets++;\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase \"(\":\n\t\t\t\t\t\t\tif(!brackets){\n\t\t\t\t\t\t\t\tconst str = text.substring(0, i);\n\t\t\t\t\t\t\t\tlet method = str.substring(getLastCharIndex(str, true));\n\t\t\t\t\t\t\t\tif(method){\n\t\t\t\t\t\t\t\t\tmethod = method.toUpperCase();\n\t\t\t\t\t\t\t\t\tconst params = webix.i18n.spreadsheet.liveEditor[\"functions-syntax\"][method];\n\t\t\t\t\t\t\t\t\tif(params && params.length){\n\t\t\t\t\t\t\t\t\t\tconst template = popup.getBody();\n\t\t\t\t\t\t\t\t\t\ttemplate.setValues({\n\t\t\t\t\t\t\t\t\t\t\tparams,\n\t\t\t\t\t\t\t\t\t\t\tnumber,\n\t\t\t\t\t\t\t\t\t\t\tmethod\n\t\t\t\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\n\t\t\t\t\t\t\t\t\t\tlet pos;\n\t\t\t\t\t\t\t\t\t\tif(suggest.isVisible()){\n\t\t\t\t\t\t\t\t\t\t\tconst suggestConfig = suggest.config;\n\t\t\t\t\t\t\t\t\t\t\tpos = {\n\t\t\t\t\t\t\t\t\t\t\t\tx: suggestConfig.left,\n\t\t\t\t\t\t\t\t\t\t\t\ty: suggestConfig.top + suggest.$height + 10\n\t\t\t\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\t\tpos = getSuggestPos(this);\n\n\t\t\t\t\t\t\t\t\t\tpopup.show(pos);\n\n\t\t\t\t\t\t\t\t\t\tconst activeParam = template.$view.querySelector(\".webix_ssheet_method_param_active\");\n\t\t\t\t\t\t\t\t\t\tif(activeParam){\n\t\t\t\t\t\t\t\t\t\t\tconst scrollTop = activeParam.offsetTop + activeParam.offsetHeight - template.$height;\n\t\t\t\t\t\t\t\t\t\t\ttemplate.scrollTo(0, scrollTop > 0 ? scrollTop : 0);\n\t\t\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\t\t\tthis.focus();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tpopup.hide();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tbrackets--;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tpopup.hide();\n\t\t});\n\t},\n\thighlight(value){\n\t\tthis.showParamsPopup();\n\n\t\tconst master = this.getTopParentView();\n\n\t\tremoveOldHighlight(master);\n\t\tconst html = getHighlightValue(master, value, this._activeMath, true);\n\t\tmaster.$$(\"cells\").refresh();\n\n\t\tif(document.activeElement == this.getInputNode())\n\t\t\tthis.paintValue();\n\t\treturn html;\n\t},\n\tshowActiveSheet(enter){\n\t\tconst master = this.getTopParentView();\n\t\tconst grid = master._table;\n\n\t\tif(this._activeMath){\n\t\t\tif(this._activeMath != master.getActiveSheet()){\n\t\t\t\tconst cell = this.config.activeCell;\n\n\t\t\t\tthis.define({activeCell:null});\n\n\t\t\t\tmaster.showSheet(this._activeMath);\n\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tgrid.select(cell.row + (enter ? 1 : 0), cell.column);\n\t\t\t\t});\n\t\t\t}\n\t\t\tdelete this._activeMath;\n\t\t}\n\t\telse if(enter)\n\t\t\twebix.delay(()=> grid.moveSelection(\"down\"));\n\t},\n\tendEdit(e){\n\t\tconst code = e.which || e.keyCode;\n\n\t\t//if it is a formula - force user to finish it by click outside or 'enter'\n\t\tif(code == 9){\n\t\t\twebix.html.preventEvent(e);\n\n\t\t\tthis.getInputNode().blur();\n\t\t\tthis.updateCellValue();\n\t\t\tthis.getTopParentView()._table.moveSelection(e.shiftKey ? \"left\" : \"right\");\n\t\t}\n\t},\n\tpaintValue(){\n\t\tconst master = this.getTopParentView();\n\t\tif(!this._activeMath || this._activeMath == master.getActiveSheet()){\n\t\t\tconst cell = this.config.activeCell;\n\t\t\tconst node = master._table.getItemNode(cell);\n\t\t\tif(cell && node)\n\t\t\t\tnode.innerHTML = `<div>${getHighlightValue(master, this.getValue())}</div>`;\n\t\t}\n\t},\n\tupdateCellValue(cell) {\n\t\tconst newv = this.getValue();\n\t\tconst master = this.getTopParentView();\n\t\tcell = cell || this.config.activeCell;\n\n\t\tif (!cell)\n\t\t\tthis.setValue(\"\");\n\t\telse{\n\t\t\tconst val = master.getCellValue(cell.row, cell.column);\n\n\t\t\tif(newv !== val){\n\t\t\t\tthis.config.value = newv;\n\t\t\t\tmaster.setCellValue(cell.row, cell.column, newv);\n\t\t\t\tmaster.refresh();\n\t\t\t}\n\t\t}\n\n\t\tdelete master.$handleSelection;\n\t},\n\t$setValueHere(value){\n\t\tthis.setValueHere(value);\n\t},\n\tsetValueHere(value) {\n\t\tthis._last_value_set = new Date();\n\n\t\tconst formula = this.getValue();\n\t\tif(formula && formula.charAt(0)===\"=\"){\n\t\t\tconst cursor = this.getInputNode().selectionStart;\n\t\t\tlet str1 = formula.substring(0, cursor);\n\t\t\tconst str2 = formula.substring(cursor);\n\n\t\t\tif(str1[str1.length-1] == \"(\")\n\t\t\t\tstr1 = str1.substring(0, str1.length-1);\n\n\t\t\tstr1 = str1.substring(0, getLastCharIndex(str1, true));\n\n\t\t\tconst range = value.indexOf(\"$range_\") == 0;\n\t\t\tif(range)\n\t\t\t\tvalue = value.substr(7);\n\n\t\t\t//suggest called via up/down key\n\t\t\tstr1 += value + (range || str2[0] == \"(\" ? \"\" : \"(\");\n\n\t\t\tthis.setValue(str1 + str2);\n\t\t\tthis.getInputNode().setSelectionRange(str1.length, str1.length);\n\t\t}\n\t},\n\texpectOperator(ignoreSel){\n\t\tconst text = this.getValue();\n\n\t\tif(text[0] == \"=\"){\n\t\t\tlet cursor = ignoreSel ? text.length : this.getInputNode().selectionStart;\n\t\t\twhile(text[cursor-1] == \" \")\n\t\t\t\tcursor--;\n\t\t\treturn text[cursor-1] && text[cursor-1].match(/[+&\\-/*=(:,]/);\n\t\t}\n\t},\n\tsetRange(range, replace){\n\t\tconst cursor = this.getInputNode().selectionStart;\n\t\tconst formula = this.getValue();\n\n\t\tlet str1, str2;\n\n\t\t//check if range was added by click\n\t\tif(replace)\n\t\t\treplace = this._update_range && cursor == this._update_range.pos + this._update_range.len;\n\n\t\tconst lastPos = replace ? this._update_range.pos : cursor;\n\n\t\tstr1 = formula.substring(0, lastPos) + range;\n\t\tstr2 = formula.substring(cursor);\n\n\t\tthis._update_range = {pos: lastPos, len: range.length};\n\n\t\tthis.setValue(str1 + str2);\n\t},\n\tgetCellValue(row, column){\n\t\tconst master = this.getTopParentView();\n\t\tlet value = master.getCellValue(row, column);\n\t\tif(getType(master, row, column) == \"date\" && value[0] != \"=\"){\n\t\t\tconst format = getDateEditFormat(master, row, column);\n\t\t\tvalue = format(getJsDateFromExcel(value));\n\t\t}\n\t\treturn value;\n\t}\n}, webix.ui.texthighlight);","webix.protoUI({\n\tname: \"ssheet-separator\",\n\tdefaults:{\n\t\tcss: \"webix_ssheet_toolbar_spacer\",\n\t\ttemplate: \" \",\n\t\twidth: 1,\n\t\tborderless: true\n\t}\n},webix.ui.view);","webix.protoUI({\n\tname: \"sheets\",\n\tdefaults:{\n\t\tlayout: \"x\",\n\t\tborderless: true,\n\t\tcss:\"ssheet_list_sheets\",\n\t\tselect: true,\n\t\tdrag: \"order\",\n\t\tdragscroll:\"x\",\n\t\tscroll:false\n\t}\n},webix.EditAbility,webix.ui.list);","// toolbar: toogle button\nwebix.protoUI({\n\t$cssName: \"toggle\",\n\tname:\"ssheet-toggle\",\n\ttoggle:function(){\n\t\tconst old = this.getValue();\n\n\t\tif(!old || old == this.config.offValue)\n\t\t\tthis.config.value = this.config.onValue || true;\n\t\telse\n\t\t\tthis.config.value = this.config.offValue || false;\n\n\t\tconst val = this.getValue();\n\t\tthis.$setValue(val);\n\t\tthis.callEvent(\"onChange\", [val, old, \"user\"]);\n\t},\n\t$setValue:function(value){\n\t\tif(value == this.config.offValue)\n\t\t\tvalue = false;\n\t\telse if(value == this.config.onValue)\n\t\t\tvalue = true;\n\t\twebix.ui.toggle.prototype.$setValue.call(this,value);\n\t},\n\tgetValue:function(){\n\t\tvar config = this.config;\n\t\tvar value = config.value;\n\t\treturn  !value || value==config.offValue?(config.offValue||false):(config.onValue||true);\n\t},\n\tdefaults:{\n\t\ttemplate:function(obj, common){\n\t\t\tvar css = (obj.value === true || obj.value == obj.onValue) ? \" webix_pressed\" : \"\";\n\t\t\tvar inp = common.$renderInput(obj, common);\n\t\t\treturn \"<div class='webix_el_box\"+css+\"' style='width:\"+obj.awidth+\"px; height:\"+obj.aheight+\"px'>\"+inp+\"</div>\";\n\t\t}\n\t}\n}, webix.ui.toggle);\n\n\n// toolbar: silent toggle button\nwebix.protoUI({\n\tname:\"ssheet-toggle-silent\",\n\t$cssName:\"toggle\",\n\t$allowsClear:false,\n\tsetValue:function(){\n\t\tthis.blockEvent();\n\t\twebix.ui.toggle.prototype.setValue.apply(this, arguments);\n\t\tthis.unblockEvent();\n\t}\n}, webix.ui.toggle);","webix.protoUI({\n\tname: \"ssheet-bar-title\",\n\tdefaults:{\n\t\tborderless: true\n\t},\n\t$init: function(){\n\t\tthis.$view.className += \" webix_ssheet_subbar_title\";\n\t}\n},webix.ui.template);","import {toolbarSizes, defaultStyles} from \"./defaults\";\nimport { toolbarOptionMap } from \"./structure\";\n\nexport const styleFormats = {\n\t\"font-weight\": \"bold\",\n\t\"font-style\": \"italic\",\n\t\"underline\": \"underline\",\n\t\"strike\": \"strike\"\n};\n\nconst needActionToId = {\n\tborders: true,\n\talign: true,\n};\n\nexport function getToolbarText(text, action){\n\tif (needActionToId[action]) {\n\t\ttext = `${action}-${text}`;\n\t}\n\tif (action === \"format-row\" || action === \"format-column\") {\n\t\ttext = `format-${text.split(\"-\")[0]}`;\n\t}\n\tconst locale = webix.i18n.spreadsheet;\n\treturn locale.tooltips[text] || locale.actions[text] || locale.labels[text] || text;\n}\n\nexport function setToolbarLabels(options, action) {\n\treturn options.map(o => {\n\t\to.tooltip = getToolbarText(o.id, action);\n\t\tif (!o.value) o.value = o.tooltip; // check not to break actual non-localized values of selection controls\n\t\tif (o.submenu) o.submenu = setToolbarLabels(o.submenu, o.id);\n\t\treturn o;\n\t});\n}\n\nexport function formatTemplate(view, obj){\n\t//make it look like an actual cell\n\tvar format =  view._formats.formatHelpers[obj.id] ? view._formats.formatHelpers[obj.id].getFormat : \"\";\n\tvar cell = {css:\"\"};\n\tvar example = format && obj.example?format(obj.example, cell):\"\";\n\treturn obj.value + (format?\"<span class='webix_ssheet_right\"+(cell.css?\" \"+cell.css:\"\")+\"'>\"+example+\"</span>\":\"\");\n}\n\nexport const ui = {\n\tbutton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle\", \n\t\t\twidth: config.width || toolbarSizes.width, \n\t\t\tid: config.name, \n\t\t\tname: config.name,  \n\t\t\tlabel: config.label,\n\t\t\tcss: config.css||\"\", \n\t\t\tonValue: styleFormats[config.name], \n\t\t\toffValue: \"normal\",\n\t\t\ttooltip: getToolbarText(config.name)\n\t\t};\n\t},\n\tcolorButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-color\",  \n\t\t\tcss: config.css, \n\t\t\tname: config.name, \n\t\t\twidth: config.width || toolbarSizes.width + 24,\n\t\t\ttitle: \"<span class='webix_ssheet_button_icon webix_ssheet_color_button_icon webix_ssheet_icon ssi-\" + config.name + \"' ></span>\",\n\t\t\ttooltip: getToolbarText(config.name)\n\t\t};\n\t},\n\ttoggleButton: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-toggle-silent\", \n\t\t\twidth: toolbarSizes.width, \n\t\t\tid: config.name, \n\t\t\tname: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + (config.icon || config.name) + \"'></span>\",\n\t\t\ttooltip: getToolbarText(config.name)\n\t\t};\n\t},\n\ticonButton: function(config){\n\t\tconst btn = webix.copy(config);\n\t\twebix.extend(btn, {\n\t\t\tview: \"button\", \n\t\t\twidth: toolbarSizes.width, \n\t\t\tid: config.name,\n\t\t\tlabel: \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + (config.icon || config.name) + \"'></span>\",\n\t\t\tcss: \"\",\n\t\t\ttooltip: getToolbarText(config.name)\n\t\t});\n\t\tif (config.onValue) {\n\t\t\twebix.extend(btn, {\n\t\t\t\tview: \"ssheet-toggle\", \n\t\t\t\tonValue: config.onValue, \n\t\t\t\toffValue: config.offValue\n\t\t\t}, true);\n\t\t}\n\n\t\treturn btn;\n\t},\n\tsegmented: function(config){\n\t\treturn  {\n\t\t\tview: \"segmented\", \n\t\t\tname: config.name, \n\t\t\tcss: config.css || \"\", \n\t\t\twidth: config.width || toolbarSizes.width + 76,  \n\t\t\toptions:config.options\n\t\t};\n\t},\n\tselect: function(config){\n\t\twebix.extend(config, {\n\t\t\tview: \"richselect\",\n\t\t\tid: config.name,\n\t\t\tvalue: defaultStyles[config.name],\n\t\t\tsuggest: {\n\t\t\t\ttemplate: obj => obj.value,\n\t\t\t\tcss: \"webix_ssheet_suggest\",\n\t\t\t\tpadding: 0,\n\t\t\t\tdata: setToolbarLabels(toolbarOptionMap[config.name])\n\t\t\t}\n\t\t});\n\n\t\tconfig.tooltip = getToolbarText(config.name);\n\t\tif (config.popupWidth){\n\t\t\tconfig.suggest.fitMaster = false;\n\t\t\tconfig.suggest.width = config.popupWidth;\n\t\t}\n\t\tif (config.popupTemplate)\n\t\t\tconfig.suggest.body = {\n\t\t\t\ttemplate: config.popupTemplate\n\t\t\t};\n\t\tif (config.popupEvents){\n\t\t\tconfig.suggest.body = config.suggest.body || {};\n\t\t\tconfig.suggest.body.on = config.popupEvents;\n\t\t}\n\t\treturn config;\n\t},\n\tseparator: function(){\n\t\treturn { view: \"ssheet-separator\" };\n\t},\n\ttitle: function(config){\n\t\tlet title = config.title;\n\t\tif (title.indexOf(\"$\") === 0)\n\t\t\ttitle = \"\";\n\t\ttitle = webix.i18n.spreadsheet.labels[config.title] || title;\n\n\t\treturn {\n\t\t\ttemplate: title, \n\t\t\tview: \"ssheet-bar-title\", \n\t\t\theight: toolbarSizes.titleHeight\n\t\t};\n\t},\n\tborders: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-borders\", \n\t\t\twidth: config.width || toolbarSizes.width + 24, \n\t\t\tdata: setToolbarLabels(toolbarOptionMap[config.name], config.name), \n\t\t\tid: config.name, \n\t\t\tname: config.name,\n\t\t\ttooltip: getToolbarText(config.name)\n\t\t};\n\t},\n\talign: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-align\", \n\t\t\tvalue: defaultStyles[config.name], \n\t\t\twidth: config.width || toolbarSizes.width + 24, \n\t\t\tdata: setToolbarLabels(toolbarOptionMap[config.name], config.name),\n\t\t\tname: config.name, \n\t\t\ttooltip: getToolbarText(config.name)\n\t\t};\n\t},\n\tcondFormat: function(config){\n\t\treturn {\n\t\t\tview: \"ssheet-cond-format\",\n\t\t\twidth: 40,\n\t\t\tid: config.name,\n\t\t\tname: config.name\n\t\t};\n\t}\n};\n\nexport const buttonsMap = {\n\t\"font-family\": function(){\n\t\treturn ui.select({\n\t\t\tname: \"font-family\", \n\t\t\twidth: 100, \n\t\t\tview:\"combo\"\n\t\t});\n\t},\n\t\"font-size\": function(){\n\t\treturn  ui.select({\n\t\t\tname: \"font-size\", \n\t\t\twidth: 70, \n\t\t\tview: \"text\", \n\t\t\ticon: \"wxi-menu-down\", \n\t\t\tcss: \"webix_ssheet_text\",\n\t\t\ton: {\n\t\t\t\tonItemClick: function(){\n\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\t\t\t\t\tif (!suggest.isVisible())\n\t\t\t\t\t\tsuggest.show(this.getInputNode());\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"font-weight\": function(){\n\t\treturn ui.button({\n\t\t\tname:\"font-weight\",\n\t\t\tlabel: \"B\", \n\t\t\tcss: \"webix_ssheet_bold\"\n\t\t});\n\t},\n\t\"font-style\": function(){\n\t\treturn ui.button({\n\t\t\tname: \"font-style\",\n\t\t\tlabel: \"I\",\n\t\t\tcss:\"webix_ssheet_italic\"\n\t\t});\n\t},\n\t\"underline\": function(){\n\t\treturn ui.button({\n\t\t\tname: \"underline\",\n\t\t\tlabel: \"U\",\n\t\t\tcss: \"webix_ssheet_underline\"\n\t\t});\n\t},\n\t\"strike\": function(){\n\t\treturn ui.button({\n\t\t\tname: \"strike\",\n\t\t\tlabel: \"S\",\n\t\t\tcss: \"webix_ssheet_strike\"\n\t\t});\n\t},\n\t\"color\": function(){\n\t\treturn ui.colorButton({\n\t\t\tname: \"color\",\n\t\t\ticon:\"font\",\n\t\t\tcss:\"webix_ssheet_color\"\n\t\t});\n\t},\n\t\"background\": function(){\n\t\treturn ui.colorButton({\n\t\t\tname: \"background\",\n\t\t\ticon: \"paint-brush\",\n\t\t\tcss: \"webix_ssheet_background\", \n\t\t\twidth: 70\n\t\t});\n\t},\n\t\"borders\": function(){\n\t\treturn ui.borders({ name: \"borders\" });\n\t},\n\t\"text-align\": function(){\n\t\treturn ui.align({\n\t\t\tname: \"text-align\", \n\t\t\tcss: \"webix_ssheet_align\",\n\t\t});\n\t},\n\t\"vertical-align\": function(){\n\t\treturn ui.align({\n\t\t\tname: \"vertical-align\", \n\t\t\tcss: \"webix_ssheet_align\",\n\t\t});\n\t},\n\t\"wrap\": function(){\n\t\treturn ui.iconButton({\n\t\t\tname: \"wrap\", \n\t\t\tonValue:\"wrap\", \n\t\t\toffValue:\"nowrap\"\n\t\t});\n\t},\n\t\"format\": function(view){\n\t\treturn ui.select({\n\t\t\tname: \"format\", \n\t\t\twidth: 106,\n\t\t\tpopupWidth: 180,\n\t\t\tpopupTemplate: obj => formatTemplate(view, obj),\n\t\t\tpopupEvents:{\n\t\t\t\tonItemClick: function(id){\n\t\t\t\t\tif (id == \"custom\")\n\t\t\t\t\t\tthis.getTopParentView().callEvent(\"onCommand\", [{ id }]);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t},\n\t\"column\": function(view){\n\t\tconst options = setToolbarLabels(toolbarOptionMap[\"column\"]);\n\t\treturn {\n\t\t\tname: \"column\",\n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"column\",\n\t\t\tarrow: true, \n\t\t\tarea: true, \n\t\t\twidth: 58,\n\t\t\toptions: view.resizeCell ? options : options.filter(o => o.id !== \"resize\")\n\t\t};\n\t},\n\t\"row\": function(view){\n\t\tconst options = setToolbarLabels(toolbarOptionMap[\"row\"]);\n\t\treturn {\n\t\t\tname: \"row\", \n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"row\",\n\t\t\tarrow: true,\n\t\t\tarea: true, \n\t\t\twidth: 58,\n\t\t\toptions: view.resizeCell ? options : options.filter(o => o.id !== \"resize\")\n\t\t};\n\t},\n\t\"clear\": function(){\n\t\tconst options = setToolbarLabels(toolbarOptionMap[\"clear\"]);\n\t\treturn {\n\t\t\tname: \"clear\", \n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"clear-styles\",\n\t\t\tarrow: true, \n\t\t\tarea: \n\t\t\ttrue, \n\t\t\twidth: 58,\n\t\t\toptions\n\t\t};\n\t},\n\t\"validation\": function(){\n\t\tconst options = setToolbarLabels(toolbarOptionMap[\"validation\"]);\n\t\treturn {\n\t\t\tname: \"validation\", \n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"validation\",\n\t\t\tarrow: true, \n\t\t\tarea: true, \n\t\t\twidth: 58,\n\t\t\toptions\n\t\t};\n\t},\n\t\"image\":function(){\n\t\tconst options = setToolbarLabels(toolbarOptionMap[\"image\"]);\n\t\treturn {\n\t\t\tname: \"image\", \n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"add-image\",\n\t\t\tarrow: true, \n\t\t\toptions\n\t\t};\n\t},\n\t\"graph\":function(){\n\t\tconst options = setToolbarLabels(toolbarOptionMap[\"graph\"]);\n\t\treturn {\n\t\t\tname: \"graph\", \n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"add-sparkline\",\n\t\t\tarrow: true,\n\t\t\toptions\n\t\t};\n\t},\n\t\"controls\":function(){\n\t\tconst options = setToolbarLabels(toolbarOptionMap[\"controls\"]);\n\t\treturn {\n\t\t\tname: \"controls\", \n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"add-control\",\n\t\t\tarrow: true, \n\t\t\toptions\n\t\t};\n\t},\n\t\"comment\": function(){\n\t\treturn {\n\t\t\tname: \"comment\",\n\t\t\tview: \"ssheet-button\", \n\t\t\ticon: \"comments\",\n\t\t\tarrow: true, \n\t\t\tarea: true, \n\t\t\twidth: 55\n\t\t};\n\t},\n\t\"create-filter\": function(){\n\t\treturn ui.toggleButton({ name: \"create-filter\" });\n\t},\n\t\"hide-gridlines\": function(){\n\t\treturn ui.toggleButton({ name: \"hide-gridlines\" });\n\t},\n\t\"hide-headers\": function(){\n\t\treturn ui.toggleButton({ name: \"hide-headers\" });\n\t},\n\t\"show-formulas\": function(){\n\t\treturn ui.toggleButton({ name: \"show-formulas\" });\n\t},\n\t\"print-borders\": function(){\n\t\treturn ui.toggleButton({ name: \"print-borders\", icon: \"borders-no\" });\n\t},\n\t\"find-readonly\": function(){\n\t\treturn ui.iconButton({\n\t\t\tname: \"find-readonly\", \n\t\t\ticon: \"find\"\n\t\t});\n\t},\n};\n","import { ui, buttonsMap } from \"./buttons\";\n\nfunction isRowColAction(id) {\n\treturn id.indexOf(\"-row\") !== -1 || id.indexOf(\"-column\") !== -1;\n}\n\nexport function normalizeAction(action){\n\t// [fixme] maybe the better approach is to handle new ids as action-group\n\tif (isRowColAction(action.id)) {\n\t\tconst parts = action.id.split(\"-\");\n\t\taction.id = parts[0];\n\t\tif (!action.group) action.group = parts[1];\n\t\tif (action.id === \"show\") action.neighbors = true;\n\t}\n}\n\nexport function getMenuLabel(id, action){\n\tif (!id) return \"\"; // separator\n\tif (action && action !== \"format\") {\n\t\tid = `${action}-${id}`;\n\t}\n\tif (action == \"format\" && isRowColAction(id)) {\n\t\tid = `format-${id.split(\"-\")[0]}`;\n\t}\n\tconst locale = webix.i18n.spreadsheet;\n\treturn locale.menus[id] || locale.actions[id] || locale.labels[id] || id;\n}\n\nexport function toolbarButtons(view, structure){\n\tconst checkButtons = function(cells){\n\t\tfor (let i = 0; i < cells.length; i++){\n\t\t\tconst name = cells[i].$button;\n\t\t\tif (name) {\n\t\t\t\tconst base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({ name });\n\t\t\t\twebix.extend(cells[i], base);\n\t\t\t}\n\t\t\t\n\t\t\tif (cells[i].rows)\n\t\t\t\tcheckButtons(cells[i].rows);\n\t\t\tif (cells[i].cols)\n\t\t\t\tcheckButtons(cells[i].cols);\n\t\t}\n\t};\n\tcheckButtons(structure);\n\treturn structure;\n}\n\nexport function getButtons(view, structure){\n\tconst config = [];\n\tfor (let block in structure){\n\t\tconfig.push(elementsBlock(view, block, structure[block]));\n\t\tconfig.push(ui.separator());\n\t}\n\treturn config;\n}\n\nfunction blockColumns(view, buttons){\n\tconst cols = [];\n\tfor (let i = 0; i < buttons.length; i++){\n\t\tconst name = buttons[i];\n\t\tif (typeof name == \"object\"){\n\t\t\tcols.push(name);\n\t\t} else {\n\t\t\tconst base = buttonsMap[name] ? buttonsMap[name](view) : ui.iconButton({ name });\n\t\t\tcols.push(base);\n\t\t}\n\t}\n\treturn cols;\n}\n\nfunction elementsBlock(view, title, columns){\n\treturn {\n\t\trows:[\n\t\t\t{\n\t\t\t\tpadding:2,\n\t\t\t\tcols:[{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: blockColumns(view, columns)\n\t\t\t\t}]\n\t\t\t},\n\t\t\tui.title({ title })\n\t\t]\n\t};\n}","import { normalizeAction, getMenuLabel } from \"../toolbar/helpers\";\nimport { getToolbarText } from \"../toolbar/buttons\";\n\nwebix.protoUI({\n\tname: \"ssheet-button\",\n\t$cssName: \"button\",\n\tdefaults:{\n\t\twidth: 40\n\t},\n\t$init: function(config){\n\t\tconst arrowCss = config.arrow ? \" webix_ssheet_button_menu\" : \"\";\n\t\tconst iconCss = config.label ? \"\" : \" webix_ssheet_icon_only\";\n\t\tthis.$view.className += \" webix_ssheet_button\" + arrowCss + iconCss;\n\t\tif (config.label || config.icon) {\n\t\t\tconst icon = config.icon || config.name;\n\t\t\tlet text = config.label || \"\";\n\t\t\tif (config.arrow) {\n\t\t\t\tconst right = webix.skin.$active.inputSpacing / 2;\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon_arrow webix_icon wxi-menu-down' style='right:\" + right + \"px;'></span>\";\n\t\t\t}\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + icon + \"'></span> \" + text;\n\t\t}\n\t\tif (config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\n\t\tif (config.tooltip === undefined) {\n\t\t\tconfig.tooltip = getToolbarText(config.name);\n\t\t}\n\t}\n}, webix.ui.button);\n\n\nwebix.protoUI({\n\tname: \"ssheet-button-icon-top\",\n\t$cssName: \"button\",\n\tdefaults: {\n\t\twidth: 70,\n\t\theight: 70\n\t},\n\t$init: function(config) {\n\t\tthis.$view.className += \" ssheet_button_icon_top\";\n\t\tif (config.label) {\n\t\t\tconst icon = config.icon || config.name || \"\";\n\t\t\tconst text = config.label;\n\t\t\tconfig.label = \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + icon + \"'></span><br/>\";\n\t\t\tconfig.label += \"<span class='ssheet_button_icon_top_text'>\" + text + \"</span>\";\n\t\t\tif (config.arrow !== false)\n\t\t\t\tconfig.label += \"<br/><span class='ssheet_button_icon_top_arrow webix_icon wxi-menu-down'></span>\";\n\t\t}\n\t\tif (config.options && !config.popup)\n\t\t\tconfig.popup = getPopupConfig(config.options);\n\n\t\tif (config.tooltip === undefined) {\n\t\t\tconfig.tooltip = getToolbarText(config.name);\n\t\t}\n\t}\n}, webix.ui.button);\n\n\nfunction getPopupConfig(options){\n\treturn {\n\t\tview: \"ssheet-suggest\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\tautowidth: true,\n\t\ttemplate: function(obj) {\n\t\t\tlet text = \"\";\n\t\t\tif (obj.icon)\n\t\t\t\ttext += \"<span class='webix_ssheet_button_icon webix_ssheet_icon ssi-\" + obj.icon + \"'></span> \";\n\t\t\ttext += obj.value || getMenuLabel(obj.id);\n\t\t\treturn text;\n\t\t},\n\t\tdata: options,\n\t\ton:{\n\t\t\tonMenuItemClick: function(id){\n\t\t\t\tconst button = this.config.master;\n\t\t\t\tif (button) {\n\t\t\t\t\tconst action = webix.copy(this.getMenuItem(id));\n\t\t\t\t\tif (!action.submenu) {\n\t\t\t\t\t\tnormalizeAction(action);\n\n\t\t\t\t\t\tlet params = [action];\n\t\t\t\t\t\tconst view = webix.$$(button).getTopParentView();\n\t\t\t\t\t\tif (webix.$$(button).config.area){\n\t\t\t\t\t\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\t\t\t\t\t\tif (area)\n\t\t\t\t\t\t\t\tparams = params.concat([area.start, area.end]);\n\t\t\t\t\t\t}\n\t\t\t\t\t\t\n\t\t\t\t\t\tview.callEvent(\"onCommand\", params);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n}","export function init(view){\n\t//parsing initial data\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\n\t// undo\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif(type == \"value\")\n\t\t\t_undoValue(view, row, column, value);\n\t});\n}\n\nfunction _serialize(view, obj, config){\n\tvar math = !config || config.math!==false;\n\n\tvar grid = view.$$(\"cells\");\n\tvar state = grid.getState();\n\tvar columns = state.ids.concat(state.hidden);\n\n\t// remove \"rowId\" column\n\tcolumns.splice(columns.indexOf(\"rowId\"), 1);\n\n\t[obj.data, obj.locked] = getSheetData(view, math);\n\n\twebix.extend(\n\t\tobj.table,\n\t\t{\n\t\t\tfrozenColumns : (view._frozenColumns || 0),\n\t\t\tfrozenRows : (view._frozenRows || 0)\n\t\t}\n\t);\n}\n\nfunction _parse(view, obj){\n\tconst tconfig = obj.table || { frozenColumns : 0, frozenRows : 0 };\n\tview._frozenColumns = view._frozenRows = 0;\n\tif (tconfig){\n\t\tif (!webix.isUndefined(tconfig.frozenColumns))\n\t\t\tview.freezeColumns(tconfig.frozenColumns);\n\t\tif (!webix.isUndefined(tconfig.frozenRows))\n\t\t\tview.freezeRows(tconfig.frozenRows);\n\t}\n\n\tif(obj.sizes)\n\t\tview.$$(\"cells\").define(\"fixedRowHeight\", false);\n}\n\nfunction _undoValue(view, row, column, value){\n\tview.setCellValue(row, column, value);\n}\n\nexport function getSheetData(view, math, page){\n\tpage = page ? view._mData.getPage(page) : view._mPage;\n\tconst locked = [];\n\treturn [\n\t\tpage.serialize(math)\n\t\t\t.map(arr =>{\n\t\t\t\tif(arr[2].$locked)\n\t\t\t\t\tlocked.push([arr[0]+1, arr[1]+1]);\n\t\t\t\tlet value = arr[2].value;\n\t\t\t\tif(value === null)\n\t\t\t\t\tvalue = \"\";\n\t\t\t\treturn [ ++arr[0], ++arr[1], value, arr[2].style||\"\", arr[2].type];\n\t\t\t})\n\t\t\t.filter(arr => {\n\t\t\t\treturn arr[2] || arr[2] === 0 || arr[3];\n\t\t\t}),\n\t\tlocked\n\t];\n}","import * as arr from \"../helpers/array\";\n\nwebix.protoUI({\n\tname:\"multicheckbox\",\n\tdefaults:{\n\t\tpadding:0,\n\t\ttype:\"clean\",\n\t\tborderless:true,\n\t\telementsConfig:{\n\t\t\tlabelWidth:0\n\t\t}\n\t},\n\t$init:function(config){\n\t\tconfig.rows = [{height:0.000001}];\n\t\tthis.$ready.push(function(){\n\t\t\tthis._initOnChange();\n\t\t});\n\t},\n\t_initOnChange(){\n\t\tthis.attachEvent(\"onChange\", function(newv){\n\t\t\tconst name = this.$eventSource.config.name;\n\n\t\t\tthis.blockEvent();\n\t\t\tif(name == \"$all\"){\n\t\t\t\tfor(let i in this.elements)\n\t\t\t\t\tthis.elements[i].setValue(newv);\n\t\t\t\tif(!newv)\n\t\t\t\t\tthis._getCheckboxes()[0].setValue(1);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconst value = this.getValue(true);\n\n\t\t\t\tif(webix.isArray(value) && (!value.length || !arr.find(value, config => !config.$hiddenSheet))){\n\t\t\t\t\tconst checkboxes = this._getCheckboxes();\n\t\t\t\t\tarr.find(checkboxes, c => !c.config.$hiddenSheet).setValue(1);\n\t\t\t\t}\n\n\t\t\t\tthis.elements.$all.setValue(this.getValue(true) === true ? 1 : 0);\n\t\t\t}\n\t\t\tthis.unblockEvent();\n\t\t});\n\t},\n\tsetValue:function(value){\n\t\tthis.elements = {};\n\t\tthis._count = value.length;\n\n\t\tif(value.length > 1){\n\t\t\tlet elements = [];\n\t\t\tlet base = [];\n\t\t\tconst maxHeight = 400;\n\n\t\t\tvalue.forEach(sheet => {\n\t\t\t\tconst icon = `<span class=\"webix_icon wxi-eye${sheet.hidden ? \"-slash\" : \"\"}\"></span>`;\n\t\t\t\tbase.push({ view: \"checkbox\", labelRight: icon + sheet.name, name: sheet.name, value: sheet.active, $hiddenSheet: sheet.hidden });\n\t\t\t});\n\n\t\t\tconst baseHeight = base.length * webix.skin.$active.inputHeight;\n\t\t\tconst scroll = baseHeight > maxHeight;\n\n\t\t\telements.push({\n\t\t\t\tview:\"scrollview\", body:{rows:base},\n\t\t\t\tscroll: scroll,\n\t\t\t\theight: scroll ? maxHeight : baseHeight\n\t\t\t});\n\n\t\t\telements.push({ template:\"<div class='ss_sep_line'></div>\", height:10 });\n\t\t\telements.push({ view:\"checkbox\", labelRight:webix.i18n.spreadsheet.labels[\"export-all-sheets\"], name:\"$all\", value:0 });\n\n\t\t\twebix.ui(elements, this);\n\t\t}\n\t\telse if(this.getChildViews().length > 1){\n\t\t\twebix.ui([{height:0.000001}], this);\n\t\t}\n\t},\n\tgetValue:function(config){\n\t\tconst checkboxes = this._getCheckboxes();\n\t\tlet output = [];\n\n\t\t//save order\n\t\tfor(let i = 0; i < checkboxes.length; i++)\n\t\t\tif(checkboxes[i].getValue()){\n\t\t\t\tconst cfg = checkboxes[i].config;\n\t\t\t\toutput.push(config ? cfg : cfg.name);\n\t\t\t}\n\n\t\tif(output.length == this._count)\n\t\t\treturn true;\n\n\t\treturn output;\n\t},\n\t_getCheckboxes(){\n\t\tconst scrollview = this.queryView(\"scrollview\");\n\t\treturn scrollview ? scrollview.getBody().getChildViews() : [];\n\t}\n}, webix.ui.form);","webix.protoUI({\n\tname:\"formlist\",\n\tdefaults:{\n\t\tpaddingY: 5,\n\t\theight: 120,\n\t},\n\t$init:function(config){\n\n\t\tconfig.cols = [\n\t\t\t{\n\t\t\t\tcss:\"webix_inp_label\",\n\t\t\t\ttemplate:config.label,\n\t\t\t\twidth:config.labelWidth,\n\t\t\t\tborderless:true\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"list\",\n\t\t\t\tdata:config.data,\n\t\t\t\tcss:config.css,\n\t\t\t\ttemplate:config.template,\n\t\t\t\tselect: true,\n\t\t\t\tscroll:false,\n\t\t\t\tborderless:true,\n\t\t\t\ton:{\n\t\t\t\t\tonSelectChange:()=>{\n\t\t\t\t\t\tthis.getParentView().callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t];\n\t},\n\tsetValue:function(value){this.getChildViews()[1].select(value);},\n\tgetValue:function(){return this.getChildViews()[1].getSelectedId();},\n\trefresh: function(){this.getChildViews()[1].refresh();},\n\tfocus:function(){}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-ui\",\n\tdefaults:{\n\t\tmove:true,\n\t\tcss:\"webix_shadow_none webix_ssheet_ui\",\n\t\thead:false,\n\t\tresize:true,\n\t\ttoFront:true,\n\t\tminWidth:50,\n\t\tminHeight:200,\n\t\tescHide:false,\n\t\tautofit:false\n\t},\n\t$init:function(){\n\t\t// prevent block selection\n\t\tthis.$view.setAttribute(\"webixignore\", \"1\");\n\n\t\tthis.$ready.push(function(){\n\t\t\twebix.UIManager.addHotKey(\"delete\", webix.bind(this._removeView, this));\n\t\t\twebix.UIManager.addHotKey(\"backspace\", webix.bind(this._removeView, this));\n\t\t\tthis.getMenu();\n\t\t});\n\t\tthis.attachEvent(\"onDestruct\", function(){\n\t\t\twebix.eventRemove(this._clickEv);\n\t\t\tthis._menu.destructor();\n\t\t});\n\t},\n\tmove_setter:function(value){\n\t\tif (value){\n\t\t\twebix.DragControl.addDrag(this.$view, this);\n\t\t}\n\t\treturn value;\n\t},\n\t$dragPos:function(pos, e){\n\t\tthis.callEvent(\"onViewMove\", [pos, e]);\n\t\treturn pos;\n\t},\n\t$dragCreate:function(object, e){\n\t\tconst trg = e.target;\n\t\tif (!trg.getAttribute || trg.getAttribute(\"webix_disable_drag\") || trg.getAttribute(\"webixignore\"))\n\t\t\treturn;\n\n\t\tthis.getMenu().hide();\n\t\tconst elOffset = webix.html.offset(object);\n\t\tconst elPos = webix.html.pos(e);\n\t\tconst pOffset = webix.html.offset(object.parentNode);\n\t\tconst state = webix.$$(this.config.master).getScrollState();\n\n\t\twebix.DragControl.top = elOffset.y - elPos.y - pOffset.y;\n\t\twebix.DragControl.left = elOffset.x - elPos.x - pOffset.x + state.x;\n\n\t\treturn webix.toNode(this.$view);\n\t},\n\t$dragDestroy:function(node, drag){\n\t\tconst x = this.config.left = parseInt(drag.style.left,10);\n\t\tconst y = this.config.top = parseInt(drag.style.top,10);\n\n\t\twebix.DragControl.top = webix.DragControl.left = 0;\n\n\t\tthis.callEvent(\"onViewMoveEnd\", [x, y]);\n\t\treturn;\n\t},\n\tgetMenu:function(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tif(!this._menu){\n\t\t\tlet data = [\n\t\t\t\t{ value:labels[\"export-view\"], submenu:[\n\t\t\t\t\t{ id:\"pdf\", value:labels[\"export-view-pdf\"] },\n\t\t\t\t\t{ id:\"png\", value:labels[\"export-view-png\"] },\n\t\t\t\t\t{ id:\"excel\", value:labels[\"export-view-excel\"] }\n\t\t\t\t] }\n\t\t\t];\n\n\t\t\tif(!webix.$$(this.config.master).getTopParentView().config.readonly)\n\t\t\t\tdata = [\n\t\t\t\t\t{ id:\"edit\", value:labels[\"edit-view\"] },\n\t\t\t\t\t...data,\n\t\t\t\t\t{ id:\"del\", value:labels[\"remove-view\"] }\n\t\t\t\t];\n\n\t\t\tthis._menu = webix.ui({\n\t\t\t\tview:\"contextmenu\",\n\t\t\t\tsubmenuConfig:{\n\t\t\t\t\texternalUI: this.config.id\n\t\t\t\t},\n\t\t\t\tdata:data,\n\t\t\t\ton:{\n\t\t\t\t\tonMenuItemClick: id => this._menuActions(id),\n\t\t\t\t\tonBeforeShow: () => this._toggleExcel()\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst dots = webix.html.create(\"span\", {\"class\":\"webix_ssheet_view_menu webix_icon wxi-dots\"});\n\t\t\tthis._clickEv = webix.event(dots, \"click\", ()=> {\n\t\t\t\tif(this._menu.isVisible())\n\t\t\t\t\tthis._menu.hide();\n\t\t\t\telse\n\t\t\t\t\tthis._menu.show(dots);\n\t\t\t});\n\t\t\tthis.$view.firstChild.appendChild(dots);\n\t\t}\n\t\treturn this._menu;\n\t},\n\t_menuActions:function(id){\n\t\tswitch(id){\n\t\t\tcase \"del\":\n\t\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"edit\":\n\t\t\t\tthis.callEvent(\"onViewEdit\", []);\n\t\t\t\tbreak;\n\t\t\tcase \"pdf\":\n\t\t\t\twebix.toPDF(this.getBody(), {display:\"image\"});\n\t\t\t\tbreak;\n\t\t\tcase \"png\":\n\t\t\t\twebix.toPNG(this.getBody());\n\t\t\t\tbreak;\n\t\t\tcase \"excel\":\n\t\t\t\twebix.toExcel(this.getBody(), {header: false});\n\t\t\t\tbreak;\n\t\t}\n\t},\n\t_toggleExcel:function(){\n\t\tconst view = this.getBody();\n\t\tif(view.data && view.data.pull)\n\t\t\tthis._menu.showMenuItem(\"excel\");\n\t\telse\n\t\t\tthis._menu.hideMenuItem(\"excel\");\n\t},\n\t_removeView:function(view){\n\t\tif(view && view.getTopParentView() == this)\n\t\t\tthis.callEvent(\"onViewRemove\", []);\n\t}\n}, webix.ui.window);","webix.protoUI({\n\tname: \"ssheet-series\",\n\t$init: function(config){\n\t\tthis.hidden = {};\n\t\tconfig.rows = [\n\t\t\t{\n\t\t\t\tview: \"scrollview\",\n\t\t\t\tborderless: true,\n\t\t\t\tbody: {\n\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\tmulti: true,\n\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\trows: [\n\t\t\t\t\t\tthis.getSectionConfig()\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonAfterScroll:function(){\n\t\t\t\t\t\t//close possibly open selector popups\n\t\t\t\t\t\twebix.callEvent(\"onClick\", []);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{ view:\"button\", label:webix.i18n.spreadsheet.labels[\"add-line\"], click:()=>{\n\t\t\t\tthis.addSection();\n\t\t\t}}\n\t\t];\n\t},\n\tgetSectionConfig: function(i){\n\t\tconst view = this;\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\t\tconst trashIcon = \"<span class='webix_icon webix_ssheet_series_icon wxi-trash'></span>\";\n\t\tconst padding = webix.skin.$active.dataPadding-2;\n\n\t\treturn {\n\t\t\tview:\"accordionitem\",\n\t\t\theader:`${labels[\"chart-item\"]} ${i ? i+1 : 1} ${trashIcon}`,\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\tpadding,\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:180\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonChange: () => {\n\t\t\t\t\t\tthis.callEvent(\"onChange\", []);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\", range:true, on:{\n\t\t\t\t\t\tonChange: function(val, oldVal) {\n\t\t\t\t\t\t\tconst upper = val.toUpperCase();\n\t\t\t\t\t\t\tif(val != upper){\n\t\t\t\t\t\t\t\tthis.blockEvent();\n\t\t\t\t\t\t\t\tthis.setValue(upper);\n\t\t\t\t\t\t\t\tthis.unblockEvent();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tview.callEvent(\"onRangeChange\", [upper, oldVal]);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-series-color\"], name:\"color\", hidden: this.hidden.color},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-tooltip\"], name:\"tooltip\" },\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-label\"], name:\"label\", hidden: this.hidden.label },\n\t\t\t\t\t{ view:\"richselect\", label:labels[\"chart-markers\"], value:\"square\", name:\"marker\", hidden: this.hidden.marker,\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tdata: [\n\t\t\t\t\t\t\t\t{id:\"square\", value:labels[\"chart-markers-square\"]},\n\t\t\t\t\t\t\t\t{id:\"triangle\", value:labels[\"chart-markers-triangle\"]},\n\t\t\t\t\t\t\t\t{id:\"diamond\", value:labels[\"chart-markers-diamond\"]},\n\t\t\t\t\t\t\t\t{id:\"round\", value:labels[\"chart-markers-round\"]}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\tonClick:{\n\t\t\t\t\"wxi-trash\": function(){\n\t\t\t\t\tconst layout = this.getParentView();\n\t\t\t\t\tlayout.removeView(this);\n\n\t\t\t\t\tconst childs = layout.getChildViews();\n\n\t\t\t\t\tfor (let i = 0; i < childs.length; i++) {\n\t\t\t\t\t\tchilds[i].define({header:`${labels[\"chart-item\"]} ${i+1} ${trashIcon}`});\n\t\t\t\t\t\tchilds[i].refresh();\n\t\t\t\t\t}\n\n\t\t\t\t\tview.callEvent(\"onChange\", []);\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t},\n\taddSection: function(){\n\t\tconst layout = this.getLayout();\n\t\tconst lastIndex = layout.getChildViews().length;\n\t\tconst layoutId = layout.addView(this.getSectionConfig(lastIndex));\n\n\t\twebix.$$(layoutId).queryView({name: \"range\"}).focus();\n\t},\n\tsetValue: function(value){\n\t\tvalue = value || [];\n\n\t\tconst layout = this.getLayout();\n\t\tconst childs = layout.getChildViews();\n\t\tconst count = childs.length;\n\n\t\tif(count > value.length)\n\t\t\tfor(let i = count; i > value.length; i--)\n\t\t\t\tthis.getLayout().removeView(childs[i-1]);\n\t\telse if(value.length > count)\n\t\t\tfor(let i = value.length; i > count; i--)\n\t\t\t\tthis.addSection();\n\n\t\tfor(let i = 0; i < childs.length; i++){\n\t\t\tconst form = childs[i].getChildViews()[0];\n\t\t\tconst range = form.queryView({name: \"range\"});\n\n\t\t\t//block range events to ignore onRangeChange\n\t\t\trange.blockEvent();\n\t\t\tform.setValues(value[i]);\n\t\t\trange.unblockEvent();\n\t\t}\n\t},\n\tsetSubValue: function(sub, value){\n\t\tsub.blockEvent();\n\t\tsub.setValue(value);\n\t\tsub.unblockEvent();\n\t},\n\tgetLayout(){\n\t\treturn this.queryView(\"scrollview\").getBody();\n\t},\n\thideSubviews(name, show){\n\t\tthis.hidden[name] = !show;\n\n\t\tthis.queryView({ name }, \"all\").forEach(view => {\n\t\t\tif(show)\n\t\t\t\tview.show();\n\t\t\telse\n\t\t\t\tview.hide();\n\t\t});\n\t},\n\tgetValue: function(){\n\t\tconst value = [];\n\n\t\tconst layout = this.getLayout();\n\t\tlayout.getChildViews().forEach(child => {\n\t\t\tvalue.push(child.getChildViews()[0].getValues());\n\t\t});\n\t\treturn value;\n\t}\n}, webix.ui.layout);","webix.protoUI({\n\tname: \"ssheet-toolbar-scrollview\",\n\t$getSize: function(){\n\t\tconst size = webix.ui.scrollview.prototype.$getSize.apply(this, arguments);\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\n\t\tlet scroll = 0;\n\t\tif(this.config.scroll)\n\t\t\tscroll = webix.env.scrollSize;\n\t\telse\n\t\t\tthis.$view.style[\"overflow-x\"] = \"hidden\";\n\n\t\tsize[2] = size[3] = bodySize[2] + scroll;\n\n\t\treturn size;\n\t},\n\t$setSize: function(x,y){\n\t\tconst bodySize = this.getBody().$getSize(0, 0);\n\t\tconst oldScroll = this.config.scroll;\n\t\tconst scroll = x < bodySize[0] ? \"x\" : false;\n\n\t\tif(scroll != oldScroll){\n\t\t\tthis.define({scroll});\n\t\t\treturn webix.delay(()=>{\n\t\t\t\tthis.resize();\n\t\t\t});\n\t\t}\n\n\t\twebix.ui.scrollview.prototype.$setSize.apply(this, [x, y]);\n\t}\n},webix.ui.scrollview);","import * as arr from \"./helpers/array\";\nimport {getSheetData} from \"./operations/data\";\nimport {DataStore} from \"@xbs/muon\";\nimport {loadCell} from \"./operations/types\";\nimport {removeUnusedStyles, styleFromText, styleToText} from \"./operations/styles\";\nimport {getFormatFromData, checkFormat} from \"./operations/formats\";\nimport {updateMaxColumn, encode, escapeSheet, toRange, range} from \"./helpers/column_names\";\n\nconst options = [\n\t\"rename-sheet\",\n\t\"remove-sheet\",\n\t\"copy-sheet\",\n\t\"hide-sheet\"\n];\n\nconst actionMap = {\n\t\"remove-sheet\": view => _remove(view),\n\t\"rename-sheet\": view => edit(view),\n\t\"new-sheet\": view => add(view),\n\t\"copy-sheet\": view => copy(view),\n\t\"hide-sheet\": view => setState(view, view._activeSheet, \"hidden\")\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n}\n\nexport const numbers = [0.5, 0.75, 0.9, 1, 1.1, 1.25, 1.5, 1.75, 2, 3, 4];\n\nexport function defaultBottom(view){\n\tconst locale = webix.i18n.spreadsheet.tooltips;\n\tconst readonly = view.config.readonly;\n\tconst tabWidth = view.config.sheetTabWidth;\n\tconst minTabWidth = tabWidth == \"auto\" ? view.defaults.sheetTabWidth : tabWidth;\n\n\tconst toolbar =  {\n\t\tview: \"toolbar\",\n\t\tid: \"bottom-toolbar\",\n\t\tcss: \"webix_ssheet_bottom_toolbar webix_layout_toolbar\",\n\t\tpaddingY: 0,\n\t\theight: 34,\n\t\telements:[\n\t\t\t{\n\t\t\t\thidden:readonly,\n\t\t\t\tpadding: {\n\t\t\t\t\ttop: 2,\n\t\t\t\t\tbottom: 2,\n\t\t\t\t\tleft: 4\n\t\t\t\t},\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"icon\", \n\t\t\t\t\t\ticon:\"wxi-plus\", \n\t\t\t\t\t\twidth:30, \n\t\t\t\t\t\tid: \"add-sheet\", \n\t\t\t\t\t\tclick: () => add(view),\n\t\t\t\t\t\ttooltip: locale[\"add-sheet\"]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"icon\", \n\t\t\t\t\t\ticon:\"wxi-dots\", \n\t\t\t\t\t\twidth:30, \n\t\t\t\t\t\tid: \"show-sheet\", \n\t\t\t\t\t\tpopup: getSheetsPopup(view),\n\t\t\t\t\t\ttooltip: locale[\"show-sheet\"]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tid:\"sheets\",\n\t\t\t\tview:\"sheets\",\n\t\t\t\tmaxWidth: 5 * minTabWidth,\n\t\t\t\tminWidth: minTabWidth,\n\t\t\t\teditable:!readonly,\n\t\t\t\teditaction: \"dblclick\",\n\t\t\t\teditor:\"text\",\n\t\t\t\teditValue:\"value\",\n\t\t\t\ttype:{\n\t\t\t\t\twidth: tabWidth,\n\t\t\t\t\theight: 32,\n\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\treturn \"<div style='\"+(readonly ? \"width: 100%;padding-right:9px;\" : \"width:calc(100% - 20px);\")+\"'>\"+obj.value+\"</div>\"+\n\t\t\t\t\t\t\t(!readonly?\"<div class='webix_input_icon wxi-menu-down webix_ssheet_sheet_arrow'></div>\":\"\");\n\t\t\t\t\t},\n\t\t\t\t\t//remove skin selection css on dnd\n\t\t\t\t\tcss:\"ssheet_order_sheets\"\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\twebix_ssheet_sheet_arrow: function(e, id){\n\t\t\t\t\t\tinitSheetMenu(view, e, id);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonItemClick: function(id){\n\t\t\t\t\t\tif(id != view._activeSheet)\n\t\t\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", width: 34, id: \"prev-sheet\", disabled:true, hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-left'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, -1);}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\", width: 34, id: \"next-sheet\", hidden:true,\n\t\t\t\tlabel: \"<span class='webix_icon wxi-menu-right'></span>\", batch:\"pager\",\n\t\t\t\tclick:function(){scrollSheets(view, 1);}\n\t\t\t},\n\t\t\t{gravity:0.000001},\n\t\t\t{\n\t\t\t\tview: \"ssheet-zoom\",\n\t\t\t\tnumbers,\n\t\t\t\tvalue: 1,\n\t\t\t\twidth: 108,\n\t\t\t\ttooltip: locale[\"scale\"],\n\t\t\t\tid: \"zoom\",\n\t\t\t\ton: {\n\t\t\t\t\tonChange: (v, oldV, config) => {\n\t\t\t\t\t\tif (config == \"user\") view.zoom(v);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t}\n\t\t]\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"bottom-toolbar\", toolbar]);\n\n\treturn toolbar;\n}\n\nfunction scrollSheets(view, direction){\n\tconst sheets = view.$$(\"sheets\");\n\tlet step = view.config.sheetTabWidth;\n\tif(step == \"auto\")\n\t\tstep = view.defaults.sheetTabWidth;\n\tsheets.scrollTo(sheets.getScrollState().x+(direction*step), 0);\n}\n\nfunction menuInit(view){\n\tconst data = [];\n\tfor (let i = 0; i < options.length; i++) {\n\t\tdata.push({\n\t\t\tid: options[i], \n\t\t\tvalue: webix.i18n.spreadsheet.menus[options[i]] || options[i]\n\t\t});\n\t}\n\n\tconst menu = {\n\t\tview: \"ssheet-suggest\",\n\t\tdata: data\n\t};\n\tview.callEvent(\"onViewInit\", [\"sheet-menu\", menu]);\n\treturn menu;\n}\n\nexport function reset(view, obj){\n\tconst tabs = view.$$(\"sheets\");\n\tif (tabs){\n\t\ttabs.clearAll();\n\t\tconst set = [];\n\t\tobj.sheets.forEach(function(sheet){\n\t\t\tset.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\ttabs.parse(set);\n\t\t_filterTabs(view);\n\t}\n}\n\nfunction ready(view){\n\tprepare(view);\n\n\tview.attachEvent(\"onAfterSheetShow\", (name) => selectSheet(view,name));\n\n\tview.attachEvent(\"onCommand\", function(command){\n\t\tif(actionMap[command.id])\n\t\t\tactionMap[command.id](this);\n\t});\n\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").data.attachEvent(\"onStoreUpdated\", () => {\n\t\t\tchangePagerVisability(view);\n\t\t\tchangePagerStatus(view);\n\t\t});\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterRender\", webix.once(() => {\n\t\t\twebix.delay(()=> changePagerVisability(view));\n\t\t}));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterScroll\", () => changePagerStatus(view));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterDrop\", (context) => dataOrder(view,context.start,context.index));\n\t\tview.$$(\"sheets\").attachEvent(\"onAfterEditStop\", (state) => rename(view,state.old,state.value));\n\t}\n}\n\nfunction getSheetsPopup(view){\n\treturn {\n\t\tview: \"popup\",\n\t\tcss: \"webix_ssheet_suggest\",\n\t\twidth: 125,\n\t\tbody:{\n\t\t\tview: \"list\",\n\t\t\tselect: true,\n\t\t\tcss: \"webix_ssheet_show_list\",\n\t\t\ttemplate: \"<span class='webix_icon wxi-#icon#'></span>#id#\",\n\t\t\ton:{\n\t\t\t\tonAfterSelect: function(id) {\n\t\t\t\t\tsetState(view, id, \"visible\");\n\t\t\t\t\tview.showSheet(id);\n\t\t\t\t\tthis.getParentView().hide();\n\t\t\t\t}\n\t\t\t},\n\t\t\tmaxHeight: 200,\n\t\t\tautoheight: true\n\t\t},\n\t\ton:{\n\t\t\tonShow: function(){\n\t\t\t\tthis.getBody().showItem(view.getActiveSheet());\n\t\t\t},\n\t\t\tonBeforeShow: function(){\n\t\t\t\tconst data = view._sheets\n\t\t\t\t\t.filter(sheet => sheet.state != \"veryHidden\")\n\t\t\t\t\t.map(sheet => {\n\t\t\t\t\t\treturn {\n\t\t\t\t\t\t\tid: sheet.name,\n\t\t\t\t\t\t\ticon: sheet.state == \"hidden\" ? \"eye-slash\" : \"eye\"\n\t\t\t\t\t\t};\n\t\t\t\t\t});\n\n\t\t\t\tconst list = this.getBody();\n\t\t\t\tlist.clearAll();\n\t\t\t\tlist.parse(data);\n\t\t\t\tlist.select(view.getActiveSheet());\n\t\t\t}\n\t\t}\n\t};\n}\n\nfunction initSheetMenu(view, e, id){\n\tif(!view.$sheetMenu){\n\t\tview.$sheetMenu = webix.ui(menuInit(view));\n\t\tview._destroy_with_me.push(view.$sheetMenu);\n\t\tview.$sheetMenu.attachEvent(\"onItemClick\", id => callAction(view,id));\n\t}\n\n\tconst oneSheet = view.$$(\"sheets\").count() == 1;\n\n\tif(view.$sheetMenu.getItem(\"remove-sheet\"))\n\t\tview.$sheetMenu[oneSheet ? \"disableItem\" : \"enableItem\"](\"remove-sheet\");\n\n\tif(view.$sheetMenu.getItem(\"hide-sheet\"))\n\t\tview.$sheetMenu[oneSheet ? \"disableItem\" : \"enableItem\"](\"hide-sheet\");\n\n\tif(view.callEvent(\"onBeforeSheetMenu\", [id]))\n\t\tview.$sheetMenu.show(e);\n}\n\nfunction changePagerStatus(view){\n\tconst sheets = view.$$(\"sheets\");\n\tconst scrollPos = sheets.getScrollState().x;\n\tif(scrollPos == 0)\n\t\tview.$$(\"prev-sheet\").disable();\n\telse{\n\t\tview.$$(\"prev-sheet\").enable();\n\t\tif(sheets.$view.scrollWidth - scrollPos == sheets.$width)\n\t\t\treturn view.$$(\"next-sheet\").disable();\n\t}\n\tview.$$(\"next-sheet\").enable();\n}\n\nfunction changePagerVisability(view){\n\tconst sheets = view.$$(\"sheets\");\n\tview.$$(\"bottom-toolbar\").showBatch(\"pager\", sheets.$width != sheets.$view.scrollWidth);\n}\n\nfunction dataOrder(view, name, num){\n\tfor (let id in view._sheets) {\n\t\tif (view._sheets[id].name == name) {\n\t\t\tconst item = view._sheets.splice(id, 1);\n\t\t\tview._sheets.splice(num, 0, item[0]);\n\t\t\tbreak;\n\t\t}\n\t}\n}\n\nexport function setState(view, sheet, state){\n\tconst tab = getSheet(view, sheet);\n\n\tif(state == tab.state || (state == \"visible\" && !tab.state))\n\t\treturn;\n\n\tif(state != \"visible\"){\n\t\tconst visibleSheets = getVisible(view);\n\n\t\t//don't hide last visible tab\n\t\tif(visibleSheets.length == 1 && visibleSheets[0] === tab)\n\t\t\treturn;\n\n\t\t//select the previous sheet in case we hide the selected sheet\n\t\tif(sheet == view._activeSheet)\n\t\t\tshowPrevious(view, sheet);\n\t}\n\n\ttab.state = state;\n\t_filterTabs(view);\n\n\tview.callEvent(\"onSheetStateChange\", [sheet, state]);\n}\n\nfunction _filterTabs(view){\n\tconst tabs = view.$$(\"sheets\");\n\tif(tabs)\n\t\ttabs.filter(obj => {\n\t\t\tconst state = getSheet(view, obj.id).state;\n\t\t\treturn state != \"hidden\" && state != \"veryHidden\";\n\t\t});\n}\n\nexport function add(view, content, name, show){\n\tvar index, newIndex;\n\n\tindex = arr.findIndex(view._sheets, x => x.name == view._activeSheet);\n\tnewIndex = index>-1?index+1:view._sheets.length;\n\n\tif(!name || arr.find(view._sheets, sheet => sheet.name == name))\n\t\tname = getNewTitle(view);\n\n\tcontent = content || {data:[]};\n\tview._sheets.splice(newIndex, 0, {\n\t\tname,\n\t\tcontent\n\t});\n\n\tif(view.$$(\"sheets\"))\n\t\tview.$$(\"sheets\").add({id: name, value: name},newIndex);\n\n\tview._mData.addPage(name);\n\n\tparseToStore(view, name, content, view.config.prepareData);\n\n\tif(show !== false)\n\t\tview.showSheet(name);\n\tview.callEvent(\"onSheetAdd\", [name]);\n\n\treturn name;\n}\n\nfunction getNewTitle(view){\n\tvar index = view._sheets.length+1;\n\twhile(getSheet(view, (webix.i18n.spreadsheet.labels.sheet+index)))\n\t\tindex++;\n\tvar name = webix.i18n.spreadsheet.labels.sheet+index;\n\treturn name;\n}\n\nfunction selectSheet(view,name){\n\tif(view.$$(\"sheets\")){\n\t\tview.$$(\"sheets\").select(name);\n\t\tview.$$(\"sheets\").showItem(name);\n\t}\n}\n\nexport function edit(view,name){\n\tif(!name)\n\t\tname = view._activeSheet;\n\tview.$$(\"sheets\").edit(name);\n}\n\nfunction _remove(view){\n\tview.confirm({\n\t\ttext: webix.i18n.spreadsheet.labels[\"sheet-remove-confirm\"]\n\t}).then(()=>{\n\t\tremove(view, view._activeSheet);\n\t});\n}\n\nfunction getVisible(view){\n\treturn view._sheets.filter(s => s.state != \"hidden\" && s.state != \"veryHidden\");\n}\n\nfunction showPrevious(view, name){\n\tconst visibleSheets = getVisible(view);\n\n\tlet index = arr.findIndex(visibleSheets, x => x.name == name);\n\t\t\t\n\tlet prevIndex = index - 1;\n\tif(!visibleSheets[prevIndex])\n\t\tprevIndex = 0;\n\tvisibleSheets.splice(index, 1);\n\n\tview.showSheet(visibleSheets[prevIndex].name);\n}\n\nexport function remove(view, name){\n\tif(view._sheets.length > 1){\n\t\tconst visibleSheets = getVisible(view);\n\n\t\t//don't remove last visible tab\n\t\tif(visibleSheets.length == 1 && visibleSheets[0] === getSheet(view, name))\n\t\t\treturn;\n\n\t\t//select the previous sheet in case we remove the selected sheet\n\t\tif(view._activeSheet == name)\n\t\t\tshowPrevious(view, name);\n\n\t\tconst index = arr.findIndex(view._sheets, x => x.name == name);\n\t\tview._sheets.splice(index, 1);\n\t\tview._mData.removePage(name);\n\n\t\tif(view.$$(\"sheets\")){\n\t\t\tview.$$(\"sheets\").remove(name);\n\t\t\tview.$$(\"sheets\").refresh();\n\t\t}\n\n\t\tview.callEvent(\"onSheetRemove\", [name]);\n\t}\n}\n\nexport function rename(view,name,newName){\n\tif (name == newName) return;\n\n\t//correct sheet name\n\tvar i = 1;\n\twhile (!newName || getSheet(view, newName)){\n\t\tnewName = webix.i18n.spreadsheet.labels.sheet + i;\n\t\ti++;\n\t}\n\tnewName = newName.replace(/[*?:[\\]\\\\/]/g,\"\").substring(0, 31);\n\n\tvar sheet = getSheet(view, name);\n\tvar sheets = view.$$(\"sheets\");\n\n\tsheet.name = newName;\n\tif(view._activeSheet == name)\n\t\tview._activeSheet = newName;\n\n\tif(sheets){\n\t\tlet item = sheets.getItem(name);\n\t\titem.value = newName;\n\t\tsheets.data.changeId(name,newName);\n\t\tsheets.refresh(newName);\n\t}\n\n\tview._mData.renamePage(name, newName);\n\tview.callEvent(\"onSheetRename\", [name, newName]);\n}\n\nexport function serialize(view, obj, config){\n\tconst active = getSheet(view, view._activeSheet);\n\tactive.content = obj;\n\tactive.state = active.state || \"visible\";\n\n\tconst sheets = webix.copy(view._sheets);\n\n\tconst math = !config || config.math!==false;\n\tconst compactStyles = config && config.compactStyles;\n\n\tsheets.forEach(sheet => {\n\t\tif(sheet.name != view._activeSheet){\n\t\t\t[sheet.content.data, sheet.content.locked] = getSheetData(view, math, sheet.name);\n\t\t\tsheet.state = sheet.state || \"visible\";\n\t\t\tif(compactStyles)\n\t\t\t\tsheet.content.styles = removeUnusedStyles(sheet.content);\n\t\t\tsheet.content.ranges = view.ranges.serialize(sheet.name);\n\t\t}\n\t});\n\n\treturn sheets;\n}\n\nfunction parseToStore(view, name, obj, prepareData){\n\tconst ranges = obj.ranges;\n\n\tif(prepareData && ranges){\n\t\tconst filtersIndex = arr.findIndex(ranges, range => range[0] == \"_XLNM._FILTERDATABASE\");\n\t\tif(filtersIndex != -1){\n\t\t\tif(!obj.filters) obj.filters = [];\n\n\t\t\tconst rangeString = ranges[filtersIndex][1];\n\t\t\tif(rangeString){\n\t\t\t\tconst [r1, c1, r2, c2] = range(rangeString);\n\t\t\t\tfor(let c = c1; c <= c2; c++){\n\t\t\t\t\tobj.filters.push([\n\t\t\t\t\t\tr1,\n\t\t\t\t\t\tc,\n\t\t\t\t\t\t{options: toRange(r1+1, c, r2, c), lastRow: r2}\n\t\t\t\t\t]);\n\t\t\t\t}\n\t\t\t\tranges.splice(filtersIndex, 1);\n\t\t\t}\n\t\t}\n\t}\n\n\tview.ranges.parse(ranges, name);\n\n\twebix.extend(obj, {\n\t\tstyles: [],\n\t\tformats: [],\n\t\teditors: []\n\t});\n\n\tconst page = view._mData.getPage(name);\n\tconst data = obj.data.map(arr => {\n\t\tconst invalidValue = webix.isUndefined(arr[2]) || arr[2] === null;\n\n\t\tif(prepareData){\n\t\t\tif(invalidValue)\n\t\t\t\tarr[2] = \"\";\n\t\t\telse {\n\t\t\t\tconst linkRegex = /^=link\\(/i;\n\t\t\t\tif(typeof arr[2] == \"string\" && linkRegex.test(arr[2])){\n\t\t\t\t\t// LINK is deprecated\n\t\t\t\t\tarr[2] = arr[2].replace(linkRegex, \"=HYPERLINK(\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cell = loadCell(view, obj, arr);\n\t\t\t//cell value and type can be changed via types module\n\t\t\tarr[2] = cell.value;\n\t\t\tarr[3] = arr[3] || \"\";\n\t\t\tarr[4] = cell.type;\n\n\t\t\tprepareCell(arr, obj);\n\t\t}\n\t\telse if(invalidValue)\n\t\t\tthrow `unsupported value in ${escapeSheet(name)}!${encode[arr[0]]}${arr[1]}`;\n\n\t\treturn [ arr[0]-1, arr[1]-1, {\n\t\t\tvalue: arr[2],\n\t\t\ttype: arr[4],\n\t\t\tstyle: arr[3],\n\t\t\t$format: checkFormat(view, { fmt: getFormatFromData(view, obj, arr) }, \"string\") ? 1 : 0\n\t\t}];\n\t});\n\n\tpage.parse(data, true);\n}\n\nexport function prepareCell(cell, data, update){\n\tconst isDate = cell[4] == \"date\";\n\tif(isDate || update){\n\t\tconst isString = typeof cell[2] == \"string\";\n\n\t\tconst link = update && isString && /^=hyperlink\\(/i.test(cell[2]);\n\n\t\tconst styleProperties = cell[3] ? arr.find(data.styles, style => style[0] == cell[3]) : null;\n\t\tconst styleObj = styleProperties ? styleFromText(styleProperties[1]) : {};\n\n\t\tconst editor = isDate && data.editors ? arr.find(data.editors, editor => editor[0] == cell[0] && editor[1] == cell[1]) : null;\n\n\t\tif((isDate && (!styleProperties || !styleObj.format)) || link){\n\t\t\tlet props = {};\n\n\t\t\tif(link){\n\t\t\t\tcell[3] = \"wss_link\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops = { color: \"#0000ff\", underline: \"underline\" };\n\t\t\t}\n\t\t\telse if(isString && /^=time\\(/i.test(cell[2])){\n\t\t\t\tcell[3] = \"wss_load_time\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops.format = cell[3]+\"_fmt\";\n\t\t\t\tdata.formats.push([props.format, webix.i18n.spreadsheet.formats.timeFormat]);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tcell[3] = \"wss_load_date\" + (styleProperties ? \"_\"+cell[3] : \"\");\n\t\t\t\tprops.format = \"date\";\n\t\t\t}\n\n\t\t\tif(isDate && !editor){\n\t\t\t\tif(!data.editors)\n\t\t\t\t\tdata.editors = [];\n\t\t\t\tdata.editors.push([cell[0], cell[1], {editor: \"excel_date\"}]);\n\t\t\t}\n\n\t\t\tif(!arr.find(data.styles, style => style[0] == cell[3]))\n\t\t\t\tdata.styles.push([\n\t\t\t\t\tcell[3],\n\t\t\t\t\tstyleToText({props: webix.extend(styleObj, props, true)})\n\t\t\t\t]);\n\t\t}\n\t}\n}\n\nexport function load(view, obj, excel){\n\tview._loading_data = true;\n\tobj = webix.isArray(obj)?{sheets:obj}:obj;\n\tconst prepareData = view.config.prepareData || excel;\n\n\tif(!obj.sheets && view._activeSheet){\n\t\t//loading into active sheet\n\t\tconst name = view._activeSheet;\n\t\tgetSheet(view, name).content = obj;\n\t\tparseToStore(view, name, obj, prepareData);\n\t\trefresh(view, obj);\n\t} else {\n\t\t//creating new set of sheets\n\t\tprepare(view, obj, prepareData);\n\t}\n\tview._loading_data = false;\n}\n\nexport function prepare(view, obj, prepareData){\n\tif(!obj) obj = {data:[]}; \n\tif(!obj.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\n\tview._activeSheet = \"\";\n\tview._sheets = obj.sheets;\n\tview._mData = new DataStore({strict: view.config.strict});\n\n\t// first add all pages then parse data in them\n\tobj.sheets.forEach(sheet => {\n\t\tview._mData.addPage(sheet.name);\n\t});\n\n\tobj.sheets.forEach(sheet => {\n\t\tconst content = sheet.content;\n\t\tconst sheetName = sheet.name;\n\n\t\tparseToStore(view, sheetName, content, prepareData);\n\t});\n\n\treset(view, obj);\n\tshow(view, getVisible(view)[0].name);\n}\n\nexport function newSheet(obj){\n\treturn {\n\t\tsheets:[{\n\t\t\tname: webix.i18n.spreadsheet.labels.sheet + 1,\n\t\t\tcontent: obj\n\t\t}]\n\t};\n}\n\nexport function show(view, name){\n\tif (name == view._activeSheet) return;\n\n\tif(view.callEvent(\"onBeforeSheetShow\", [name])){\n\t\tif (view._activeSheet)\n\t\t\tgetSheet(view, view._activeSheet).content = view.serialize();\n\n\t\tview._activeSheet = name;\n\t\tconst obj = getSheet(view, name).content;\n\n\t\tview._mPage = view._mData.getPage(name);\n\n\t\trefresh(view, obj);\n\n\t\tview.callEvent(\"onAfterSheetShow\", [name]);\n\t}\n}\n\nexport function getSheet(view, name){\n\treturn arr.find(view._sheets, x => x.name == name);\n}\n\nexport function isVisible(view, sheet){\n\tsheet = getSheet(view, sheet);\n\treturn sheet.state != \"hidden\" && sheet.state != \"veryHidden\";\n}\n\nexport function eachSheet(view, callback){\n\tfor (var i=0; i<view._sheets.length; i++)\n\t\tcallback(view._sheets[i].name);\n}\n\nexport function getActive(view){\n\treturn view._activeSheet;\n}\n\nfunction refresh(view, obj){\n\tconst [data] = getSheetData(view);\n\n\tlet [rows, cols] = arr.getDimension(data, obj.spans, view.config.rowCount, view.config.columnCount, obj.filters);\n\n\tif (rows != view.config.rowCount || cols != view.config.columnCount){\n\t\tview.config.rowCount = rows;\n\t\tview.config.columnCount = cols;\n\t\tview._resetTable();\n\t}\n\n\tupdateMaxColumn(cols);\n\n\tview._loading_data = true;\n\tview.callEvent(\"onReset\", []);\n\tview.callEvent(\"onDataParse\", [obj]);\n\tview._loading_data = false;\n\n\tview._table.refresh();\n\tif(view.config.bottombar)\n\t\tview.$$(\"sheets\").refresh();\n}\n\nfunction copy(view){\n\tadd(view, view.serialize());\n}\n\nfunction callAction(view, id){\n\tif(!view.$sheetMenu.data.getMark(id, \"webix_disabled\")){\n\t\tif(actionMap[id])\n\t\t\tactionMap[id](view);\n\t\telse\n\t\t\tview.callEvent(\"onCommand\", [{id}]);\n\t}\n}\n\n","import {getStyle, getTextSize} from \"./styles\";\nimport {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\n\tif (view.config.resizeCell){\n\t\tvar grid = view.$$(\"cells\");\n\t\tgrid.define(\"resizeRow\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"resizeColumn\", { headerOnly: true, size: 10 });\n\t\tgrid.define(\"fixedRowHeight\", false);\n\n\t\tgrid.attachEvent(\"onRowResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: id, column: 0, size: view.$$(\"cells\").getItem(id).$height, page: view.getActiveSheet() });\n\t\t});\n\t\tgrid.attachEvent(\"onColumnResize\", (id) => {\n\t\t\tview.$$(\"cells\").refreshSelectArea();\n\t\t\tsave(view, \"sizes\", { row: 0, column: id, size: view.getColumn(id).width, page: view.getActiveSheet() });\n\t\t});\n\n\t\t// undo\n\t\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\t\tif(type == \"c-resize\" || type == \"r-resize\")\n\t\t\t\t_undoResize(view, row, column, value);\n\t\t});\n\t}\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tload(view,data);\n\t});\n\n\t\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view,data);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onBeforeStyleChange\", function(row, column, n, o){\n\t\tif (o && o.props.wrap === \"wrap\" && (!n || n.props.wrap != o.props.wrap)){\n\t\t\tdelete view._table.getItem(row).$height;\n\t\t}\n\t});\n\tview.attachEvent(\"onStyleChange\", (r,c) => _adjustRowHeight(view,r,c));\n\tview.attachEvent(\"onCellChange\", (r,c,v,p)=> {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_adjustRowHeight(view,r,c);\n\t});\n}\n\nfunction serialize(view, data, oldZoom){\n\tconst sizes = [];\n\tconst grid = view.$$(\"cells\");\n\tconst columns = grid.getState().order;\n\tconst order = grid.data.order;\n\n\tconst zoom = oldZoom || view._zoom;\n\n\tconst defWidth = grid.config.columnWidth;\n\tconst defHeight = grid.config.rowHeight;\n\n\tfor (let i = 1; i < columns.length; i++){\n\t\tconst width = Math.ceil(grid.getColumnConfig(columns[i]).width / zoom);\n\t\tif (width && width != defWidth)\n\t\t\tsizes.push([0, i, width]);\n\t}\n\n\tfor (let i = 0; i < order.length; i++){\n\t\tconst height = Math.ceil(grid.getItem(order[i]).$height / zoom);\n\t\tif (height && height != defHeight)\n\t\t\tsizes.push([order[i]*1, 0, height]);\n\t}\n\t\n\tdata.sizes = sizes;\n}\n\nexport function load(view, data){\n\tlet zoom = 1;\n\tif(data.table && data.table.zoom)\n\t\tzoom = data.table.zoom;\n\n\tconst grid = view.$$(\"cells\");\n\tconst defWidth = grid.config.columnWidth;\n\tconst defHeight = grid.config.rowHeight;\n\n\tfor(let i = 1; i <= view.config.rowCount; i++){\n\t\tconst row = view.$$(\"cells\").getItem(i);\n\t\trow.$height = defHeight*zoom;\n\t}\n\n\tconst rowHeight = (webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20) * zoom;\n\tconst rowId = view.getColumn(\"rowId\");\n\trowId.width = 40 * zoom;\n\trowId.header[0].height = rowHeight;\n\n\tfor(let i = 1; i <= view.config.columnCount; i++){\n\t\tconst col = view.getColumn(i);\n\t\tcol.header[0].height = rowHeight;\n\t\tcol.width = defWidth*zoom;\n\t}\n\n\tif (data.sizes){\n\t\tfor (let i=0; i<data.sizes.length; i++){\n\t\t\tconst size = data.sizes[i];\n\t\t\tif (size[0]*1 !== 0){\n\t\t\t\tconst row = view.$$(\"cells\").getItem(size[0]);\n\t\t\t\tif(row) row.$height = size[2]*zoom;\n\t\t\t} else {\n\t\t\t\tconst col = view.getColumn(size[1]);\n\t\t\t\tif(col) col.width = size[2]*zoom;\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh(true);\n}\n\nexport function zoomSizes(view, oldZoom){\n\tconst data = {table:{zoom:view._zoom}};\n\tserialize(view, data, oldZoom);\n\tload(view, data);\n}\n\nfunction _undoResize(view, row, column, value){\n\tconst table = view.$$(\"cells\");\n\tif(row){\n\t\ttable.getItem(row).$height = value;\n\t\tsave(view, \"sizes\", { row:row, column: 0, size: value, page: view.getActiveSheet() });\n\t}\n\telse{\n\t\ttable.setColumnWidth(column, value);\n\t}\n\t// update area selection\n\ttable.refreshSelectArea();\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet i,\n\t\tsizes = data.sizes,\n\t\tnsizes = [];\n\n\tif(inc){\n\t\tfor(i = sizes.length - 1; i >= 0; i--){\n\t\t\tlet [row, column, size] = sizes[i];\n\n\t\t\tif(row && name == \"row\" && row >= start.row){\n\t\t\t\tif(inc < 0 && row < start.row - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row*1 + inc, column, size]);\n\t\t\t}\n\t\t\telse if(column && name == \"column\" && column >= start.column){\n\t\t\t\tif(inc < 0 && column < start.column - inc)\n\t\t\t\t\tcontinue;\n\t\t\t\tnsizes.push([row, column*1 + inc, size]);\n\t\t\t}\n\t\t\telse\n\t\t\t\tnsizes.push(sizes[i]);\n\t\t}\n\n\t\tif(inc > 0){\n\t\t\t//col/row add: set sizes according to the selected area\n\t\t\tif(name == \"column\"){\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[1] == start.column + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([0, start.column + i, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t\telse{\n\t\t\t\tfor(let i = 0; i < inc; i++){\n\t\t\t\t\tconst size = arr.find(sizes, arr => arr[0] == start.row + i);\n\t\t\t\t\tif(size)\n\t\t\t\t\t\tnsizes.push([start.row + i, 0, size[2]]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tdata.sizes = nsizes;\n\t}\n}\n\nfunction _adjustRowHeight(view, row, column){\n\tif(view._loading_data)\n\t\treturn;\n\n\tconst style = getStyle(view, {row:row, column:column});\n\n\t//changing styles or content of wrapped cell -> resize the related row\n\tif (style && style.props.wrap){\n\t\tconst grid = view._table;\n\t\tconst item = grid.getItem(row);\n\t\tlet height = item.$height || grid.config.rowHeight;\n\n\t\tgrid.eachColumn(function(col, config){\n\t\t\tconst style = getStyle(view, {row:row, column:col});\n\t\t\t//include only cells with active wrap into calculation \n\t\t\tif(style && style.props && style.props.wrap === \"wrap\"){\n\t\t\t\tlet text = this.getText(row, col);\n\t\t\t\tlet baseWidth = config.width;\n\n\t\t\t\tconst span = grid.getSpan(row, col);\n\t\t\t\tlet spanHeight;\n\n\t\t\t\tif(span){\n\t\t\t\t\tconst node = grid.getSpanNode({row:span[0], column:span[1]});\n\t\t\t\t\tbaseWidth = node.offsetWidth;\n\t\t\t\t\tspanHeight = node.offsetHeight;\n\t\t\t\t}\n\n\t\t\t\tif(view.getCellEditor(row, col) || view.getCellFilter(row, col))\n\t\t\t\t\tbaseWidth += 20;\n\n\t\t\t\tlet textHeight = getTextSize(view, text, style.id, baseWidth).height;\n\n\t\t\t\tif(spanHeight)\n\t\t\t\t\ttextHeight = spanHeight >= textHeight ? 0 : textHeight - spanHeight + height;\n\n\t\t\t\theight = Math.max(height, textHeight);\n\t\t\t}\n\t\t});\n\n\t\titem.$height  = height;\n\t}\n}\n","import {save} from \"./save\";\nimport * as arr from \"../helpers/array\";\nimport {getSheet} from \"../sheets\";\n\nexport function init(view){\n\tview.attachEvent(\"onStyleChange\", (row, column, style) => {\n\t\tvar span = getSpan(view, row, column);\n\t\tif (span){\n\t\t\tvar extraCss = getExtraCss(view, row, column);\n\t\t\tspan[3] = (style ? style.id : \"\") + (extraCss ? (\" \" + extraCss) : \"\");\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataParse\", (data) => {\n\t\tparse(view, data);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => {\n\t\tserialize(view, data);\n\t});\n\t\n\tview.attachEvent(\"onUndo\", (type, row, column, value, isUndo) => {\n\t\tif(type == \"span\" || type == \"split\"){\n\t\t\tif (type == \"span\") \n\t\t\t\tisUndo = !isUndo;\n\t\t\tundoSpan(view, row, column, value, isUndo);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (name, options) => {\n\t\tif(name == \"before-grid-change\")\n\t\t\tupdatePosition(view, options.name, options.inc, options.data, options.start);\n\t\telse if(name == \"check-borders\")\n\t\t\treturn checkSpanBorders(view, options.row, options.column, options.area, options.mode);\n\t});\n}\n\nfunction getSpan(view, row, column){\n\tvar item = view.$$(\"cells\").getSpan()[row];\n\tif (item)\n\t\treturn item[column];\n}\n\nfunction parse(view, data){\n\tif (data.spans)\n\t\tfor (var i = 0; i < data.spans.length; i++) {\n\t\t\tvar span = data.spans[i];\n\t\t\taddSpan( view,\n\t\t\t\t{ row: span[0], column: span[1] },\n\t\t\t\tspan[2]*1,\n\t\t\t\tspan[3]*1,\n\t\t\t\ttrue \n\t\t\t);\n\t\t}\n}\n\nexport function serialize(view, data){\n\tvar spans = [];\n\tvar pull = view.$$(\"cells\").getSpan();\n\tif (pull){\n\t\tfor (var rid in pull){\n\t\t\tvar row = pull[rid];\n\t\t\tfor (var cid in row){\n\t\t\t\tvar span = row[cid];\n\t\t\t\tspans.push([rid*1, cid*1, span[0], span[1]]);\n\t\t\t}\n\t\t}\n\n\t\tdata.spans = spans;\n\t}\n\treturn data;\n}\n\nexport function addSpan(view, cell, x, y, silent, page){\n\tpage = page || view.getActiveSheet();\n\n\tif (x<2 && y<2) return;\n\n\tif(silent || view.callEvent(\"onBeforeSpan\", [cell.row, cell.column, [x, y], page])){\n\t\tif(page == view.getActiveSheet()){\n\t\t\tconst obj = view._mPage.getCell(cell.row-1, cell.column-1);\n\t\t\tlet css = ( obj && obj.style ) || \"\";\n\t\t\tvar extraCss = getExtraCss(view, cell.row, cell.column);\n\t\t\tif (extraCss)\n\t\t\t\tcss += \" \" + extraCss;\n\t\t\tview.$$(\"cells\").addSpan(cell.row, cell.column, x, y, null, css);\n\t\t}\n\t\telse{\n\t\t\tconst sheet = getSheet(view, page);\n\t\t\tif(sheet){\n\t\t\t\tif(!sheet.content.spans)\n\t\t\t\t\tsheet.content.spans = [];\n\t\t\t\tsheet.content.spans.push([cell.row, cell.column, y, x]);\n\t\t\t}\n\t\t}\n\n\t\tsetSpanValue(view, cell, x, y, page);\n\n\t\tif (!silent){\n\t\t\tview.callEvent(\"onAfterSpan\", [cell.row, cell.column, [x, y], page]);\n\t\t\tsave(view, \"spans\", {\n\t\t\t\tpage,\n\t\t\t\trow:cell.row, column: cell.column,\n\t\t\t\tx, y\n\t\t\t});\n\t\t}\n\t}\n}\n\nexport function removeSpan(view, cell, page){\n\tpage = page || view.getActiveSheet();\n\tlet span, index, sheet;\n\n\tconst isActiveSheet = page == view.getActiveSheet();\n\tif(isActiveSheet)\n\t\tspan = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\telse{\n\t\tsheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.spans){\n\t\t\tindex = arr.findIndex(sheet.content.spans, span => span[0] == cell.row && span[1] == cell.column);\n\t\t\tif(index != -1)\n\t\t\t\tspan = sheet.content.spans[index];\n\t\t}\n\t}\n\tif(span && view.callEvent(\"onBeforeSplit\", [ cell.row, cell.column, [span[2], span[3]], page ])){\n\t\tif(isActiveSheet)\n\t\t\tview.$$(\"cells\").removeSpan(cell.row, cell.column);\n\t\telse\n\t\t\tsheet.content.spans.splice(index, 1);\n\n\t\tview.callEvent(\"onAfterSplit\", [ cell.row, cell.column, [span[2], span[3]], page ]);\n\t\tsave(view, \"spans\", {\n\t\t\trow:cell.row, column: cell.column,\n\t\t\tx:0, y:0, page\n\t\t});\n\t}\n}\n\nexport function getRange(sel){\n\tvar lx, ly, rx, ry;\n\trx = ry = 0;\n\tlx = ly = Infinity;\n\n\tfor (var i=0; i<sel.length; i++){\n\t\tvar cx = sel[i].column*1;\n\t\tvar cy = sel[i].row*1;\n\n\t\tlx = Math.min(cx, lx);\n\t\trx = Math.max(cx, rx);\n\t\tly = Math.min(cy, ly);\n\t\try = Math.max(cy, ry);\n\t}\n\n\treturn {\n\t\tcell:{ row:ly, column:lx },\n\t\tx: rx-lx+1,\n\t\ty: ry-ly+1\n\t};\n}\n\nexport function setSpanCss(view, row, column, css, add){\n\tconst span = getSpan(view, row, column);\n\tif (span){\n\t\tif (add){\n\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\tspan[3] += \" \" + css;\n\t\t} else {\n\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t}\n\t}\n}\n\nfunction getExtraCss(view, row, column){\n\tlet extraCss = [];\n\tif(view.getCellEditor(row, column))\n\t\textraCss.push(\"ss_editor\");\n\tif(view.getCellFilter(row, column))\n\t\textraCss.push(\"ss_filter\");\n\treturn extraCss.join(\" \");\n}\n\nfunction undoSpan(view,row, column,value,isUndo){\n\tif(isUndo){\n\t\tremoveSpan(view,{row: row, column: column});\n\t}\n\telse{\n\t\taddSpan(view, {row: row, column: column}, value[0], value[1]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet spans = data.spans;\n\tif(inc){\n\t\tfor(let i = spans.length-1;i >=0;i--){\n\t\t\tlet [row,column] = spans[i];\n\n\t\t\tif(inc < 0){//deleting\n\t\t\t\tif(name == \"row\" && row <= start.row-inc-1)\n\t\t\t\t\tinc = start.row - spans[i][0];\n\t\t\t\telse if (name == \"column\" && column <= start.column-inc-1)\n\t\t\t\t\tinc = start.column - spans[i][1];\n\t\t\t}\n\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tspans[i][0] =  name == \"row\"?row*1 + inc:row;\n\t\t\t\tspans[i][1] = name == \"column\"?column*1 + inc:column;\n\t\t\t}\n\t\t}\n\t}\n}\n\nvar borderChecks = {\n\t\"border-right\":\t\tfunction(row, column, span, area){\n\t\treturn area.end.column == column+span[0]-1;\n\t},\n\t\"border-bottom\":\tfunction(row, column, span, area){\n\t\treturn area.end.row == row+span[1]-1;\n\t}\n};\n\nfunction checkSpanBorders(view, row, column, area, mode){\n\tvar span = getSpan(view, row, column);\n\treturn span&&borderChecks[mode]?borderChecks[mode](row, column, span, area):false;\n}\n\n// clear merged cells except the first one\nfunction setSpanValue(view, cell, x, y, page){\n\tconst row = cell.row*1;\n\tconst column = cell.column*1;\n\tlet isEmpty = !view.getCellValue(row, column, page);\n\n\tfor(let i = row; i < row+y; i++){\n\t\tfor(let j = column; j < column+x; j++) {\n\t\t\tconst value = view.getCellValue(i, j, page);\n\t\t\tif(value !== \"\" && (j != column || i != row)){\n\t\t\t\tif(isEmpty){\n\t\t\t\t\tisEmpty = false;\n\t\t\t\t\tview.setCellValue(row, column, value, page);\n\t\t\t\t}\n\t\t\t\tview.setCellValue(i, j, \"\", page);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function adjustSpan (span, action, start, end, view, data, spanData){\n\tvar length = action.group == \"row\" ? span[3] : span[2];\n\tvar checkSpan = action.group == \"row\" ? [span[0]*1, span[0]*1+span[3]-1] : [span[1]*1, span[1]*1+span[2]-1];\n\tvar selection = action.group == \"row\" ? [start.row, end.row] : [start.column, end.column];\n\n\t//if we add, the number of selected rows/cols is added to span, so we need original selection length\n\tvar inc = selection[1] - selection[0] + 1;\n\n\tselection[0] = Math.max(selection[0], checkSpan[0]);\n\tselection[1] = Math.min(selection[1], checkSpan[1]);\n\n\tvar isFirstCell = selection[0] == checkSpan[0];\n\n\tif(selection[0] <= selection[1]){ //selection is in span\n\t\tif(action.id == \"del\") //if we delete, only rows/cols included into span\n\t\t\tinc = (selection[1] - selection[0]+ 1) * -1;\n\t\t//delete smth which starts as span and less than it's length\n\t\tif(action.id == \"del\" && isFirstCell && length > -1*inc){\n\t\t\tconst item = arr.find(data, arr => arr[0] == span[0] && arr[1] == span[1]);\n\t\t\tif(item)\n\t\t\t\tspanData.push(item);\n\t\t}\n\n\t\tif(!(isFirstCell && action.id == \"add\")){\n\t\t\tspan[2] = action.group == \"column\" ? span[2]+inc : span[2];\n\t\t\tspan[3] = action.group == \"row\" ? span[3]+inc : span[3];\n\t\t}\n\t}\n\treturn span;\n}\n\nexport function pasteSpan(view, extra, row, col, cutted, translate){\n\t//existing span\n\tvar s = view._table.getSpan(row, col);\n\tif(extra && extra.span){\n\t\tvar span = extra.span;\n\t\t//if we are on start position for the future span\n\t\tif(row == span[0]*1+translate.row && col == span[1]*1+translate.column){\n\t\t\t//delete spans in future paste zone \n\t\t\tview._table.mapCells(row, col, span[3], span[2], (value, rid, cid) => {\n\t\t\t\ts = view._table.getSpan(rid,cid);\n\t\t\t\tif(s) removeSpan(view, {row:s[0], column:s[1]});\n\t\t\t}, true);\n\t\t\taddSpan(view, {row:row, column:col}, span[2], span[3]);\n\t\t\tif(cutted === 1)\n\t\t\t\tremoveSpan(view, {row:extra.row, column:extra.col});\n\t\t}\n\t}\n\telse if(s)\n\t\tremoveSpan(view, {row:s[0], column:s[1]});\n}","import {isVisible} from \"../sheets\";\nimport {setSpanCss} from \"./spans\";\n\nexport function print(view, options, htmlOnly){\n\tconst views = [];\n\tconst order = {};\n\tconst active = view._activeSheet;\n\n\tconst html = _buildHtml(view, options, active, views, order);\n\tview.showSheet(active);\n\n\tconst promise = webix.promise.defer();\n\twebix.promise.all(views).then(res =>{\n\t\tconst keys = Object.keys(order).sort( view.$$(\"cells\").data.sorting.as.int );\n\t\tfor (let i = keys.length - 1; i >= 0; i--) {\n\t\t\tconst index = keys[i];\n\t\t\thtml.insertBefore(res[index], html.childNodes[ order[index] ]);\n\t\t}\n\n\t\tif(htmlOnly)\n\t\t\treturn promise.resolve(html);\n\n\t\twebix.html.insertBefore(html, options.docFooter, document.body);\n\t\twindow.print();\n\t\t_cleanHtml(view, html);\n\n\t\tpromise.resolve();\n\t});\n\treturn promise;\n}\n\nexport function init(view){\n\tview.$customPrint = function(options, htmlOnly){\n\t\treturn print(view, options, htmlOnly);\n\t};\n\n\tview._printBorders = {\n\t\tpaper: webix.env.printSizes.find(s => s.id == \"a4\") ? \"a4\" : webix.env.printSizes[0].id,\n\t\tfit: \"page\",\n\t\tmode: \"landscape\",\n\t\tmargin: 1,\n\t\tsheetnames: 1,\n\t\t$renderedSpanBorders: {}\n\t};\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"print-borders\")\n\t\t\tview.showPrintBorders(value);\n\t});\n\n\tview.attachEvent(\"onAfterSheetShow\", ()=> showBorders(view, true));\n\tview.attachEvent(\"onChange\", (type, page)=> {\n\t\tif(type == \"update\" && page == view.getActiveSheet())\n\t\t\tshowBorders(view, true);\n\t});\n\tview.attachEvent(\"onAfterSplit\", (r, c, span, page)=> {\n\t\tconst renderedSpanBorders = view._printBorders.$renderedSpanBorders;\n\t\tif(page == view.getActiveSheet() && renderedSpanBorders[r] && renderedSpanBorders[r][c]){\n\t\t\tfor(let type in renderedSpanBorders[r][c])\n\t\t\t\twebix.html.remove(renderedSpanBorders[r][c][type]);\n\t\t\tdelete renderedSpanBorders[r][c];\n\t\t}\n\t});\n\t\n}\n\nfunction _cleanHtml(view, html){\n\twebix.html.remove(html);\n\n\tview._sheets.forEach((sheet, i) => {\n\t\twebix.html.removeStyle(\".wss_\"+view.$index+\"_\"+i);\n\t});\n}\nfunction _buildHtml(view, options, active, views, order){\n\tconst doc = webix.html.create(\"div\", { \"class\":\"webix_ssheet_print\"});\n\n\toptions.xCorrection = 1;\n\toptions.header = options.header || false;\n\toptions.trim = webix.isUndefined(options.trim) ? true : options.trim;\n\toptions.sheetnames = webix.isUndefined(options.sheetnames) ? true : options.sheetnames;\n\tconst baseIndex = view.$index;\n\tconst pageSize = getPageSize(options);\n\n\tlet sheets = options.sheets;\n\t\n\t// backward compatibility, options.data can be only \"selection\"\n\t// \"current\" and \"all\" are deprecated\n\tconst data = options.data;\n\n\tif(!sheets || data == \"current\" || data == \"selection\")\n\t\tsheets = [active];\n\telse if(typeof sheets == \"string\")\n\t\tsheets = [sheets];\n\telse if(sheets === true || data == \"all\")\n\t\tsheets = view._sheets.map(sheet => sheet.name);\n\n\tsheets = sheets.filter(sheet => isVisible(view, sheet));\n\n\tsheets.forEach((name, i) => {\n\t\tview.$index = baseIndex+\"_\"+i;\n\t\tconst grid = view.$$(\"cells\");\n\n\t\tview.showSheet(name);\n\t\tconst oldZoom = view._zoom;\n\t\tview.ignoreUndo(() => view.zoom(1));\n\n\t\tconst prefix = \"wss_\"+view.$index;\n\n\t\tview._print = true;\n\t\tconst table = grid.$customPrint(options, true);\n\t\tdelete view._print;\n\n\t\tconst tbl = table.firstChild;\n\n\t\tif(tbl){\n\t\t\tconst [header, body] = tbl.children;\n\n\t\t\tconst topSplit = header.childElementCount;\n\t\t\tconst sheetName = options.sheetnames ? 20 : 0;\n\t\t\tlet splitHeight = sheetName;\n\n\t\t\tfor (let s = 1; s <= topSplit; s++)\n\t\t\t\tsplitHeight += grid.getItem(s).$height || grid.config.rowHeight;\n\n\t\t\tif(splitHeight > pageSize.height / 4)\n\t\t\t\tfor (let i = topSplit - 1; i >= 0; i--){\n\t\t\t\t\tif(body.firstChild)\n\t\t\t\t\t\twebix.html.insertBefore(header.children[i], body.firstChild);\n\t\t\t\t\telse\n\t\t\t\t\t\tbody.appendChild(header.children[i]);\n\t\t\t\t}\n\n\t\t\tif(sheetName){\n\t\t\t\tconst sheetNode = webix.html.create(\"tr\", {class:\"webix_ssheet_sheetname\"}, `<td>${name}:</td>`);\n\n\t\t\t\tif(header.firstChild)\n\t\t\t\t\twebix.html.insertBefore(sheetNode, header.firstChild);\n\t\t\t\telse\n\t\t\t\t\theader.appendChild(sheetNode);\n\t\t\t}\n\n\t\t\tconst node = table.firstChild;\n\t\t\tif (node){\n\t\t\t\tif(name != active)\n\t\t\t\t\twebix.html.removeCss(node, \"wss_\"+baseIndex);\n\t\t\t\twebix.html.addCss(node, prefix);\n\t\t\t}\n\n\t\t\tdoc.appendChild(table);\n\t\t}\n\n\t\tif(options.external)\n\t\t\tfor(let id in view.views._pull){\n\t\t\t\tconst innerView = view.views._pull[id];\n\t\t\t\tif(innerView.type == \"image\"){\n\t\t\t\t\tconst img = webix.html.create(\"IMG\", {\n\t\t\t\t\t\tsrc: innerView.data,\n\t\t\t\t\t\twidth: (innerView.config.width || 500)+\"px\",\n\t\t\t\t\t\theight: (innerView.config.height || 300)+\"px\"\n\t\t\t\t\t});\n\n\t\t\t\t\tconst promise = webix.promise.defer();\n\t\t\t\t\tviews.push(promise);\n\t\t\t\t\timg.onload = ()=> promise.resolve();\n\n\t\t\t\t\tdoc.appendChild(img);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tconst externalUI = webix.$$(id).getBody();\n\t\t\t\t\tif(externalUI.$customPrint){\n\t\t\t\t\t\tconst customPrint = externalUI.$customPrint({size: options.size}, true);\n\t\t\t\t\t\tif(customPrint.then){\n\t\t\t\t\t\t\torder[views.length] = doc.childElementCount;\n\t\t\t\t\t\t\tviews.push(customPrint);\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tdoc.appendChild( customPrint );\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tdoc.appendChild( printInnerView(webix.$$(id).getBody()) );\n\t\t\t\t}\n\t\t\t}\n\n\t\tif(i+1 < view._sheets.length && (tbl || (options.external && Object.keys(view.views._pull).length))){\n\t\t\tconst br = webix.html.create(\"DIV\", {\"class\":\"webix_print_pagebreak\"});\n\t\t\tdoc.appendChild(br);\n\t\t}\n\n\t\tview.$index = baseIndex;\n\t\tview.ignoreUndo(() => view.zoom(oldZoom));\n\t});\n\n\treturn doc;\n}\n\nfunction printInnerView(view){\n\tconst body = view.$view.cloneNode(true);\n\n\t//copy data from all canvases\n\tconst canvases = view.$view.getElementsByTagName(\"canvas\");\n\tif(canvases.length)\n\t\tfor(let i = canvases.length-1; i >=0; i--){\n\t\t\tconst destCtx = body.getElementsByTagName(\"canvas\")[i].getContext(\"2d\");\n\t\t\tdestCtx.drawImage(canvases[i], 0, 0);\n\t\t}\n\n\tconst container = webix.html.create(\"div\", {class:\"webix_ssheet_ui\"});\n\tcontainer.appendChild(body);\n\n\treturn container;\n}\n\nfunction getPageSize(options){\n\tconst size = webix.env.printSizes.find(size => size.id == options.paper);\n\tconst landscape = options.mode == \"landscape\";\n\n\tconst margin = options.margin ? 2 * webix.env.printMargin : 0;\n\n\treturn {\n\t\twidth: size[landscape ? \"height\" : \"width\"] * webix.env.printPPI - margin,\n\t\theight: size[landscape ? \"width\" : \"height\"] * webix.env.printPPI - margin\n\t};\n}\n\nexport function showBorders(view, redraw){\n\tif(redraw && !view._printBorders.$render)\n\t\treturn;\n\n\tremovePrintInnerBorders(view);\n\n\tconst borders = {rows:{}, cols:{}};\n\tconst grid = view.$$(\"cells\");\n\tconst options = view._printBorders;\n\n\tconst pageSize = getPageSize(options);\n\n\tconst sheetName = options.sheetnames ? 20 : 0;\n\tlet topSplit = grid.config.topSplit;\n\tlet splitHeight = sheetName;\n\n\tfor (let s = 1; s <= topSplit; s++)\n\t\tsplitHeight += (grid.getItem(s).$height || grid.config.rowHeight) / view._zoom;\n\n\tif(splitHeight > pageSize.height / 4){\n\t\ttopSplit = 0;\n\t\tsplitHeight = sheetName;\n\t}\n\n\tlet rowsHeight = splitHeight;\n\tfor (let r = topSplit + 1; r <= view.config.rowCount; r++) {\n\t\tconst height = (grid.getItem(r).$height || grid.config.rowHeight) / view._zoom;\n\n\t\tif(rowsHeight + height > pageSize.height){\n\t\t\trowsHeight = splitHeight;\n\t\t\tborders.rows[r == 1 ? r : r-1] = 1;\n\t\t}\n\n\t\trowsHeight += height;\n\t}\n\n\tif(options.fit != \"page\"){\n\t\tlet colsWidth = 0;\n\t\tfor (let c = 1; c <= view.config.columnCount; c++) {\n\t\t\tconst width = (grid.getColumnConfig(c).width || grid.config.columnWidth) / view._zoom;\n\n\t\t\tif(colsWidth + width > pageSize.width){\n\t\t\t\tcolsWidth = 0;\n\t\t\t\tborders.cols[c == 1 ? c : c-1] = 1;\n\t\t\t}\n\n\t\t\tcolsWidth += width;\n\t\t}\n\t}\n\n\tview._printBorders.$render = borders;\n\tview.refresh();\n}\n\nexport function getPrintBordersCss(view, row, column){\n\tlet css = \"\";\n\n\tconst borders = view._printBorders.$render;\n\tconst span = view.$$(\"cells\").getSpan(row, column);\n\n\tif(span){\n\t\tconst lastRow = span[0]*1+(span[3]-1);\n\t\tconst lastCol = span[1]*1+(span[2]-1);\n\n\t\tsetSpanCss(view, span[0], span[1], \"webix_ss_print_border_right\", borders && borders.cols[lastCol]);\n\t\tsetSpanCss(view, span[0], span[1], \"webix_ss_print_border_bottom\", borders && borders.rows[lastRow]);\n\n\t\tconst renderedSpanBorders = view._printBorders.$renderedSpanBorders;\n\n\t\tif(borders){\n\t\t\tconst innerRightBorder = column != lastCol && borders.cols[column];\n\t\t\tconst innerBottomBorder = row != lastRow && borders.rows[row];\n\n\t\t\tif(innerRightBorder || innerBottomBorder){\n\t\t\t\tif(!renderedSpanBorders[span[0]])\n\t\t\t\t\trenderedSpanBorders[span[0]] = {};\n\t\t\t\tif(!renderedSpanBorders[span[0]][span[1]])\n\t\t\t\t\trenderedSpanBorders[span[0]][span[1]] = {};\n\n\t\t\t\tif(innerRightBorder)\n\t\t\t\t\taddSpanInnerBorder(view, renderedSpanBorders[span[0]][span[1]], span, column, \"right\");\n\t\t\t\tif(innerBottomBorder)\n\t\t\t\t\taddSpanInnerBorder(view, renderedSpanBorders[span[0]][span[1]], span, row, \"bottom\");\n\t\t\t}\n\t\t}\n\t\telse removePrintInnerBorders(view);\n\t}\n\n\tif(borders){\n\t\tif(borders.cols[column])\n\t\t\tcss += \"webix_ss_print_border_right\";\n\t\tif(borders.rows[row])\n\t\t\tcss += (css ? \" \" : \"\") + \"webix_ss_print_border_bottom\";\n\t}\n\n\treturn css;\n}\n\nexport function removePrintInnerBorders(view){\n\tconst renderedSpanBorders = view._printBorders.$renderedSpanBorders;\n\tfor(let row in renderedSpanBorders)\n\t\tfor(let col in renderedSpanBorders[row])\n\t\t\tfor(let type in renderedSpanBorders[row][col])\n\t\t\t\twebix.html.remove(renderedSpanBorders[row][col][type]);\n\tview._printBorders.$renderedSpanBorders = {};\n}\n\nfunction addSpanInnerBorder(view, rendered, span, position, type){\n\tif(!rendered[type]) rendered[type] = {};\n\n\tlet border = rendered[type][position];\n\tconst grid =  view.$$(\"cells\");\n\n\tif(!border){\n\t\tlet pos = 0;\n\t\tfor(let i = span[type == \"right\" ? 1 : 0]*1; i <= position; i++){\n\t\t\tif(type == \"right\")\n\t\t\t\tpos += grid.getColumnConfig(i).width || grid.config.columnWidth;\n\t\t\telse\n\t\t\t\tpos += grid.getItem(i).$height || grid.config.rowHeight;\n\t\t}\n\t\tborder = rendered[type][position] = webix.html.create(\"div\", {class:`webix_ss_print_border_${type}`, style:`${type == \"right\" ? \"left\" : \"top\"}:${pos-1}px;`});\n\t}\n\n\twebix.delay(()=>{\n\t\tconst spanNode = grid.getSpanNode({row: span[0], column: span[1]});\n\t\tif(!spanNode.contains(border))\n\t\t\tspanNode.appendChild(border);\n\t});\n}","import {numbers} from \"../sheets\";\nimport {zoomStyles} from \"./styles\";\nimport {zoomSizes} from \"./resize\";\nimport {getSheet} from \"../sheets\";\nimport {removePrintInnerBorders} from \"./print\";\n\nconst readyZoom = {};\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"zoom\"){\n\t\t\tzoom(view, value);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => load(view, data));\n}\n\nexport function zoom(view, newValue, load, page){\n\tlet value;\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tvalue = view._zoom || 1;\n\n\t\tif(newValue == \"in\" || newValue == \"out\")\n\t\t\tnewValue = getNext(value, newValue == \"in\" ? 1 : -1, numbers);\n\n\t\tview._zoom = newValue;\n\t\tgrid.define({ minColumnWidth: 40*newValue });\n\n\t\tif(view.$$(\"zoom\"))\n\t\t\tview.$$(\"zoom\").setValue(newValue);\n\n\t\tif(newValue != value){\n\t\t\tconst fontSize = webix.skin.$active.fontSize * newValue;\n\t\t\tconst rowHeight = webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20;\n\t\t\tconst className = \"webix_ssheet_zoom_\"+newValue.toString().replace(\".\", \"_\");\n\n\t\t\tgrid.$view.className = grid.$view.className.replace(/ webix_ssheet_zoom_\\w+/,\"\");\n\t\t\tgrid.define({css: className});\n\n\t\t\tif(!load){\n\t\t\t\tremovePrintInnerBorders(view);\n\t\t\t\tzoomSizes(view, value);\n\t\t\t\tzoomStyles(view);\n\t\t\t}\n\n\t\t\tif(!readyZoom[className] && newValue != 1){\n\t\t\t\treadyZoom[className] = 1;\n\n\t\t\t\t// cells\n\t\t\t\twebix.html.addStyle(`\n\t\t\t\t\t.${className} .webix_hcell, .${className} .webix_cell{\n\t\t\t\t\t\tfont-size: ${fontSize}px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className} .sheet_column_0 .webix_cell{\n\t\t\t\t\t\tpadding: 0 ${12*newValue}px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className}.webix_ssheet_table .webix_hs_left .webix_hcell.webix_first:before{\n\t\t\t\t\t\tright: ${4*newValue}px;\n\t\t\t\t\t\tbottom: ${4*newValue}px;\n\t\t\t\t\t\tborder-top-width: ${(rowHeight - 8)*newValue}px;\n\t\t\t\t\t\tborder-right-width: ${(rowHeight - 8)*newValue}px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className} .webix_cell{\n\t\t\t\t\t\tpadding: ${2*newValue}px 0px;\n\t\t\t\t\t}\n\n\t\t\t\t\t.${className} .webix_cell div:first-child{\n\t\t\t\t\t\tmargin: 0 ${12*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t`);\n\n\t\t\t\t// icons\n\t\t\t\twebix.html.addStyle(`\n\t\t\t\t\t.${className} .webix_cell.ss_filter, .${className} .webix_cell.ss_editor{\n\t\t\t\t\t\tpadding-right: ${16*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .ssheet_filter_sign, .${className} .webix_cell.ss_editor:after{\n\t\t\t\t\t\tfont-size: ${20*newValue}px;\n\t\t\t\t\t\tright: ${6*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .webix_cell.ss_filter.ss_editor:after{\n\t\t\t\t\t\tright: ${28*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .webix_cell.ss_filter.ss_editor{\n\t\t\t\t\t\tpadding-right: ${36*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .webix_lock:before{\n\t\t\t\t\t\tfont-size: ${fontSize}px;\n\t\t\t\t\t}\n\t\t\t\t\t.${className} .ssheet_commented_sign:before{\n\t\t\t\t\t\tborder-top-width: ${8*newValue}px;\n\t\t\t\t\t\tborder-left-width: ${8*newValue}px;\n\t\t\t\t\t}\n\t\t\t\t`);\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {zoom: 1};\n\n\t\t\tvalue = sheet.content.table.zoom;\n\n\t\t\tif(newValue == \"in\" || newValue == \"out\")\n\t\t\t\tnewValue = getNext(value, newValue == \"in\" ? 1 : -1, numbers);\n\n\t\t\tsheet.content.table.zoom = newValue;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(!load && value != newValue)\n\t\tview.callEvent(\"onZoom\", [newValue, value, page]);\n}\n\nexport function serialize(view, data){\n\tdata.table = {\n\t\tzoom: view._zoom\n\t};\n}\n\nexport function load(view, data){\n\tlet value = 1;\n\tif(data.table && data.table.zoom)\n\t\tvalue = data.table.zoom;\n\n\tzoom(view, value, true);\n}\n\nexport function getNext(value, step, numbers) {\n\tconst index = numbers.indexOf(value);\n\n\tif(index != -1)\n\t\treturn numbers[index + step] || value;\n\n\tlet nextValue;\n\tfor(let i = 0; i < numbers.length; i++){\n\t\tif(numbers[i] > value){\n\t\t\tif(step < 0){\n\t\t\t\tif(--i == -1)\n\t\t\t\t\treturn value;\n\t\t\t}\n\t\t\tnextValue = numbers[i];\n\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(step < 0 && !nextValue)\n\t\tnextValue = numbers[numbers.length - 1];\n\n\treturn nextValue || value;\n}","import {getNext} from \"../operations/zoom\";\n\nwebix.protoUI(\n\t{\n\t\tname: \"ssheet-zoom\",\n\t\t$cssName: \"counter webix_ssheet_zoom\",\n\t\t$init: function() {\n\t\t\tthis.attachEvent(\"onAfterRender\", () => {\n\t\t\t\tthis.$setValue(this.config.value);\n\t\t\t\tthis.getInputNode().readOnly = true;\n\t\t\t\twebix.event(this.$view.firstChild, \"keydown\", e =>\n\t\t\t\t\twebix.html.preventEvent(e)\n\t\t\t\t);\n\t\t\t});\n\t\t},\n\t\t$setValue: function(value) {\n\t\t\tthis.getInputNode().value = parseInt(value * 100, 10) + \"%\";\n\t\t},\n\t\tshift: function(step, config) {\n\t\t\tconst v = this.config.value;\n\t\t\tconst arr = this.config.numbers;\n\n\t\t\tconst value = getNext(v, step, arr);\n\t\t\tthis.setValue(value, config);\n\t\t},\n\t},\n\twebix.ui.counter\n);","import {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {getDateEditFormat, getFormatName, checkFormat} from \"../operations/formats\";\n\nwebix.editors.excel_date = webix.extend({\n\tcreatePopup:function(){\n\t\tconst editor = webix.editors.excel_date;\n\n\t\tif(!editor.popup){\n\t\t\tconst popup = webix.ui({\n\t\t\t\tview:\"popup\",\n\t\t\t\tbody:{ \n\t\t\t\t\tview:\"calendar\",\n\t\t\t\t\ticons:true,\n\t\t\t\t\ttimepicker:true,\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonChange: function(val){\n\t\t\t\t\t\t\tval = val[0];\n\t\t\t\t\t\t\tthis.getParentView()._last_input_target.value = val ? getExcelDateFromJs(val) : \"\";\n\t\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\ton:{\n\t\t\t\t\tonEnter: function(){\n\t\t\t\t\t\twebix.callEvent(\"onEditEnd\", []);\n\t\t\t\t\t},\n\t\t\t\t\tonBeforeShow(){\n\t\t\t\t\t\tconst table = webix.$$(this._last_input_target);\n\t\t\t\t\t\tconst view = table.getParentView().getParentView();\n\t\t\t\t\t\tconst sel = table.getSelectedId();\n\n\t\t\t\t\t\tconst formatName = getFormatName(view, sel.row, sel.column);\n\t\t\t\t\t\tconst isTime = checkFormat(view, formatName, \"date\", \"onlyTime\");\n\n\t\t\t\t\t\tthis.getBody().define({type: isTime ? \"time\" : null});\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\teditor.popup = popup.config.id;\n\t\t}\n\n\t\treturn editor.popup;\n\t},\n\trender:function(){\n\t\tconst node = webix.html.create(\"div\", {\n\t\t\t\"class\":\"webix_dt_editor\"\n\t\t}, \"<input type='text'>\");\n\n\t\tthis.popup = this.createPopup();\n\n\t\twebix.event(node.firstChild, \"click\", ()=> this.getPopup().show(node));\n\n\t\treturn node;\n\t},\n\tgetPopup(){\n\t\treturn webix.$$(this.popup);\n\t},\n\tshowPopup:function(){\n\t\tconst input = this.getInputNode();\n\t\tconst popup = this.getPopup();\n\n\t\tpopup._last_input_target = input;\n\t\tpopup.show(input);\n\n\t\tinput.setAttribute(\"aria-expanded\", \"true\");\n\t},\n\tupdateCalendar(value){\n\t\tconst calendar = this.getPopup().getBody();\n\n\t\tcalendar.blockEvent();\n\t\tcalendar.setValue(value);\n\t\tcalendar.unblockEvent();\n\t},\n\tafterRender:function(){\n\t\tthis.showPopup();\n\t},\n\tsetValue:function(value){\n\t\tconst noDate = (value === \"\" || isNaN(value*1));\n\t\tvalue = noDate ? new Date() : getJsDateFromExcel(value);\n\t\tthis.updateCalendar(value);\n\n\t\tconst view = webix.$$(this.config.node).getParentView().getParentView();\n\t\tconst format = getDateEditFormat(view, this.config.row.id, this.config.id);\n\t\tthis.getInputNode().value = format(value);\n\t},\n\tgetValue:function(){\n\t\tconst value = this.getInputNode().value;\n\t\tthis.getPopup().hide();\n\t\treturn value;\n\t}\n}, webix.editors.text);","webix.editors.ss_richselect = webix.extend({\n\tgetFormat:function(value){\n\t\tconst list = this.getInputNode();\n\t\tlet item;\n\n\t\tif (value && list.exists(value))\n\t\t\titem = list.getItem(value);\n\t\treturn item && item.format;\n\t},\n\tpopupInit:function(popup){\n\t\twebix.editors.richselect.popupInit.apply(this, arguments);\n\n\t\tpopup.getList().define(\"template\", function(obj){\n\t\t\treturn obj.$value || obj.value;\n\t\t});\n\t}\n}, webix.editors.richselect);","import {changeAreaDecimals} from \"../operations/formats\";\n\nexport const actions = {\n\tundo: view => view.undo(),\n\tredo: view => view.redo(),\n\t\"hide-gridlines\": view => view.hideGridlines(\"toggle\"),\n\t\"hide-headers\": view => view.hideHeaders(\"toggle\"),\n\t\"freeze-columns\": view => view.freezeColumns(),\n\t\"freeze-rows\": view => view.freezeRows(),\n\t\"show-formulas\": view => view.showFormulas(\"toggle\"),\n\t\"print-borders\": view => view.showPrintBorders(\"toggle\"),\n\tspan: view => {\n\t\tconst range = view.$$(\"cells\").getSelectArea();\n\t\tif (range) {\n\t\t\tif (isMerged(view, range))\n\t\t\t\tview.splitCell();\n\t\t\telse {\n\t\t\t\tconst values = [];\n\t\t\t\tfor (let r = range.start.row; r <= range.end.row; r++){\n\t\t\t\t\tfor (let c = range.start.column; c <= range.end.column; c++){\n\t\t\t\t\t\tlet value = view.getCellValue(r, c);\n\t\t\t\t\t\tif (value) values.push(value);\n\t\t\t\t\t\tif (values.length > 1) break;\n\t\t\t\t\t}\n\t\t\t\t\tif (values.length > 1) break;\n\t\t\t\t}\n\t\t\t\tif (values.length > 1) {\n\t\t\t\t\tview.confirm({\n\t\t\t\t\t\ttext: webix.i18n.spreadsheet.labels[\"merge-cell-confirm\"]\n\t\t\t\t\t}).then(() => view.combineCells());\n\t\t\t\t} else\n\t\t\t\t\tview.combineCells();\n\t\t\t}\n\t\t}\n\t},\t\n\t\"increase-decimals\": view => changeAreaDecimals(view, 1),\n\t\"decrease-decimals\": view => changeAreaDecimals(view, -1),\n\t\"increase-indent\": view => view.callEvent(\"onStyleSet\", [\"indent\", 1]),\n\t\"decrease-indent\": view => view.callEvent(\"onStyleSet\", [\"indent\", -1]),\n\n\t\"find-readonly\": view => view.callEvent(\"onCommand\",[{ id:\"find\" }])\n};\n\nfunction isMerged(view,range){\n\tconst c0 = range.start;\n\tconst c1 = range.end;\n\n\tfor (let i = c0.row * 1; i <= c1.row * 1; i++){\n\t\tfor (let j = c0.column * 1; j <= c1.column * 1; j++){\n\t\t\tif (view.$$(\"cells\").getSpan(i, j))\n\t\t\t\treturn true;\n\t\t}\n\t}\n\treturn false;\n}\n","import { commonStructure, readonlyStructure } from \"./structure\";\nimport { ui, setToolbarLabels, getToolbarText } from \"./buttons\";\n\nfunction getText(text) {\n\tconst locale = webix.i18n.spreadsheet;\n\treturn locale.actions[text] || locale.labels[text] || text;\n}\n\nfunction calcButtons(){\n\tconst groups = {\n\t\t\"undo-redo\": [\"undo\", \"redo\"],\n\t\t\"insert\": [\"graph\", \"add-image\", \"add-comment\", \"controls\"]\n\t};\n\tconst result = {};\n\n\tfor (let name in groups){\n\t\tresult[name] = 0;\n\t\tfor(let i = 0; i < groups[name].length; i++) {\n\t\t\tconst width = webix.html.getTextSize(\n\t\t\t\tgetText(groups[name][i]), \n\t\t\t\t\"webix_ssheet_button_measure\"\n\t\t\t).width + 7;\n\t\t\tresult[name] = Math.max(width, result[name]);\n\t\t}\n\t}\n\treturn result;\n}\n\nfunction createButton(config, size){\n\tconst button = {\n\t\t$button: config.id,\n\t};\n\n\tif (config.view) {\n\t\tbutton.view = config.view;\n\t\tbutton.name = config.id;\n\t}\n\n\t// check not to break complex labels of icon buttons and icon-selectors\n\tif (config.toolbarLabel) {\n\t\tbutton.label = getToolbarText(config.id);\n\t}\n\n\tbutton.tooltip = getToolbarText(config.id);\n\n\tif (config.submenu) button.options = setToolbarLabels(config.submenu);\n\n\tif (config.toolbarWidth) {\n\t\tconst buttonHeight = webix.skin.$active.buttonHeight;\n\t\tbutton.width = size || (buttonHeight * config.toolbarWidth + (config.toolbarWidth - 1) * 2); // 2 is for margins between smaller items that are below / above the spanned item\n\t}\n\treturn button;\n}\n\n// simple 1-row block with a sub-label\nfunction createBlock(structure){\n\treturn [\n\t\t{\n\t\t\tpadding: 3,\n\t\t\trows: [\n\t\t\t\t{\n\t\t\t\t\tmargin: 2,\n\t\t\t\t\tcols: structure.submenu.map(createButton)\n\t\t\t\t},\n\t\t\t\tui.title({ title: getToolbarText(structure.id) }),\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t];\n}\n\nfunction createRows(buttons, size){\n\tlet sum = buttons.reduce((total, button) => total + (button.toolbarWidth || 1), 0);\n\tconst res = {\n\t\trows: [\n\t\t\t{ margin: 2, cols: [] },\n\t\t\t{ margin: 2, cols: [] }\n\t\t]\n\t};\n\n\tlet last = 0;\n\tconst rowSpans = [];\n\tfor (let i = 0; i < buttons.length; i++){\n\t\tif (buttons[i].toolbarHeight) {\n\t\t\trowSpans.push({ index: i, span: buttons[i].toolbarHeight });\n\t\t\tsum -= (buttons[i].toolbarWidth || 1);\n\t\t\tcontinue;\n\t\t}\n\t\tconst button = createButton(buttons[i], size);\n\t\tconst width = buttons[i].toolbarWidth || 1;\n\t\tconst index = (last + width > Math.ceil(sum / 2)) ? 1 : 0;\n\t\t\n\t\tres.rows[index].cols.push(button);\n\t\tlast += width;\n\t}\n\n\tif (rowSpans.length) {\n\t\tconst wrap = {\n\t\t\tcols: [res]\n\t\t};\n\t\trowSpans.forEach(r => {\n\t\t\twrap.cols.splice(r.index, 0, createButton(buttons[r.index]));\n\t\t});\n\t\treturn wrap;\n\t}\n\n\treturn res;\n}\n\n// more complex block with cols and rows of buttons and a sub-label\nfunction createGridBlock(structure, sizes){\n\treturn [\n\t\t{\n\t\t\tpadding: 3,\n\t\t\tmargin: 0,\n\t\t\trows: [\n\t\t\t\tcreateRows(structure.submenu, sizes[structure.id]),\n\t\t\t\tui.title({ title: getToolbarText(structure.id) }),\n\t\t\t]\n\t\t},\n\t\t{view: \"ssheet-separator\"},\n\t];\n}\n\nconst readonlyElements = () => {\n\tconst arr = readonlyStructure.flatMap(s => createBlock(s));\n\tarr.push({});\n\treturn arr;\n};\n\nexport function getAllElements(readonly){\n\tconst sizes = calcButtons();\n\tif (readonly) {\n\t\treturn readonlyElements();\n\t}\n\n\treturn commonStructure.flatMap(s => createGridBlock(s, sizes));\n}","import {actions} from \"./toolbar/actions\";\nimport {defaultStyles} from \"./toolbar/defaults\";\nimport {toolbarButtons, getButtons} from \"./toolbar/helpers\";\nimport * as elm from \"./toolbar/all_elements\";\nimport {isCustom} from \"./operations/formats\";\nimport {getStyle, getFormat} from \"./operations/styles\";\n\nconst buttons = {\n\t\"undo-redo\": [\"undo\",\"redo\"],\n\t\"font\": [\"font-family\",\"font-size\",\"font-weight\",\"font-style\",\"underline\",\"strike\",\"color\",\"background\",\"borders\"],\n\t\"align\": [\"text-align\",\"vertical-align\",\"wrap\",\"span\",\"increase-indent\",\"decrease-indent\"],\n\t\"format\": [\"format\"]\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"toolbar-update\"){\n\t\t\tif (action.name) {\n\t\t\t\tupdateValue(view, action.name, action.value);\n\t\t\t} else {\n\t\t\t\tsetValues(view, view.getSelectedId(true));\n\t\t\t}\n\t\t}\n\t});\n\n\tlet elements = [];\n\n\tif (view.config.toolbar) {\n\t\tlet allElements =  view.config.toolbar;\n\t\tif (allElements == \"full\") {\n\t\t\tallElements = elm.getAllElements(view.config.readonly);\n\t\t\tif (webix.isUndefined(view.config.bottombar))\n\t\t\t\tview.config.bottombar = true;\n\t\t}\n\t\telements = toolbarButtons(view, allElements);\n\t} else {\n\t\telements = getButtons(view, view.config.buttons || buttons);\n\t}\n\n\tconst bar = {\n\t\tview: webix.env.$customScroll ? \"scrollview\" : \"ssheet-toolbar-scrollview\",\n\t\tscroll: \"x\",\n\t\tbody: {\n\t\t\tview:\"toolbar\",\n\t\t\tcss: \"webix_ssheet_toolbar webix_layout_toolbar\",\n\t\t\tid:\"bar\",\n\t\t\tpadding:0,\n\t\t\telements,\n\t\t\ton: {\n\t\t\t\tonChange: function (value, old, config){\n\t\t\t\t\tif(config == \"user\"){\n\t\t\t\t\t\tconst source = this.$eventSource;\n\t\t\t\t\t\tconst name = source.config.name;\n\t\t\t\t\t\tif(name == \"format\" && value == \"common\")\n\t\t\t\t\t\t\tvalue = \"\";\n\n\t\t\t\t\t\tconst size = name == \"font-size\";\n\t\t\t\t\t\tif((size || name == \"font-family\") && (!value || (size && isNaN(value))))\n\t\t\t\t\t\t\treturn source.setValue(old);\n\t\t\t\t\t\telse if(size){\n\t\t\t\t\t\t\tconst maxSize = Math.floor(400 / 0.75); // 400 pt - max excel font size; divide 0.75 - pt to px conversion\n\t\t\t\t\t\t\tconst limited = Math.max(1, Math.min(maxSize, value));\n\t\t\t\t\t\t\tif (limited != value){\n\t\t\t\t\t\t\t\tvalue = limited;\n\t\t\t\t\t\t\t\tsource.setValue(value);\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tvalue += \"px\";\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\tif (!(name == \"format\" && value == \"custom\")) {\n\t\t\t\t\t\t\tview.callEvent(\"onStyleSet\", [name, value]);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\twebix.UIManager.setFocus(view.$$(\"cells\"));\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonItemClick: function (id) {\n\t\t\t\t\tconst viewId = view.innerId(id);\n\t\t\t\t\tif (actions[viewId]) {\n\t\t\t\t\t\tactions[viewId].call(this, view);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tview.callEvent(\"onCommand\", [{ id: viewId }]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"toolbar\", bar]);\n\treturn bar;\n\n}\n\nfunction ready(view){\n\tview.attachEvent(\"onAfterSelect\", (selected) => setValues(view, selected));\n}\n\nfunction setValues(view, selected) {\n\tif(!selected.length) return;\n\tconst barStyles = getBarStyles(view, selected);\n\tview.$$(\"bar\").setValues(barStyles);\n}\n\nfunction updateValue(view, name, value){\n\tconst element = view.$$(\"bar\").elements[name];\n\n\tif (element)\n\t\telement.setValue(value);\n}\n\nfunction getBarStyles(view, selected){\n\tconst dropdowns = [\n\t\t\"font-family\",\n\t\t\"font-size\",\n\t\t\"text-align\",\n\t\t\"vertical-align\",\n\t\t\"format\",\n\t\t\"background\",\n\t\t\"color\"\n\t];\n\n\tconst cell = selected[0];\n\tconst barStyles = getCellStyles(view, cell);\n\n\tfor(let i = 1; i < selected.length; i++){\n\t\tconst cellStyle = getCellStyles(view, selected[i]);\n\n\t\tfor(let k = dropdowns.length-1; k >= 0; k--){\n\t\t\tconst property = dropdowns[k];\n\t\t\tif(barStyles[property] != cellStyle[property]){\n\t\t\t\tdelete barStyles[property];\n\t\t\t\tdropdowns.splice(k, 1);\n\t\t\t}\n\t\t}\n\n\t\tif(!dropdowns.length)\n\t\t\tbreak;\n\t}\n\n\treturn barStyles;\n}\n\nfunction getCellStyles(view, cell){\n\tconst span = view.$$(\"cells\").getSpan(cell.row, cell.column);\n\tif(span)\n\t\t[cell.row, cell.column] = span;\n\n\tconst obj = getStyle(view, cell);\n\tconst styles = obj ? webix.copy(obj.props) : {};\n\n\tfor (let i in defaultStyles)\n\t\tif(!styles[i])\n\t\t\tstyles[i] = defaultStyles[i];\n\n\tstyles[\"font-size\"] = styles[\"font-size\"].replace(\"px\", \"\");\n\n\tconst format = getFormat(view, cell.row, cell.column) || \"common\";\n\tstyles.format = isCustom(format) ? \"custom\" : format;\n\n\treturn styles;\n}\n","import {getTextSize} from \"./styles\";\nimport {toRange} from \"../helpers/column_names\";\n\nexport function selectRow(row, view, endRow){\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow:row,\n\t\tcolumn:columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: (endRow || row),\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectAll(view){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar columns = view.$$(\"cells\").config.columns;\n\tvar firstColumn = columns[0].id == \"rowId\" ? 1 : 0;\n\n\tvar start = {\n\t\trow: order[0],\n\t\tcolumn: columns[firstColumn].id\n\t};\n\tvar last = {\n\t\trow: order[order.length-1],\n\t\tcolumn: columns[columns.length-1].id\n\t};\n\n\tif(start.column && last.column)\n\t\t_selectRange(start, last, view);\n}\n\nexport function selectColumn(column, view, endColumn){\n\tvar order = view.$$(\"cells\").data.order;\n\tvar startRow = order[0];\n\tvar lastRow = order[order.length-1];\n\n\tvar start = {row: startRow, column: column};\n\tvar last = {row: lastRow, column: (endColumn || column) };\n\n\t_selectRange(start, last, view);\n}\n\nexport function isColSelected(column, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tconst columns = view.$$(\"cells\").config.columns;\n\t\tconst firstCol = columns[columns[0].id == \"rowId\" ? 1 : 0].id;\n\t\tconst lastCol = columns[columns.length-1].id;\n\n\t\tif(selectedArea.start.column == firstCol && selectedArea.end.column == lastCol){\n\t\t\tconst order = view.$$(\"cells\").data.order;\n\t\t\tconst firstRow = order[0];\n\t\t\tconst lastRow = order[order.length-1];\n\t\t\treturn selectedArea.start.row == firstRow && selectedArea.end.row == lastRow;\n\t\t}\n\t\telse if (column >= selectedArea.start.column && column <= selectedArea.end.column)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function isCellSelected(row, column, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif(selectedArea){\n\t\tconst start = selectedArea.start;\n\t\tconst end = selectedArea.end;\n\t\treturn row >= start.row && row <= end.row && column >=  start.column && column <= end.column;\n\t}\n\treturn false;\n}\n\nexport function isRowSelected(row, view){\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\tif (selectedArea){\n\t\tconst order = view.$$(\"cells\").data.order;\n\t\tconst firstRow = order[0];\n\t\tconst lastRow = order[order.length-1];\n\n\t\tif(selectedArea.start.row == firstRow && selectedArea.end.row == lastRow){\n\t\t\tconst columns = view.$$(\"cells\").config.columns;\n\t\t\tconst firstCol = columns[columns[0].id == \"rowId\" ? 1 : 0].id;\n\t\t\tconst lastCol = columns[columns.length-1].id;\n\t\t\treturn selectedArea.start.column == firstCol && selectedArea.end.column == lastCol;\n\t\t}\n\t\telse if (row >= selectedArea.start.row && row <= selectedArea.end.row)\n\t\t\treturn true;\n\t}\n\treturn false;\n}\n\nexport function selectColumns(column, view) {\n\tconst selectedArea = view.$$(\"cells\").getSelectArea();\n\n\tif (!selectedArea)\n\t\tselectColumn(column, view);\n\telse {\n\t\tlet col1 = Math.min(selectedArea.start.column, selectedArea.end.column, column);\n\t\tlet col2 = Math.max(selectedArea.start.column, selectedArea.end.column, column);\n\t\tselectColumn(col1, view, col2);\n\t}\n}\n\nfunction _selectRange(a, b, view){\n\tview.$$(\"cells\").addSelectArea(a, b);\n}\n\n\nexport function adjustColumn(column, view) {\n\tconst grid = view.$$(\"cells\");\n\tlet width = 0;\n\tconst columnWidth = grid.getColumnConfig(column).width;\n\n\tgrid.eachRow(function(row) {\n\t\tlet currentWidth = 25;\n\t\tconst span = grid.getSpan(row, column);\n\t\tif(span && span[2] > 1)\n\t\t\treturn;\n\n\t\tconst value = view.getCellValue(row, column);\n\t\tconst text = this.getText(row, column);\n\t\tconst style = view.getStyle(row, column);\n\t\tconst css = style ? style.id : \"\";\n\n\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\tconst size = getTextSize(view, text, css);\n\t\t\tcurrentWidth = size.width;\n\t\t}\n\n\t\tconst zoom = view._zoom;\n\t\tif(view.getCellEditor(row, column))\n\t\t\tcurrentWidth += 18 * zoom;\n\t\tif(view.getCellFilter(row, column))\n\t\t\tcurrentWidth += 18 * zoom;\n\t\tif(/^=(checkbox|radio)\\(/i.test(value))\n\t\t\tcurrentWidth += 18 * zoom;\n\t\tif(style && style.props.wrap == \"wrap\" && currentWidth > columnWidth)\n\t\t\tcurrentWidth = columnWidth;\n\t\tif (currentWidth > width)\n\t\t\twidth = currentWidth;\n\t});\n\n\tgrid.setColumnWidth(column, width);\n}\n\nexport function adjustRow(row, view) {\n\tlet height = 25;\n\n\tview._table.eachColumn(function(column) {\n\t\tif(column != \"rowId\"){\n\t\t\tconst text = this.getText(row, column);\n\n\t\t\t// if there is text wrap in cell we need to know width to get correct height\n\t\t\tlet width = this.getColumnConfig(column).width;\n\t\t\tconst span = view._table.getSpan(row, column);\n\t\t\tif(span)\n\t\t\t\twidth = view._table.getSpanNode({row:span[0], column:span[1]}).offsetWidth;\n\n\t\t\tlet style = view.getStyle(row, column);\n\t\t\tlet css = style ? style.id : \"\";\n\n\t\t\tif (text.replace(/<\\/?[^>]+(>|$)/g, \"\")) {\n\t\t\t\tlet size = getTextSize(view, text, css, width);\n\t\t\t\tif (size.height > height) height = size.height;\n\t\t\t}\n\t\t}\n\t});\n\tview._table.setRowHeight(row, height);\n}\n\nexport function highlightColRow(start, end, view){\n\tif(!view._table.config.header) return;\n\n\tconst grid = view._table;\n\n\tconst css = \"webix_highlight\";\n\n\tlet sr = start.row, er = end.row, sc = start.column, ec = end.column;\n\n\tconst columns = grid.config.columns;\n\tconst firstColumn = columns[1].id;\n\n\tif(sc == \"rowId\"){\n\t\tif(sc == ec){\n\t\t\tstart.column = sc = firstColumn;\n\t\t\tend.column = ec = columns[ columns.length-1 ].id;\n\t\t}\n\t\telse\n\t\t\tstart.column = sc = firstColumn;\n\t}\n\telse if(ec == \"rowId\")\n\t\tend.column = ec = firstColumn;\n\n\tif(er<sr) [sr, er] = [er, sr];\n\tif(ec<sc) [sc, ec] = [ec, sc];\n\n\tgrid.eachRow(function(row){\n\t\tif(row < sr || row > er)\n\t\t\tgrid.removeCellCss(row, \"rowId\", css, true);\n\t\telse\n\t\t\tgrid.addCellCss(row, \"rowId\", css, true);\n\t});\n\twebix.delay(() => grid.refresh());\n\n\tgrid.eachColumn(function(col){\n\t\tconst node = grid.getHeaderNode(col);\n\t\tif(col == \"rowId\" || !node) return;\n\n\t\tif(col < sc || col > ec)\n\t\t\twebix.html.removeCss(node, css);\n\t\telse\n\t\t\twebix.html.addCss(node, css, true);\n\t});\n\n\tif(view.$$(\"navigation\")){\n\t\tlet range = \"\";\n\n\t\tif(sc && ec){\n\t\t\tif(!sr){\n\t\t\t\tconst order = grid.data.order;\n\t\t\t\tsr = order[0];\n\t\t\t\ter = order[order.length-1];\n\t\t\t}\n\t\t\trange = toRange(sr, sc, er, ec);\n\t\t\tconst cells = range.split(\":\");\n\t\t\tif(cells[0] == cells[1])\n\t\t\t\trange = cells[0];\n\t\t}\n\n\t\tview.$$(\"navigation\").setValue(range);\n\t}\n}","import {isDateInvalid} from \"../operations/formats\";\n\nfunction getText(text){\n\tvar locale = webix.i18n.spreadsheet.labels;\n\treturn locale[text] || text;\n}\nexport function getDefaultStyles(){\n\treturn [\n\t\t{name: getText(\"normal\"), css: \"webix_ssheet_condition_regular\"},\n\t\t{name: getText(\"neutral\"), css: \"webix_ssheet_condition_neutral\"},\n\t\t{name: getText(\"bad\"), css: \"webix_ssheet_condition_bad\"},\n\t\t{name: getText(\"good\"), css: \"webix_ssheet_condition_good\"}\n\t];\n}\n\nfunction isDate(value){\n\treturn value && !isNaN(value) && !isDateInvalid(value);\n}\n\nexport const conditions = {\n\tnumber:[\n\t\t{ id:\"greater\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 > b*1);\n\t\t}},\n\t\t{ id:\"less\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 < b*1);\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 >= b*1);\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a !== \"\" && (a*1 <= b*1);\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){ return a == b; }},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){ return a != b; }},\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}}\n\t],\n\ttext: [\n\t\t{ id:\"contains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) !== -1;\n\t\t}},\n\t\t{ id:\"notContains\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().indexOf(b.toString().toLowerCase()) === -1;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() === b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase() !== b.toString().toLowerCase();\n\t\t}},\n\t\t{ id:\"beginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) === 0;\n\t\t}},\n\t\t{ id:\"notBeginsWith\", batch:\"text\", handler:function(a,b){\n\t\t\treturn a.toString().toLowerCase().lastIndexOf(b.toString().toLowerCase(), 0) !== 0;\n\t\t}},\n\t\t{ id:\"endsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) !== -1;\n\t\t}},\n\t\t{ id:\"notEndsWith\", batch:\"text\", handler:function(a,b){\n\t\t\ta = a.toString();\n\t\t\tb = b.toString();\n\t\t\treturn a.toLowerCase().indexOf(b.toLowerCase(), a.length - b.length) === -1;\n\t\t}}\n\t],\n\tdate: [\n\t\t{ id:\"greater\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a > b;\n\t\t}},\n\t\t{ id:\"less\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a < b;\n\t\t}},\n\t\t{ id:\"greaterOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a >= b;\n\t\t}},\n\t\t{ id:\"lessOrEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a <= b;\n\t\t}},\n\t\t{ id:\"equal\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn isDate(a) && a == b;\n\t\t}},\n\t\t{ id:\"notEqual\", batch:\"datepicker\", handler: function(a, b){\n\t\t\treturn !isDate(a) || a != b;\n\t\t}},\n\t\t{ id:\"between\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", batch: \"daterangepicker\", handler: function(a, b){\n\t\t\tif (!isDate(a)) return false;\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]\n};\n\nexport const validationConditions = webix.copy(conditions);\nvalidationConditions.textLength = [\n\t{ id:\"greater\", handler: (a,b) => a.toString().length > b },\n\t{ id:\"less\", handler: (a,b) => a.toString().length < b },\n\t{ id:\"greaterOrEqual\", handler: (a,b) => a.toString().length >= b },\n\t{ id:\"lessOrEqual\", handler: (a,b) => a.toString().length <= b },\n\t{ id:\"equal\", handler: (a,b) => a.toString().length == b },\n\t{ id:\"notEqual\", handler: (a,b) => a.toString().length != b }\n];\nvalidationConditions.number = validationConditions.number.concat([\n\t{ id:\"between\", handler: function(a, b){\n\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t}},\n\t{ id:\"notBetween\", handler: function(a, b){\n\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t}}\n]);","import group from \"./undo_group\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {setSpanCss} from \"./spans\";\nimport {conditions} from \"../helpers/conditional\";\nimport {getType} from \"./types\";\nimport * as arr from \"../helpers/array\";\nimport {getSheet} from \"../sheets\";\n\nexport function init(view){\n\tview.conditions = {\n\t\t_empty:true,\n\t\t_pull: {},\n\t\thandlers: createRules(),\n\t\tadd: function(r, c, cond, val, style, page){\n\t\t\tadd.apply(this, [view, r, c, cond, val, style, page]);\n\t\t},\n\t\tupdate: function(r, c, data, page){\n\t\t\tupdate.apply(this, [view, r, c, data, page]);\n\t\t},\n\t\tremove: function(r, c, page){\n\t\t\tremove.apply(this, [view, r, c, page]);\n\t\t},\n\t\tget: function(r, c, page){\n\t\t\treturn get.apply(this, [view, r, c, page]);\n\t\t},\n\t\tparse: function(data, page){\n\t\t\tparse.apply(this, [view, data, page]);\n\t\t},\n\t\tserialize: function(page){\n\t\t\treturn serialize.apply(this, [view, page]);\n\t\t},\n\t\tclear: function(page){\n\t\t\tclear.apply(this, [view, page]);\n\t\t}\n\t};\n\n\tview.attachEvent(\"onConditionSet\", (data) => _setCondition(view, data));\n\n\tview.attachEvent(\"onUndo\", (type_action, row, column, value) => {\n\t\tif(type_action == \"condition\")\n\t\t\t_undoCondition(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", (data) => _serialize(view, data));\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\n\tview.attachEvent(\"onReset\", () => view.conditions.clear() );\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\treset(view);\n}\n\nfunction createRules(){\n\tconst rules = webix.copy(conditions);\n\trules.number = rules.number.concat([\n\t\t{ id:\"between\", handler: function(a, b){\n\t\t\treturn (!b.start || a > b.start) && (!b.end || a < b.end);\n\t\t}},\n\t\t{ id:\"notBetween\", handler: function(a, b){\n\t\t\treturn (!b.start || a <= b.start) || (!b.end || a >= b.end);\n\t\t}}\n\t]);\n\treturn rules;\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1), view._mPage.getContext());\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nfunction reset(view){\n\tview.conditions.clear();\n}\n\nfunction _setCondition(view, data){\n\tgroup.set(function(){\n\t\tview.eachSelectedCell((cell) => {\n\t\t\tconst collection = view.conditions.get(cell.row, cell.column);\n\t\t\tif(collection)\n\t\t\t\tfor (let i = 0; i < collection.length; i++)\n\t\t\t\t\tsetSpanCss(view, cell.row, cell.column, collection[i][2], false);\n\t\t\t_changeCondition(\"update\", cell.row, cell.column, (collection||null), data, view);\n\t\t});\n\t});\n\tview.refresh();\n}\n\nfunction _undoCondition(view, row, column, value){\n\tif(view.conditions.get(row, column))\n\t\tview.conditions.remove(row, column);\n\tif(value)\n\t\tview.conditions.update(row, column, value);\n}\n\nfunction _serialize(view, obj){\n\tobj.conditions = view.conditions.serialize();\n}\n\nfunction _parse(view, obj){\n\tview.conditions.parse(obj.conditions);\n}\n\nexport function getConditionCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif (!view.conditions._empty){\n\t\tconst collection = view.conditions.get(row, column);\n\t\tif(collection){\n\t\t\tconst span = view.$$(\"cells\").getSpan(row, column);\n\t\t\tlet value = view.getCellValue(row,column,false);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tvalue = \"\";\n\n\t\t\tlet type = getType(view, row, column);\n\t\t\tif(!type || type == \"string\")\n\t\t\t\ttype = \"text\";\n\n\t\t\tfor (let i = collection.length - 1; i >= 0; i--){\n\t\t\t\tlet currentValue = value;\n\t\t\t\tconst rule = collection[i][0];\n\t\t\t\tconst handlers = view.conditions.handlers;\n\t\t\t\tlet handler;\n\n\t\t\t\tlet checkOrder = [\"text\", type, \"number\", \"date\"];\n\t\t\t\tcheckOrder = checkOrder.filter((v, i) => checkOrder.indexOf(v) == i);\n\n\t\t\t\tfor(let k = 0; k < checkOrder.length; k++){\n\t\t\t\t\tconst checkType = checkOrder[k];\n\n\t\t\t\t\thandler = arr.find(handlers[checkType], obj => obj.id == rule);\n\t\t\t\t\tif(handler){\n\t\t\t\t\t\thandler = handler.handler;\n\t\t\t\t\t\tif(checkType == \"text\" && rule != \"equal\" && rule != \"notEqual\")\n\t\t\t\t\t\t\tcurrentValue = rendered;\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tlet compare = collection[i][1];\n\t\t\t\tif(webix.isArray(compare))\n\t\t\t\t\tcompare = {\n\t\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t\t};\n\t\t\t\telse\n\t\t\t\t\tcompare = getCellValue(view, compare);\n\n\t\t\t\tif(!css && handler && handler(currentValue, compare)){\n\t\t\t\t\tcss = collection[i][2];\n\t\t\t\t\tif(!span)\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], true);\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tsetSpanCss(view, row, column, collection[i][2], false);\n\t\t\t}\n\t\t}\n\t}\n\treturn css;\n}\n\n\nfunction addEmptyCollection(pull, row, column, state){\n\tstate._empty = false;\n\tif(!pull[row])\n\t\tpull[row] = {};\n\tif(!pull[row][column])\n\t\tpull[row][column] = [];\n\treturn pull[row][column];\n}\n\n\nfunction parse(view, data, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet)\n\t\t\tsheet.content.conditions = data;\n\t}\n\telse{\n\t\t//backward compatibility\n\t\tconst oldConditions = {\n\t\t\t\">\": \"greater\",\n\t\t\t\"<\": \"less\",\n\t\t\t\"=\": \"equal\",\n\t\t\t\"!=\": \"notEqual\",\n\t\t\t\"<>\": \"between\"\n\t\t};\n\n\t\tthis._empty = true;\n\t\tif (!data) return;\n\n\t\tlet i = data.length;\n\t\twhile(i--){\n\t\t\tconst c = data[i];\n\t\t\tconst collection = addEmptyCollection(this._pull,c[0],c[1],this);\n\t\t\tc[2] = oldConditions[ c[2] ] || c[2];\n\t\t\tcollection.push([c[2],c[3],c[4]]);\n\t\t}\n\t}\n}\n\nfunction clear(view, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet)\n\t\t\tsheet.content.conditions = [];\n\t}\n\telse\n\t\tthis._pull = {};\n}\n\nfunction update(view, row, column, newData, page){\n\tnewData.map(item => _normalizeValue(view, item));\n\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tremove(view, row, column, page);\n\n\t\t\tif(!sheet.content.conditions)\n\t\t\t\tsheet.content.conditions = [];\n\n\t\t\tnewData.forEach(condition => {\n\t\t\t\tsheet.content.conditions.push([row, column, ...condition]);\n\t\t\t});\n\t\t}\n\t}\n\telse{\n\t\taddEmptyCollection(this._pull, row, column, this);\n\t\tthis._pull[row][column] = newData;\n\t}\n}\n\nfunction get(view, row, column, page){\n\tlet condition;\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.conditions){\n\t\t\tconst conditions = webix.copy(sheet.content.conditions);\n\t\t\tlet index;\n\t\t\tlet conditionArr = [];\n\t\t\twhile((index = arr.findIndex(conditions, condition => condition[0] == row && condition[1] == column)) != -1){\n\t\t\t\tconditionArr.push(conditions[index].slice(2,5));\n\t\t\t\tconditions.splice(index, 1);\n\t\t\t}\n\t\t\tif(conditionArr.length)\n\t\t\t\tcondition = conditionArr;\n\t\t}\n\t}\n\telse if(this._pull[row] && this._pull[row][column])\n\t\tcondition = this._pull[row][column] || null;\n\treturn condition || null;\n}\n\nfunction add(view, row, column, condition, value, style, page){\n\tconst newCondition = _normalizeValue(view, [condition, value, style]);\n\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.conditions)\n\t\t\t\tsheet.content.conditions = [];\n\t\t\tsheet.content.conditions.push([row, column, ...newCondition]);\n\t\t}\n\t}\n\telse\n\t\taddEmptyCollection(this._pull, row, column, this).push(newCondition);\n}\n\nfunction remove(view, row, column, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.conditions){\n\t\t\tlet index;\n\t\t\twhile((index = arr.findIndex(sheet.content.conditions, condition => condition[0] == row && condition[1] == column)) != -1){\n\t\t\t\tsheet.content.conditions.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\telse{\n\t\tconst collection = this.get(row, column);\n\t\tif(collection)\n\t\t\tdelete this._pull[row][column];\n\t}\n}\n\nfunction serialize(view, page){\n\tlet data = [];\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.conditions)\n\t\t\tdata = sheet.content.conditions;\n\t}\n\telse{\n\t\tfor(let row in this._pull)\n\t\t\tfor(let column in this._pull[row])\n\t\t\t\tfor(let i = 0; i < this._pull[row][column].length; i++){\n\t\t\t\t\tconst condition = this._pull[row][column][i];\n\t\t\t\t\tdata.push([row, column, condition[0], condition[1], condition[2]]);\n\t\t\t\t}\n\t}\n\treturn data;\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet conditions = data.conditions,\n\t\ti = conditions.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = conditions[i];\n\t\t\tif(name == \"row\" && row>= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete lock mark if row was deleted\n\t\t\t\t\t\tconditions.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tconditions[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tconditions.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tconditions[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function clearConditionalFormats(view, range, page){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tconst condition = view.conditions.get(cell.row, cell.column, page);\n\t\t\tif(condition)\n\t\t\t\t_changeCondition(\"remove\", cell.row, cell.column, condition, null, view, page);\t\t\t\t\n\t\t});\n\t\tview.refresh();\n\t});\n}\n\nexport function pasteCondition(view, extra, row, col, cutted){\n\tconst condition = extra.condition;\n\tconst collection = view.conditions.get(row,col);\n\t_changeCondition(\"update\", row, col, (collection||null), condition, view);\n\tif(cutted === 1)\n\t\t_changeCondition(\"remove\", extra.row, extra.col, condition, null, view);\n}\n\nexport function _changeCondition(name, row, column, oldCondition, newCondition, view, page){\n\tif (view.callEvent(\"onBeforeConditionSet\", [row, column, oldCondition, newCondition, page])){\n\t\tview.conditions[name].apply(view.conditions, [row, column, name == \"remove\" ? page : newCondition]);\n\t\tview.callEvent(\"onAfterConditionSet\", [row, column, oldCondition, newCondition, page]);\n\t}\n}\n\nfunction _normalizeValue(view, condition){\n\tconst val = condition[1];\n\tif(val[0] == \"=\")\n\t\tcondition[1] = view._mData.getStore().parse(val).source; //fixes formula\n\treturn condition;\n}","import {getSheet} from \"../sheets\";\nimport {findIndex, find} from \"../helpers/array\";\nimport {validationConditions} from \"../helpers/conditional\";\nimport {setSpanCss} from \"./spans\";\nimport {getType} from \"./types\";\nimport group from \"./undo_group\";\n\nexport function init(view){\n\tview.validation = {\n\t\thandlers: webix.copy(validationConditions),\n\t\tget: (row, column, page) => get(view, row, column, page),\n\t\tadd: (row, column, rule, page) => add(view, row, column, rule, false, page),\n\t\tremove: (row, column, page) => remove(view, row, column, false, page),\n\t\thighlight: (state, page) => highlight(view, state, page),\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"validation\")\n\t\t\tundo(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"highlight-invalid-data\")\n\t\t\tview.validation.highlight(true);\n\t\telse if(action.id == \"remove-highlight-invalid-data\")\n\t\t\tview.validation.highlight();\n\t\telse if(action.id == \"remove-cell-validation\")\n\t\t\tgroup.set(()=> view.eachSelectedCell(cell => view.validation.remove(cell.row, cell.column)));\n\t});\n\n\tview.attachEvent(\"onDataSerialize\", data => [data.validation, data.table.highlightInvalid] = serialize(view));\n\tview.attachEvent(\"onDataParse\", data => parse(view, data));\n\tview.attachEvent(\"onReset\", () => {\n\t\tview.validation._pull = {};\n\t\tview.validation._highlight = false;\n\t});\n\tview.attachEvent(\"onChange\", ()=> showValidationPopup(view));\n\tview.$$(\"cells\").attachEvent(\"onSelectChange\", () => showValidationPopup(view));\n}\n\nfunction serialize(view){\n\tconst pull = view.validation._pull;\n\tconst data = [];\n\tfor(let row in pull)\n\t\tfor(let column in pull[row])\n\t\t\tdata.push([row, column, pull[row][column]]);\n\treturn [data, view.validation._highlight ? 1 : 0];\n}\n\nfunction parse(view, data){\n\tconst validation = data.validation;\n\tif(validation)\n\t\tfor(let i = 0; i < validation.length; i++){\n\t\t\tconst item = validation[i];\n\t\t\tif(!view.validation._pull[item[0]])\n\t\t\t\tview.validation._pull[item[0]] = {};\n\t\t\tview.validation._pull[item[0]][item[1]] = item[2];\n\t\t}\n\tif(data.table && data.table.highlightInvalid)\n\t\tview.validation._highlight = true;\n\t\n}\n\nfunction get(view, row, column, page){\n\tlet validation;\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.validation){\n\t\t\tvalidation = find(sheet.content.validation, validation => validation[0] == row && validation[1] == column);\n\t\t\tif(validation)\n\t\t\t\tvalidation = validation[2];\n\t\t}\n\t}\n\telse if(view.validation._pull[row] && view.validation._pull[row][column])\n\t\tvalidation = view.validation._pull[row][column];\n\treturn validation || null;\n}\n\nfunction add(view, row, column, validation, silent, page){\n\tpage = page || view.getActiveSheet();\n\tconst oldValue = get(view, row, column, page);\n\n\tif(page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(!sheet.content.validation)\n\t\t\tsheet.content.validation = [];\n\n\t\tif(oldValue)\n\t\t\tfind(sheet.content.validation, validation => validation[0] == row && validation[1] == column)[2] = validation;\n\t\telse\n\t\t\tsheet.content.validation.push([row, column, validation]);\n\t}\n\telse{\n\t\tif(!view.validation._pull[row])\n\t\t\tview.validation._pull[row] = {};\n\n\t\tview.validation._pull[row][column] = validation;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"validation\", {row, column, newValue:validation, value:oldValue, page}]);\n}\n\nfunction highlight(view, state, page){\n\tpage = page || view.getActiveSheet();\n\tif(page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(!sheet.content.table)\n\t\t\tsheet.content.table = {};\n\t\tif(state == \"toggle\")\n\t\t\tstate = !sheet.content.table.highlightInvalid;\n\t\telse\n\t\t\tstate = !!state;\n\t\tsheet.content.table.highlightInvalid = state ? 1 : 0;\n\t}\n\telse{\n\t\tif(state == \"toggle\")\n\t\t\tview.validation._highlight = !view.validation._highlight;\n\t\telse\n\t\t\tview.validation._highlight = !!state;\n\t\tview.refresh();\n\t}\n}\n\nfunction remove(view, row, column, silent, page){\n\tpage = page || view.getActiveSheet();\n\n\tconst old = get(view, row, column, page);\n\tif(old){\n\t\tif(page != view.getActiveSheet()){\n\t\t\tconst validation = getSheet(view, page).content.validation;\n\t\t\tconst index = findIndex(validation, validation => validation[0] == row && validation[1] == column);\n\t\t\tvalidation.splice(index, 1);\n\t\t}\n\t\telse{\n\t\t\tdelete view.validation._pull[row][column];\n\t\t\tview.$$(\"cells\").updateItem(row, column);\n\t\t}\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"validation\", {row, column, newValue: null, value: old, page}]);\n\t}\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet validation = data.validation,\n\t\ti = validation.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = validation[i];\n\t\t\tif(row && name == \"row\" && row >= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete rule if row was deleted\n\t\t\t\t\t\tvalidation.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update position if upper row was deleted\n\t\t\t\t\t\tvalidation[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tvalidation.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tvalidation[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction undo(view, row, column, value){\n\tif(get(view, row, column))\n\t\tremove(view, row, column, true);\n\tif(value)\n\t\tadd(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.validation._pull = {};\n}\n\nfunction getCellValue(view, value){\n\tif(isNaN(value*1)){\n\t\tif (value.charAt(0) == \"=\" && value.length > 1){\n\t\t\tvalue = view._mData.getStore().exec(value.substring(1), view._mPage.getContext());\n\t\t\tif(value === null)\n\t\t\t\tvalue = \"\";\n\t\t}\n\t}\n\telse {\n\t\tvalue = value*1;\n\t}\n\treturn value;\n}\n\nexport function isInvalid(view, row, column, rendered, page){\n\tlet invalid = false;\n\tconst rule = view.validation.get(row, column, page);\n\tif(rule){\n\t\tconst type = rule.type;\n\n\t\tlet value;\n\t\tif(!webix.isUndefined(rendered) && (type == \"text\" || type == \"textLength\"))\n\t\t\tvalue = rendered;\n\t\telse\n\t\t\tvalue = view.getCellValue(row, column, false, page);\n\n\t\tif(value === \"\")\n\t\t\treturn !!rule.ignoreEmpty;\n\n\t\tlet compare = rule.value;\n\t\tif(compare){\n\t\t\tif(webix.isArray(compare))\n\t\t\t\tcompare = {\n\t\t\t\t\tstart: getCellValue(view, compare[0]),\n\t\t\t\t\tend: getCellValue(view, compare[1])\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcompare = getCellValue(view, compare);\n\t\t}\n\n\t\tconst handlers = view.validation.handlers[type];\n\t\tif(handlers){\n\t\t\tconst handler = find(handlers, obj => obj.id == rule.condition).handler;\n\t\t\tif(!handler(value, compare)) invalid = true;\n\t\t}\n\n\t\tif(!invalid)\n\t\t\tswitch(type){\n\t\t\t\tcase \"number\":\n\t\t\t\t\tif(rule.integer && parseInt(value) != value)\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"date\":\n\t\t\t\t\tif(getType(view, row, column, page) != \"date\")\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"range\":\n\t\t\t\t\tif(!(webix.isArray(compare) && compare.indexOf(value) != -1))\n\t\t\t\t\t\tinvalid = true;\n\t\t\t\t\tbreak;\n\t\t\t}\n\t}\n\treturn invalid;\n}\n\nexport function getValidationCss(view, row, column, rendered){\n\tlet css = \"\";\n\n\tif(view.validation._highlight && isInvalid(view, row, column, rendered))\n\t\tcss = \"webix_ss_invalid_data\";\n\n\tconst span = view.$$(\"cells\").getSpan(row, column);\n\tif(span)\n\t\tsetSpanCss(view, row, column, \"webix_ss_invalid_data\", !!css);\n\n\treturn css;\n}\n\nfunction showValidationPopup(view){\n\tif(view._commentSel)\n\t\treturn;\n\n\tlet sel = view.getSelectedId(true);\n\tlet popup = view.validation._inputMessage;\n\tif(!view._context && sel && sel.length == 1){\n\t\tsel = sel[0];\n\t\tconst row = sel.row;\n\t\tconst col = sel.column;\n\n\t\tconst validation = view.validation.get(row, col);\n\t\tif(validation && validation.inputMessage){\n\t\t\tif(!popup){\n\t\t\t\tpopup = view.validation._inputMessage = webix.ui({\n\t\t\t\t\tview: \"popup\",\n\t\t\t\t\tcss: \"ssheet_validation_input_message\",\n\t\t\t\t\tminWidth:150,\n\t\t\t\t\tminHeight:50,\n\t\t\t\t\theight:100,\n\t\t\t\t\twidth:250,\n\t\t\t\t\tresize:true,\n\t\t\t\t\tbody:{\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\ttemplate: \" \"\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tview._destroy_with_me.push(popup);\n\t\t\t}\n\t\t\tpopup.getBody().setHTML(validation.inputMessage);\n\n\t\t\tconst grid = view.$$(\"cells\");\n\t\t\tconst span = grid.getSpan(row, col);\n\t\t\tconst item = span ? {row, column:(span[1]*1+span[2]-1)} : sel;\n\n\t\t\treturn popup.show(grid.getItemNode(item), {pos: \"bottom\"});\n\t\t}\n\t}\n\tif(popup)\n\t\tpopup.hide();\n}\n\nexport function pasteValidation(view, extra, row, col, cutted){\n\tconst validation = extra.validation;\n\n\tview.validation.add(row, col, validation);\n\tif (cutted === 1)\n\t\tview.validation.remove(extra.row, extra.col);\n}","import {getSheet} from \"../sheets\";\nimport {isCell, adress, range as getRange, escapeSheet} from \"../helpers/column_names\";\n\nfunction error(view, silent){\n\tif(!silent)\n\t\tview.alert({\n\t\t\ttype: \"alert-error\",\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"error-link\"]\n\t\t});\n\treturn false;\n}\n\nexport function showCells(view, ref, silent) {\n\ttry {\n\t\tlet r1, r2, c1, c2, sheet;\n\n\t\tlet cellRef = ref.split(\"!\");\n\t\tswitch(cellRef.length){\n\t\t\tcase 1:\n\t\t\t\t[cellRef] = cellRef;\n\t\t\t\tbreak;\n\t\t\tcase 2:{\n\t\t\t\t[sheet, cellRef] = cellRef;\n\t\t\t\tconst escaped = sheet[0] == \"'\" && sheet[sheet.length - 1] == \"'\";\n\t\t\t\tif(!escaped && sheet != escapeSheet(sheet))\n\t\t\t\t\treturn error(view, silent);\n\t\t\t\tbreak;\n\t\t\t}\n\t\t\tdefault:\n\t\t\t\treturn error(view, silent);\n\t\t}\n\n\t\tif(isCell(cellRef))\n\t\t\t[r1, c1] = adress(cellRef);\n\t\telse{\n\t\t\tconst rangePos = getRange(ref, view);\n\t\t\tif(rangePos)\n\t\t\t\t[r1, c1, r2, c2, sheet] = rangePos;\n\t\t\telse\n\t\t\t\treturn error(view, silent);\n\t\t}\n\n\t\tif(sheet){\n\t\t\tsheet = sheet.replaceAll(\"'\", \"\");\n\t\t\tif(!getSheet(view, sheet))\n\t\t\t\treturn error(view, silent);\n\t\t\tif(sheet != view.getActiveSheet())\n\t\t\t\tview.showSheet(sheet);\n\t\t}\n\n\t\tconst grid = view.$$(\"cells\");\n\t\tgrid.showCell(r1, c1);\n\t\tgrid.addSelectArea(\n\t\t\t{ row: r1, column: c1 },\n\t\t\t{ row: r2 || r1, column: c2 || c1 }\n\t\t);\n\n\t\treturn true;\n\t}\n\tcatch(err){\n\t\treturn error(view, silent);\n\t}\n}","import group from \"./undo_group\";\nimport {find, findIndex} from \"../helpers/array\";\nimport {setSpanCss} from \"../operations/spans\";\n\nexport const lockCss = \"webix_lock\";\n\nexport function init(view){\n\tview.attachEvent(\"onUndo\", (type, row, column, mode) => {\n\t\tif (type === \"lock\") lockCell(view, row, column, !!mode, true);\n\t});\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"lock-cell\"){\n\t\t\tconst block = view.$$(\"cells\").getSelectArea();\n\t\t\tif (block){\n\t\t\t\tconst mode = isCellLocked(view, block.start.row, block.start.column);\n\t\t\t\tlockCell(view, block.start, block.end, !mode);\n\t\t\t}\n\t\t}\n\t});\n}\n\nexport function lockCell(view, row, column, mode, silent, pageName, innerCall){\n\tif (typeof row === \"object\" && typeof column === \"object\")\n\t\tgroup.set(()=>{\n\t\t\tconst start = row, end = column;\n\t\t\tfor (let r = start.row; r <= end.row; r++)\n\t\t\t\tfor (let c = start.column; c <= end.column; c++)\n\t\t\t\t\tlockCell(view, r, c, mode, true, pageName, true);\n\t\t});\n\telse{\n\t\tmode = mode === false ? false : true;\n\n\t\tconst activeSheet = view.getActiveSheet();\n\t\tif(!pageName)\n\t\t\tpageName = activeSheet;\n\n\t\tif(pageName != activeSheet){\n\t\t\tconst page = find(view._sheets, sheet => sheet.name == pageName);\n\t\t\tif(page){\n\t\t\t\tconst locked = page.content.locked; \n\t\t\t\tif(locked){\n\t\t\t\t\tconst locked = page.content.locked;\n\t\t\t\t\tconst index = findIndex(locked, cell => cell[0] == row && cell[1] == column);\n\t\t\t\t\tif(mode){\n\t\t\t\t\t\tif(index == -1)\n\t\t\t\t\t\t\tlocked.push([row, column]);\n\t\t\t\t\t}\n\t\t\t\t\telse if(index != -1)\n\t\t\t\t\t\tlocked.splice(index, 1);\n\t\t\t\t}\n\t\t\t\telse if(!locked && mode)\n\t\t\t\t\tpage.content.locked = [[row, column]];\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tsetSpanCss(view, row, column, lockCss, mode);\n\n\t\tconst cell = (pageName == activeSheet ? view._mPage : view._mData.getPage(pageName)).getCell(row-1, column-1, true);\n\t\tcell.$locked = mode;\n\t}\n\n\tif(!innerCall)\n\t\tview.callEvent(\"onAction\", [\"lock\", { row, column, value: !mode, newValue: mode, page: pageName }]);\n\n\tif (!silent)\n\t\tview.$$(\"cells\").refresh();\n}\n\nexport function isCellLocked(view, row, column, page){\n\tconst activeSheet = view.getActiveSheet();\n\tif(!page)\n\t\tpage = activeSheet;\n\tconst cell = (page == activeSheet ? view._mPage : view._mData.getPage(page)).getCell(row-1, column-1);\n\treturn cell && cell.$locked;\n}\n\nexport function load(view, data){\n\tconst locked = data.locked;\n\tif(locked)\n\t\tfor(let i = 0; i < locked.length; i++)\n\t\t\tlockCell(view, locked[i][0], locked[i][1], true, true);\n}","import * as cop from \"./operations/column_operations\";\nimport {getConditionCss} from \"./operations/conditional_formats\";\nimport {getValidationCss} from \"./operations/validation\";\nimport * as nms from \"./helpers/column_names\";\nimport * as fmt from \"./operations/formats\";\nimport {showCells} from \"./operations/show_cells\";\nimport {getMathTemplate, htmlMath} from \"./mathematics/methods\";\nimport {getPrintBordersCss} from \"./operations/print\";\nimport {getHighlightValue, removeOldHighlight} from \"./helpers/highlight\";\nimport {isCellLocked, lockCss} from \"./operations/lock_cell\";\n\nexport function init(view, extra){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tvar datatable = {\n\t\tview:\"datatable\", id:\"cells\", css:\"webix_ssheet_table webix_data_border wss_\"+view.$index,\n\t\theaderRowHeight: webix.skin.$name == \"contrast\" || webix.skin.$name == \"flat\" ? 24 : 20,\n\t\tspans: true,\n\t\tleftSplit: 1,\n\t\tareaselect:true,\n\t\tminColumnWidth:40,\n\t\teditable:true,\n\t\teditaction:(extra.liveEditor ? \"custom\" : \"dblclick\"),\n\t\tminRowHeight:1,\n\t\tnavigation:true,\n\t\tonClick:{ \n\t\t\t\"webix_ssheet_ref\" : event => {\n\t\t\t\tconst ref = event.target.getAttribute(\"data-ref\").replaceAll(\"&#x27;\", \"'\");\n\t\t\t\tif(showCells(view, ref))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tif (extra)\n\t\tdatatable = webix.extend(datatable, extra, true);\n\n\treturn datatable;\n}\n\nfunction ready(view){\n\tvar grid = view._table;\n\n\tvar showCommentHandler = webix.event(document.body, \"pointermove\", function(){\n\t\tvar thread;\n\t\treturn function(e) {\n\t\t\tif (e.pointerType !== \"mouse\") return;\n\n\t\t\tclearTimeout(thread);\n\t\t\tthread = webix.delay(function(e){\n\t\t\t\tif(view.comments._activeComment.editStatus)\n\t\t\t\t\treturn;\n\n\t\t\t\tvar cell = grid.locate(e);\n\t\t\t\tvar visible = view.comments.commentsView && view.comments.commentsView.isVisible();\n\n\t\t\t\tif(cell && view.comments.get(cell.row, cell.column)){\n\t\t\t\t\tvar activeCell = view.comments._activeComment.cell;\n\t\t\t\t\tif((activeCell && (activeCell.row != cell.row || activeCell.column != cell.column)) || !visible)\n\t\t\t\t\t\tview.callEvent(\"onCommand\",[{id: \"add-comment\", cell, viewonly: true }]);\n\t\t\t\t}\n\t\t\t\telse if(visible && !view.comments.commentsView.$view.contains(e.target))\n\t\t\t\t\tview.callEvent(\"onCommentHide\", []);\n\t\t\t}, true, [e], 250);\n\t\t};\n\t}());\n\n\t//in grid math\n\tif (view.config.math){\n\t\tgrid.config.editMath = true;\n\t}\n\n\t//saving value after edit\n\tgrid.attachEvent(\"onBeforeEditStop\", (st, ed) => {\n\t\tgrid.$anyKey = false;\n\t\tconst old = view.getCellValue(ed.row, ed.column);\n\t\t//ignore empty cells\n\t\tif (old === \"\" && st.value === \"\") return;\n\n\t\tif (st.value != old){\n\t\t\tview.setCellValue(ed.row, ed.column, st.value);\n\t\t\tgrid.refresh();\n\t\t}\n\t\tst.value = st.old;\n\t});\n\n\tgrid.attachEvent(\"onEnter\", function(ev){\n\t\tif (grid.getEditor()){\n\t\t\twebix.delay(function(){\n\t\t\t\tgrid.moveSelection(\"down\");\n\t\t\t});\n\t\t}\n\t\twebix.html.preventEvent(ev);\n\t});\n\n\t//prevent editing of locked cells\n\tview.attachEvent(\"onBeforeEditStart\", (row, column) => !isCellLocked(view, row, column));\n\tgrid.attachEvent(\"onAfterEditStart\", ({row, column}) => {\n\t\tlet v = view.getCellValue(row, column);\n\n\t\tif(grid.$anyKey){\n\t\t\tgrid.$anyKey = false;\n\t\t\tv = \"\";\n\t\t}\n\n\t\tgrid.getEditor().setValue(v);\n\t});\n\tgrid.attachEvent(\"onBeforeEditStart\", (editor) => \n\t\tview.callEvent(\"onBeforeEditStart\", [editor.row, editor.column]) );\n\n\t//column drag event checking\n\tlet dragStartColumn;\n\tlet dragEndColumn;\n\n\t//column and row selection\n\tgrid.attachEvent(\"onBeforeSelect\", (id) => id.column != \"rowId\" );\n\tgrid.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tcop.highlightColRow(\n\t\t\tfinalStep ? start : webix.copy(start),\n\t\t\tfinalStep ? end : webix.copy(end),\n\t\t\tview\n\t\t);\n\t});\n\n\tfunction highlightHeaders(){\n\t\tlet ids = grid.getSelectedId(true);\n\t\tif(ids.length){\n\t\t\tlet start = ids[0];\n\t\t\tlet end = ids[ids.length-1]?ids[ids.length-1]:ids[0];\n\t\t\tcop.highlightColRow(start, end, view);\n\t\t}\n\t\telse {\n\t\t\tlet data = {row:0, column:0};\n\t\t\tcop.highlightColRow(data, data, view);\n\t\t}\n\t}\n\n\tgrid.attachEvent(\"onSelectChange\", () => highlightHeaders());\n\tgrid.attachEvent(\"onAfterColumnShow\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\tgrid.attachEvent(\"onColumnResize\", () => {\n\t\twebix.delay(() => highlightHeaders());\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousedown\", e => {\n\t\tconst resizeColumn = grid.config.resizeColumn;\n\t\tconst col = grid.locate(e);\n\n\t\tif(col && col.cind){\n\t\t\tif(resizeColumn){\n\t\t\t\tconst dx = grid.getColumnConfig(col.column).width;\n\t\t\t\tconst pos = webix.html.posRelative(e);\n\t\t\t\tif(pos.x < resizeColumn.size || dx-pos.x < resizeColumn.size+1)\n\t\t\t\t\treturn;\n\t\t\t}\n\t\t\tdragStartColumn = col.cind;\n\t\t}\n\t});\n\n\twebix.event(grid.$view.firstChild, \"mousemove\", e => {\n\t\tif(dragStartColumn){\n\t\t\tconst col = grid.locate(e);\n\n\t\t\tif(col){\n\t\t\t\tdragEndColumn = col.cind;\n\t\t\t\tcop.highlightColRow(\n\t\t\t\t\t{column: grid.columnId(dragStartColumn)},\n\t\t\t\t\t{column: grid.columnId(dragEndColumn||1)},\n\t\t\t\t\tview\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t});\n\n\tconst selectColumnHandler = webix.event(document.body, \"mouseup\", () => {\n\t\tif(dragStartColumn){\n\t\t\tif(dragEndColumn != null){\n\t\t\t\tcop.selectColumn(\n\t\t\t\t\tgrid.columnId(dragStartColumn),\n\t\t\t\t\tview,\n\t\t\t\t\tgrid.columnId(dragEndColumn||1)\n\t\t\t\t);\n\t\t\t\tdragEndColumn = null;\n\t\t\t}\n\t\t\tdragStartColumn = null;\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onItemDblClick\", (id) => {\n\t\tif (id.column === \"rowId\")\n\t\t\tcop.adjustRow(id.row, view);\n\t});\n\n\tlet lastHeaderClick = 0;\n\tgrid.attachEvent(\"onHeaderClick\", (id, e) => {\n\t\tif(id.column == \"rowId\"){\n\t\t\tcop.selectAll(view);\n\t\t\treturn;\n\t\t}\n\t\tlet headerClick = new Date();\n\t\tlet dblClick = (headerClick - lastHeaderClick <= 300);\n\n\t\tif (dblClick) {\n\t\t\tcop.adjustColumn(id.column, view);\n\t\t} else {\n\t\t\tlastHeaderClick = headerClick;\n\t\t\tif (e.shiftKey) {\n\t\t\t\tcop.selectColumns(id.column, view);\n\t\t\t} else {\n\t\t\t\tcop.selectColumn(id.column, view);\n\t\t\t}\n\t\t}\n\t});\n\n\t//select rows by shift click\n\tvar lastClickedRow = null;\n\tgrid.attachEvent(\"onItemClick\", (cell, e) => {\n\t\tif (cell.column === \"rowId\") {\n\t\t\tif (!e.shiftKey)\n\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\telse {\n\t\t\t\tif (!lastClickedRow)\n\t\t\t\t\tcop.selectRow(cell.row, view);\n\t\t\t\telse\n\t\t\t\t\tcop.selectRow(lastClickedRow, view, cell.row);\n\t\t\t}\n\t\t\tlastClickedRow = cell.row;\n\t\t}\n\t});\n\n\t//reset API\n\tview.attachEvent(\"onReset\", () => reset(view));\n\n\tview.attachEvent(\"onBeforeSheetShow\", () => grid.editStop());\n\n\tgrid.attachEvent(\"onBlur\", function(){\n\t\t//after focus moved out, check and if it is somewhere\n\t\t//on the spreadsheet controls them move focus back to datatable\n\t\twebix.delay(function(){\n\t\t\tconst target = document.activeElement;\n\n\t\t\tif (target && target.tagName == \"INPUT\") return;\n\n\t\t\tconst focus = webix.UIManager.getFocus();\n\t\t\tconst need_focus = focus &&\n\t\t\t\t!focus.config.saveFocus &&\n\t\t\t\tfocus != grid &&\n\t\t\t\tfocus.getTopParentView &&\n\t\t\t\tfocus.getTopParentView() === view;\n\n\t\t\tif (need_focus)\n\t\t\t\twebix.UIManager.setFocus(grid);\n\n\t\t}, this, [], 100);\n\t});\n\n\tgrid.attachEvent(\"onMoveSelection\", (cell, mode, details) => {\n\t\tif(cell.column == \"rowId\" && (mode == \"left\" && details.ctrl ||  mode == \"top\" ))\n\t\t\tcell.column = 1;\n\t});\n\n\tsetDefaultCss(view);\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\twebix.eventRemove(showCommentHandler);\n\t\twebix.eventRemove(selectColumnHandler);\n\t});\n\n\tif(!view.config.liveEditor){\n\t\tgrid.attachEvent(\"onAfterEditStart\", obj => editHighlight(view.getCellValue(obj.row, obj.column), view));\n\t\tgrid.attachEvent(\"onLiveEdit\", state => editHighlight(state.value, view));\n\t\tgrid.attachEvent(\"onAfterEditStop\", () => grid.refresh());\n\t}\n}\n\nfunction editHighlight(value, view){\n\tconst grid = view.$$(\"cells\");\n\tremoveOldHighlight(view);\n\n\tgetHighlightValue(view, value, null, true);\n\n\tview._highlightRefresh = true;\n\tgrid.refresh();\n\tdelete view._highlightRefresh;\n}\n\nexport function cell_template(view, obj, common, _v, column, valueOnly){\n\tconst xssSafe = view.config.xssSafe;\n\tconst formulasMode = view.$$(\"cells\").config.showFormulas && !valueOnly;\n\tlet escape;\n\n\tconst col = column.id;\n\tconst row = obj.id;\n\n\tif (!view._mPage) return \"\";\n\tconst cell = view._mPage.getCell(row-1, col-1);\n\n\tlet value = \"\";\n\tif(cell && (cell.value || cell.value === 0))\n\t\tvalue = cell.value;\n\n\tconst format = cell ? cell.format : \"\";\n\n\tconst math = view.getCellValue(row, col);\n\n\tconst highlightRefresh = view._highlightRefresh;\n\tconst editor = view.$$(\"liveEditor\");\n\n\tif (!(editor || highlightRefresh))\n\t\tremoveOldHighlight(view);\n\n\tif(formulasMode){\n\t\tconst sel = view.getSelectedId();\n\t\tif(!view.$$(\"cells\").getEditor() && sel && sel.row == row && sel.column == col && typeof math == \"string\" && math[0]==\"=\" && math.length > 1){\n\t\t\tvalue = getHighlightValue(view, math, null, !editor && !highlightRefresh);\n\n\t\t\tif(!editor && !highlightRefresh && Object.keys(view._highlightedCells).length){\n\t\t\t\tview._highlightRefresh = true;\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tview.refresh();\n\t\t\t\t\tdelete view._highlightRefresh;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tvalue = math;\n\t\t\tescape = true;\n\t\t}\n\t}\n\n\tif(math != value){\n\t\tconst locale = webix.i18n.spreadsheet.table;\n\t\tswitch (value){\n\t\t\tcase \"#REF!\":\n\t\t\t\tvalue = locale[\"math-ref-error\"];\n\t\t\t\tbreak;\n\t\t\tcase \"#ERROR\":\n\t\t\t\tvalue = locale[\"math-error\"];\n\t\t\t\tbreak;\n\t\t\tcase \"#XSS!\":\n\t\t\t\tvalue = locale[\"math-xss-error\"];\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tvalue = getMathTemplate(view, math, value);\n\t\t}\t\n\t}\n\n\tif(xssSafe && !formulasMode){\n\t\t// don't escape =IMAGE(), but escape =IMAGE()&\"...\"\n\t\tlet isHTML;\n\t\tif(math[0] == \"=\" && math.length > 1){\n\t\t\tfor(let i = 0; i < htmlMath.length; i++){\n\t\t\t\tconst start = `=${htmlMath[i]}(`;\n\t\t\t\tif(math.indexOf(start) == 0){\n\t\t\t\t\tlet quotes = false;\n\t\t\t\t\tlet bracketLvl = 1;\n\t\t\t\t\tfor(let j = start.length; j < math.length; j++)\n\t\t\t\t\t\tif(math[j] == \"\\\"\") quotes = !quotes;\n\t\t\t\t\t\telse if(!quotes){\n\t\t\t\t\t\t\tif(math[j] == \"(\") bracketLvl++;\n\t\t\t\t\t\t\telse if(math[j] == \")\")\n\t\t\t\t\t\t\t\tif(!--bracketLvl){\n\t\t\t\t\t\t\t\t\tisHTML = j == math.length-1;\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif(!isHTML)\n\t\t\tescape = true;\n\t}\n\n\tlet css = \"\";\n\tconst text = (typeof value == \"string\" && (value.trim()[0] == \"+\" || /^0[xob][0-9a-f]+$/i.test(value))) || (!value && value !== 0) || isNaN(value);\n\tconst invalidDate = !formulasMode && fmt.checkFormat(view, format, \"date\") && fmt.isDateInvalid(value);\n\n\tlet extra = \"\";\n\tif (!valueOnly){\n\t\textra += view.comments.get(row, col) ? \"<div class='ssheet_commented_sign'></div>\" : \"\";\n\t\textra += view.getCellFilter(row, col) ? \"<div class='ssheet_filter_sign'></div>\" : \"\";\n\t}\n\n\t//text can be formatted only in case of string number format\n\tif(!formulasMode && !invalidDate && (typeof value == \"boolean\" || !text || fmt.checkFormat(view, format, \"string\"))){\n\t\tif (format){\n\t\t\tconst cell = { css:\"\" };\n\t\t\tconst helper = fmt.getFormat(view, format);\n\t\t\tif (helper){\n\t\t\t\tconst newValue = helper(value, cell);\n\n\t\t\t\tif(newValue != webix.i18n.spreadsheet.table[\"format-error\"]){\n\t\t\t\t\tif (cell.css)\n\t\t\t\t\t\tcss = `class=\"${cell.css}\"`;\n\t\t\t\t\tvalue = newValue;\n\t\t\t\t\tif(xssSafe && [\"price\", \"int\", \"percent\", \"date\", \"string\"].indexOf(format) == -1) // no need to escape default formats\n\t\t\t\t\t\tescape = true;\n\t\t\t\t}\n\t\t\t\telse if(!text)\n\t\t\t\t\tvalue *= 1;\n\t\t\t}\n\t\t}\n\t\telse\n\t\t\tvalue *= 1;\n\t}\n\n\t//print only cell values (td with position:relative ignores borders while printing)\n\tif(view._print && !(value || value === 0))\n\t\treturn \"\";\n\n\tif(webix.isUndefined(value) || value === null)\n\t\tvalue = \"\";\n\telse if(escape)\n\t\tvalue = webix.template.escape(value);\n\n\treturn `<div ${css}>${value}</div>${view._print ? \"\" : extra}`;\n}\n\nexport function reset(view){\n\tconst grid = view.$$(\"cells\");\n\tgrid.clearAll();\n\n\tconst columns = view.config.columnCount;\n\tconst rows = view.config.rowCount;\n\n\tconst cols = [{\n\t\tid:\"rowId\",\n\t\theader:\"\",\n\t\twidth:40,\n\t\tcss:\"sheet_column_0\",\n\t\ttemplate:(el) => {\n\t\t\treturn el.id;\n\t\t}\n\t}];\n\n\tfor (let i=1; i<=columns; i++){\n\t\tcols.push({\n\t\t\tid:i,\n\t\t\teditor:\"text\",\n\t\t\theader:{\n\t\t\t\ttext: nms.encode[i]\n\t\t\t},\n\t\t\tliveEdit: view.config.liveEditor === false,\n\t\t\ttemplate:function(obj, common, value, column){\n\t\t\t\treturn cell_template(view, obj, common, value, column);\n\t\t\t},\n\t\t\tcssFormat:function(value, obj, row, column){\n\t\t\t\tconst rendered = getRenderedValue(view, row, column);\n\t\t\t\tconst cell = view._mPage.getCell(row-1, column-1);\n\n\t\t\t\tlet css = cell ? (cell.style || \"\") : \"\";\n\n\t\t\t\tconst conditional = getConditionCss(view, row, column, rendered);\n\t\t\t\tif(conditional)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + conditional;\n\n\t\t\t\tconst print = getPrintBordersCss(view, row, column);\n\t\t\t\tif(print)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + print;\n\n\t\t\t\tconst validation = getValidationCss(view, row, column, rendered);\n\t\t\t\tif(validation)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + validation;\n\n\t\t\t\tconst locked = isCellLocked(view, row, column) ? lockCss : \"\";\n\t\t\t\tif(locked)\n\t\t\t\t\tcss += (css ? \" \" : \"\") + locked;\n\n\t\t\t\treturn css;\n\t\t\t}\n\t\t});\n\t\tview.callEvent(\"onColumnInit\",[cols[i]]);\n\t}\n\tgrid.refreshColumns(cols);\n\n\tconst data = [];\n\tfor (let i=1; i<=rows; i++)\n\t\tdata.push({ id:i });\n\n\tgrid.parse(data);\n}\n\nexport function getRenderedValue(view, row, col){\n\tconst htmlFilter = /<[^>]*>/gi;\n\treturn cell_template(view, {id: row}, null, null, {id: col}, true).replace(htmlFilter, \"\");\n}\n\n// nowrap by default\nfunction setDefaultCss(view){\n\twebix.html.addStyle(\"#\"+view._table.$view.id+\".webix_dtable .webix_cell { white-space:nowrap;}\");\n}","import group from \"./operations/undo_group\";\nimport {selectAll} from \"./operations/column_operations\";\nimport {styleFormats} from \"./toolbar/buttons\";\n\nexport function init(view){\n\tconst grid = view.$$(\"cells\");\n\tconst key = webix.env.isMac ? \"command\" : \"ctrl\";\n\n\twebix.UIManager.addHotKey(key+\"-a\", () => { if(!grid.getEditor()) selectAll(view); }, grid);\n\twebix.UIManager.addHotKey(key+\"-p\", (v, e) => dialog(\"print\", view, e), grid);\n\twebix.UIManager.addHotKey(key+\"-f\", (v, e) => dialog(\"find\", view, e), grid);\n\twebix.UIManager.addHotKey(key+\"-h\", (v, e) => dialog(\"find\", view, e), grid);\n\n\twebix.UIManager.addHotKey(key+\"-add\", (v, e) => zoom(view, \"in\", e), grid);\n\twebix.UIManager.addHotKey(key+\"-=\", (v, e) => zoom(view, \"in\", e), grid);\n\twebix.UIManager.addHotKey(key+\"-subtract\", (v, e) => zoom(view, \"out\", e), grid);\n\twebix.UIManager.addHotKey(key+\"-0\", (v, e) => zoom(view, 1, e), grid);\n\twebix.UIManager.addHotKey(key+\"-`\", () => view.showFormulas(\"toggle\"), grid);\n\n\tconst scrollZoom = webix.event(grid.$view, \"wheel\", function(e){\n\t\tif (e.ctrlKey || e.metaKey) \n\t\t\tzoom(view, e.deltaY < 0 ? \"in\" : \"out\", e);\n\t});\n\tview.attachEvent(\"onDestruct\", () => webix.eventRemove(scrollZoom));\n\n\tif(!view.config.readonly){\n\t\twebix.UIManager.addHotKey(\"any\", (view, ev) => {\n\t\t\tconst code = ev.which || ev.keyCode;\n\t\t\tconst f2 = code == 113;\n\n\t\t\t//ignore shift key, f1, f3 - f12 (f2 - edit)\n\t\t\tif (code == 16 || (code >= 112 && code <= 123 && !f2)) return;\n\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && f2))\n\t\t\t\t\tgrid.$anyKey = true;\n\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"enter\", (view) => {\n\t\t\tconst sel = view.getSelectedId(true);\n\t\t\tif (sel.length){\n\t\t\t\tif(!(view.config.liveEditor && !grid.callEvent(\"onBeforeLiveEditor\", [sel[0]])))\n\t\t\t\t\tgrid.edit(sel[0]);\n\t\t\t}\n\t\t}, grid);\n\n\t\twebix.UIManager.addHotKey(\"backspace\", () => del(view), grid);\n\t\twebix.UIManager.addHotKey(\"delete\", () => del(view), grid);\n\n\t\tconst redo = webix.env.isMac ? \"command-shift-z\" : \"ctrl-y\";\n\t\twebix.UIManager.addHotKey(redo, () => view.redo(), grid);\n\t\twebix.UIManager.addHotKey(key+\"-z\", () => view.undo(), grid);\n\n\t\twebix.UIManager.addHotKey(key+\"-b\", () => styleHotKey(view, \"font-weight\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-i\", () => styleHotKey(view, \"font-style\"), grid);\n\t\twebix.UIManager.addHotKey(key+\"-u\", (v, e) => ctrlU(view, e), grid);\n\n\t\tconst strike = webix.env.isMac ? \"command-shift-x\" : \"ctrl-alt-s\";\n\t\twebix.UIManager.addHotKey(strike, () => styleHotKey(view, \"strike\"), grid);\n\t}\n}\n\nfunction del(view) {\n\tif(!view.$$(\"cells\").getEditor())\n\t\tgroup.set(function(){\n\t\t\tview.eachSelectedCell((cell) => view.setCellValue(cell.row,cell.column, \"\"));\n\t\t\tview.refresh();\n\t\t});\n}\n\nfunction zoom(view, value, e) {\n\tview.zoom(value);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction ctrlU(view, e) {\n\tstyleHotKey(view, \"underline\");\n\treturn webix.html.preventEvent(e);\n}\n\nfunction dialog(id, view, e) {\n\tview.callEvent(\"onCommand\",[{id}]);\n\treturn webix.html.preventEvent(e);\n}\n\nfunction styleHotKey(view, attr) { \n\tvar cell = view.getSelectedId();\n\tif(cell){\n\t\tvar style = view.getStyle(cell.row, cell.column);\n\n\t\tvar elementOn = styleFormats[attr]||attr;\n\t\tvar elementOff = \"normal\";\n\n\t\tvar state = (style && style.props[attr] === elementOn)? elementOff : elementOn;\n\t\tview.callEvent(\"onStyleSet\", [attr, state]);\n\t}\n}","import {getMethods} from \"@xbs/muon\";\nimport {methodsWithCategories, mathCategories} from \"./mathematics/methods\";\nimport {prepareSheet} from \"./helpers/highlight\";\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tconst locale = webix.i18n.spreadsheet.liveEditor;\n\tconst hideCategoryFilter = !mathCategories.length;\n\n\treturn {\n\t\tview:\"toolbar\",\n\t\tcss:\"webix_ssheet_toolbar\",\n\t\telements:[\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\ticon: \"wxi-menu-down\",\n\t\t\t\ton: {\n\t\t\t\t\tonItemClick: function(){\n\t\t\t\t\t\tconst suggest = webix.$$(this.config.suggest);\n\t\t\t\t\t\tif(!suggest.isVisible())\n\t\t\t\t\t\t\tsuggest.show(this.getInputNode());\n\t\t\t\t\t},\n\t\t\t\t\tonChange: (val, oldVal, config) => {\n\t\t\t\t\t\tif(config == \"user\" && val !== \"\")\n\t\t\t\t\t\t\tview.showCell(val);\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tsuggest: {\n\t\t\t\t\tview:\"ssheet-suggest-labels\",\n\t\t\t\t\tcss: \"webix_ssheet_nav_suggest\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\ttemplate: \"<span class='webix_ssheet_left'>#name#</span><span class='webix_ssheet_right'>#value#</span>\",\n\t\t\t\t\t\twidth: 250\n\t\t\t\t\t},\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonBeforeShow: function(){\n\t\t\t\t\t\t\tconst data = view.ranges.serialize(view.getActiveSheet()).map(r => ({name: r[0], value: r[1]}));\n\n\t\t\t\t\t\t\tif(!data.length)\n\t\t\t\t\t\t\t\treturn false;\n\n\t\t\t\t\t\t\tconst list = this.getList();\n\t\t\t\t\t\t\tlist.clearAll();\n\t\t\t\t\t\t\tlist.parse(data);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\tdata: []\n\t\t\t\t},\n\t\t\t\twidth: 150,\n\t\t\t\tid: \"navigation\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"ssheet-separator\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"label\",\n\t\t\t\tlabel:locale[\"edit\"],\n\t\t\t\twidth:65\n\t\t\t},\n\t\t\t{\n\t\t\t\tview: \"button\",\n\t\t\t\tid:\"formulaButton\",\n\t\t\t\tlabel: \"f(x)\",\n\t\t\t\tautowidth:true,\n\t\t\t\tpopup: {\n\t\t\t\t\tview: \"popup\",\n\t\t\t\t\ton:{\n\t\t\t\t\t\tonBeforeShow: function() {\n\t\t\t\t\t\t\tif(!view.getSelectedId()) return false;\n\t\t\t\t\t\t\twebix.delay(()=>{\n\t\t\t\t\t\t\t\tconst [category, search, , list] = this.getBody().getChildViews();\n\n\t\t\t\t\t\t\t\tcategory.setValue(\"\");\n\n\t\t\t\t\t\t\t\tsearch.focus();\n\t\t\t\t\t\t\t\tsearch.setValue(\"\");\n\n\t\t\t\t\t\t\t\tif(list.unselect) list.unselect();\n\t\t\t\t\t\t\t\tlist.scrollTo(0,0);\n\t\t\t\t\t\t\t\tlist.filter();\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonHide: function(){\n\t\t\t\t\t\t\tview.$$(\"liveEditor\").focus();\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\twidth: 250,\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tpadding: 10,\n\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t{ view: \"richselect\", label: locale[\"category\"], hidden: hideCategoryFilter,\n\t\t\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t\t\t{id: \"\", value: \"\", $empty:true},\n\t\t\t\t\t\t\t\t\t{id: \"common\", value: locale[\"common\"]},\n\t\t\t\t\t\t\t\t\t...mathCategories.map(id => ({id, value: locale[id]||id}))\n\t\t\t\t\t\t\t\t],\n\t\t\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\t\t\tfilterFormulaSuggest(this.getParentView().getChildViews());\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"text\", label: locale[\"search\"], on:{\n\t\t\t\t\t\t\t\tonTimedKeyPress: function(){\n\t\t\t\t\t\t\t\t\tfilterFormulaSuggest(this.getParentView().getChildViews());\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t{ height: webix.skin.$active.inputPadding },\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"list\",\n\t\t\t\t\t\t\t\tsaveFocus: true, //don't move focus to spreadsheet table\n\t\t\t\t\t\t\t\tscroll:\"y\",\n\t\t\t\t\t\t\t\tdata: getMethods(),\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonItemClick: function (id) {\n\t\t\t\t\t\t\t\t\t\tinsertFormula(view, this, id);\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonKeyPress: function(code){\n\t\t\t\t\t\t\t\t\t\tif(code == 27)\n\t\t\t\t\t\t\t\t\t\t\tthis.hide();\n\t\t\t\t\t\t\t\t\t\telse if(code == 13){\n\t\t\t\t\t\t\t\t\t\t\tconst sel = this.getSelectedId();\n\t\t\t\t\t\t\t\t\t\t\tif(sel)\n\t\t\t\t\t\t\t\t\t\t\t\tinsertFormula(view, this, sel);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"live-editor\",\n\t\t\t\tdisabled:true,\n\t\t\t\tid:\"liveEditor\",\n\t\t\t\tsuggestData: getMethods()\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction filterFormulaSuggest(views){\n\tlet [category, search, , list] = views;\n\n\tsearch = search.getValue();\n\tcategory = category.getValue();\n\n\tlist.filter(obj => {\n\t\tconst checkSearch = obj.value.toLowerCase().indexOf(search.toLowerCase()) !== -1;\n\n\t\tlet checkCategory = true;\n\t\tif(category){\n\t\t\tif(category == \"common\")\n\t\t\t\tcheckCategory = !methodsWithCategories[obj.value];\n\t\t\telse\n\t\t\t\tcheckCategory = methodsWithCategories[obj.value] == category;\n\t\t}\n\n\t\treturn checkSearch && checkCategory; \n\t});\n\tlist.scrollTo(0,0);\n}\n\nexport function fillEditor(view, cell, clear){\n\tconst editor = view.$$(\"liveEditor\");\n\tif(!(editor && cell)) return;\n\tconst disabled = disableEditor(view, cell.row, cell.column);\n\teditor.config.activeCell = cell;\n\teditor.setValue( clear ? \"\" : editor.getCellValue(cell.row, cell.column) );\n\n\tif(!view._rangeDialog)\n\t\tview.$handleSelection = disabled ? null : (a,b,st,en)=> pasteRange(view, st, en, a, b);\n\n\treturn !disabled;\n}\n\nfunction disableEditor(view, row, column){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst disabled = view.getCellEditor(row, column) || view.isCellLocked(row, column);\n\tif(disabled)\n\t\teditor.disable();\n\telse\n\t\teditor.enable();\n\treturn disabled;\n}\n\nfunction pasteRange(view, st, en, start, end){\n\tconst span = view.$$(\"cells\").getSpan(start.row, start.column);\n\n\tif(span && start.row+span[3]*1-1 == end.row && start.column+span[2]*1-1 == end.column)\n\t\ten = st;\n\n\tconst editor = view.$$(\"liveEditor\");\n\tconst updateRange = editor._update_range;\n\tlet cursor = editor.getInputNode().selectionStart;\n\n\tlet sheet = \"\";\n\tif(editor._activeMath){\n\t\tconst activeSheet = view.getActiveSheet();\n\t\tif(editor._activeMath != activeSheet)\n\t\t\tsheet = prepareSheet(activeSheet);\n\t}\n\n\tlet range;\n\tif(st == en){\n\t\tconst colon = editor.getValue()[ (updateRange ? updateRange.pos : cursor)-1 ] == \":\";\n\t\trange = colon ? st : sheet+st;\n\t}\n\telse\n\t\trange = `${sheet+st}:${en}`;\n\n\tif(updateRange && updateRange.pos == cursor - updateRange.len){\n\t\teditor.setRange(range, true);\n\t\tcursor = editor._update_range.pos + range.length;\n\t}\n\telse if(editor.expectOperator()){\n\t\teditor.setRange(range);\n\t\tcursor += range.length;\n\t}\n\telse\n\t\treturn endEdit(view, start);\n\n\teditor.focus();\n\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\teditor.paintValue();\n\n\treturn false;\n}\n\nfunction endEdit(view, st){\n\tconst editor = view.$$(\"liveEditor\");\n\tif (editor.isEnabled()){\n\t\tconst cell = editor.config.activeCell;\n\t\teditor.showActiveSheet();\n\t\teditor.updateCellValue(cell);\n\t\teditor.setValue(st ? view.getCellValue(st.row, st.column) : \"\");\n\t}\n\treturn true;\n}\n\nfunction insertFormula(view, table, id){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst formula = table.getItem(id).value;\n\tconst value = editor.getValue();\n\n\tlet newValue = formula + \"(\";\n\n\tif(value.indexOf(\"=\") == 0)\n\t\tnewValue = value + (editor.expectOperator(true) ? \"\" : \"+\") + newValue;\n\telse\n\t\tnewValue = \"=\" + newValue;\n\n\ttable.getParentView().hide();\n\teditor.setValue(newValue);\n}\n\nfunction ready(view){\n\tconst editor = view.$$(\"liveEditor\");\n\tconst nav = view.$$(\"navigation\");\n\tconst grid = view._table;\n\n\t//block native editor, and move focus to the custom input\n\t//edit by key press\n\tgrid.attachEvent(\"onBeforeEditStart\", function(cell){\n\t\tconst mode = grid.$anyKey;\n\t\tgrid.$anyKey = false;\n\n\t\treturn startEdit(this, cell, mode);\n\t});\n\t//edit by enter key\n\tgrid.attachEvent(\"onBeforeLiveEditor\", function(cell){\n\t\treturn startEdit(this, cell, false);\n\t});\n\t//edit by dbl-click\n\tgrid.attachEvent(\"onItemDblClick\", function(cell){\n\t\tif(cell.column != \"rowId\"){\n\t\t\tif(view.getCellEditor(cell.row, cell.column))\n\t\t\t\tthis.edit(cell);\n\t\t\telse\n\t\t\t\tstartEdit(this, cell, false);\n\t\t}\n\t});\n\n\tgrid.attachEvent(\"onAfterScroll\", function(){\n\t\tif(editor.$view.contains(document.activeElement))\n\t\t\teditor.paintValue();\n\t});\n\n\tview.attachEvent(\"onCellChange\", (r,c,v,p) => {\n\t\tif(p == view.getActiveSheet()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif (cell && cell.row == r && cell.column == c)\n\t\t\t\teditor.setValue(v);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterSelect\", data => {\n\t\tif (!view.$handleSelection)\n\t\t\tfillEditor(view, data[0]);\n\t});\n\n\tview.attachEvent(\"onChange\", mode => {\n\t\tif (mode == \"update\" && editor.isEnabled()){\n\t\t\tconst cell = editor.config.activeCell;\n\t\t\tif(cell && editor.getValue() != view.getCellValue(cell.row, cell.column)){\n\t\t\t\tdelete editor._update_range;\n\t\t\t\teditor.showActiveSheet();\n\t\t\t\teditor.updateCellValue();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onBeforeSheetShow\", name => {\n\t\tif(view._rangeDialog)\n\t\t\treturn;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(cell){\n\t\t\tconst cursor = editor.getInputNode().selectionStart;\n\t\t\tconst val = editor.getValue();\n\t\t\tif(view.getCellValue(cell.row, cell.column) != val){\n\t\t\t\tif(!editor._activeMath)\n\t\t\t\t\teditor._activeMath = view.getActiveSheet();\n\t\t\t\twebix.delay(()=>{\n\t\t\t\t\tif(name == editor._activeMath){\n\t\t\t\t\t\tview.$handleSelection = null;\n\t\t\t\t\t\tconst cell = editor.config.activeCell;\n\t\t\t\t\t\tgrid.select(cell.row, cell.column);\n\t\t\t\t\t}\n\n\t\t\t\t\teditor.setValue(val);\n\t\t\t\t\t//update highlight\n\t\t\t\t\teditor.refresh();\n\n\t\t\t\t\teditor.getInputNode().setSelectionRange(cursor, cursor);\n\n\t\t\t\t\t//editor.setValue calls grid refresh to update connected cells highlight, which breaks paintValue so we use delay\n\t\t\t\t\twebix.delay(()=>editor.paintValue());\n\n\t\t\t\t\tview.$handleSelection = function(a,b,st,en){ return pasteRange(view, st, en, a, b); };\n\t\t\t\t});\n\t\t\t}\n\t\t\telse{\n\t\t\t\tnav.setValue(\"\");\n\t\t\t\tclearEditor();\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onReset\", () => {\n\t\tif(!view._rangeDialog)\n\t\t\tview.$handleSelection = null;\n\t});\n\tview.$$(\"cells\").attachEvent(\"onFocus\", ()=>{\n\t\t//ignore table clipboard logic\n\t\tif(editor._activeMath){\n\t\t\twebix.delay(()=>editor.focus());\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterLoad\", () => clearEditor());\n\n\tview.attachEvent(\"onAction\", function(name, options){\n\t\tif (options.page && options.page != view.getActiveSheet()) return;\n\t\tconst cell = editor.config.activeCell;\n\t\tif(name == \"paste\")\n\t\t\treturn fillEditor(view, cell);\n\t\tconst isActiveCell = cell && cell.row == options.row && cell.column == options.column;\n\t\tif(isActiveCell && (name == \"lock\" || name == \"dropdown\"))\n\t\t\tdisableEditor(view, options.row, options.column);\n\t});\n\n\tview.attachEvent(\"onFormatChange\", (r, c, f, of, p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\tupdateEditor(r, c);\n\t});\n\tview.attachEvent(\"onCellChange\", (r, c, v , p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\tupdateEditor(r, c);\n\t});\n\n\tfunction updateEditor(row, column){\n\t\tconst activeCell = editor.config.activeCell;\n\t\tif(activeCell && activeCell.row == row && activeCell.column == column)\n\t\t\tfillEditor(view, {row, column});\n\t}\n\n\tfunction startEdit(table, cell, clear){\n\t\t//do not interfere with custom editors\n\t\tif (!view.getCellEditor(cell.row, cell.column) && fillEditor(view, cell, clear)){\n\t\t\teditor.focus();\n\n\t\t\tif(!clear){\n\t\t\t\teditor.paintValue();\n\n\t\t\t\tconst input = editor.getInputNode();\n\t\t\t\tconst symbols = input.value.length;\n\t\t\t\tinput.setSelectionRange(symbols, symbols);\n\t\t\t}\n\t\t\treturn false;\n\t\t}\n\t\treturn true;\n\t}\n\n\tfunction clearEditor(){\n\t\teditor.define({activeCell:null});\n\t\teditor.setValue(\"\");\n\t\teditor.disable();\n\t}\n}\n","import \"../views/formlate\";\n\nexport class Dialog{\n\tconstructor(view){\n\t\tthis.view = view;\n\t}\n\t$init(){}\n\t$show(){}\n\t$hide(){}\n\topen(){\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=> {\n\t\t\t\tthis.$hide();\n\t\t\t\twebix.UIManager.setFocus(this.view);\n\t\t\t});\n\t\t\tthis.$dialog.attachEvent(\"onShow\", ()=> {\n\t\t\t\twebix.UIManager.setFocus(this.$dialog);\n\t\t\t});\n\t\t}\n\t\telse if(this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst form = this.$dialog.getBody();\n\t\tthis.$dialog.show();\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\tclose(){\n\t\tthis.$dialog.hide();\n\t}\n}","export function image(url){\n\treturn `=IMAGE(\"${url}\")`;\n}\n\nexport function chart(config){\n\tconfig = webix.copy(config);\n\n\tconst bar = config.type == \"bar\";\n\tif(bar && config.horizontal)\n\t\tconfig.type = \"barH\";\n\n\tlet result = `=SPARKLINE(${config.range},\"${config.type}\"`;\n\tif (bar)\n\t\tresult += `,\"${config.color}\",\"${config.negativeColor}\"`;\n\telse if(config.color)\n\t\tresult += `,\"${config.color}\"`;\n\treturn result+\")\";\n}\n\nexport function parseImage(value){\n\tif (value && typeof value == \"string\" && value.indexOf(\"=IMAGE(\") === 0)\n\t\treturn {\n\t\t\turl: unescape(value.substr(7, value.length-8))\n\t\t};\n}\n\nexport function parseChart(value){\n\tif (value && typeof value == \"string\" && value.indexOf(\"=SPARKLINE(\") === 0){\n\t\tlet text = value.substr(11, value.length-12).split(\",\");\n\t\tconst result = {\n\t\t\trange: text[0],\n\t\t\ttype: unescape(text[1]),\n\t\t\tcolor: unescape(text[2]),\n\t\t\tnegativeColor: unescape(text[3])\n\t\t};\n\n\t\tif(result.type == \"barH\"){\n\t\t\tresult.type = \"bar\";\n\t\t\tresult.horizontal = 1;\n\t\t}\n\n\t\treturn result;\n\t}\n}\n\nfunction unescape(text){\n\tif (!text) return \"\";\n\n\ttext = text.trim();\n\tif (text[0] === \"\\\"\") \n\t\ttext = text.substr(1);\n\tif (text[text.length-1] === \"\\\"\")\n\t\ttext = text.substr(0, text.length-1);\n\treturn text;\n}","import {Dialog} from \"./common\";\nimport {parseImage} from \"../mathematics/writer\";\n\nexport const action = \"add-image-cell\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseImage(value);\n\t\tif (data && data.url)\n\t\t\tform.elements.url.setValue(data.url);\n\n\t\tform.elements.url.focus();\n\t}\n\t$init(){\n\t\tconst save = this.view.config.save;\n\t\tconst server = (save && save.images) || null;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"image-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"image-url\"], on:{\n\t\t\t\t\t\t\"onChange\":(image) => this.showPreview(image)\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"label\", label:webix.i18n.spreadsheet.labels[\"image-or\"], align: \"center\"},\n\t\t\t\t\t{ view:\"uploader\", label:webix.i18n.spreadsheet.labels[\"image-upload\"], upload:server, on:{\n\t\t\t\t\t\tonBeforeFileAdd: function(file){\n\t\t\t\t\t\t\tif (!this.config.upload){\n\t\t\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\t\t\treader.onload = (e) => this.getFormView().elements.url.setValue(e.target.result);\n\t\t\t\t\t\t\t\treader.readAsDataURL(file.file);\n\t\t\t\t\t\t\t\treturn false;\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tthis.getFormView().elements.preview.setHTML(\"\");\n\t\t\t\t\t\t},\n\t\t\t\t\t\tonFileUpload: function(item, response){\n\t\t\t\t\t\t\tthis.getFormView().elements.url.setValue(response.imageURL);\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless: true, css: \"webix_ssheet_preview\", template:\"\", height:50 }\n\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.cell;\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tthis.view.addImage(cell.row, cell.column, image);\n\t\tthis.close();\n\t}\n\tfillUrl(url){\n\t\tif (!/^[/]|((https?:\\/|data:image)\\/)/i.test(url))\n\t\t\turl = \"http://\" + url;\n\t\treturn url;\n\t}\n\tshowPreview(image){\n\t\tif (image){\n\t\t\timage = webix.template.escape(this.fillUrl(image));\n\t\t\tthis.$dialog.queryView(\"form\").elements.preview.setHTML(\"<img class='webix_ssheet_cimage' src='\"+image+\"'></img>\");\n\t\t}\n\t}\n}","import * as box from \"./imagecell\";\n\nexport const action = \"add-image-top\";\n\nexport class DialogBox extends box.DialogBox{\n\topen(action){\n\t\tthis.config = action.config;\n\t\tthis.viewid = action.viewid;\n\n\t\tthis.view.callEvent(\"onUIEditStart\", [this.viewid, \"image\"]);\n\n\t\tbox.DialogBox.prototype.open.apply(this, arguments);\n\t}\n\t$hide(){\n\t\tthis.view.callEvent(\"onUIEditStop\", [this.viewid, \"image\"]);\n\t\tthis.config = this.viewid = null;\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\t\tif(this.$dialog && this.$dialog.isVisible() && type != \"image\")\n\t\t\t\tthis.close();\n\t\t});\n\n\t\tthis.view.attachEvent(\"onCommand\", obj =>{\n\t\t\tif(obj.id == \"close-ui-editor\" && this.$dialog && this.$dialog.isVisible())\n\t\t\t\tthis.close();\n\t\t});\n\n\t\treturn box.DialogBox.prototype.$init.apply(this, arguments);\n\t}\n\t$show(box, form){\n\n\t\tform.elements.preview.setHTML(\"\");\n\t\tform.elements.url.setValue(\"\");\n\n\t\tif(this.config && this.config.data)\n\t\t\tform.elements.url.setValue(this.config.data);\n\n\t\tform.elements.url.focus();\n\t}\n\tokClick(){\n\t\tconst image = this.fillUrl(this.$dialog.getBody().elements.url.getValue());\n\t\tif(this.viewid)\n\t\t\tthis.view.views.update(this.viewid, image);\n\t\telse{\n\t\t\tconst id = this.view.views.add(null, null, \"image\", image);\n\t\t\tthis.view.views.highlight(id);\n\t\t}\n\t\tthis.close();\n\t}\n}","import {isCellLocked} from \"./lock_cell\";\nimport group from \"./undo_group\";\n\n\nvar ignoreUndoReset = false;\n\nexport function init(view){\n\treset(view);\n\tundoHandlers(view);\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\tview.attachEvent(\"onAfterSheetShow\", () => reset(view));\n\t// styles\n\tview.attachEvent(\"onBeforeStyleChange\", (row, column, nstyle, ostyle) =>{\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"style\", row:row, column: column, value: ostyle, newValue: nstyle, group: group.value});\n\t});\n\t// editing\n\tview.attachEvent(\"onBeforeValueChange\", (row, column, nvalue, ovalue, page) => {\n\t\tif (isCellLocked(view, row, column, page)) return false;\n\t\tif(page == view.getActiveSheet())\n\t\t\taddToHistory(view, {action: \"value\", row:row, column: column, value: ovalue, newValue: nvalue, group: group.value});\n\t});\n\t// merge cells\n\tview.attachEvent(\"onBeforeSpan\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"span\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// split cells\n\tview.attachEvent(\"onBeforeSplit\", (row, column, value) => {\n\t\tif (isCellLocked(view, row, column)) return false;\n\t\taddToHistory(view, {action: \"split\", row:row, column: column, value: value, newValue:value, group: group.value});\n\t});\n\t// Any abstract undo actions\n\tview.attachEvent(\"onAction\", (action, obj) => {\n\t\tif(!(obj.page && obj.page != view.getActiveSheet()))\n\t\t\taddToHistory(\n\t\t\t\tview,\n\t\t\t\t{\n\t\t\t\t\taction,\n\t\t\t\t\trow: obj.row || null,\n\t\t\t\t\tcolumn: obj.column || null,\n\t\t\t\t\tvalue: webix.isUndefined(obj.value) ? null : obj.value,\n\t\t\t\t\tnewValue: webix.isUndefined(obj.newValue) ? null : obj.newValue,\n\t\t\t\t\textra: obj.extra || null,\n\t\t\t\t\tgroup: group.value\n\t\t\t\t}\n\t\t\t);\n\t});\n\n\t// column resize\n\tview.$$(\"cells\").attachEvent(\"onColumnResize\", (column, nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"c-resize\", row:0, column:column, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\t// column hide\n\tview.attachEvent(\"onColumnOperation\", (action, start, end, page) => {\n\t\tif(page == view.getActiveSheet() && action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action:{id: action, group:\"column\"}, group: group.value, column: {\n\t\t\t\tstart: { column:start }, end: { column:end }\n\t\t\t}});\n\t});\n\t// row hide\n\tview.attachEvent(\"onRowOperation\", (action, start, end, page) => {\n\t\tif(page == view.getActiveSheet() && action !== \"add\" && action !== \"del\")\n\t\t\taddToHistory(view, { action: {id: action, group:\"row\"}, group: group.value, row: {\n\t\t\t\tstart: {row: start}, end: {row: end}\n\t\t\t}});\n\t});\n\t// row resize\n\tview.$$(\"cells\").attachEvent(\"onRowResize\", (row,  nvalue, ovalue) =>\n\t\taddToHistory(view, {action: \"r-resize\", row: row, column:0, value: ovalue, newValue: nvalue, group: group.value})\n\t);\n\n\t// condition formats\n\tview.attachEvent(\"onBeforeConditionSet\", (row, column, value, nvalue, page) => {\n\t\tif(isCellLocked(view, row, column, page)) return false;\n\t\tif(page == view.getActiveSheet()){\n\t\t\tvalue = value ? webix.copy(value) : null;\n\t\t\taddToHistory(view, {action: \"condition\", row, column, value, newValue: nvalue, group: group.value});\n\t\t}\n\t});\n\n\t// zoom\n\tview.attachEvent(\"onZoom\", (value, oldVal, page) => {\n\t\tif(page == view.getActiveSheet())\n\t\t\taddToHistory(view, {action: \"zoom\", value: oldVal, newValue: value, group: group.value});\n\t});\n\n\tview.$skipHistory = 0;\n}\n\nexport function undo(view){\n\trestoreHistory(view,-1);\n}\n\nexport function redo(view){\n\trestoreHistory(view,1);\n}\n\nexport function reset(view){\n\tif(!ignoreUndoReset){\n\t\tview._ssUndoHistory = [];\n\t\tview._ssUndoCursor = -1;\n\t}\n}\n\nfunction addToHistory(view, data){\n\tif(!view.$skipHistory && !view._loading_data){\n\t\t// remove futher history\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t\t// add to an array and increase cursor\n\t\tview._ssUndoHistory.push(data);\n\t\tview._ssUndoCursor++;\n\t}\n}\n\nexport function ignoreUndo(func, view){\n\tview.$skipHistory++;\n\ttry{\n\t\tfunc.call(view);\n\t}\n\tfinally {\n\t\tview.$skipHistory--;\n\t}\n}\n\nexport function ignoreReset(func){\n\tignoreUndoReset = true;\n\tfunc();\n\tignoreUndoReset = false;\n}\n\nfunction restoreHistory(view, step){\n\tvar data = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\tif(data){\n\t\tvar value = step > 0 ? data.newValue : data.value;\n\t\tvar direction = step>0;\n\t\tvar params = [data.action, data.row, data.column, value, direction, data.extra];\n\n\t\tview._ssUndoCursor += step;\n\n\t\t// group support\n\t\tvar group = data.group;\n\t\tvar prevData = view._ssUndoHistory[step>0?(view._ssUndoCursor+step):view._ssUndoCursor];\n\n\t\tignoreUndo(function(){\n\t\t\tview.callEvent(\"onUndo\", params);\n\t\t\tif (!group || !(prevData && group == prevData.group)){\n\t\t\t\tview.refresh();\n\t\t\t\tview.callEvent(\"onAfterUndo\", []);\n\t\t\t}\n\t\t},view);\n\n\t\tif(prevData && group && group == prevData.group){\n\t\t\trestoreHistory(view, step);\n\t\t}\n\t}\n}\n\nfunction undoHandlers(view){\n\tview.attachEvent(\"onUndo\", function(type, row, column, value) {\n\t\tswitch (type) {\n\t\t\tcase \"freeze-row\":\n\t\t\t\tview.freezeRows(value);\n\t\t\t\tbreak;\n\t\t\tcase \"freeze-column\":\n\t\t\t\tview.freezeColumns(value);\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import {range, toRange, changeRange, encode, isRange} from \"../helpers/column_names\";\nimport {ignoreUndo} from \"./undo\";\nimport * as arr from \"../helpers/array\";\n\nexport function init(view){\n\tconst grid = view._table.$view.querySelector(\".webix_ss_center\");\n\n\tview.views = {\n\t\tregister:function(type, render, track){\n\t\t\tif(!this._types[type])\n\t\t\t\tthis._types[type] = { render:render, track:track };\n\t\t},\n\t\tmove: function(id, x, y){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst old = webix.copy(this._pull[id]);\n\t\t\tthis._pull[id].x = _correctPos(view, old.config.width, x/view._zoom, \"x\");\n\t\t\tthis._pull[id].y = _correctPos(view, old.config.height, y/view._zoom, \"y\");\n\t\t\tview.callEvent(\"onAction\", [\"move-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t\t_showOne(view, win, this._pull[id]);\n\t\t},\n\t\tadd: function(x, y, type, data, config, id){\n\t\t\tconfig = config || {};\n\t\t\tif(type == \"chart\"){\n\t\t\t\tconfig = webix.extend(config, {\n\t\t\t\t\ttype: \"line\",\n\t\t\t\t\tdataSeries:\"columns\"\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst height = config.height = config.height || 300;\n\t\t\tconst width = config.width = config.width || 500;\n\n\t\t\tconst win = webix.ui({ \n\t\t\t\tid:id || \"$ssheet-ui\"+webix.uid(), // fixed id is for undo only\n\t\t\t\tview: \"ssheet-ui\",\n\t\t\t\tcontainer:grid, master:view._table.config.id,\n\t\t\t\twidth:width, height:height\n\t\t\t});\n\n\t\t\twin.attachEvent(\"onViewMoveEnd\", (x, y) => {\n\t\t\t\tconst state = view._table.getScrollState();\n\t\t\t\tthis.move(id, x, y+state.y);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewResize\", () => {\n\t\t\t\tconst conf =  this._pull[id];\n\t\t\t\tconst old = webix.copy(conf);\n\n\t\t\t\tconf.config.height = win.$height;\n\t\t\t\tconf.config.width = win.$width;\n\t\t\t\tview.callEvent(\"onAction\", [\"resize-view\", { row:id, newValue:webix.copy(conf), value:old } ]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewEdit\", () => {\n\t\t\t\tconst config = this._pull[id];\n\t\t\t\tconst command = this._commands[config.type] || config.type;\n\t\t\t\tview.callEvent(\"onCommand\", [{ id:command, viewid:id, config }]);\n\t\t\t});\n\t\t\twin.attachEvent(\"onViewRemove\", () => this.remove(id));\n\n\t\t\tid = win.config.id;\n\n\t\t\tx = _correctPos(view, height, x, \"x\");\n\t\t\ty = _correctPos(view, width, y, \"y\");\n\n\t\t\tthis._pull[id] = { x, y, type, data, config };\n\t\t\tthis.update(id, data, config, true);\n\t\t\t_showOne(view, win, this._pull[id]);\n\n\t\t\treturn id; \n\t\t},\n\t\tremove: function(id){\n\t\t\tconst old = this._pull[id];\n\t\t\twebix.$$(id).close();\n\t\t\tdelete this._pull[id];\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:null, value:old } ]);\n\t\t},\n\t\tget:function(id){\n\t\t\treturn webix.$$(id).getBody();\n\t\t},\n\t\tgetConfig:function(id){\n\t\t\treturn this._pull[id];\n\t\t},\n\t\tupdate:function(id, data, config, inner){\n\t\t\tconst old = inner ? null : webix.copy(this._pull[id]);\n\t\t\tconst conf = this._pull[id];\n\t\t\tconst actions = this._types[conf.type];\n\n\t\t\tdata = data || config.data || \"\";\n\t\t\tconfig = config || {};\n\n\t\t\tdelete config.data;\n\n\t\t\tif(conf.type == \"chart\"){\n\t\t\t\tconst type = config.type;\n\t\t\t\tif(type && !config.series){\n\t\t\t\t\tconst xAxis = config.xAxis && config.xAxis.range;\n\t\t\t\t\tconst legend = config.legend && config.legend.range;\n\n\t\t\t\t\tlet oldLeftColumn;\n\t\t\t\t\tif(old && old.config){\n\t\t\t\t\t\tif(_isPie(type)){\n\t\t\t\t\t\t\tif(old.config.legend && old.config.legend.fromData)\n\t\t\t\t\t\t\t\toldLeftColumn = 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if(old.config.xAxis && old.config.xAxis.fromData)\n\t\t\t\t\t\t\toldLeftColumn = 1;\n\t\t\t\t\t}\n\n\t\t\t\t\tconfig.series = _getSeries(view, data, config.dataSeries, {xAxis, legend}, oldLeftColumn);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst win = webix.$$(id);\n\n\t\t\tconst height = config.height || 300;\n\t\t\tconst width = config.width || 500;\n\n\t\t\tif(win.$width != width && win.$height != height){\n\t\t\t\twin.define({width, height});\n\t\t\t\twin.resize();\n\t\t\t}\n\n\t\t\tconf.data = data;\n\t\t\tconf.config = config;\n\n\t\t\tlet node = this.get(id);\n\n\t\t\tdata = _fromRange(view, conf);\n\n\t\t\tif(actions.render){\n\t\t\t\tconst renderConfig = webix.copy(conf);\n\n\t\t\t\t//clear width and height for inner view resizing\n\t\t\t\trenderConfig.config.width = renderConfig.config.height = 0;\n\n\t\t\t\tnode = actions.render(node, renderConfig, data);\n\t\t\t\t_processTables(node);\n\t\t\t}\n\n\t\t\tif(actions.track)\n\t\t\t\t_trackOne(view, node, actions.track, conf);\n\n\t\t\tview.callEvent(\"onAction\", [\"add-view\", { row:id, newValue:webix.copy(this._pull[id]), value:old} ]);\n\t\t},\n\t\thighlight:function(id){\n\t\t\tconst win = webix.$$(id);\n\t\t\tconst css = \"webix_ssheet_ui_focused\";\n\n\t\t\tconst oldWin = webix.$$(this._activeWin);\n\t\t\tif(oldWin && !oldWin.$destructed)\n\t\t\t\twebix.html.removeCss(oldWin.$view, css);\n\n\t\t\tif(win){\n\t\t\t\tthis._activeWin = id;\n\t\t\t\twebix.html.addCss(win.$view, css);\n\t\t\t}\n\t\t\telse\n\t\t\t\tdelete this._activeWin;\n\t\t},\n\t\t_commands:{\n\t\t\t\"image\":\"add-image-top\",\n\t\t\t\"chart\":\"add-chart\"\n\t\t},\n\t\t_types:{},\n\t\t_pull:{}\n\t};\n\n\t// handle events\n\tview._table.attachEvent(\"onResize\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollY\", () => _showAll(view) );\n\tview._table.attachEvent(\"onScrollX\", () => _showAll(view) );\n\n\tview.attachEvent(\"onReset\", () => _reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tconst move = type === \"move-view\";\n\t\tif (move || type == \"resize-view\" || type === \"add-view\")\n\t\t\t_undoUI(view, move, row, value);\n\t});\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif(action == \"header-hide\")\n\t\t\t_showAll(view);\n\t\telse if(action == \"before-grid-change\")\n\t\t\t_updateData(view, p.name, p.inc, p.data, p.start);\n\t});\n\tview.attachEvent(\"onZoom\", (v,o,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_showAll(view, true);\n\t});\n\tview.attachEvent(\"onColumnOperation\", (a,s,e,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_showAll(view, true);\n\t});\n\tview.attachEvent(\"onRowOperation\", (a,s,e,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_showAll(view, true);\n\t});\n\tview.attachEvent(\"onDataParse\", (data) => _parse(view, data));\n\tview.attachEvent(\"onDataSerialize\", (data, config) => _serialize(view, data, config));\n\tview.attachEvent(\"onCellChange\", (r,c,v,p) => {\n\t\tif(p == view.getActiveSheet())\n\t\t\t_trackAll(view);\n\t});\n\tview.attachEvent(\"onMathRefresh\", () => _trackAll(view));\n\n\tview.attachEvent(\"onDestruct\", () => {\n\t\tfor(let i in view.views._pull) webix.$$(i).destructor();\n\t});\n\n\tlet editUIType;\n\twebix.attachEvent(\"onClick\", function(ev){\n\t\tlet focus = webix.$$(ev);\n\t\tif(focus && focus.config.externalUI)\n\t\t\tfocus = webix.$$(focus.config.externalUI);\n\n\t\tconst ui = focus && (focus.queryView(\"ssheet-ui\",\"self\") || focus.queryView(\"ssheet-ui\",\"parent\"));\n\n\t\tif(ui){\n\t\t\tview.views.highlight(ui);\n\t\t\tconst id = ui.config.id;\n\n\t\t\tif(editUIType){\n\t\t\t\tif(view.views.getConfig(id).type == editUIType)\n\t\t\t\t\tui.callEvent(\"onViewEdit\", []); //start editing if any editor is open\n\t\t\t\telse\n\t\t\t\t\tview.callEvent(\"onCommand\", [{ id:\"close-ui-editor\" }]);\n\t\t\t}\n\t\t}\n\t\telse if(!editUIType)\n\t\t\tview.views.highlight();\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", function(id, type){\n\t\tview.views.highlight(id);\n\t\teditUIType = type;\n\t});\n\n\tview.attachEvent(\"onUIEditStop\", function(id, type){\n\t\tif(editUIType == type)\n\t\t\twebix.delay(()=>{ // after onClick handler (to save focus)\n\t\t\t\teditUIType = null;\n\t\t\t});\n\t});\n\n\t// set default views\n\tview.views.register(\"chart\", (node, conf, data) => {\n\t\tconst dataRange = _getNames(view, conf);\n\t\tconst config = _genChartConfig(conf, data, dataRange);\n\t\treturn webix.ui(config, node);\n\t}, (view, data) => {\n\t\tview.clearAll();\n\t\tview.parse(data);\n\t});\n\n\tview.views.register(\"image\", (node, conf, data) => {\n\t\tconst config = webix.extend({ css:\"webix_ssheet_bgimage\", template:`<img src=\"${data}\"/>` }, conf.config||{}, true );\n\t\treturn webix.ui(config, node);\n\t});\n}\n\nfunction _parse(view, data){\n\tconst views = data.views;\n\tif(views){\n\t\tignoreUndo(function(){\n\t\t\tviews.forEach(obj => view.views.add.apply(view.views, obj));\n\t\t}, view);\n\t}\n}\n\nfunction _serialize(view, data, config){\n\tdata.views = [];\n\tfor(let i in view.views._pull){\n\t\tconst conf = view.views._pull[i];\n\t\tconst one = [conf.x, conf.y, conf.type, conf.data, conf.config];\n\t\tif(config && config.viewIds)\n\t\t\tone.push(i);\n\t\tdata.views.push(one);\n\t}\n}\n\nlet thread;\nfunction _trackAll(view){\n\tclearTimeout(thread);\n\tthread = webix.delay(() => {\n\t\tconst ui = view.views;\n\t\tfor(let id in ui._pull){\n\t\t\tconst conf = ui._pull[id];\n\n\t\t\tconst viewMethods = ui._types[conf.type];\n\t\t\tconst render = viewMethods.render;\n\t\t\tconst track = viewMethods.track;\n\n\t\t\tif(track)\n\t\t\t\t_trackOne(view, ui.get(id), track, conf, render);\n\t\t}\n\t});\n}\n\nfunction _trackOne(view, node, track, conf, render){\n\tconst data = _fromRange(view, conf);\n\n\tif(conf.type == \"chart\"){\n\t\tif(render)\n\t\t\tnode = render(node, conf, data, true);\n\n\t\tconst config = conf.config;\n\t\tif(config && !_isPie(config.type))\n\t\t\t_removeLegend(data, conf, view);\n\t}\n\n\ttrack(node, data);\n}\n\nfunction _updateData(view, name, inc, data, start){\n\tconst views = data.views;\n\tfor(let i = 0; i < views.length; i++){\n\t\tif(_isRange(views[i][3])){\n\t\t\tconst series = views[i][4].series;\n\t\t\tif(series){\n\t\t\t\tseries.forEach(obj => {\n\t\t\t\t\tobj.range = changeRange(obj.range, name, inc, start);\n\t\t\t\t\tobj.active = changeRange(obj.active, name, inc, start);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tconst legend = views[i][4].legend && views[i][4].legend.range;\n\t\t\tif(legend)\n\t\t\t\tviews[i][4].legend.range = _getDataParts(legend).map(range => changeRange(range, name, inc, start)).join(\",\");\n\n\t\t\tconst xAxis = views[i][4].xAxis && views[i][4].xAxis.range;\n\t\t\tif(xAxis)\n\t\t\t\tviews[i][4].xAxis.range = changeRange(xAxis, name, inc, start);\n\n\t\t\tviews[i][3] = _getDataParts(views[i][3]).map(range => changeRange(range, name, inc, start)).join(\",\");\n\t\t}\n\t}\n}\n\nfunction _showAll(view, pos){\n\t//close possibly open menus of embedded ui\n\twebix.callEvent(\"onClick\", []);\n\n\tfor(let id in view.views._pull){\n\t\tconst win = webix.$$(id);\n\t\tconst conf = view.views._pull[id];\n\t\tif(pos){\n\t\t\tconf.x = _correctPos(view, conf.config.width, conf.x, \"x\");\n\t\t\tconf.y = _correctPos(view, conf.config.height, conf.y, \"y\");\n\t\t}\n\t\t_showOne(view, win, conf);\n\t}\n}\n\nfunction _showOne(view, win, conf){\n\tconst state = view._table.getScrollState();\n\n\twin.define({\n\t\twidth: conf.config.width * view._zoom,\n\t\theight: conf.config.height * view._zoom\n\t});\n\twin.resize();\n\n\twin.show({\n\t\tx:conf.x * view._zoom,\n\t\ty:(conf.y * view._zoom) - state.y\n\t});\n}\n\nfunction _correctPos(view, winSize, v, type){\n\tif(!v && v !==0 )\n\t\tv = view._table.getScrollState()[type]+50;\n\telse{\n\t\tconst size = (type == \"x\" ? _getWidth(view) : _getHeight(view)) - winSize;\n\t\tv = Math.min(Math.max(v, 0), size);\n\t}\t\n\treturn v;\n}\n\nfunction _reset(view){\n\tignoreUndo(function(){\n\t\tfor(let id in view.views._pull)\n\t\t\tview.views.remove(id);\n\t}, view);\n}\n\nfunction _undoUI(view, move, id, value){\n\tif(value){\n\t\tconst {x, y, type, data, config} = value;\n\t\tif(view.views._pull[id]){\n\t\t\tif(move)\n\t\t\t\tview.views.move(id, x, y);\n\t\t\telse\n\t\t\t\tview.views.update(id, data, config);\n\t\t}\n\t\telse\n\t\t\tview.views.add(x, y, type, data, config, id);\n\n\t\tconst editor = view.$$(\"chartEditor\");\n\t\tif(editor && editor.viewId == id)\n\t\t\teditor.queryView(\"form\").setValues(config);\n\t}\n\telse\n\t\tview.views.remove(id);\n}\n\nfunction _getWidth(view){\n\tlet width = 0;\n\tview._table.eachColumn(function(id){\n\t\tif(id !== \"rowId\")\n\t\t\twidth += this.getColumnConfig(id).width;\n\t});\n\treturn width / view._zoom;\n}\n\nfunction _getHeight(view){\n\tlet height = 0;\n\tview._table.data.each(function(obj){\n\t\theight += obj.$height || webix.skin.$active.rowHeight;\n\t});\n\treturn height / view._zoom;\n}\n\n//disable datatables not to interfere with ss table events\nfunction _processTables(node){\n\tconst query = function(view){\n\t\treturn view.name == \"datatable\" || view.name == \"treetable\";\n\t};\n\tlet tables = node.queryView(query, \"self\");\n\tif(tables) tables = [tables];\n\telse tables = node.queryView(query, \"all\");\n\ttables.forEach((dt) => dt.disable());\n}\n\n/* chart-specific helpers */\n\nfunction _prepareType(config){\n\tconst type = config.type;\n\tif(config.stacked && type.indexOf(\"stacked\") == -1)\n\t\tconfig.type = \"stacked\"+config.type.charAt(0).toUpperCase()+config.type.substr(1);\n\tif(config[\"3D\"] && type.indexOf(\"3D\") == -1)\n\t\tconfig.type += \"3D\";\n\tif(config.horizontal && type.indexOf(\"H\") == -1)\n\t\tconfig.type += \"H\";\n\n\treturn config.type;\n}\n\nfunction _genChartConfig(conf, data, dataRange){\n\tconst htmlFilter = /<[^>]*>/gi;\n\tlet config = webix.copy(conf.config);\n\n\tconfig = _normalizeConfig(config);\n\n\tconst scale = config.scale.lines;\n\tconst scaleColor = config.scale.color || undefined;\n\tconst type = (config.type = _prepareType(config));\n\tconst pie = _isPie(type);\n\n\tconst lines = config.series;\n\tconfig.series = [];\n\tconst xAxis = config.xAxis;\n\n\tconst legendConfig = config.legend;\n\tlet pieLegend;\n\tlet legendRange;\n\n\tconst legend = {\n\t\theight:24,\n\t\talign: legendConfig.align || \"center\",\n\t\tvalign: legendConfig.valign || \"bottom\",\n\t};\n\tlegend.layout = legend.valign == \"middle\" ? \"y\" : \"x\";\n\n\tif(pie){\n\t\tif(legendConfig.fromData)\n\t\t\tpieLegend = \"data0\";\n\t\telse if(legendConfig.range)\n\t\t\tpieLegend = dataRange[legendConfig.range];\n\n\t\tlegend.template = `#${pieLegend}#`;\n\t}\n\telse{\n\t\tlegend.values = [];\n\n\t\tlegendRange = !legendConfig.fromData && legendConfig.range;\n\t\tif(legendRange){\n\t\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\t\tlegendRange = _getParts(legendConfig.range, switchDirection, dataRange);\n\t\t}\n\n\t\tconfig.yAxis = config.yAxis||{};\n\t\tfor(let property in config.yAxis)\n\t\t\tif(config.yAxis[property] === \"\")\n\t\t\t\tdelete config.yAxis[property];\n\n\t\tconfig.yAxis = webix.extend(config.yAxis, {\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale,\n\t\t\tlineShape: config.scale.circle ? \"arc\" : \"default\"\n\t\t});\n\n\t\tif(xAxis.fromData)\n\t\t\txAxis.range = legendRange ? Object.keys(data[0]).filter(line => legendRange.indexOf(line) == -1)[0] : \"data0\";\n\t\telse if(xAxis.range)\n\t\t\txAxis.range = dataRange[xAxis.range];\n\t}\t\n\n\tfor(let i = 0; i < lines.length; i++){\n\t\tconst color = lines[i].color;\n\t\tconst item = dataRange[lines[i].range];\n\n\t\tif(item != xAxis.range && !(pie && item == pieLegend /*(item == pieLegend || legendConfig.range == lines[i].active)*/)){\n\t\t\tconst s = {\n\t\t\t\tvalue:`#${item}#`,\n\t\t\t\ttooltip:{\n\t\t\t\t\ttemplate: lines[i].tooltip ? `#${item}#` : \"\"\n\t\t\t\t}\n\t\t\t};\n\n\t\t\ts[pie ? \"pieInnerText\" : \"label\"] = lines[i].label ? `#${item}#` : \"\";\n\n\t\t\tif(type == \"radar\" || type == \"line\" || type == \"spline\" || type == \"scatter\"){\n\t\t\t\ts.line = { color };\n\t\t\t\ts.item = { borderColor:color, type:lines[i].marker };\n\t\t\t}\n\t\t\telse if(!pie)\n\t\t\t\ts.color = color;\n\n\t\t\tif(type == \"area\" || type == \"splineArea\")\n\t\t\t\ts.alpha = 0.7;\n\n\t\t\tif(data[0] && !pie && (legendRange || legendConfig.fromData)){\n\t\t\t\tconst val = legendRange ? data[0][legendRange[i]] : data[0][item];\n\t\t\t\tconst text = (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t\t\tlegend.values.push({text, color});\n\t\t\t}\n\n\t\t\tconfig.series.push(s);\n\t\t}\n\t}\n\n\tif(!pie){\n\t\tconfig.xAxis = {\n\t\t\ttitle: config.xAxis.title,\n\t\t\tlineColor: scaleColor,\n\t\t\tcolor: scaleColor,\n\t\t\tlines: scale\n\t\t};\n\n\t\tconfig[type == \"barH\" || type == \"stackedBarH\" ? \"yAxis\" : \"xAxis\"].template = obj => {\n\t\t\tconst val = obj[xAxis.range];\n\t\t\treturn (val || val === 0) ? (val+\"\").replace(htmlFilter, \"\") : \"\";\n\t\t};\n\t}\n\n\tif(pieLegend || (legend.values && legend.values.length))\n\t\tconfig.legend = legend;\n\telse\n\t\tdelete config.legend;\n\n\tif(type == \"scatter\"){\n\t\tconfig.xValue = config.xAxis.template;\n\t\tconfig.origin = \"auto\";\n\t\tdelete config.xAxis.template;\n\t}\n\n\treturn webix.extend({\n\t\tview:\"chart\",\n\t\tpadding:{\n\t\t\tleft:80\n\t\t}\n\t}, config, true);\n}\n\nfunction _isRange(data){\n\treturn typeof data == \"string\" && data.indexOf(\"data:image\") === -1;\n}\n\nfunction _fromRange(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn data;\n\n\tconst arr = [];\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\tfor(let i = 0; i < subdata[0].length; i++){\n\t\t\t\t\t\tif(!arr[i])\n\t\t\t\t\t\t\tarr[i] = {};\n\t\t\t\t\t\twebix.extend(arr[i], subdata[0][i]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn arr;\n}\n\nfunction _removeLegend(arr, conf, view){\n\tconst config = conf.config;\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconst legend = config.legend;\n\n\tif(legend.fromData)\n\t\tarr.shift();\n\telse if(legend.range){\n\t\tconst names = _getNames(view, conf);\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tconst legendRange = _getParts(legend.range, switchDirection, names);\n\t\tfor (let i = 0; i < legendRange.length; i++){\n\t\t\tconst item = legendRange[i];\n\t\t\tdelete arr[0][item];\n\t\t}\n\t}\n}\n\nfunction _getNames(view, conf){\n\tlet data = conf.data;\n\n\tif(/^(http|data:image|\\/)/i.test(data))\n\t\treturn;\n\n\tlet names = {};\n\tif(data){\n\t\tconst config = conf.config;\n\t\tconst switchDirection = config.dataSeries == \"rows\";\n\t\tlet lastIndex = 0;\n\n\t\tdata = _getDataParts(data);\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst cells = _isRange(data[i]) ? range(data[i], view) : null;\n\t\t\tif(cells){\n\t\t\t\tconst page = cells[4] ? view._mData.getPage(cells[4]) : view._mPage;\n\t\t\t\tcells[5] = lastIndex;\n\n\t\t\t\tif(page){\n\t\t\t\t\tconst subdata = switchDirection ? getRangeRows.apply(page, cells) : getRangeCols.apply(page, cells);\n\t\t\t\t\tlastIndex += subdata[2];\n\t\t\t\t\twebix.extend(names, subdata[1]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\treturn names;\n}\n\nexport function _getDataParts(data){\n\treturn data.replace(/\\s/g, \"\").split(\",\");\n}\n\nexport function _isPie(type){\n\treturn /pie|donut/.test(type);\n}\n\nexport function _getSeries(view, data, dataSeries, active, oldLeftColumn){\n\tconst dir = dataSeries == \"rows\";\n\tlet vals = [];\n\n\tif(data){\n\t\tlet xAxis = [];\n\t\tlet legend = [];\n\t\tlet activeVals = [];\n\n\t\tif(active){\n\t\t\tif(active.legend)\n\t\t\t\tlegend = _getParts(active.legend, dir);\n\t\t\tif(active.xAxis)\n\t\t\t\txAxis = _getParts(active.xAxis, dir);\n\t\t\tif(active.series)\n\t\t\t\tactiveVals = active.series.filter(val => legend.indexOf(val.range) == -1 && xAxis.indexOf(val.range) == -1);\n\t\t}\n\n\t\tdata = _getDataParts(data);\n\t\tlet colorIndex = 0;\n\t\tlet firstRange = 1;\n\t\tdata.forEach(subdata => {\n\t\t\tconst series = isRange(subdata) ? range(subdata, view) : null;\n\t\t\tif(series){\n\t\t\t\tconst start = dir ? series[0] : series[1];\n\t\t\t\tconst end = dir ? series[2] : series[3];\n\n\t\t\t\tlet inActiveSeries;\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tconst seria = arr.find(activeVals, val => val.range == range && (!val.active || val.active == subdata));\n\n\t\t\t\t\tif(seria){\n\t\t\t\t\t\tif(!seria.active)\n\t\t\t\t\t\t\tseria.active = subdata;\n\t\t\t\t\t\tinActiveSeries = 1;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\t\tconst range = dir ? toRange(i, series[1], i, series[3], series[4]) : toRange(series[0], i, series[2], i, series[4]);\n\t\t\t\t\tif(legend.indexOf(range) != -1 || xAxis.indexOf(range) != -1)\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tconst activeVal = activeVals.filter(val => val.range == range && val.active == subdata)[0];\n\n\t\t\t\t\tif(inActiveSeries && !activeVal && !(oldLeftColumn && firstRange && i == start))\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\tvals.push(activeVal || {\n\t\t\t\t\t\tactive: subdata,\n\t\t\t\t\t\trange,\n\t\t\t\t\t\tmarker: \"square\",\n\t\t\t\t\t\ttooltip: 1,\n\t\t\t\t\t\tcolor: _getColor(colorIndex)\n\t\t\t\t\t});\n\n\t\t\t\t\tcolorIndex++;\n\t\t\t\t}\n\t\t\t\tfirstRange = 0;\n\t\t\t}\n\t\t});\n\t}\n\treturn vals;\n}\n\nexport function _getParts(ranges, dir, dataRange){\n\tconst parts = [];\n\n\tranges = _getDataParts(ranges);\n\tranges.forEach(subRange => {\n\t\tsubRange = isRange(subRange) ? range(subRange) : null;\n\t\tif(subRange){\n\t\t\tconst start = dir ? subRange[0] : subRange[1];\n\t\t\tconst end = dir ? subRange[2] : subRange[3];\n\n\t\t\tfor(let i = start; i <= end; i++){\n\t\t\t\tconst range = dir ?\n\t\t\t\t\ttoRange(i, subRange[1], i, subRange[3], subRange[4]):\n\t\t\t\t\ttoRange(subRange[0], i, subRange[2], i, subRange[4]);\n\n\t\t\t\tparts.push(dataRange ? dataRange[range] : range);\n\t\t\t}\n\t\t}\n\t});\n\n\treturn parts;\n}\n\nexport function _normalizeConfig(config){\n\tif(typeof(config.xAxis) != \"object\")\n\t\tconfig.xAxis = {fromData: !!config.xAxis};\n\n\tif(typeof(config.legend) != \"object\")\n\t\tconfig.legend = {fromData: !!config.legend};\n\n\tconfig.legend = webix.extend(config.legend, {\n\t\tlayout:\"x\",\n\t\talign:\"center\",\n\t\tvalign:\"bottom\"\n\t});\n\n\tif(!config.scale)\n\t\tconfig.scale = {\n\t\t\tlines:1\n\t\t};\n\n\treturn config;\n}\n\nfunction _getColor(index){\n\tconst colors = [\n\t\t\"#e06666\", \"#6aa84f\", \"#3c78d8\", \"#e69138\", \"#783f04\", \"#134f5c\", \"#674ea7\", \"#c27ba0\"\n\t];\n\treturn colors[index%colors.length];\n}\n\nfunction getRangeCols(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = r1, rind = 0; i <= r2; i++, rind++){\n\t\tdata[rind] = {};\n\t\tfor (let j = c1, cind = lastIndex; j <= c2; j++, cind++){\n\t\t\tif(i == r2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[j]}${r1}:${encode[j]}${r2}`] = `data${cind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[rind][`data${cind}`] = this.getValue(i-1,j-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}\n\nfunction getRangeRows(r1,c1,r2,c2,sheetName,lastIndex){\n\tconst data = [];\n\tconst rangeToData = {};\n\tfor (let i = c1, cind = 0; i <= c2; i++, cind++){\n\t\tdata[cind] = {};\n\t\tfor (let j = r1, rind = lastIndex; j <= r2; j++, rind++){\n\t\t\tif(i == c2){\n\t\t\t\trangeToData[`${sheetName ? sheetName+\"!\" : \"\"}${encode[c1]}${j}:${encode[c2]}${j}`] = `data${rind}`;\n\t\t\t\tlastIndex++;\n\t\t\t}\n\t\t\tdata[cind][`data${rind}`] = this.getValue(j-1,i-1);\n\t\t}\n\t}\n\treturn [data, rangeToData, lastIndex];\n}","import {range, toRange} from \"./helpers/column_names\";\nimport {_getSeries, _isPie, _normalizeConfig, _getDataParts} from \"./operations/views\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\tconst activeSkin = webix.skin.$active;\n\tconst padding = activeSkin.dataPadding-2;\n\tconst margin = activeSkin.layoutMargin.form;\n\n\treturn {\n\t\twidth:440,\n\t\thidden: true,\n\t\tid:\"chartEditor\",\n\t\tcss:\"ssheet_chart\",\n\t\trows:[\n\t\t\t{\n\t\t\t\theight: activeSkin.barHeight,\n\t\t\t\tcss: \"ssheet_chart_wizard_head\",\n\t\t\t\tpadding: { left:4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{ view:\"icon\", inputHeight:activeSkin.inputHeight, hotkey:\"esc\", icon:\"webix_ssheet_icon ssi-arrow-left\", click: () => closeEditor(view)  },\n\t\t\t\t\t{ type:\"header\", borderless:true, template: labels[\"chart-edit\"] }\n\t\t\t\t]\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"form\",\n\t\t\t\tcomplexData:true,\n\t\t\t\tborderless: true,\n\t\t\t\tpadding:{\n\t\t\t\t\ttop: 0\n\t\t\t\t},\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth:184\n\t\t\t\t},\n\t\t\t\telements:[{\n\t\t\t\t\tview:\"tabview\",\n\t\t\t\t\tid:\"chartTabs\",\n\t\t\t\t\tcells:[\n\t\t\t\t\t\t{ id:\"common\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-common\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\taddRichselect(\"type\", \"chart-type\", getTypes()),\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"stacked-chart\"], name:\"stacked\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"horizontal-chart\"], name:\"horizontal\", hidden:true},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-pie-3d\"], name:\"3D\", batch:\"pie\"},\n\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-range\"], name:\"range\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-col-xAxis\"], name:\"xAxis.fromData\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-row-legend\"], name:\"legend.fromData\"},\n\t\t\t\t\t\t\t\t\t{ view:\"radio\", label:labels[\"chart-data-from\"], name:\"dataSeries\", vertical:true, options:[\n\t\t\t\t\t\t\t\t\t\t{id:\"columns\", value:labels[\"chart-columns\"]},\n\t\t\t\t\t\t\t\t\t\t{id:\"rows\", value:labels[\"chart-rows\"]}\n\t\t\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"advanced\", borderless:true, type:\"form\", paddingX:0, padding:{bottom:0}, header:labels[\"chart-series\"], rows:[\n\t\t\t\t\t\t\t{ view: \"ssheet-series\", name:\"series\" },\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ id:\"extras\", borderless:true, type:\"form\", paddingX:0, header:labels[\"chart-extras\"], rows:[\n\t\t\t\t\t\t\t{view:\"scrollview\", body:{\n\t\t\t\t\t\t\t\tview: \"accordion\",\n\t\t\t\t\t\t\t\tmargin: webix.skin.$active.layoutMargin.form,\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_accordion\",\n\t\t\t\t\t\t\t\tmulti: true,\n\t\t\t\t\t\t\t\ttype: \"clean\",\n\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-legend\"], body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view: \"text\", label:labels[\"chart-legend-range\"], name:\"legend.range\"},\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.align\", \"chart-legend-align\", getLegendAlign()),\n\t\t\t\t\t\t\t\t\t\t\taddRichselect(\"legend.valign\", \"chart-legend-valign\", getLegendValign())\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-scale\"], batch:\"axis\", id:\"scale\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-lines\"], name:\"scale.lines\", batch:\"axis\"},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"checkbox\", label:labels[\"chart-radar-circle\"], name:\"scale.circle\", hidden:true},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"chart-scale-color\"], name:\"scale.color\", batch:\"axis\"}\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-x-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-range\"], name:\"xAxis.range\", range:true, batch:\"axis\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-xAxis-title\"], name:\"xAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{ header:labels[\"chart-y-axis\"], batch:\"axis\", body:{\n\t\t\t\t\t\t\t\t\t\tmargin,\n\t\t\t\t\t\t\t\t\t\tpadding,\n\t\t\t\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-title\"], name:\"yAxis.title\", batch:\"axisTitle\" },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-origin\"], name:\"origin\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"label\", label:labels[\"chart-yAxis-note\"], css:\"ssheet_note\", height:20},\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-start\"], name:\"yAxis.start\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-end\"], name:\"yAxis.end\", batch:\"axis\", attributes:{ type:\"number\" } },\n\t\t\t\t\t\t\t\t\t\t\t{ view:\"text\", label:labels[\"chart-yAxis-step\"], name:\"yAxis.step\", batch:\"axis\", attributes:{ type:\"number\" } }\n\t\t\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t\t]\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]\n\t\t\t\t}]\n\t\t\t}\n\t\t]\n\t};\n}\n\nfunction ready(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tconst form = chartEditor.queryView(\"form\");\n\tconst elements = form.elements;\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id == \"add-chart\"){\n\t\t\tconst config = action.config;\n\t\t\tlet values = config && config.config || {};\n\n\t\t\tchartEditor.show();\n\n\t\t\tview.$handleSelection = function(st, end, a, b){\n\t\t\t\tconst focus = webix.UIManager.getFocus();\n\n\t\t\t\tconst span = view.$$(\"cells\").getSpan(st.row, st.column);\n\t\t\t\tif(span && st.row+span[3]*1-1 == end.row && st.column+span[2]*1-1 == end.column)\n\t\t\t\t\tb = a;\n\n\t\t\t\tif(chartEditor.queryView(view => view == focus)){\n\t\t\t\t\tif(focus == elements.range || focus == elements[\"legend.range\"]){\n\t\t\t\t\t\tlet val = focus.getValue();\n\t\t\t\t\t\tconst last = val.lastIndexOf(\",\");\n\n\t\t\t\t\t\tval = last == -1 ? \"\" : val.substring(0, last + 1);\n\t\t\t\t\t\tfocus.setValue(val + a+\":\"+b);\n\t\t\t\t\t}\n\t\t\t\t\telse if(focus.config.range)\n\t\t\t\t\t\tfocus.setValue(a+\":\"+b);\n\t\t\t\t}\n\n\t\t\t\treturn false;\n\t\t\t};\n\n\t\t\tform.clear();\n\t\t\tview.$$(\"chartTabs\").setValue(\"common\");\n\n\t\t\tvalues = _normalizeConfig(values);\n\n\t\t\tvalues.range = config ? config.data : view.getSelectedRange();\n\t\t\tchartEditor.viewId = action.viewid ? action.viewid : view.views.add(null, null, \"chart\", values.range, values);\n\n\t\t\tview.callEvent(\"onUIEditStart\", [chartEditor.viewId, \"chart\"]);\n\n\t\t\tupdateValign(values.legend.align);\n\t\t\tupdateAlign(values.legend.valign);\n\n\t\t\tconst formValues = inValues(values);\n\t\t\tform.setValues(formValues);\n\t\t\tupdateType(formValues.type);\n\n\t\t\tif(!_isPie(formValues.type) && values.legend.fromData)\n\t\t\t\tupdateLegendRange(values.legend.fromData);\n\t\t\tif(values.xAxis.fromData)\n\t\t\t\tupdateXaxisRange(values.xAxis.fromData);\n\n\t\t\tupdateSeries();\n\n\t\t\tform.queryView(\"accordionitem\", \"all\").forEach(view => view.expand());\n\n\t\t\telements.range.focus();\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUIEditStart\", (id, type)=>{\n\t\tif(chartEditor.isVisible() && type != \"chart\")\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onCommand\", obj =>{\n\t\tif(obj.id == \"close-ui-editor\" && chartEditor.isVisible())\n\t\t\tcloseEditor(view);\n\t});\n\n\tview.attachEvent(\"onAction\", (id, values) => {\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tif(chartEditor.isVisible() && chartEditor.viewId == values.row)\n\t\t\t\tcloseEditor(view);\n\t\t}\n\t});\n\n\tform.attachEvent(\"onChange\", function(val, oldVal){\n\t\tconst source = this.$eventSource;\n\n\t\t//upper case ranges\n\t\tif(source === elements.range || source === elements[\"xAxis.range\"] || source === elements[\"legend.range\"]){\n\t\t\tconst parts = val.split(\"!\");\n\t\t\tconst upper = parts.length == 2 ? parts[0]+\"!\"+parts[1].toUpperCase() : val.toUpperCase();\n\n\t\t\tif(val != upper){\n\t\t\t\tval = upper;\n\t\t\t\tsetSilentValue(source, upper);\n\t\t\t}\n\t\t}\n\n\t\tswitch (source){\n\t\t\tcase elements.type:\n\t\t\t\tupdateType(val);\n\t\t\t\tbreak;\n\t\t\tcase elements.horizontal:\n\t\t\t\tswitchRowsCols();\n\t\t\t\tbreak;\n\t\t\tcase elements.range:\n\t\t\tcase elements.dataSeries:\n\t\t\t\tif(this.$eventSource == elements.dataSeries)\n\t\t\t\t\tswitchRowsCols();\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\thandlePieLegend();\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.range\"], getLeftColumn());\n\t\t\t\tupdateSeries();\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.fromData\"]:\n\t\t\t\tupdateXaxisRange(val);\n\n\t\t\t\tupdateSeries(oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.fromData\"]:\n\t\t\t\tupdateLegendRange(val);\n\n\t\t\t\tupdateSeries(_isPie(elements.type.getValue()) ? oldVal : 0);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.align\"]:\n\t\t\t\tupdateValign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.valign\"]:\n\t\t\t\tupdateAlign(val);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"xAxis.range\"]:\n\t\t\t\tif(elements[\"xAxis.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"xAxis.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t\tcase elements[\"legend.range\"]:\n\t\t\t\tif(elements[\"legend.fromData\"].getValue())\n\t\t\t\t\tsetSilentValue(elements[\"legend.fromData\"]);\n\t\t\t\tupdateRange(val, oldVal);\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst config = form.getValues();\n\t\tview.views.update(chartEditor.viewId, config.range, config);\n\t});\n\n\telements.series.attachEvent(\"onRangeChange\", updateRange);\n\n\tfunction handlePieLegend(){\n\t\tif(elements[\"legend.fromData\"].getValue()){\n\t\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\t\tsetSilentValue(elements[\"legend.range\"], handler());\n\t\t}\n\t}\n\n\tfunction updateLegendRange(val){\n\t\tif(val){\n\t\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\t\tupdateRange(\"\", legendRange);\n\t\t}\n\n\t\tconst handler = _isPie(elements.type.getValue()) ? getLeftColumn : getTopRow;\n\t\tval = val ? handler() : \"\";\n\n\t\tsetSilentValue(elements[\"legend.range\"], val);\n\t}\n\n\tfunction updateXaxisRange(val){\n\t\tif(val){\n\t\t\tconst xAxisRange = elements[\"xAxis.range\"].getValue();\n\t\t\tupdateRange(\"\", xAxisRange);\n\t\t}\n\n\t\tval = val ? getLeftColumn() : \"\";\n\n\t\tsetSilentValue(elements[\"xAxis.range\"], val);\n\t}\n\n\tfunction setSilentValue(element, val){\n\t\telement.blockEvent();\n\t\telement.setValue(val);\n\t\telement.unblockEvent();\n\t}\n\n\tfunction getLeftColumn(){\n\t\tconst data = elements.range.getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\t\tconst legendRange = elements[\"legend.range\"].getValue();\n\t\tlet leftColumn = \"\";\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend: legendRange || \"\"});\n\n\t\tif(series.length)\n\t\t\tleftColumn = series[0].range;\n\n\t\treturn leftColumn;\n\t}\n\n\tfunction getTopRow(){\n\t\tconst data = _getDataParts(elements.range.getValue());\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst xAxisRange = _getDataParts(elements[\"xAxis.range\"].getValue());\n\t\tlet topRow = [];\n\n\t\tdata.forEach(subdata => {\n\t\t\tif(xAxisRange.indexOf(subdata) == -1){\n\t\t\t\tconst part = range(subdata, view);\n\t\t\t\tif(part){\n\t\t\t\t\tconst range = dir ?\n\t\t\t\t\t\ttoRange(part[0], part[1], part[2], part[1], part[4]) :\n\t\t\t\t\t\ttoRange(part[0], part[1], part[0], part[3], part[4]);\n\n\t\t\t\t\tif(data.indexOf(range) == -1)\n\t\t\t\t\t\ttopRow.push(range);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\n\t\treturn topRow.join(\",\");\n\t}\n\n\tfunction updateRange(val, oldVal){\n\t\tlet data = elements.range.getValue();\n\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tconst series = _getSeries(view, data, dataSeries, {legend, xAxis});\n\n\t\toldVal = _getDataParts(oldVal);\n\n\t\tdata = _getDataParts(data).filter(val => oldVal.indexOf(val) == -1);\n\n\t\tif(val){\n\t\t\tval = _getDataParts(val);\n\t\t\tval.forEach(range => {\n\t\t\t\tconst exist = series.filter(obj => obj.range == range);\n\t\t\t\tif(!exist.length)\n\t\t\t\t\tdata.push(range);\n\t\t\t});\n\t\t}\n\n\t\tsetSilentValue(elements.range, data.join(\",\"));\n\t}\n\n\tfunction updateAlign(val){\n\t\tconst align = elements[\"legend.align\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"middle\"){\n\t\t\tif(list.exists(\"center\"))\n\t\t\t\tlist.remove(\"center\");\n\t\t}\n\t\telse if(!list.exists(\"center\"))\n\t\t\tlist.add({id:\"center\", value:labels[\"chart-legend-center\"]}, 1);\n\t}\n\n\tfunction updateValign(val){\n\t\tconst align = elements[\"legend.valign\"];\n\t\tconst list = align.getList();\n\n\t\tif(val == \"center\"){\n\t\t\tif(list.exists(\"middle\"))\n\t\t\t\tlist.remove(\"middle\");\n\t\t}\n\t\telse if(!list.exists(\"middle\"))\n\t\t\tlist.add({id:\"middle\", value:labels[\"chart-legend-middle\"]}, 1);\n\t}\n\n\tfunction updateType(val){\n\t\thandlePieLegend();\n\n\t\tconst isPie = _isPie(val);\n\t\tconst isBar = val == \"bar\";\n\t\tconst series = elements.series;\n\t\tconst markersVisible = val == \"radar\" || val == \"line\" || val == \"spline\" || val == \"scatter\";\n\n\t\tseries.hideSubviews(\"marker\", markersVisible);\n\t\tseries.hideSubviews(\"label\", markersVisible || isBar || isPie);\n\t\tseries.hideSubviews(\"color\", !isPie);\n\n\t\tif(val == \"area\" || isBar) elements.stacked.show();\n\t\telse hideField(elements.stacked);\n\n\t\tif(isBar) elements.horizontal.show();\n\t\telse hideField(elements.horizontal);\n\n\t\tif(val == \"radar\")\n\t\t\telements[\"scale.circle\"].show();\n\t\telse\n\t\t\thideField(elements[\"scale.circle\"]);\n\n\t\tif(isPie){\n\t\t\thideBatch(\"axis\");\n\t\t\thideBatch(\"pie\", true);\n\t\t}\n\t\telse{\n\t\t\thideBatch(\"axis\", true);\n\t\t\thideBatch(\"pie\");\n\t\t}\n\n\t\tif(isPie || val == \"radar\")\n\t\t\thideBatch(\"axisTitle\");\n\t\telse\n\t\t\thideBatch(\"axisTitle\", true);\n\n\t\tswitchRowsCols();\n\t}\n\n\tfunction updateSeries(oldXaxis){\n\t\tlet data = elements.range.getValue();\n\n\t\tlet series = elements.series.getValue();\n\t\tconst legend = elements[\"legend.range\"].getValue();\n\t\tconst xAxis = elements[\"xAxis.range\"].getValue();\n\t\tconst dataSeries = elements.dataSeries.getValue();\n\n\t\tseries = _getSeries(view, data, dataSeries, {series, legend, xAxis}, oldXaxis);\n\n\t\telements.series.setValue(series);\n\t}\n\n\tfunction switchRowsCols(){\n\t\tconst dir = elements.dataSeries.getValue() == \"rows\";\n\t\tconst horizontal = elements.horizontal.getValue();\n\t\tconst pie = _isPie(elements.type.getValue());\n\n\t\tif((!pie && dir) || (!dir && pie)){\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-col-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-row-\" + (horizontal ? \"yAxis\" : \"xAxis\")]);\n\t\t}\n\t\telse{\n\t\t\telements[\"legend.fromData\"].define(\"label\", labels[\"chart-row-legend\"]);\n\t\t\telements[\"xAxis.fromData\"].define(\"label\", labels[\"chart-col-\" + (horizontal ? \"yAxis\" : \"xAxis\")]);\n\t\t}\n\t\telements[\"legend.fromData\"].refresh();\n\t\telements[\"xAxis.fromData\"].refresh();\n\t}\n\n\tfunction hideField(field){\n\t\tif(field.setValue)\n\t\t\tsetSilentValue(field);\n\t\tfield.hide();\n\t}\n\n\tfunction hideBatch(batch, visible){\n\t\tform.queryView({batch:batch}, \"all\").forEach(field => {\n\t\t\tif(visible)\n\t\t\t\tfield.show();\n\t\t\telse\n\t\t\t\thideField(field);\n\t\t});\n\t}\n\n\tfunction inValues(values){\n\t\t[\n\t\t\t{value:\"H\", name:\"horizontal\"},\n\t\t\t{value:\"stacked\"},\n\t\t\t{value:\"3D\"}\n\t\t].forEach(property => {\n\t\t\tif(values.type.indexOf(property.value) != -1){\n\t\t\t\tvalues[property.name || property.value] = 1;\n\t\t\t\tvalues.type = values.type.replace(property.value, \"\").toLowerCase();\n\t\t\t}\n\t\t});\n\n\t\treturn values;\n\t}\n}\n\nfunction closeEditor(view){\n\tconst chartEditor = view.$$(\"chartEditor\");\n\tview.callEvent(\"onUIEditStop\", [chartEditor.viewId, \"chart\"]);\n\tchartEditor.viewId = null;\n\tview.$handleSelection = null;\n\tchartEditor.hide();\n}\n\nfunction addRichselect(name, label, data){\n\treturn { view: \"richselect\", name:name, label:labels[label], suggest:{\n\t\tview: \"ssheet-form-suggest\",\n\t\tdata: data\n\t}};\n}\n\nexport function getTypes(sparkline){\n\tconst types = [\n\t\t{id:\"line\", value:labels[\"line-chart\"]},\n\t\t{id:\"spline\", value:labels[\"spline-chart\"]},\n\t\t{id:\"splineArea\", value:labels[\"splinearea-chart\"]},\n\t\t{id:\"area\", value:labels[\"area-chart\"]},\n\t\t{id:\"bar\", value:labels[\"bar-chart\"]},\n\t\t{id:\"radar\", value:labels[\"radar-chart\"]},\n\t\t{id:\"pie\", value:labels[\"pie-chart\"]},\n\t\t{id:\"donut\", value:labels[\"donut-chart\"]}\n\t];\n\tif(!sparkline)\n\t\ttypes.push({id:\"scatter\", value:labels[\"scatter-chart\"]});\n\treturn types;\n}\n\nfunction getLegendAlign(){\n\treturn [\n\t\t{id:\"left\", value:labels[\"chart-legend-left\"]},\n\t\t{id:\"center\", value:labels[\"chart-legend-center\"]},\n\t\t{id:\"right\", value:labels[\"chart-legend-right\"]}\n\t];\n}\n\nfunction getLegendValign(){\n\treturn [\n\t\t{id:\"top\", value:labels[\"chart-legend-top\"]},\n\t\t{id:\"middle\", value:labels[\"chart-legend-middle\"]},\n\t\t{id:\"bottom\", value:labels[\"chart-legend-bottom\"]}\n\t];\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport {parseChart} from \"../mathematics/writer\";\nimport {getTypes} from \"../chart\";\n\nexport const action = \"add-sparkline\";\n\nconst labels = webix.i18n.spreadsheet.labels;\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst els = form.elements;\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tconst span = this.view.$$(\"cells\").getSpan(st.row, st.column);\n\t\t\tif(span && st.row+span[3]*1-1 == end.row && st.column+span[2]*1-1 == end.column)\n\t\t\t\tb = a;\n\t\t\tels.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tels.range.setValue(\"\");\n\n\t\t//sync state of dialog to data with  the selected cell\n\t\tlet value = this.view.getCellValue(this.cell.row, this.cell.column);\n\t\tlet data = parseChart(value);\n\t\tif (data){\n\t\t\tform.blockEvent();\n\t\t\tels.type.setValue(data.type);\n\t\t\tels.range.setValue(data.range);\n\t\t\tif (data.color){\n\t\t\t\tels.color_def.setValue(data.color);\n\t\t\t\tels.color_pos.setValue(data.color);\t\t\n\t\t\t}\n\t\t\tif (data.negativeColor)\n\t\t\t\tels.color_neg.setValue(data.negativeColor);\n\t\t\tif (data.horizontal)\n\t\t\t\tels.horizontal.setValue(1);\n\n\t\t\tform.unblockEvent();\n\t\t\tthis.renderPreview();\n\t\t}\t\n\n\t\tels.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead:labels[\"sparkline-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\", visibleBatch:1, on:{ onChange : ()=> this.renderPreview() },  elements:[\n\t\t\t\t\t{view: \"richselect\", name:\"type\", label:labels[\"sparkline-type\"], value:\"line\", labelPosition:\"left\", suggest:{\n\t\t\t\t\t\tview:  \"ssheet-form-suggest\",\n\t\t\t\t\t\tdata:getTypes(true)\n\t\t\t\t\t}, on:{\n\t\t\t\t\t\tonChange: function(type){\n\t\t\t\t\t\t\tconst form = this.getFormView();\n\t\t\t\t\t\t\tswitch(type){\n\t\t\t\t\t\t\t\tcase \"pie\":\n\t\t\t\t\t\t\t\tcase \"donut\":\n\t\t\t\t\t\t\t\t\tform.showBatch(3);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tcase \"bar\":\n\t\t\t\t\t\t\t\t\tform.showBatch(2);\n\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t\tform.showBatch(1);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}},\n\t\t\t\t\t{ view:\"text\", label:labels[\"sparkline-range\"], name:\"range\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-color\"], name:\"color_def\", id:\"add_sparkline_color\", value:\"#6666FF\", batch:\"1\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-positive\"], name:\"color_pos\", value:\"#6666FF\", batch:\"2\"},\n\t\t\t\t\t{ view:\"ssheet-colorpicker\", label:labels[\"sparkline-negative\"], name:\"color_neg\", value:\"#FF6666\", batch:\"2\"},\n\t\t\t\t\t{ view:\"checkbox\", label:labels[\"horizontal-chart\"], name:\"horizontal\", batch:\"2\"},\n\t\t\t\t\t{ view:\"formlate\", name:\"preview\", borderless:true, css:\"webix_ssheet_preview\", height:50 }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tcheckRange(text){\n\t\tif(text && range(text, this.view))\n\t\t\treturn true;\n\t\tthis.view.alert({text:labels[\"error-range\"]});\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst config = this.sparkConfig(data);\n\n\t\t\tthis.view.addSparkline(this.cell.row, this.cell.column, config);\n\t\t\tthis.close();\n\t\t}\n\t}\n\n\trenderPreview(){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst data = form.getValues();\n\t\tdata.range = data.range.toUpperCase();\n\n\t\tif (data.range && this.checkRange(data.range)){\n\t\t\tconst pos = range(data.range, this.view);\n\t\t\tconst values = this.view._mPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1);\n\t\t\tconst config = this.sparkConfig(data, true);\n\n\t\t\tfor(let i = 0; i < values.length; i++)\n\t\t\t\tvalues[i] = values[i]||0;\n\t\t\tform.elements.preview.setValue(webix.Sparklines.getTemplate(config)(values, { width:200, height: 40 }));\n\t\t}\n\t\telse\n\t\t\tform.elements.preview.setValue(\"\");\n\t}\n\n\tsparkConfig(config, preview){\n\t\tconfig = webix.copy(config);\n\t\tconst form = this.$dialog.getBody();\n\n\t\tif (config.type === \"bar\"){\n\t\t\tconfig.color = config.color_pos;\n\t\t\tconfig.negativeColor = config.color_neg;\n\t\t}\n\t\telse if(form.elements.color_def.isVisible())\n\t\t\tconfig.color = config.color_def;\n\t\telse if(config.type == \"donut\" && preview)\n\t\t\twebix.extend(config, {type:\"pie\", donut:1}, true);\n\n\t\treturn config;\n\t}\n}","import {Dialog} from \"./common\";\nimport {isRange, toSheetRange, escapeSheet} from \"../helpers/column_names\";\nimport {getLastCharIndex} from \"../mathematics/parser\";\n\nexport const action = \"add-range\";\n\nexport class DialogBox extends Dialog{\n\t$show(box){\n\t\tconst form = box.$$(\"form\");\n\n\t\tform.clear();\n\t\tform.clearValidation();\n\n\t\tconst elements = form.elements;\n\n\t\telements.name.focus();\n\n\t\tlet selectedCell = this.view.getSelectedRange();\n\t\tif(selectedCell)\n\t\t\tselectedCell = escapeSheet(this.view.getActiveSheet())+\"!\"+selectedCell;\n\n\t\tform.setValues({\n\t\t\trange: selectedCell,\n\t\t\tscope: \"$global\"\n\t\t});\n\n\t\tthis._updateData();\n\n\t\tthis.view._rangeDialog = true;\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tconst span = this.view.$$(\"cells\").getSpan(st.row, st.column);\n\t\t\tif(span && st.row+span[3]*1-1 == end.row && st.column+span[2]*1-1 == end.column)\n\t\t\t\tb = a;\n\t\t\tform.elements.range.setValue(toSheetRange(a,b,this.view.getActiveSheet()));\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.view._rangeDialog = null;\n\t}\n\tsaveClick(){\n\t\tconst view = this.view;\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst data = form.getValues();\n\n\t\tif(data.range){\n\t\t\tconst rangeParts = data.range.split(\"!\");\n\n\t\t\tif(rangeParts.length == 1)\n\t\t\t\trangeParts.unshift( escapeSheet(view.getActiveSheet()) );\n\n\t\t\tdata.range = rangeParts[0]+\"!\"+rangeParts[1].toUpperCase();\n\t\t}\n\n\t\tdata.name = data.name.toUpperCase();\n\n\t\tform.setValues(data);\n\n\t\tif (form.validate()){\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\t\tif(data.id){\n\t\t\t\tconst oldData = table.getItem(data.id);\n\n\t\t\t\tview.ranges.remove(oldData.name, this._getScope(oldData));\n\t\t\t\ttable.updateItem(data.id, data);\n\t\t\t}\n\t\t\telse\n\t\t\t\ttable.add(data);\n\n\t\t\tview.ranges.add(\n\t\t\t\tdata.name,\n\t\t\t\tdata.range,\n\t\t\t\tthis._getScope(data)\n\t\t\t);\n\n\t\t\tview.refresh();\n\n\t\t\ttable.unselect();\n\t\t\tform.setValues({scope: \"$global\"});\n\t\t}\n\t}\n\t_getScope(data){\n\t\treturn data.scope == \"$global\" ? true : data.scope;\n\t}\n\tremoveRange(id){\n\t\tconst view = this.view;\n\t\tview.confirm({\n\t\t\ttext: webix.i18n.spreadsheet.labels[\"range-remove-confirm\"]\n\t\t}).then(()=>{\n\t\t\tconst table = this.$dialog.$$(\"table\");\n\t\t\tconst item = table.getItem(id);\n\n\t\t\tview.ranges.remove(item.name, this._getScope(item));\n\n\t\t\tview.refresh();\n\t\t\ttable.remove(id);\n\t\t});\n\t}\n\teditRange(id){\n\t\tconst form = this.$dialog.$$(\"form\");\n\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\tform.clearValidation();\n\t\tconst item = webix.copy(table.getItem(id));\n\n\t\tform.setValues(item);\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onSheetRename\", (name, newName)=> this._updateData(name, newName));\n\t\tthis.view.attachEvent(\"onSheetRemove\", (name)=> this._updateData(name));\n\t\tthis.view.attachEvent(\"onSheetAdd\", ()=> this._updateData());\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst theform = {\n\t\t\tpadding:0,\n\t\t\ttype: \"clean\",\n\t\t\tcols:[\n\t\t\t\t{ view: \"ssheet-dialog-table\", id: \"table\", borderless:true, columns:[\n\t\t\t\t\t{ id:\"name\", header:locale[\"range-name\"], width: 120 },\n\t\t\t\t\t{ id:\"range\", header:locale[\"range-cells\"], width: 150 },\n\t\t\t\t\t{ id:\"scope\", header:locale[\"range-scope\"], width: 95, template: obj => {\n\t\t\t\t\t\treturn obj.scope == \"$global\" ? locale[\"range-global\"] : obj.scope;\n\t\t\t\t\t}},\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-pencil'></span>\", width:44 },\n\t\t\t\t\t{ template:\"<span class='webix_icon ssheet_ranges_edit wxi-trash'></span>\", width:44 }\n\t\t\t\t],\n\t\t\t\tautowidth:true, height: 200, select:\"row\",\n\t\t\t\ton:{\n\t\t\t\t\tonBeforeSelect: id =>{\n\t\t\t\t\t\treturn id == this.$dialog.$$(\"form\").getValues().id;\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tonClick:{\n\t\t\t\t\t\"wxi-trash\":(ev, id) => this.removeRange(id),\n\t\t\t\t\t\"wxi-pencil\":(ev, id) => this.editRange(id)\n\t\t\t\t}},\n\t\t\t\t{ width: 270, view: \"form\", id:\"form\",\n\t\t\t\t\trules:{\n\t\t\t\t\t\tname: (_, obj)=> {\n\t\t\t\t\t\t\tconst notUnique = this.$dialog.$$(\"table\").find(item => {\n\t\t\t\t\t\t\t\treturn item.name == obj.name && item.scope == obj.scope && item.id != obj.id;\n\t\t\t\t\t\t\t}, true);\n\n\t\t\t\t\t\t\treturn !notUnique && !getLastCharIndex(obj.name);\n\t\t\t\t\t\t},\n\t\t\t\t\t\trange: isRange,\n\t\t\t\t\t\tscope: webix.rules.isNotEmpty\n\t\t\t\t\t},\n\t\t\t\t\telementsConfig:{\n\t\t\t\t\t\tlabelWidth: 95\n\t\t\t\t\t},\n\t\t\t\t\telements:[\n\t\t\t\t\t\t{ view: \"text\", name:\"name\", label: locale[\"range-name\"]},\n\t\t\t\t\t\t{ view: \"text\", name:\"range\", id:\"range\", label: locale[\"range-cells\"], on:{\n\t\t\t\t\t\t\tonFocus:() => this.view.showCell(this.$dialog.$$(\"range\").getValue(), true)\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view: \"richselect\", name:\"scope\", id:\"sheets\", label: locale[\"range-scope\"], suggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}}\n\t\t\t\t\t]\n\t\t\t\t}\n\t\t\t]\n\t\t};\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tmove:true,\n\t\t\thead: webix.i18n.spreadsheet.labels[\"range-title\"],\n\t\t\tautoheight: true,\n\t\t\twidth: 800,\n\t\t\tposition: \"center\",\n\t\t\tbody: theform,\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.saveClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\t_updateData(name, newName){\n\t\tif(!this.$dialog.isVisible())\n\t\t\treturn;\n\n\t\tconst ranges = this.view._mData.getRanges();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst table = this.$dialog.$$(\"table\");\n\t\tconst form = this.$dialog.$$(\"form\");\n\n\t\tlet editRange = table.getItem( form.getValues().id );\n\t\tif(editRange){\n\t\t\tlet rangeName = editRange.name;\n\n\t\t\tif(name == editRange.scope)\n\t\t\t\trangeName = newName ? newName+\"!\"+rangeName : null;\n\t\t\telse\n\t\t\t\trangeName = editRange.scope+\"!\"+rangeName;\n\n\t\t\teditRange = rangeName ? ranges.get(rangeName) : null;\n\t\t}\n\n\t\ttable.clearAll();\n\n\t\tconst allRanges = ranges.serialize();\n\t\tconst data = [];\n\n\t\tlet selectedId;\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst id = i+1;\n\t\t\tlet [name, range] = allRanges[i];\n \n\t\t\tif(editRange && ranges.get(name) == editRange)\n\t\t\t\tselectedId = id;\n\n\t\t\tconst nameParts = name.split(\"!\");\n\n\t\t\tdata.push({\n\t\t\t\tscope: nameParts.length == 1 ? \"$global\" : nameParts[0],\n\t\t\t\tname: nameParts[1] || nameParts[0],\n\t\t\t\trange,\n\t\t\t\tid\n\t\t\t});\n\t\t}\n\n\t\ttable.parse(data);\n\n\t\tform.setValues({id:selectedId}, true);\n\t\tif(selectedId)\n\t\t\ttable.select(selectedId);\n\n\t\tconst select = this.$dialog.$$(\"sheets\");\n\t\tconst selectList = select.getList();\n\n\t\tselectList.clearAll();\n\n\t\tconst sheets = [{\n\t\t\tid: \"$global\", value: locale[\"range-global\"]\n\t\t}];\n\t\tthis.view._sheets.forEach(sheet => {\n\t\t\tsheets.push({id:sheet.name, value: sheet.name});\n\t\t});\n\t\tselectList.parse(sheets);\n\n\t\tif(name){\n\t\t\tconst range = this.$dialog.$$(\"range\");\n\t\t\tconst rangeVal = range.getValue();\n\n\t\t\t//remove sheet\n\t\t\tnewName = newName || this.view.getActiveSheet();\n\n\t\t\tif(rangeVal.indexOf(escapeSheet(name)+\"!\") == 0)\n\t\t\t\trange.setValue(escapeSheet(newName)+\"!\"+rangeVal.split(\"!\")[1]);\n\n\t\t\tif(select.getValue() == name)\n\t\t\t\tselect.setValue(newName);\n\t\t}\n\t}\n}","import {Dialog} from \"./common\";\nimport {range} from \"../helpers/column_names\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-dropdown\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tlet form = this.$dialog.$$(\"form\");\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tform.clear();\n\n\t\t//restore previosly selected range\n\t\tconst value = this.view.getCellEditor(this.cell[0].row, this.cell[0].column);\n\t\tif(value)\n\t\t\tform.setValues({\n\t\t\t\trange: value.options,\n\t\t\t\tempty: value.empty\n\t\t\t});\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tconst span = this.view.$$(\"cells\").getSpan(st.row, st.column);\n\t\t\tif(span && st.row+span[3]*1-1 == end.row && st.column+span[2]*1-1 == end.column)\n\t\t\t\tb = a;\n\t\t\tform.elements.range.setValue(a+\":\"+b);\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.range.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\thead:webix.i18n.spreadsheet.labels[\"dropdown-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tview:\"form\",\n\t\t\t\tid:\"form\",\n\t\t\t\telementsConfig: {\n\t\t\t\t\tlabelWidth: 130\n\t\t\t\t},\n\t\t\t\trows:[\n\t\t\t\t\t{ view:\"text\", label:webix.i18n.spreadsheet.labels[\"dropdown-range\"], name:\"range\" },\n\t\t\t\t\t{ view:\"checkbox\", label:webix.i18n.spreadsheet.labels[\"dropdown-empty-option\"], name:\"empty\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.$$(\"form\").getValues();\n\n\t\tif(!range(values.range, this.view))\n\t\t\tthis.view.alert({text:webix.i18n.spreadsheet.labels[\"error-range\"], type: \"alert-error\"});\n\t\telse{\n\t\t\tgroup.set(function(){\n\t\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\t\tthis.view.setCellEditor(this.cell[i].row, this.cell[i].column, { editor:\"ss_richselect\", options:values.range, empty:values.empty });\n\t\t\t}, this);\n\t\t\tthis.close();\n\t\t}\n\t}\n}","import {range as getRangePos} from \"../helpers/column_names\";\nimport {cell_template} from \"../table\";\nimport * as arr from \"../helpers/array\";\nimport {serialize as getSpans} from \"../operations/spans\";\n\nclass Ranges{\n\tconstructor(view){\n\t\tthis._master = view;\n\t}\n\tclear(scope){\n\t\tconst sheet = typeof scope == \"string\" ? scope : this._master.getActiveSheet();\n\t\tconst ranges = this.serialize(sheet);\n\t\tranges.forEach(range => {\n\t\t\tif(scope === true){\n\t\t\t\tif(range[2])\n\t\t\t\t\tthis.remove(range[0], scope);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\telse\n\t\t\t\tthis.remove(range[0], scope);\n\t\t});\n\t}\n\t_normalizeName(name, scope){\n\t\tif(scope !== true)\n\t\t\tname = (scope || this._master.getActiveSheet())+\"!\"+name;\n\t\treturn name;\n\t}\n\t_normalizeRange(range, scope){\n\t\tconst rangeParts = range.split(\"!\");\n\t\tif(rangeParts.length == 1)\n\t\t\trange = (typeof scope == \"string\" ? scope : this._master.getActiveSheet()) + \"!\" + range;\n\t\treturn range;\n\t}\n\tadd(name, range, scope){\n\t\tconst view = this._master;\n\n\t\tview.callEvent(\"onAfterRangeSet\", [name, range, scope]);\n\n\t\tname = this._normalizeName(name, scope);\n\n\t\tview._mData.getRanges().add(name, this._normalizeRange(range, scope));\n\t\tview.callEvent(\"onMathRefresh\", []);\n\t}\n\tgetCode(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tconst range = this._master._mData.getRanges().get(name);\n\t\tif(range)\n\t\t\treturn range.source;\n\t}\n\tremove(name, scope){\n\t\tname = this._normalizeName(name, scope);\n\n\t\tthis._master._mData.getRanges().remove(name);\n\t\tthis._master.callEvent(\"onMathRefresh\", []);\n\t}\n\tparse(data, sheet){\n\t\tif(!data)\n\t\t\treturn;\n\t\tfor(let i = 0; i < data.length; i++){\n\t\t\tconst ranges = this._master._mData.getRanges();\n\t\t\tlet [name, range, globalRange] = data[i];\n\t\t\tname = this._normalizeName(name, globalRange||sheet);\n\n\t\t\tif(!ranges.get(name))\n\t\t\t\tranges.add(name, this._normalizeRange(range, sheet));\n\t\t}\n\t}\n\tserialize(sheet){\n\t\tsheet = sheet || this._master.getActiveSheet();\n\t\tconst allRanges = this._master._mData.getRanges().serialize();\n\t\tconst out = [];\n\n\t\tfor(let i = 0; i < allRanges.length; i++){\n\t\t\tconst arr = allRanges[i];\n\t\t\tconst nameParts = arr[0].split(\"!\");\n\t\t\tconst globalRange = nameParts.length == 1;\n\n\t\t\tif(globalRange || nameParts[0] == sheet)\n\t\t\t\tout.push([\n\t\t\t\t\tnameParts[ globalRange ? 0 : 1 ],\n\t\t\t\t\tarr[1],\n\t\t\t\t\tglobalRange\n\t\t\t\t]);\n\t\t}\n\n\t\treturn out;\n\t}\n\tgetRanges(sheet){\n\t\tconst data = this.serialize(sheet);\n\t\treturn data.map(arr => {\n\t\t\treturn {\n\t\t\t\tname: arr[0],\n\t\t\t\trange: arr[1],\n\t\t\t\tglobal: arr[2]\n\t\t\t};\n\t\t});\n\t}\n}\n\nexport function init(view) {\n\tview.ranges = new Ranges(view);\n\n\tview.attachEvent(\"onDataSerialize\", data => {\n\t\tdata.ranges = view.ranges.serialize();\n\t});\n}\n\nfunction nullFilter(){ \n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn { id:\"$empty\", value:\"\", $value:\"<span class='webix_ssheet_empty'>\"+locale[\"dropdown-empty\"]+\"</span>\" };\n}\n\nfunction getRange(view, r1, c1, r2, c2, spans){\n\tconst out = [];\n\tconst activeSheet = view._mPage === this;\n\n\tfor (let i = r1-1; i <= r2-1; i++) {\n\t\tfor (let j = c1-1; j <= c2-1; j++){\n\t\t\tlet inSpan;\n\t\t\tfor(let s = 0; s < spans.length; s++){\n\t\t\t\tconst span = spans[s];\n\t\t\t\tconst row = i + 1;\n\t\t\t\tconst col = j + 1;\n\t\t\t\tif(!(row == span[0] && col == span[1]) && row >= span[0] && row < span[0] + span[3] && col >= span[1] && col < span[1] + span[2]){\n\t\t\t\t\tinSpan = true;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\tif(inSpan)\n\t\t\t\tcontinue;\n\t\t\tlet obj = this.getCell(i, j);\n\t\t\tlet cell;\n\n\t\t\tif(!obj)\n\t\t\t\tcell = {\n\t\t\t\t\tvalue: \"\"\n\t\t\t\t};\n\t\t\telse\n\t\t\t\tcell = webix.copy(obj);\n\n\t\t\tif(activeSheet)\n\t\t\t\tcell.$value = cell_template(view, {id: i+1}, null, null, {id:j+1}, true);\n\t\t\telse\n\t\t\t\tdelete cell.format;\n\n\t\t\tcell.id = cell.value;\n\t\t\tout.push(cell);\n\t\t}\n\t}\n\n\treturn out;\n}\n\nexport function rangeOptions(view, text, extra){\n\tlet values = [];\n\tif (typeof text == \"string\"){\n\t\tconst pos = getRangePos(text, view);\n\t\tif (pos){\n\t\t\tlet page = view._mPage;\n\t\t\tif(pos[4])\n\t\t\t\tpage = view._mData.getPage(pos[4]);\n\t\n\t\t\tif(page){\n\t\t\t\tconst spans = (\n\t\t\t\t\tpage == view._mPage ?\n\t\t\t\t\t\tgetSpans(view, {}) :\n\t\t\t\t\t\tarr.find(view._sheets, sheet => sheet.name == pos[4]).content\n\t\t\t\t).spans;\n\t\t\t\tvalues = getRange.apply(page, [view, pos[0], pos[1], pos[2], pos[3], spans]);\n\t\t\t}\n\t\t}\n\t}\n\telse if (webix.isArray(text))\n\t\tfor (let i=0; i<text.length; i++){\n\t\t\tlet v = (text[i] || text[i] === 0) ? text[i] : \"\";\n\t\t\tv = (typeof v === \"object\") ? webix.copy(v) : { id:v, value:v };\n\t\t\tvalues.push(v);\n\t\t}\n\n\tconst test = {};\n\tfor (let i=values.length-1; i>=0; i--){\n\t\tconst boolean = typeof values[i].value === \"boolean\";\n\t\tif(boolean)\n\t\t\tvalues[i].value *= 1;\n\t\tif(boolean || values[i].id === 0)\n\t\t\tvalues[i].id = String(values[i].value);\n\n\t\tif(extra && extra.unique){\n\t\t\tif (test[values[i].id])\n\t\t\t\tvalues.splice(i, 1);\n\t\t\telse\n\t\t\t\ttest[values[i].id] = true;\n\t\t}\n\t}\n\n\tif (extra){\n\t\tlet empty = false;\n\t\tfor (let i=values.length-1; i>=0; i--){\n\t\t\tlet value = values[i].value;\n\t\t\tif (!value && value !== 0){\n\t\t\t\tvalues.splice(i, 1);\n\t\t\t\tempty = true;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tvalues[i].value = String(value);\n\t\t}\n\n\t\tif (extra.order)\n\t\t\tvalues.sort(function(objA, objB){\n\t\t\t\tconst sorters = view.$$(\"cells\").data.sorting.as;\n\t\t\t\tconst a = objA.value;\n\t\t\t\tconst b = objB.value;\n\n\t\t\t\treturn webix.rules.isNumber(a) && webix.rules.isNumber(b) ? sorters.int(a, b) : sorters.string(a, b);\n\t\t\t});\n\n\t\tif (empty && extra.filter)\n\t\t\tvalues.unshift( nullFilter() );\n\n\t\tif (extra.empty)\n\t\t\tvalues.unshift({ id:\"$empty\", $empty:true, value:\"\" });\n\t}\n\treturn values;\n}","import group from \"./undo_group\";\nimport {getType} from \"./types\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport {changeRange, eachRange, toRange} from \"../helpers/column_names\";\nimport {conditions} from \"../helpers/conditional\";\nimport {find} from \"../helpers/array\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.on_click.ssheet_filter_sign = (e, id) => {\n\t\tconst filter = table._ssFilters[id.row][id.column];\n\t\tconst mode = filter.mode || getFilterMode(view, id.row, id.column);\n\n\t\tlet options = [];\n\t\tif (filter.options){\n\t\t\tif (typeof filter.options == \"string\")\n\t\t\t\toptions = rangeOptions(view, filter.options, { unique:true, order:true, filter:true });\n\t\t\telse if (webix.isArray(filter.options))\n\t\t\t\toptions = rangeOptions(view, filter.options, { filter:true });\n\t\t}\n\t\tview.callEvent(\"onCommand\", [{id:\"start-filter\", cell:id, mode, options, filter}]);\n\t};\n\ttable.on_dblclick.ssheet_filter_sign = () => false;\n\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"create-filter\")\n\t\t\ttoggleFilters(view);\n\t});\n\n\tlet refilter = false;\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"filter\"){\n\t\t\tvalue = (typeof value == \"object\") ? value : null;\n\t\t\tview.setCellFilter(row, column, value);\n\t\t\trefilter = true;\n\t\t}\n\t\telse if (type == \"apply-filter\"){\n\t\t\tconst filter = view.getCellFilter(row, column);\n\n\t\t\tfilter.value = value;\n\t\t\tdelete filter.handler;\n\t\t\tif (value && value.condition){\n\t\t\t\tconst mode = filter.mode || getFilterMode(view, row, column);\n\t\t\t\tfilter.handler = getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t\trefilter = true;\n\n\t\t\t// update css\n\t\t\tconst add = value && isValueActive(value);\n\t\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, \"ss_filter_active\");\n\t\t\tsetSpanCss(view, row, column, \"ss_filter_active\", add);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAfterUndo\", () => {\n\t\tif (refilter){\n\t\t\tview.filterSpreadSheet();\n\t\t\trefilter = false;\n\t\t}\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"filter\"){\n\t\t\tif(p.page == view.getActiveSheet()){\n\t\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter\", p.newValue);\n\t\t\t\tsetSpanCss(view, p.row, p.column, \"ss_filter_active\", (p.newValue && p.newValue.value && isValueActive(p.newValue.value)));\n\t\t\t\tmarkBarFilter(view);\n\t\t\t}\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssFilters = {};\n\tmarkBarFilter(view);\n}\n\nexport function getFilters(table){\n\tconst filters = table._ssFilters;\n\tconst all = [];\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tall.push(filters[row][column]);\n\treturn all;\n}\n\nexport function serialize(view,data){\n\tconst filters = getFilters(view._table);\n\tconst result = data.filters = [];\n\n\tfor (let i = 0; i<filters.length; i++){\n\t\tlet {row, column, options, mode, value, lastRow} = filters[i];\n\t\tvalue = value && webix.copy(value);\n\t\tresult.push([row, column, {value, options, mode, lastRow}]);\n\t}\n}\n\nexport function load(view,data){\n\tconst filters = data.filters;\n\n\tif (filters){\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tview.setCellFilter(filters[i][0], filters[i][1], (filters[i][2] || {options:\"\"}));\n\t\t}\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nexport function clearFilters(view, range, page){\n\tlet refilter = false;\n\teachRange(range, view, function(view, cell){\n\t\tif(view.getCellFilter(cell.row, cell.column, page)){\n\t\t\tif(!page || page == view.getActiveSheet())\n\t\t\t\trefilter = true;\n\t\t\tview.setCellFilter(cell.row, cell.column, null, page);\n\t\t}\n\t});\n\tif(refilter)\n\t\tview.filterSpreadSheet();\n}\n\nexport function isFilter(view, row, column){\n\tconst filters = view._table._ssFilters;\n\treturn filters[row] && !!filters[row][column];\n}\n\nexport function calibrateRange(view, row, column, range, lastRow, sheet){\n\tif(!range)\n\t\trange = {end:{row:row}};\n\n\tif (range.end){\n\t\tvar endRow = range.end.row;\n\t\trange = getFilterRange(view, row, column, endRow, lastRow, sheet);\n\t}\n\treturn range;\n}\n\nexport function isValueActive(value){\n\treturn !!(value.includes || (value.condition && value.condition.filter));\n}\n\nfunction isFilterExists(view){\n\tconst filters = view._table._ssFilters;\n\tfor (let row in filters)\n\t\tfor (let column in filters[row])\n\t\t\tif (filters[row][column]) return true;\n\treturn false;\n}\n\nfunction markBarFilter(view){\n\tconst value = isFilterExists(view);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"create-filter\", value}]);\n}\n\nfunction getFilterRange(view, row, column, endRow, lastRow, sheet){\n\tconst span = getSpan(view, row, column, sheet);\n\tif (row === endRow || (span && row == endRow - span[3] + 1)){\n\t\tfor (endRow = row; endRow < view.config.rowCount; endRow++){\n\t\t\tconst r = endRow+1;\n\n\t\t\tconst span = getSpan(view, r, column, sheet);\n\t\t\tif(span && span[0] != r)\n\t\t\t\tcontinue;\n\n\t\t\tconst value = view.getCellValue(r, column, false, sheet ? sheet.name : null);\n\t\t\tif(!value && value !== 0)\n\t\t\t\tbreak;\n\t\t}\n\t}\n\n\tif(lastRow)\n\t\treturn endRow;\n\n\treturn toRange(row+1, column, endRow, column);\n}\n\nfunction getSpan(view, row, column, sheet){\n\tif(!sheet)\n\t\treturn view._table.getSpan(row, column);\n\telse if(sheet.content.spans)\n\t\treturn find(sheet.content.spans, (r, c, cc, rc) => row >= r && row < r + rc && column >= c && column < c + cc); \n}\n\nexport function getFilterMode(view, row, column){\n\tfor (let i=row+1; i<view.config.rowCount; i++){\n\t\tconst value = view.getCellValue(i, column);\n\n\t\tif (value || value === 0){\n\t\t\tconst type = getType(view, i, column);\n\t\t\treturn (type == \"number\" || type == \"date\") ? type : \"text\";\n\t\t}\n\t\telse if (value !== \"\")\n\t\t\tbreak;\n\t}\n\treturn \"text\";\n}\n\nfunction toggleFilters(view){\n\tconst range = view._table.getSelectArea();\n\n\tif (isFilterExists(view)){\n\t\tgroup.set(()=> view.removeFilters());\n\t\tif (range)\n\t\t\tview._table.addSelectArea(range.start, range.end);\n\t}\n\telse if (range)\n\t\tgroup.set(()=>{\n\t\t\tlet row = range.start.row;\n\t\t\tfor (let i = range.start.column; i <= range.end.column; i++)\n\t\t\t\tview.setCellFilter(row, i, { options:range, lastRow: calibrateRange(view, row, i, range, true) });\n\t\t});\n\tmarkBarFilter(view);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tconst filters = data.filters;\n\tif (inc){\n\t\tfor(let i=filters.length-1; i>=0; i--){\n\t\t\tlet [row,column,filter] = filters[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete filter mark if row was deleted\n\t\t\t\t\t\tfilters.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tfilters[i][0] = row*1 + inc;\n\t\t\t\t\tif(filter.lastRow)\n\t\t\t\t\t\tfilter.lastRow += inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tfilters.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\tfilters[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\tfilter.options = changeRange(filter.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteFilter(view, extra, row, col, cutted, translate){\n\tconst filter = extra.filter;\n\n\tfilter.options = changeRange(filter.options, \"row\", translate.row, {column:extra.col, row:extra.row});\n\tfilter.options = changeRange(filter.options, \"column\", translate.column, {column:extra.col, row:extra.row});\n\n\tif(filter.lastRow)\n\t\tfilter.lastRow += translate.row;\n\n\tdelete filter.value; delete filter.handler;\n\tview.setCellFilter(row, col, filter);\n}\n\nexport function getSingleOption(mode, type){\n\tconst c = conditions[mode];\n\tfor (let i=0; i<c.length; i++)\n\t\tif (c[i].id == type) return c[i];\n}\n\nexport function getConditions(name){\n\treturn webix.copy( conditions[name] );\n}\n\nexport function getFilterFunction(mode, value){\n\tconst { includes, condition } = value;\n\tconst opt = getSingleOption(mode, condition.type);\n\tconst handler = opt ? opt.handler : function(){ return true; };\n\n\tif (includes){\n\t\tfor (let i=0; i<includes.length; i++)\n\t\t\tincludes[i] = String(includes[i]);\n\t}\n\n\treturn function(value){\n\t\tif (includes){\n\t\t\treturn includes.indexOf(value) !== -1;\n\t\t} else {\n\t\t\treturn condition.filter === \"\" || handler(value, condition.filter);\n\t\t}\n\t};\n}","import {Dialog} from \"./common\";\nimport * as flt from \"../operations/filter\";\n\nexport const action = \"start-filter\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.cell = action.cell;\n\t\tthis.$mode = action.mode;\n\t\tthis.$filter = action.filter;\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column))){\n\t\t\treturn false;\n\t\t}\n\n\t\tif (!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.$dialog.attachEvent(\"onHide\", () => this.$hide());\n\n\t\t\tconst table = this.view.$$(\"cells\");\n\t\t\ttable.attachEvent(\"onScrollY\", () => this.syncScroll());\n\t\t\ttable.attachEvent(\"onScrollX\", () => this.syncScroll());\n\t\t}\n\n\t\tif (this.$show(this.$filter.value, action.options) === false)\n\t\t\treturn this.close();\n\t\tthis.$dialog.show( this._getTargetNode() );\n\t}\n\t_getTargetNode(){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = table.getSpan(this.cell.row, this.cell.column);\n\t\treturn span ? table.getSpanNode(this.cell) : table.getItemNode(this.cell);\n\t}\n\t$show(value, options){\n\t\tconst list = this.getList();\n\t\tconst filter = this.getFilter();\n\n\t\tif (filter.config.mode !== this.$mode){\n\t\t\tfilter.define(\"conditions\", this.getConditions(this.$mode));\n\t\t\tfilter.define(\"mode\", this.$mode);\n\t\t}\n\n\t\t// if the filter mode for the current column has been changed - reset the value\n\t\tconst type = value && value.conditions && value.conditions.type;\n\t\tif (type && !flt.getSingleOption(this.$mode, type))\n\t\t\tvalue = \"\";\n\n\t\tlist.clearAll();\n\t\tlist.data.importData(options);\n\n\t\t// filter data has been changed - reset value\n\t\tfilter.config.value = \"\";\n\t\tfilter.setValue( webix.copy(value||{}) );\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview:\"popup\",\n\t\t\tcss:\"ssheet_filter\",\n\t\t\tpadding:7,\n\t\t\trelative:\"right\",\n\t\t\tbody:{\n\t\t\t\tmargin:4,\n\t\t\t\trows:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"filter\",\n\t\t\t\t\t\tfield:\"value\",\n\t\t\t\t\t\tmode:\"text\",\n\t\t\t\t\t\tconditions:this.getConditions(\"text\"),\n\t\t\t\t\t\tinputs:[\n\t\t\t\t\t\t\t\"text\",\n\t\t\t\t\t\t\t{ view:\"ssheet-datepicker\", timepicker:true, batch:\"datepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}},\n\t\t\t\t\t\t\t{ view:\"ssheet-daterangepicker\", timepicker:true, batch:\"daterangepicker\", on:{\n\t\t\t\t\t\t\t\tonChange:() => this.getFilter().applyFilter()\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ttemplate:function(obj){\n\t\t\t\t\t\t\treturn obj.$value || obj.value;\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ },\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"cancel\"], autowidth:true, css:\"webix_transparent\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.close()\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{ view:\"button\", label:locale[\"apply\"], autowidth:true, css:\"webix_secondary\", on:{\n\t\t\t\t\t\t\t\"onItemClick\": () => this.applyFilter()\n\t\t\t\t\t\t}},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tapplyFilter(){\n\t\tconst filter = this.getFilter();\n\t\tconst oldValue = this.$filter.value;\n\t\tconst value = this.$filter.value = filter.getValue();\n\t\tthis.$filter.handler = flt.getFilterFunction(this.$mode, value);\n\n\t\tthis.view.filterSpreadSheet();\n\t\tthis.view.callEvent(\"onAction\", [\"apply-filter\", { row:this.cell.row, column:this.cell.column, value:oldValue, newValue:value }]);\n\t\tthis.setCellStyle(this.cell.row, this.cell.column, \"ss_filter_active\", flt.isValueActive(value));\n\n\t\tthis.close();\n\t}\n\tsetCellStyle(row, column, css, add){\n\t\tconst table = this.view.$$(\"cells\");\n\t\tconst span = this.getSpan(table, row, column);\n\n\t\tif (span){\n\t\t\tif (add){\n\t\t\t\tif (span[3].indexOf(css) == -1)\n\t\t\t\t\tspan[3] += \" \" + css;\n\t\t\t} else {\n\t\t\t\tspan[3] = span[3].replace(\" \" + css, \"\");\n\t\t\t}\n\t\t}\n\t\ttable[add?\"addCellCss\":\"removeCellCss\"](row, column, css);\n\t}\n\tgetSpan(table, row, column){\n\t\tlet item = table.getSpan()[row];\n\t\tif (item)\n\t\t\treturn item[column];\n\t}\n\tgetList(){\n\t\treturn this.getFilter().getChildViews()[2];\n\t}\n\tgetFilter(){\n\t\treturn this.$dialog.getBody().getChildViews()[0];\n\t}\n\tsyncScroll(){\n\t\tif (this.$dialog.isVisible()){\n\t\t\tconst node = this._getTargetNode();\n\t\t\tconst table = this.view.$$(\"cells\");\n\n\t\t\tlet isHidden = false;\n\t\t\tif (node){\n\t\t\t\tconst nodeOffset = webix.html.offset( node );\n\t\t\t\tconst tableOffset = webix.html.offset( table.$view.getElementsByClassName(\"webix_ss_body\")[0] );\n\t\t\t\tconst ydiff = nodeOffset.y - tableOffset.y;\n\t\t\t\tconst xdiff = nodeOffset.x - tableOffset.x + nodeOffset.width;\n\n\t\t\t\tisHidden = (ydiff < 0 || ydiff+nodeOffset.height > tableOffset.height || \n\t\t\t\t\txdiff < 0 || xdiff-nodeOffset.width > tableOffset.width - webix.env.scrollSize);\n\t\t\t}\n\t\t\tif (!node || isHidden)\n\t\t\t\tthis.$dialog.show({x:-9999, y:-9999});\n\t\t\telse \n\t\t\t\tthis.$dialog.show(node);\n\t\t}\n\t}\n\tgetConditions(name){\n\t\tconst locale = webix.i18n.filter;\n\t\tconst conditions = flt.getConditions(name);\n\n\t\tfor (let i=0; i<conditions.length; i++)\n\t\t\tif (conditions[i].id)\n\t\t\t\tconditions[i].value = locale[conditions[i].id];\n\n\t\treturn conditions;\n\t}\n}","import {Dialog} from \"./common\";\nimport {getFormat} from \"../operations/styles\";\nimport * as fmt from \"../operations/formats\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"custom\";\n\nexport class DialogBox extends Dialog{\n\t$show(){\n\t\tthis.form = this.$dialog.$$(\"form\");\n\t\tthis.list = this.$dialog.$$(\"list\");\n\t\tthis.preview = this.$dialog.$$(\"preview\");\n\n\t\tthis.cell = this.view.getSelectedId(true);\n\t\tif (!this.cell.length)\n\t\t\treturn false;\n\n\t\tthis.fillForm(this.view);\n\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\topen(action){\n\t\tthis.group = action.group;\n\t\tsuper.open();\n\t}\n\t$init(){\n\t\tconst i18n = webix.i18n.spreadsheet;\n\t\tconst labelsLocale = i18n.labels;\n\t\tconst formatsLocale = i18n.formats;\n\n\t\tconst docsLink = \"https://webix-guides.gitbook.io/spreadsheet-user-guide/formatting_numbers#custom-number-format\";\n\t\tconst delimiters = fmt.getDelimiters(\"int\");\n\n\t\tconst commonConfig = [\n\t\t\t{\n\t\t\t\tname:\"zeros\",\n\t\t\t\tview:\"counter\",\n\t\t\t\tcss:\"webix_ssheet_counter\",\n\t\t\t\tlabel:labelsLocale[\"decimal-places\"],\n\t\t\t\tvalue:0,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tname: \"separator\",\n\t\t\t\tview:\"checkbox\",\n\t\t\t\tlabel:labelsLocale[\"separator\"],\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"richselect\",\n\t\t\t\tname:\"symbol\",\n\t\t\t\tlabel:labelsLocale[\"currency-symbol\"],\n\t\t\t\toptions:fmt.currencies,\n\t\t\t\tbatch:\"common\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabel:labelsLocale[\"negative\"],\n\t\t\t\theight: 160,\n\t\t\t\tname:\"negative\",\n\t\t\t\tbatch:\"common\",\n\t\t\t\tcss:\"webix_ssheet_format_negative\",\n\t\t\t\ttemplate: obj => {\n\t\t\t\t\tif(this.list){\n\t\t\t\t\t\tlet format = this.getFormat(obj.id);\n\t\t\t\t\t\tformat = fmt.format2code(format.fmt, format.delimiters);\n\t\t\t\t\t\tconst style = {css:\"\"};\n\t\t\t\t\t\tconst value = format(-1234.56789, style);\n\n\t\t\t\t\t\treturn \"<span class='\"+style.css+\"'>\"+value+\"</span>\";\n\t\t\t\t\t}\n\t\t\t\t},\n\t\t\t\tdata:[{id:1}, {id:2}, {id:3}, {id:4}]\n\t\t\t}\n\t\t];\n\n\t\tconst customConfig = [\n\t\t\t{\n\t\t\t\tview:\"text\",\n\t\t\t\tlabel: labelsLocale[\"format-pattern\"],\n\t\t\t\tname:\"format\",\n\t\t\t\tlabelPosition:\"top\",\n\t\t\t\tbatch:\"custom\",\n\t\t\t\tplaceholder:\"[>100]0\"+delimiters.groupSign+\"000\"+delimiters.decimalSign+\"00;[>0]None\"\n\t\t\t},\n\t\t\t{\n\t\t\t\tid: \"docs\",\n\t\t\t\ttemplate: \"<a href='\"+docsLink+\"' target='_blank' class = 'docs'>\"+labelsLocale[\"format-docs\"]+\"</a>\",\n\t\t\t\tborderless:true,\n\t\t\t\tbatch:\"custom\"\n\t\t\t}\n\t\t];\n\n\t\tconst dateConfig = [\n\t\t\t{\n\t\t\t\tname:\"date\",\n\t\t\t\tbatch:\"date\",\n\t\t\t\tview:\"formlist\",\n\t\t\t\tlabelWidth: 90,\n\t\t\t\theight: 160,\n\t\t\t\tlabel:labelsLocale[\"date-format\"],\n\t\t\t\tcss:\"webix_ssheet_format_date\",\n\t\t\t\ttemplate: obj => fmt.format2code(obj.value, delimiters)(45000),\n\t\t\t\tdata:[\n\t\t\t\t\tformatsLocale.dateFormat,\n\t\t\t\t\tformatsLocale.timeFormat,\n\t\t\t\t\tformatsLocale.fullDateFormat,\n\t\t\t\t\tformatsLocale.longDateFormat\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth:460,\n\t\t\thead: labelsLocale[\"format-title\"],\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"list\",\n\t\t\t\t\t\tid:\"list\",\n\t\t\t\t\t\tcss:\"webix_ssheet_format_type\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tscroll:false,\n\t\t\t\t\t\tdata:this.getFormats(),\n\t\t\t\t\t\tselect:true,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonSelectChange: (id)=>{\n\t\t\t\t\t\t\t\tthis.updateForm();\n\t\t\t\t\t\t\t\tswitch(id[0]){\n\t\t\t\t\t\t\t\t\tcase \"custom\":\n\t\t\t\t\t\t\t\t\tcase \"date\":\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(id[0]);\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\tdefault:{\n\t\t\t\t\t\t\t\t\t\tconst elements = this.form.elements;\n\t\t\t\t\t\t\t\t\t\tthis.form.showBatch(\"common\");\n\n\t\t\t\t\t\t\t\t\t\telements.separator[ id[0] == \"percent\" ? \"hide\" : \"show\" ]();\n\t\t\t\t\t\t\t\t\t\telements.symbol[ id[0] == \"price\" ? \"show\" : \"hide\" ]();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"form\",\n\t\t\t\t\t\tid:\"form\",\n\t\t\t\t\t\theight:340,\n\t\t\t\t\t\tpaddingY:0,\n\t\t\t\t\t\tpaddingX:20,\n\t\t\t\t\t\telements:[\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tid: \"preview\",\n\t\t\t\t\t\t\t\ttemplate: function(obj){\n\t\t\t\t\t\t\t\t\tif(obj.value == i18n.table[\"format-error\"])\n\t\t\t\t\t\t\t\t\t\treturn obj.value;\n\t\t\t\t\t\t\t\t\treturn \"<span class ='\"+obj.css+\"'>\"+obj.value+\"</span>\";\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tcss: \"webix_ssheet_format_preview\",\n\t\t\t\t\t\t\t\tautoheight: true,\n\t\t\t\t\t\t\t\tborderless:true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t].concat(commonConfig, customConfig, dateConfig),\n\t\t\t\t\t\telementsConfig: {\n\t\t\t\t\t\t\tlabelWidth: 140\n\t\t\t\t\t\t},\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: () => this.updateForm()\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.closeWin()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tlet type = this.list.getSelectedId();\n\t\tlet values = (type == \"custom\")?{format:this.form.getValues().format}:this.form.getValues();\n\t\tvalues.type = type;\n\n\t\tif(this.group)\n\t\t\tfmt.addAreaFormat(this.view, this.group, values.format, values);\n\t\telse\n\t\t\tgroup.set(()=>{\n\t\t\t\tfor (let i = 0; i < this.cell.length; i++)\n\t\t\t\t\tfmt.addFormat(this.view, this.cell[i].row, this.cell[i].column, values.format, values);\n\t\t\t});\n\n\t\tthis.view.$$(\"cells\").refresh();\n\t\tthis.closeWin();\n\t}\n\tcloseWin(){\n\t\tconst format = getFormat(this.view, this.cell[0].row, this.cell[0].column);\n\t\tconst name = format || \"common\";\n\n\t\t//default format\n\t\tif(!fmt.isCustom(name))\n\t\t\tthis.view.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:name}]);\n\t\tthis.close();\n\t}\n\tgetFormat(negative){\n\t\tconst type = this.list.getSelectedId();\n\t\tlet values = this.form.getValues();\n\n\t\tvalues.negative = negative || values.negative;\n\t\tif(type != \"custom\"){\n\t\t\tif(type != \"date\")\n\t\t\t\tvalues.date = \"\";\n\n\t\t\tvalues = fmt.formToValues(type, values);\n\t\t\treturn {\n\t\t\t\tfmt: fmt.serializeFormat(values),\n\t\t\t\tdelimiters:fmt.getDelimiters(type)\n\t\t\t};\n\t\t}\n\t\telse\n\t\t\treturn {\n\t\t\t\tfmt: values.format,\n\t\t\t\tdelimiters: fmt.getDelimiters(type)\n\t\t\t};\n\t}\n\tfillForm(view){\n\t\tconst locale = webix.i18n.spreadsheet;\n\t\tconst format = getFormat(view, this.cell[0].row, this.cell[0].column);\n\t\tlet values = { zeros:0, separator: 0, negative: 1, date: locale.formats.dateFormat, symbol:fmt.currencies[0].value, format: \"\"};\n\t\tlet type;\n\n\t\tlet name = format || \"\";\n\n\t\tvalues.format = fmt.getFormatSource(view, name || \"price\");\n\n\t\tif(!name)\n\t\t\ttype = name = \"price\";\n\t\telse if(name == \"string\")\n\t\t\ttype = name = \"custom\";\n\t\telse\n\t\t\ttype = view._formats.formatHelpers[name].values.type;\n\n\t\tif(type != \"custom\")\n\t\t\twebix.extend(values, view._formats.formatHelpers[name].values, true);\n\n\t\tconst item = this.view.$$(\"cells\").getItem(this.cell[0].row);\n\t\tconst col = this.cell[0].column;\n\n\t\tthis.value = webix.isUndefined(item[col]) ? \"\" : item[col];\n\n\t\tthis.form.setValues(values);\n\t\tthis.list.select(type);\n\t\tthis.updateForm();\n\t}\n\tupdateForm(){\n\t\tconst form = this.form.elements;\n\t\tconst format = this.getFormat();\n\t\tlet value = this.value;\n\n\t\tconst isText = value === \"\" || isNaN(value);\n\n\t\tif(fmt.checkFormat(this.view, format, \"date\") && (isText || fmt.isDateInvalid(value)))\n\t\t\tvalue = 45000;\n\t\telse if(isText && !fmt.checkFormat(this.view, format, \"string\"))\n\t\t\tvalue = 1234.56789;\n\n\t\tlet style = {css:\"\"};\n\t\tvalue = fmt.format2code(format.fmt, format.delimiters)(value, style);\n\n\t\tif(this.view.config.xssSafe)\n\t\t\tvalue = webix.template.escape(value);\n\n\t\t//preview values\n\t\tthis.preview.parse({value:value, css:style.css});\n\t\tform.negative.refresh();\n\t\tform.date.refresh();\n\n\t\t//set new format string\n\t\tform.format.setValue(format.fmt);\n\t}\n\tgetFormats(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn [\n\t\t\t{id: \"price\", value: locale.currency},\n\t\t\t{id: \"int\", value: locale.number},\n\t\t\t{id: \"percent\", value: locale.percent},\n\t\t\t{id: \"date\", value: locale.date},\n\t\t\t{id: \"custom\", value: locale[\"custom-format\"]}\n\t\t];\n\t}\n}","import {Dialog} from \"./common\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid, getDateEditFormat} from \"../operations/formats\";\nimport {getType} from \"../operations/types\";\nimport {find} from \"../helpers/array\";\n\nexport const action = \"conditional-format\";\n\nfunction getConditionStyle(data){\n\treturn data.map(item => {\n\t\titem.id = item.css;\n\t\treturn item;\n\t});\n}\n\nexport class DialogBox extends Dialog{\n\t_rulesToArr(){\n\t\tconst conditions = this.view.conditions.handlers;\n\t\treturn [\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"conditional-common\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.date, //number rules equal to date\n\t\t\t{\n\t\t\t\tvalue: webix.i18n.spreadsheet.labels[\"conditional-text\"],\n\t\t\t\tdisabled:true,\n\t\t\t\t$css:\"webix_ssheet_cformats_type\"\n\t\t\t},\n\t\t\t...conditions.text\n\t\t].map(rule => {\n\t\t\tif(!rule.value)\n\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\treturn rule;\n\t\t});\n\t}\n\n\t_getCondition() {\n\t\tconst view = this.view;\n\t\tconst values = this._getDatalayout().getValue();\n\n\t\tconst data = [];\n\t\tvalues.forEach(v => {\n\t\t\tconst item = [v.condition];\n\t\t\tif (v.condition != \"between\" && v.condition != \"notBetween\")\n\t\t\t\titem.push(this._normalizeValue(v.value, v.condition));\n\t\t\telse\n\t\t\t\titem.push([\n\t\t\t\t\tthis._normalizeValue(v.value, v.condition),\n\t\t\t\t\tthis._normalizeValue(v.value2, v.condition)\n\t\t\t\t]);\n\n\t\t\titem.push(v.style);\n\t\t\tfor (let i=0; i<item.length; i++){\n\t\t\t\tif (item[i] === \"\" || (webix.isArray(item[i]) && item[i].indexOf(\"\") != -1))\n\t\t\t\t\treturn false;\n\t\t\t}\n\t\t\tdata.push(item);\n\t\t});\n\n\t\tview.callEvent(\"onConditionSet\", [data]);\n\t}\n\n\t_safeInt(a){\n\t\tconst num = parseFloat(a);\n\t\tif (num == a) return num;\n\t\treturn a;\n\t}\n\n\t_setCondition() {\n\t\tconst view = this.view;\n\t\tconst collection = view.conditions.get(this.cell.row, this.cell.column);\n\n\t\tconst data = [];\n\t\tif (collection) {\n\t\t\tcollection.forEach(item => {\n\t\t\t\tconst values = {};\n\t\t\t\tvalues.condition = item[0];\n\t\t\t\tif (webix.isArray(item[1])) {\n\t\t\t\t\tvalues.value = this._formatValue(item[1][0], values.condition);\n\t\t\t\t\tvalues.value2 = this._formatValue(item[1][1], values.condition);\n\t\t\t\t} else\n\t\t\t\t\tvalues.value = this._formatValue(item[1], values.condition);\n\n\t\t\t\tvalues.style = item[2];\n\t\t\t\tdata.push(values);\n\t\t\t});\n\t\t}\n\n\t\twhile (data.length < 3)\n\t\t\tdata.push({ });\n\n\t\tthis._getDatalayout().setValue(data);\n\t}\n\n\t_getDatalayout(){\n\t\treturn this.$dialog.getBody().getChildViews()[0].getChildViews()[1].getBody();\n\t}\n\n\t_formatValue(value, condition){\n\t\tif(!(condition && this._isNotDateRule(condition))){\n\t\t\tif(this.editFormat && value !== \"\" && value[0] != \"=\"){\n\t\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\t\treturn this.editFormat(value);\n\t\t\t}\n\t\t}\n\t\treturn value.toString();\n\t}\n\n\t_normalizeValue(value, condition){\n\t\tif(!this._isNotDateRule(condition)){\n\t\t\tif(this.editFormat){\n\t\t\t\tif(isNaN(value)){\n\t\t\t\t\tif(value[0] != \"=\"){\n\t\t\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\t\t\tvalue = parser(value);\n\t\t\t\t\t\tvalue = isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = this._safeInt(value, 10);\n\t\t}\n\t\treturn value;\n\t}\n\n\t_isNotDateRule(condition){\n\t\tif(condition == \"equal\" || condition == \"notEqual\")\n\t\t\treturn false;\n\t\treturn find(this.view.conditions.handlers.text, obj => obj.id == condition);\n\t}\n\n\tokClick(){\n\t\tthis._getCondition();\n\t\tthis.close();\n\t}\n\n\t$show(){\n\t\tthis.cell = this.view.getSelectedId();\n\t\tif(!this.cell)\n\t\t\treturn false;\n\n\t\tconst type = getType(this.view, this.cell.row, this.cell.column);\n\n\t\tif(type == \"date\")\n\t\t\tthis.editFormat = getDateEditFormat(this.view, this.cell.row, this.cell.column);\n\n\t\tthis.$dialog.queryView(\"text\", \"all\").forEach(view => {\n\t\t\tview.define({placeholder: type == \"date\" ? this._formatValue(45000) : \"\"});\n\t\t\tview.refresh();\n\t\t});\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tif(this.activeValue){\n\t\t\t\tconst span = this.view.$$(\"cells\").getSpan(st.row, st.column);\n\t\t\t\tif(a==b || (span && st.row+span[3]*1-1 == end.row && st.column+span[2]*1-1 == end.column))\n\t\t\t\t\tthis.activeValue.setValue(\"=\"+a);\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t\tthis._setCondition();\n\t}\n\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tdelete this.editFormat;\n\t\tthis._getDatalayout().clearAll();\n\t}\n\n\tgetRows(data){\n\t\tconst dialog = this;\n\t\treturn {\n\t\t\tview: \"form\",\n\t\t\tpadding: 0,\n\t\t\tborderless: true,\n\t\t\tcss:\"webix_ssheet_cformats\",\n\t\t\telements: [{\n\t\t\t\tmargin: 10,\n\t\t\t\tpadding: { right: 4 },\n\t\t\t\tcols: [\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"style\",\n\t\t\t\t\t\twidth:120,\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-style\"],\n\t\t\t\t\t\tcss: \"webix_ssheet_cformat_select\",\n\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\tpadding:0,\n\t\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\t\tcss: \"webix_ssheet_cformat_list\",\n\t\t\t\t\t\t\tbody: {\n\t\t\t\t\t\t\t\ttemplate(obj) {\n\t\t\t\t\t\t\t\t\tconst css = \"webix_ssheet_cformat \"+obj.css;\n\t\t\t\t\t\t\t\t\treturn `<div class=\"${css}\">${obj.name}</div>`;\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tdata: data\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\tplaceholder: webix.i18n.spreadsheet.labels[\"conditional-operator\"],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\n\t\t\t\t\t\t\t\tif (dialog.editFormat){\n\t\t\t\t\t\t\t\t\tif (dialog._isNotDateRule(newv))\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: \"\"});\n\t\t\t\t\t\t\t\t\telse {\n\t\t\t\t\t\t\t\t\t\tconst value = dialog._normalizeValue(elements.value.getValue(), newv);\n\t\t\t\t\t\t\t\t\t\telements.value.setValue(dialog._formatValue(value, newv));\n\t\t\t\t\t\t\t\t\t\telements.value.define({placeholder: dialog._formatValue(45000)});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\telements.value.refresh();\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: this._rulesToArr()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tthis.activeValue = current_view;\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t\tonBlur: (current_view)=>{\n\t\t\t\t\t\t\t\t\t\tlet value = current_view.getValue();\n\t\t\t\t\t\t\t\t\t\tif(value !== \"\"){\n\t\t\t\t\t\t\t\t\t\t\tconst elements = current_view.getFormView().elements;\n\t\t\t\t\t\t\t\t\t\t\tconst condition = elements.condition.getValue();\n\t\t\t\t\t\t\t\t\t\t\tvalue = this._normalizeValue(value, condition);\n\t\t\t\t\t\t\t\t\t\t\tcurrent_view.setValue(this._formatValue(value, condition));\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-trash\", click: vid => {\n\t\t\t\t\t\tconst form = webix.$$(vid).getFormView();\n\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\n\t\t\t\t\t\tconst index = dlayout.getChildViews().indexOf(form);\n\t\t\t\t\t\tdlayout.remove(dlayout.getIdByIndex(index));\n\n\t\t\t\t\t\tif (dlayout.count() < 3) dlayout.add({ });\n\t\t\t\t\t}}\n\t\t\t\t]}\n\t\t\t]};\n\t}\n\n\t$init(){\n\t\tconst margin = webix.skin.$active.layoutMargin.form;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"conditional-format\"],\n\t\t\tposition: \"center\",\n\t\t\twidth: 770,\n\t\t\tmove: true,\n\t\t\tmargin,\n\t\t\tbody: { margin:0, rows:[\n\t\t\t\t{\n\t\t\t\t\theight: 36,\n\t\t\t\t\tpadding: { left: 12 },\n\t\t\t\t\tcols: [\n\t\t\t\t\t\t{ view:\"label\", width: 131, label: webix.i18n.spreadsheet.labels.display },\n\t\t\t\t\t\t{ view:\"label\", width: 161, label: webix.i18n.spreadsheet.labels.condition },\n\t\t\t\t\t\t{ view:\"label\", label: webix.i18n.spreadsheet.labels.value },\n\t\t\t\t\t\t{ view:\"icon\", css:\"webix_ssheet_cformat_icon\", icon:\"wxi-plus-circle\",\n\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\tconst dlayout = this._getDatalayout();\n\t\t\t\t\t\t\t\tdlayout.getValue();\t\t\t// save local changes before rendering\n\t\t\t\t\t\t\t\tdlayout.add({ });\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ width: 4 + webix.env.scrollSize }\n\t\t\t\t\t]\n\t\t\t\t},\n\t\t\t\t{\n\t\t\t\t\tview: \"scrollview\",\n\t\t\t\t\tmaxHeight: webix.skin.$active.inputHeight * 3 + 4,\n\t\t\t\t\tborderless: true,\n\t\t\t\t\tscroll: \"y\",\n\t\t\t\t\tbody: {\n\t\t\t\t\t\tview: \"datalayout\",\n\t\t\t\t\t\tpadding: 0,\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\trows: [ this.getRows(getConditionStyle(this.view.config.conditionStyle)) ]\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t]},\n\t\t\ton: {\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"excel-export\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tthis.view.$handleSelection = function(){\n\t\t\treturn false;\n\t\t};\n\n\t\tform.elements.sheets.setValue(this.getSheets());\n\t\tform.elements.filename.setValue(\"Data\");\n\t\tform.elements.filename.getInputNode().select();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"export-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"filename\",  placeholder:webix.i18n.spreadsheet.labels[\"export-name\"] },\n\t\t\t\t\t{ view:\"multicheckbox\", name:\"sheets\", css:\"webix_ssheet_multicheckbox\" }\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tgetSheets(){\n\t\tconst view = this.view;\n\t\tconst sheets = view._sheets;\n\t\tlet value = [];\n\n\t\tfor(let i = 0; i < sheets.length; i++){\n\t\t\tconst state = sheets[i].state;\n\t\t\tif(state == \"veryHidden\")\n\t\t\t\tcontinue;\n\n\t\t\tvalue.push({\n\t\t\t\tname: sheets[i].name,\n\t\t\t\thidden: state == \"hidden\",\n\t\t\t\tactive: view._activeSheet === sheets[i].name ? 1 : 0\n\t\t\t});\n\t\t}\n\n\t\treturn value;\n\t}\n\tokClick(){\n\t\tconst values = this.$dialog.getBody().getValues();\n\t\twebix.toExcel(this.view, values);\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\n\nexport const action = \"add-link\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\t\tif (!this.restoreValue(form))\n\t\t\tform.clear();\n\t\tform.elements.name.focus();\n\n\t\tthis.view.$handleSelection = (st, end, a)=>{\n\t\t\tform.elements.url.setValue(\"#\"+a);\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\trestoreValue(form){\n\t\tconst cell = this.view.getSelectedId();\n\t\tif (cell){\n\t\t\tconst value = this.view.getCellValue(cell.row, cell.column);\n\t\t\tif (value && typeof value == \"string\" && value.indexOf(\"=HYPERLINK\") === 0){\n\t\t\t\tconst parts = value.split(\"\\\"\");\n\t\t\t\tform.setValues({\n\t\t\t\t\tname: (parts[3] || \"\"),\n\t\t\t\t\turl: (parts[1] || \"\")\n\t\t\t\t});\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: webix.i18n.spreadsheet.labels[\"link-title\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"text\", name:\"name\",  placeholder:webix.i18n.spreadsheet.labels[\"link-name\"]},\n\t\t\t\t\t{ view:\"text\", name:\"url\",  placeholder:webix.i18n.spreadsheet.labels[\"link-url\"]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst cell = this.view.getSelectedId();\n\t\tconst data = this.$dialog.getBody().getValues();\n\n\t\tlet text = \"\";\n\t\tif (data.url){\n\t\t\tdata.name = data.name || data.url;\n\t\t\tif (!/^(#|(https?:\\/\\/))/i.test(data.url))\n\t\t\t\tdata.url = \"http://\" + data.url;\n\t\t\ttext = `=HYPERLINK(\"${data.url}\",\"${data.name}\")`;\n\t\t}\n\n\t\tthis.view.setCellValue(cell.row, cell.column, text);\n\t\tthis.view.refresh();\n\t\tthis.close();\n\t}\n}","import {Dialog} from \"./common\";\nimport {isVisible} from \"../sheets\";\nimport {showBorders} from \"../operations/print\";\n\nexport const action = \"print\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst list = form.elements.sheets.getList();\n\t\tlist.clearAll();\n\t\tlist.parse( this.getSheets(this.view) );\n\n\t\tform.setValues({\n\t\t\tdata:\"full\",\n\t\t\tsheets: this.view.getActiveSheet(),\n\t\t}, true);\n\t}\n\t$init(){\n\t\tconst labels = webix.i18n.spreadsheet.labels;\n\n\t\tlet paperSize;\n\n\t\tconst printSizes = webix.env.printSizes.map(size => {\n\t\t\tif(size.id == \"a4\")\n\t\t\t\tpaperSize = \"a4\";\n\t\t\tsize.value = labels[\"page-\"+size.id] || size.id;\n\t\t\treturn size;\n\t\t});\n\n\t\tif(!paperSize) paperSize = printSizes[0].id;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\thead: labels[\"print-title\"],\n\t\t\tmove: true,\n\t\t\tmodal:true,\n\t\t\twidth:580,\n\t\t\tposition: \"center\",\n\t\t\tbuttons:false,\n\t\t\ton:{\n\t\t\t\tonHide: ()=> {\n\t\t\t\t\twebix.extend(this.view._printBorders, this.getValues(), true);\n\t\t\t\t\tshowBorders(this.view, true);\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telementsConfig:{\n\t\t\t\t\tlabelWidth: 0\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-settings\"]},\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ view:\"radio\", name:\"data\", vertical:true, options:[\n\t\t\t\t\t\t\t{ id:\"full\", value: labels[\"sheets\"]},\n\t\t\t\t\t\t\t{ id:\"selection\", value: labels[\"selection\"]}\n\t\t\t\t\t\t], on:{\n\t\t\t\t\t\t\tonChange:function(newv){\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\t\t\t\t\t\t\t\tconst sheets = elements.sheets;\n\n\t\t\t\t\t\t\t\tif(newv == \"full\"){\n\t\t\t\t\t\t\t\t\telements.sheetnames.setValue(1);\n\t\t\t\t\t\t\t\t\tsheets.enable();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tsheets.disable();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}},\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tpadding:{\n\t\t\t\t\t\t\t\tright:30\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\trows:[\n\t\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\t\tname: \"sheets\",\n\t\t\t\t\t\t\t\t\tview: \"multiselect\",\n\t\t\t\t\t\t\t\t\twidth: 160,\n\t\t\t\t\t\t\t\t\tstringResult:false,\n\t\t\t\t\t\t\t\t\tsuggest: {\n\t\t\t\t\t\t\t\t\t\tselectAll: true,\n\t\t\t\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\t\t\t\tdata:[]\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\t{}\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t},\n\t\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"sheetnames\", value:1, labelRight:labels[\"sheet-names\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"borderless\", labelRight:labels[\"borderless\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"skiprows\", labelRight:labels[\"skip-rows\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"margin\", labelRight:labels[\"margin\"]},\n\t\t\t\t\t\t\t{view:\"checkbox\", name:\"external\", labelRight:labels[\"external-ui\"]},\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-paper\"]},\n\t\t\t\t\t{ view:\"radio\", name:\"paper\", value:paperSize, options:printSizes},\n\t\t\t\t\t{ type:\"section\", template: labels[\"print-layout\"]},\n\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t{view:\"radio\", name:\"fit\", value:\"page\", options:[\n\t\t\t\t\t\t\t{ id:\"page\", value:labels[\"page-width\"]},\n\t\t\t\t\t\t\t{ id:\"data\", value:labels[\"page-actual\"]}\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{ view:\"radio\", name:\"mode\", value:\"landscape\", options:[\n\t\t\t\t\t\t\t{ id:\"portrait\", value:labels[\"page-portrait\"]},\n\t\t\t\t\t\t\t{ id:\"landscape\", value:labels[\"page-landscape\"]}\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{ },\n\t\t\t\t\t\t\t{ view: \"button\", css:\"ssheet_cancel_button\", hotkey:\"esc\",\n\t\t\t\t\t\t\t\tvalue: labels.cancel, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: labels[\"print-borders\"], autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.printPreview()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", value: labels.print, hotkey:\"enter\", autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.okClick()\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\tgetValues(){\n\t\tconst data = this.$dialog.getBody().getValues({disabled:false});\n\t\tdata.margin = data.margin?0:{};\n\t\treturn data;\n\t}\n\tprintPreview(){\n\t\tthis.close();\n\t\tthis.view.showPrintBorders(true);\n\t}\n\tgetSheets(view){\n\t\treturn view._sheets\n\t\t\t.map(sheet => ({value: sheet.name, id: sheet.name}))\n\t\t\t.filter(sheet => isVisible(view, sheet.id));\n\t}\n\tokClick(){\n\t\tconst data = this.$dialog.getBody().getValues({disabled:false});\n\t\tdata.margin = data.margin?0:{};\n\t\tthis.close();\n\t\twebix.print(this.view, data);\n\t}\n}\n","import {Dialog} from \"./common\";\n\nexport const action = \"add-comment\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\t//we get cell only on hover commented cell\n\t\tthis.cell = action.cell ? action.cell : this.view.getSelectedId();\n\n\t\t// cell not provided\n\t\tif (!this.cell || \n\t\t\t// cell is locked and in the edit mode\n\t\t\t(this.view.isCellLocked(this.cell.row, this.cell.column) && !action.viewonly) ||\n\t\t\t// action blocked by user's code\n\t\t\t!(this.view.callEvent(\"onBeforeCommentShow\", [this.cell.row, this.cell.column, !action.viewonly]))){\n\t\t\treturn false;\n\t\t}\n\n\t\tthis.view.comments._activeComment = {editStatus: !action.viewonly, cell: this.cell};\n\n\t\tif(!this.$dialog){\n\t\t\tthis.$dialog = webix.ui(this.$init());\n\t\t\tthis.view._destroy_with_me.push(this.$dialog);\n\t\t\tthis.view.comments.commentsView = this.$dialog;\n\t\t\tthis.$dialog.attachEvent(\"onHide\", ()=>this.$hide());\n\t\t\tthis.view.attachEvent(\"onCommentHide\", ()=>this.$dialog.hide());\n\t\t}\n\n\t\tconst form = this.$dialog.getBody();\n\n\t\tconst span = this.view.$$(\"cells\").getSpan(this.cell.row, this.cell.column);\n\t\tconst item = span ? {row: this.cell.row, column:(span[1]*1+span[2]-1)} : this.cell;\n\n\t\twebix.delay(()=>{\n\t\t\tthis.$dialog.show(this.view.$$(\"cells\").getItemNode(item));\n\t\t\tthis._setComment();\n\t\t});\n\t\tif (this.$show(this.$dialog, form) === false)\n\t\t\tthis.close();\n\t}\n\t$show(){\n\t\tthis.textarea = this.$dialog.queryView({view:\"textarea\"});\n\t\tthis.template = this.$dialog.queryView({view:\"template\"});\n\t}\n\t$init(){\n\t\treturn {\n\t\t\tview: \"popup\",\n\t\t\tcss:\"ssheet_comments\",\n\t\t\tminWidth:250,\n\t\t\tminHeight:150,\n\t\t\trelative:\"right\",\n\t\t\tresize:true,\n\t\t\ton:{\n\t\t\t\tonViewResize:()=>{\n\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\tthis.$dialog.show();\n\t\t\t\t\tif(this.textarea.isVisible())\n\t\t\t\t\t\tthis.textarea.focus();\n\t\t\t\t}\n\t\t\t},\n\t\t\tbody:{\n\t\t\t\tanimate:false,\n\t\t\t\tcells:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"template\",\n\t\t\t\t\t\tcss:\"ssheet_comment_view\",\n\t\t\t\t\t\tborderless: true,\n\t\t\t\t\t\tscroll:\"auto\",\n\t\t\t\t\t\tonClick:{\n\t\t\t\t\t\t\t\"ssheet_comment_view\":() => {\n\t\t\t\t\t\t\t\tif(!(this.view.config.readonly || this.view.isCellLocked(this.cell.row, this.cell.column)))\n\t\t\t\t\t\t\t\t\tthis.showInput(this.view.comments.get(this.cell.row, this.cell.column));\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange:()=>{\n\t\t\t\t\t\t\t\tthis.addComment();\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonFocus:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {editStatus: true, cell: this.cell};\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonBlur:()=>{\n\t\t\t\t\t\t\t\tthis.view.comments._activeComment = {};\n\t\t\t\t\t\t\t\tthis.$dialog.hide();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\t_setComment(){\n\t\tconst comment = this.view.comments.get(this.cell.row, this.cell.column);\n\t\tif(this.view.comments._activeComment.editStatus)\n\t\t\tthis.showInput(comment);\n\t\telse\n\t\t\tthis.showTemplate(comment);\n\t}\n\tshowTemplate(text){\n\t\tthis.template.show();\n\t\tthis.template.setHTML(text);\n\t}\n\tshowInput(text){\n\t\tthis.view._commentSel = true;\n\t\tthis.view.$$(\"cells\").select(this.cell.row, this.cell.column);\n\t\tdelete this.view._commentSel;\n\t\twebix.delay(()=>{\n\t\t\tthis.changeTextarea(text);\n\t\t\tthis.textarea.show();\n\t\t\tthis.textarea.focus();\n\t\t});\n\t}\n\taddComment(){\n\t\tthis.view.comments.add(this.cell.row, this.cell.column, this.textarea.getValue());\n\t}\n\tchangeTextarea(text){\n\t\tthis.textarea.blockEvent();\n\t\tthis.textarea.setValue(text||\"\");\n\t\tthis.textarea.unblockEvent();\n\t}\n}","import {Dialog} from \"./common\";\nexport const action = \"resize\";\n\nexport class DialogBox extends Dialog{\n\topen(action){\n\t\tthis.group = action.group;\n\t\tthis.header = action.value;\n\t\tDialog.prototype.open.apply(this, arguments);\n\t}\n\t$show(){\n\t\tconst sel = this.view.getSelectedId();\n\t\tif(!sel)\n\t\t\treturn false;\n\t\tthis.view.$handleSelection = ()=>{\n\t\t\treturn false;\n\t\t};\n\n\t\tconst elements = this.$dialog.getBody().elements;\n\t\tthis.type = elements[\"type\"];\n\t\tthis.size = elements[\"size\"];\n\n\t\tthis.$dialog.getHead().getChildViews()[0].setHTML(this.header);\n\t\tconst grid = this.view.$$(\"cells\");\n\n\t\tlet value;\n\t\tif(this.group == \"row\")\n\t\t\tvalue = grid.getItem(sel.row).$height || grid.config.rowHeight;\n\t\telse\n\t\t\tvalue = grid.getColumnConfig(sel.column).width || grid.config.columnWidth;\n\n\t\tvalue = value / this.view._zoom;\n\n\t\tthis.type.getOption(1).value = webix.i18n.spreadsheet.labels[this.group == \"row\" ? \"height\" : \"width\"];\n\t\tthis.type.setValue(1);\n\t\tthis.type.refresh();\n\n\t\tthis.size.setValue(Math.ceil(value));\n\t\tthis.size.focus();\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t}\n\tokClick(){\n\t\tconst type = this.type.getValue();\n\n\t\tlet size = \"auto\";\n\t\tif(type == 1)\n\t\t\tsize = this.size.getValue()*1;\n\t\telse if(type == 3)\n\t\t\tsize = this.view.$$(\"cells\").config[this.group == \"row\" ? \"rowHeight\" : \"columnWidth\"];\n\n\t\tif(this.group == \"row\")\n\t\t\tthis.view.setRowHeight(null, size);\n\t\telse\n\t\t\tthis.view.setColumnWidth(null, size);\n\n\t\tthis.close();\n\t}\n\t$init(){\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\tposition:\"center\",\n\t\t\twidth: 300,\n\t\t\tmove: true,\n\t\t\tbody:{\n\t\t\t\tpadding:0,\n\t\t\t\tcols:[\n\t\t\t\t\t{\n\t\t\t\t\t\tview:\"radio\", name:\"type\", vertical:true, optionHeight:40,\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: id => {\n\t\t\t\t\t\t\t\tif(id == 1)\n\t\t\t\t\t\t\t\t\tthis.size.enable();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.size.disable();\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:1, value: \"\"},\n\t\t\t\t\t\t\t{id:2, value: locale[\"fit-content\"]},\n\t\t\t\t\t\t\t{id:3, value: locale[\"default-size\"]},\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{rows: [\n\t\t\t\t\t\t{view:\"text\", name: \"size\", width:120},\n\t\t\t\t\t]}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n}","import {Dialog} from \"./common\";\nimport {getDateEditFormat} from \"../operations/formats\";\nimport {getJsDateFromExcel, getExcelDateFromJs} from \"../mathematics/methods\";\nimport {isDateInvalid} from \"../operations/formats\";\nimport {find} from \"../helpers/array\";\nimport group from \"../operations/undo_group\";\n\nexport const action = \"add-cell-validation\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tconst cell = this.cell = this.view.getSelectedId();\n\t\tif(!cell)\n\t\t\treturn false;\n\n\t\tthis.restoreValue(form, cell);\n\n\t\tthis.view.$handleSelection = (st, end, a, b)=>{\n\t\t\tconst type = this.$dialog.getBody().elements.type.getValue();\n\t\t\tif (this.activeValue && this.activeValue.isVisible()){\n\t\t\t\tif(type == \"range\"){\n\t\t\t\t\tconst span = this.view.$$(\"cells\").getSpan(st.row, st.column);\n\t\t\t\t\tif(span && st.row+span[3]*1-1 == end.row && st.column+span[2]*1-1 == end.column)\n\t\t\t\t\t\tb = a;\n\t\t\t\t}\n\t\t\t\tthis.activeValue.setValue(\"=\"+(type != \"range\" ? a : a+\":\"+b));\n\t\t\t}\n\t\t\treturn false;\n\t\t};\n\t}\n\t$hide(){\n\t\tthis.view.$handleSelection = null;\n\t\tthis.$dialog.getBody().clear();\n\t}\n\trestoreValue(form, cell){\n\t\tlet rule = this.view.validation.get(cell.row, cell.column);\n\t\tif(!rule)\n\t\t\trule = {};\n\t\twebix.extend(rule, { type: \"any\", errorHandle: \"information\" });\n\t\tform.setValues(rule);\n\t\tthis.formatInput(form.elements.value);\n\t\tthis.formatInput(form.elements.value2);\n\t}\n\tprepareConditions(){\n\t\tconst handlers = this.view.validation.handlers;\n\t\tfor(let name in handlers)\n\t\t\thandlers[name].map(rule => {\n\t\t\t\tif(!rule.value)\n\t\t\t\t\trule.value = webix.i18n.filter[ rule.id ];\n\t\t\t\treturn rule;\n\t\t\t});\n\t\tthis.handlers = handlers;\n\t}\n\thandleTypeChange(value, oldValue){\n\t\tconst form = this.$dialog.getBody();\n\t\tconst elements = form.elements;\n\n\t\tconst type = elements.type.getValue();\n\t\tconst condition = elements.condition;\n\n\t\tswitch(type){\n\t\t\tcase \"any\":\n\t\t\t\tform.showBatch(\"any\");\n\t\t\t\tbreak;\n\t\t\tcase \"date\":\n\t\t\tcase \"text\":\n\t\t\tcase \"textLength\":\n\t\t\t\tform.showBatch(\"value\");\n\t\t\t\tform.showBatch(\"condition\", true);\n\t\t\t\tbreak;\n\t\t\tcase \"number\":\n\t\t\t\tform.showBatch(\"value\");\n\t\t\t\tform.showBatch(\"condition\", true);\n\t\t\t\tform.showBatch(\"number\", true);\n\t\t\t\tbreak;\n\t\t\tcase \"range\":\n\t\t\t\tform.showBatch(\"value\");\n\t\t\t\tbreak;\n\t\t}\n\n\t\tconst conditionValue = condition.getValue();\n\t\tif(condition.isVisible()){\n\t\t\tcondition.getList().clearAll();\n\t\t\tconst data = [...this.handlers[type]];\n\n\t\t\tif(!find(data, obj => obj.id == conditionValue))\n\t\t\t\tcondition.setValue();\n\n\t\t\tcondition.getList().parse(data);\n\n\t\t\tif(conditionValue == \"between\" || conditionValue == \"notBetween\")\n\t\t\t\telements.value2.show();\n\t\t\telse\n\t\t\t\telements.value2.hide();\n\t\t}\n\t\telse\n\t\t\telements.value2.hide();\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst placeholders = {\n\t\t\ttext: locale[\"validation-placeholder-text\"] || \"some text\",\n\t\t\ttextLength: locale[\"validation-placeholder-number\"] || 123,\n\t\t\tdate: locale[\"validation-placeholder-date\"] || getDateEditFormat(this.view, this.cell.row, this.cell.column)(new Date()),\n\t\t\tnumber: locale[\"validation-placeholder-number\"] || 123,\n\t\t\trange: locale[\"validation-placeholder-range\"] || \"=A1:A7\"\n\t\t};\n\n\t\telements.value.config.placeholder = elements.value2.config.placeholder = placeholders[type];\n\n\t\tif(oldValue == \"date\"){\n\t\t\telements.value.setValue(this.normalizeValue(elements.value.getValue(), \"date\"));\n\t\t\telements.value2.setValue(this.normalizeValue(elements.value2.getValue(), \"date\"));\n\t\t}\n\t\telse if(value == \"date\"){\n\t\t\tthis.formatInput(elements.value);\n\t\t\tthis.formatInput(elements.value2);\n\t\t}\n\n\t\telements.value.refresh();\n\t\telements.value2.refresh();\n\t}\n\tnormalizeValue(value, type){\n\t\tif(webix.isUndefined(value))\n\t\t\tvalue = \"\";\n\n\t\tconst isString = isNaN(value);\n\t\tif(isString && value[0] == \"=\")\n\t\t\treturn value;\n\n\t\ttype = type || this.$dialog.getBody().elements.type.getValue();\n\t\tif(type == \"date\"){\n\t\t\tif(isString){\n\t\t\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\t\t\tvalue = parser(value);\n\t\t\t\tvalue = value === \"\" || isNaN(value) ? \"\" : getExcelDateFromJs(value);\n\t\t\t}\n\t\t\telse\n\t\t\t\tvalue = isDateInvalid(value) ? \"\" : value;\n\t\t}\n\t\telse if((type == \"number\" || type == \"textLength\") && isString)\n\t\t\tvalue = \"\";\n\n\t\treturn value;\n\t}\n\tformatValue(value, type){\n\t\tif(type == \"date\" && value !== \"\" && value[0] != \"=\"){\n\t\t\tvalue = getJsDateFromExcel(value);\n\t\t\treturn getDateEditFormat(this.view, this.cell.row, this.cell.column)(value);\n\t\t}\n\t\treturn value.toString();\n\t}\n\tformatInput(view){\n\t\tlet value = view.getValue();\n\t\tif(value !== \"\"){\n\t\t\tconst elements = view.getFormView().elements;\n\t\t\tconst type = elements.type.getValue();\n\t\t\tvalue = this.normalizeValue(value, type);\n\t\t\tview.setValue(this.formatValue(value, type));\n\t\t}\n\t}\n\t$init(){\n\t\tthis.prepareConditions();\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\twidth: 500,\n\t\t\thead: locale[\"add-cell-validation\"],\n\t\t\tmove: true,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telementsConfig: {\n\t\t\t\t\tlabelWidth: 170\n\t\t\t\t},\n\t\t\t\trules:{\n\t\t\t\t\tvalue: webix.rules.isNotEmpty,\n\t\t\t\t\tvalue2: webix.rules.isNotEmpty,\n\t\t\t\t\tcondition: webix.rules.isNotEmpty,\n\t\t\t\t\terrorHandle: webix.rules.isNotEmpty\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ view:\"richselect\", label:locale[\"validation-type\"], name:\"type\",\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:\"any\", value:locale[\"validation-any\"]},\n\t\t\t\t\t\t\t{id:\"date\", value:locale[\"validation-date\"]},\n\t\t\t\t\t\t\t{id:\"number\", value:locale[\"validation-number\"]},\n\t\t\t\t\t\t\t{id:\"text\", value:locale[\"validation-text\"]},\n\t\t\t\t\t\t\t{id:\"textLength\", value:locale[\"validation-text-length\"]},\n\t\t\t\t\t\t\t{id:\"range\", value:locale[\"validation-range\"]}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: (value, oldValue) => this.handleTypeChange(value, oldValue)\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"checkbox\", label:locale[\"validation-integer\"], batch:\"number\", name:\"integer\" },\n\t\t\t\t\t{ view:\"checkbox\", label:locale[\"validation-ignore-empty\"], batch:\"value\", name:\"ignoreEmpty\" },\n\t\t\t\t\t{\n\t\t\t\t\t\tlabel:locale[\"condition\"],\n\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\tbatch:\"condition\",\n\t\t\t\t\t\tview:\"richselect\",\n\t\t\t\t\t\tname: \"condition\",\n\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\tonChange: function(newv) {\n\t\t\t\t\t\t\t\tconst elements = this.getFormView().elements;\n\t\t\t\t\t\t\t\tif (newv == \"between\" || newv == \"notBetween\")\n\t\t\t\t\t\t\t\t\telements.value2.show();\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\telements.value2.hide();\n\t\t\t\t\t\t\t\telements.condition.validate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t},\n\t\t\t\t\t\tsuggest:{\n\t\t\t\t\t\t\tview: \"ssheet-form-suggest\",\n\t\t\t\t\t\t\tbody:{\n\t\t\t\t\t\t\t\tdata: []\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tbatch:\"value\",\n\t\t\t\t\t\tcols: [\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tlabel:locale[\"value\"],\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: current_view => this.activeValue = current_view,\n\t\t\t\t\t\t\t\t\tonBlur: current_view => {\n\t\t\t\t\t\t\t\t\t\tthis.formatInput(current_view);\n\t\t\t\t\t\t\t\t\t\tcurrent_view.validate();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\tname: \"value\"\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\t\t\trequired: true,\n\t\t\t\t\t\t\t\tname: \"value2\",\n\t\t\t\t\t\t\t\twidth: 150,\n\t\t\t\t\t\t\t\ton: {\n\t\t\t\t\t\t\t\t\tonFocus: current_view => this.activeValue = current_view,\n\t\t\t\t\t\t\t\t\tonBlur: current_view => {\n\t\t\t\t\t\t\t\t\t\tthis.formatInput(current_view);\n\t\t\t\t\t\t\t\t\t\tcurrent_view.validate();\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t\thidden: true\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"inputMessage\",\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\tlabel: locale[\"validation-input-message\"]\n\t\t\t\t\t},\n\t\t\t\t\t{ view:\"richselect\", batch:\"value\", label:locale[\"validation-error-handle\"], name:\"errorHandle\",\n\t\t\t\t\t\toptions:[\n\t\t\t\t\t\t\t{id:\"information\", value:locale[\"validation-error-information\"]},\n\t\t\t\t\t\t\t{id:\"warning\", value:locale[\"validation-error-warning\"]},\n\t\t\t\t\t\t\t{id:\"stop\", value:locale[\"validation-error-stop\"]}\n\t\t\t\t\t\t],\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonChange: function(){\n\t\t\t\t\t\t\t\tthis.validate();\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"errorTitle\",\n\t\t\t\t\t\tview: \"text\",\n\t\t\t\t\t\tbatch:\"value\",\n\t\t\t\t\t\tlabel: locale[\"validation-error-title\"]\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tname: \"errorMessage\",\n\t\t\t\t\t\tview: \"textarea\",\n\t\t\t\t\t\tbatch:\"value\",\n\t\t\t\t\t\tlabel: locale[\"validation-error-message\"]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t},\n\t\t\ton:{\n\t\t\t\tonSaveClick: () => this.okClick(),\n\t\t\t\tonCancelClick: () => this.close()\n\t\t\t}\n\t\t};\n\t}\n\tokClick(){\n\t\tconst form = this.$dialog.getBody();\n\t\tif(form.validate()){\n\t\t\tconst data = form.getValues({hidden:false});\n\t\t\tdata.value = this.normalizeValue(data.value);\n\t\t\tif(data.value2){\n\t\t\t\tdata.value = [data.value, this.normalizeValue(data.value2)];\n\t\t\t\tdelete data.value2;\n\t\t\t}\n\n\t\t\tconst view = this.view;\n\t\t\tgroup.set(()=>\n\t\t\t\tview.eachSelectedCell(cell =>{\n\t\t\t\t\tif(data.type == \"any\" && !data.inputMessage)\n\t\t\t\t\t\tview.validation.remove(cell.row, cell.column);\n\t\t\t\t\telse\n\t\t\t\t\t\tview.validation.add(cell.row, cell.column, data);\n\t\t\t\t})\n\t\t\t);\n\n\t\t\tview.refresh();\n\t\t\tthis.close();\n\t\t}\n\t}\n}","import {Dialog} from \"./common\";\nimport {toRange, escapeSheet} from \"../helpers/column_names\";\n\nexport const action = \"find\";\n\nexport class DialogBox extends Dialog{\n\t$show(box, form){\n\t\tform.setValues({\n\t\t\twithin: \"sheet\",\n\t\t\tin: \"formulas\"\n\t\t});\n\t\tform.getChildViews()[1].clearAll();\n\t\tform.focus();\n\t}\n\t$hide(){\n\t\tdelete this.sheetUpdated;\n\t\tdelete this.settings;\n\t}\n\t$init(){\n\t\tthis.view.attachEvent(\"onChange\", () => {\n\t\t\tif(this.$dialog.isVisible())\n\t\t\t\tthis.sheetUpdated = true;\n\t\t});\n\n\t\tconst locale = webix.i18n.spreadsheet.labels;\n\t\tconst readonly = this.view.config.readonly;\n\t\treturn {\n\t\t\tview: \"ssheet-dialog\",\n\t\t\twidth: 700,\n\t\t\thead: locale[readonly ? \"find-title\" : \"find-replace-title\"],\n\t\t\tmove: true,\n\t\t\tbuttons: false,\n\t\t\tposition: \"center\",\n\t\t\tbody:{\n\t\t\t\tview:\"form\",\n\t\t\t\telementsConfig: {\n\t\t\t\t\tlabelWidth: 120\n\t\t\t\t},\n\t\t\t\telements:[\n\t\t\t\t\t{ cols:[\n\t\t\t\t\t\t{ width: 320, rows:[\n\t\t\t\t\t\t\t{ view:\"text\", name:\"find\", label:locale[\"find-what\"]},\n\t\t\t\t\t\t\t{ view:\"text\", name:\"replace\", label:locale[\"replace-with\"], hidden: readonly},\t\n\t\t\t\t\t\t]},\n\t\t\t\t\t\t{width:10},\n\t\t\t\t\t\t{ rows:[\n\t\t\t\t\t\t\t{ view:\"combo\", name:\"within\", value:\"sheet\", labelWidth: 180, label:locale[\"find-within\"], options:[\n\t\t\t\t\t\t\t\t{id: \"sheet\", value:locale[\"find-sheet\"]},\n\t\t\t\t\t\t\t\t{id: \"book\", value:locale[\"find-book\"]}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{ view:\"combo\", name:\"in\", value:\"formulas\", labelWidth: 180, label:locale[\"find-look-in\"], options:[\n\t\t\t\t\t\t\t\t{id: \"formulas\", value:locale[\"find-formulas\"]},\n\t\t\t\t\t\t\t\t{id: \"values\", value:locale[\"find-values\"]}\n\t\t\t\t\t\t\t]},\n\t\t\t\t\t\t\t{ view:\"checkbox\", name:\"case\", labelWidth: 180, label:locale[\"find-match-case\"]},\n\t\t\t\t\t\t\t{ view:\"checkbox\", name:\"same\", labelWidth: 180, label:locale[\"find-match-entire-content\"]},\n\t\t\t\t\t\t]}\n\t\t\t\t\t]},\n\t\t\t\t\t{ view: \"ssheet-dialog-table\", id: \"table\", resizeColumn:true, borderless:true,\n\t\t\t\t\t\tcolumns:[\n\t\t\t\t\t\t\t{ id:\"sheet\", header:locale[\"find-all-sheet\"], width:150 },\n\t\t\t\t\t\t\t{ id:\"cell\", header:locale[\"find-all-cell\"] },\n\t\t\t\t\t\t\t{ id:\"value\", header:locale[\"find-all-value\"], fillspace:true },\n\t\t\t\t\t\t\t{ id:\"formula\", header:locale[\"find-all-formula\"], fillspace:true },\n\t\t\t\t\t\t],\n\t\t\t\t\t\theight: 150,\n\t\t\t\t\t\tscroll:\"y\",\n\t\t\t\t\t\tselect:\"row\",\n\t\t\t\t\t\ton:{\n\t\t\t\t\t\t\tonAfterSelect: ()=> {\n\t\t\t\t\t\t\t\tconst item = this.$dialog.$$(\"table\").getSelectedItem();\n\n\t\t\t\t\t\t\t\tthis.view.showCell(escapeSheet(item.sheet)+\"!\"+item.cell);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\t{\n\t\t\t\t\t\tcols:[\n\t\t\t\t\t\t\t{ },\n\t\t\t\t\t\t\t{ view: \"button\", css:\"ssheet_cancel_button\", hotkey:\"esc\",\n\t\t\t\t\t\t\t\tvalue: locale.cancel, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.close()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", label: locale[\"replace-all\"], hidden: readonly, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.replaceAll()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", label: locale[\"replace\"], hidden: readonly, autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.replace()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", label: locale[\"find-all\"], autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => {\n\t\t\t\t\t\t\t\t\tthis.findAll(true);\n\t\t\t\t\t\t\t\t\tthis.findNext();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\t{ view: \"button\", label: locale[\"find-next\"], autowidth:true,\n\t\t\t\t\t\t\t\tclick: () => this.findNext()\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t]\n\t\t\t\t\t}\n\t\t\t\t]\n\t\t\t}\n\t\t};\n\t}\n\treplaceAll(){\n\t\tconst settings = this.$dialog.getBody().getValues();\n\n\t\tthis.view.groupUndo(()=>{\n\t\t\tthis.findAll().forEach(item => this.setNewValue(item, settings));\n\t\t\tthis.view.refresh();\n\t\t});\n\n\t\tthis.$dialog.$$(\"table\").clearAll();\n\t}\n\treplace(){\n\t\tconst settings = this.$dialog.getBody().getValues();\n\t\tconst sel = this.view.getSelectedId();\n\t\tif(sel && settings.find){\n\t\t\tconst sheet = this.view.getActiveSheet();\n\t\t\tconst check = this.findCheck(\n\t\t\t\tthis.view.getCellValue(sel.row, sel.column, settings.in == \"formulas\"),\n\t\t\t\tsel.row,\n\t\t\t\tsel.column,\n\t\t\t\tsheet,\n\t\t\t\tsettings,\n\t\t\t\t[]\n\t\t\t);\n\t\t\tif(check.length){\n\t\t\t\tthis.setNewValue(check[0], settings);\n\t\t\t\tthis.view.refresh();\n\t\t\t\tconst table = this.$dialog.$$(\"table\");\n\t\t\t\tif(table.count()){\n\t\t\t\t\tthis.findNext();\n\t\t\t\t\tconst item = table.find(item => item.row == sel.row && item.col == sel.column && item.sheet == sheet, true);\n\t\t\t\t\ttable.remove(item.id);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tsetNewValue(item, settings){\n\t\tconst find = new RegExp(settings.find.replace(/[/\\-\\\\^$*+?.()|[\\]{}]/g, \"\\\\$&\"), settings.case ? \"g\" : \"ig\");\n\t\tthis.view.setCellValue(\n\t\t\titem.row,\n\t\t\titem.col,\n\t\t\t((settings.in == \"formulas\" ? item[\"formula\"] || item[\"value\"] : item[\"value\"])+\"\").replace(find, settings.replace),\n\t\t\titem.sheet\n\t\t);\n\t}\n\tfindAll(updateTable){\n\t\tconst table = this.$dialog.$$(\"table\");\n\t\tif(updateTable)\n\t\t\ttable.clearAll();\n\n\t\tconst settings = this.$dialog.getBody().getValues();\n\t\tif(!settings.find) return [];\n\n\t\tconst data = [];\n\n\t\tif(settings.within == \"sheet\")\n\t\t\tthis.view.$$(\"cells\").eachColumn(col => \n\t\t\t\tthis.view.$$(\"cells\").eachRow(row => \n\t\t\t\t\tthis.findCheck(this.view.getCellValue(row, col, settings.in == \"formulas\"), row, col, this.view.getActiveSheet(), settings, data)\n\t\t\t\t)\n\t\t\t);\n\t\telse\n\t\t\tthis.view.serialize({sheets: true, math: settings.in == \"formulas\"}).forEach(sheet => {\n\t\t\t\tif(sheet.state == \"visible\")\n\t\t\t\t\tsheet.content.data.forEach(item => this.findCheck(item[2], item[0], item[1], sheet.name, settings, data));\n\t\t\t});\n\n\t\tif(updateTable)\n\t\t\ttable.parse(data);\n\n\t\treturn data;\n\t}\n\tfindCheck(val, row, col, sheet, settings, result){\n\t\tlet compare =  settings.find;\n\t\tif(!settings.case)\n\t\t\tcompare = settings.find.toLowerCase();\n\n\t\tlet checkVal = val+\"\";\n\t\tif(!settings.case)\n\t\t\tcheckVal = checkVal.toLowerCase();\n\n\t\tif((settings.same && checkVal == compare) || (!settings.same && checkVal.indexOf(compare) != -1)){\n\t\t\tlet formula = (settings.in == \"formulas\" ? val : this.view.getCellValue(row, col, true, sheet))+\"\";\n\t\t\tif(!(formula.indexOf(\"=\") == 0 && formula.length > 1))\n\t\t\t\tformula = \"\";\n\t\t\tconst value = settings.in == \"formulas\" ? this.view.getCellValue(row, col, false, sheet) : val;\n\n\t\t\tresult.push({ row, col, sheet, value, formula, cell:toRange(row, col) });\n\t\t}\n\t\treturn result;\n\t}\n\tfindNext(){\n\t\tconst table = this.$dialog.$$(\"table\");\n\n\t\tlet settings = this.$dialog.getBody().getValues();\n\t\tdelete settings.replace;\n\t\tsettings = JSON.stringify(settings);\n\n\t\tif(this.sheetUpdated || !table.count() || (this.settings && settings != this.settings)){\n\t\t\tthis.settings = settings;\n\t\t\tthis.findAll(true);\n\t\t}\n\n\t\tif(table.count()){\n\t\t\tlet sel = table.getSelectedId();\n\n\t\t\tif(!sel){\n\t\t\t\tconst spreadsheetSel = this.view.getSelectedId();\n\t\t\t\tif(spreadsheetSel){\n\t\t\t\t\tconst selectedItem = table.find(item => item.row == spreadsheetSel.row && item.col == spreadsheetSel.column && item.sheet == this.view.getActiveSheet(), true);\n\t\t\t\t\tif(selectedItem)\n\t\t\t\t\t\tsel = selectedItem.id;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst next = sel ? table.getNextId(sel) || table.getFirstId() : table.getFirstId();\n\t\t\ttable.select(next);\n\t\t\ttable.showItem(next);\n\t\t}\n\t}\n}","import * as imc from \"./imagecell\";\nimport * as imt from \"./imagetop\";\nimport * as asw from \"./sparkline\";\nimport * as rgs from \"./ranges\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as fmt from \"./format\";\nimport * as cnd from \"./conditional\";\nimport * as exp from \"./export\";\nimport * as lnk from \"./link\";\nimport * as pnt from \"./print\";\nimport * as cmt from \"./comments\";\nimport * as siz from \"./sizing\";\nimport * as vld from \"./validation\";\nimport * as fnd from \"./find\";\n\nconst bases = [ imt, imc, asw, rgs, dpd, flt, fmt, cnd, exp, lnk, pnt, cmt, siz, vld, fnd ];\n\nexport function init(view){\n\tconst dialogs = {};\n\tconst viewBases = view.config.readonly ? [cmt, exp, pnt, flt, fnd] : bases;\n\n\tfor (let i = 0; i < viewBases.length; i++)\n\t\tdialogs[viewBases[i].action] = new viewBases[i].DialogBox(view);\n\n\tview.attachEvent(\"onCommand\", function(action){\n\t\tconst box = dialogs[action.id];\n\t\tif (box) box.open(action);\n\t});\n\n\tview.attachEvent(\"onAction\", function(id, values){\n\t\t//hide win when the external ui is removed\n\t\tif(id == \"add-view\" && !values.newValue){\n\t\t\tconst box = dialogs[\"add-image-top\"];\n\t\t\tif(box && box.viewid == values.row){\n\t\t\t\tbox.close();\n\t\t\t}\n\t\t}\n\t});\n}","import {\n\tisCellSelected, \n\tisColSelected, \n\tisRowSelected, \n\tselectRow, \n\tselectColumn\n} from \"./operations/column_operations\";\nimport {\n\tgetColumnOperation, \n\tgetRowOperation,\n\teditMenu\n} from \"./toolbar/structure\";\nimport { getMenuLabel, normalizeAction } from \"./toolbar/helpers\";\nimport { formatTemplate } from \"./toolbar/buttons\";\n\nfunction setMenuLocaleLabels(options, action) {\n\treturn options.map(o => {\n\t\to.value = getMenuLabel(o.id, action);\n\t\tif (o.submenu && (o.id === \"format-row\" || o.id === \"format-column\")) o.submenu = setMenuLocaleLabels(o.submenu, \"format\");\n\t\treturn o;\n\t});\n}\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => {\n\t\tview.$$(\"context\").attachTo(view._table.$view);\n\t\tview.$$(\"cells\").attachEvent(\"onSelectChange\", ()=> view.$$(\"context\").hide());\n\t});\n\n\tlet clipboard = [];\n\tif (view.config.clipboard !== false)\n\t\tclipboard = [\n\t\t\t{ id:\"cut\" },\n\t\t\t{ id:\"copy\" },\n\t\t\t{ id:\"paste\" },\n\t\t\t{ \n\t\t\t\tid:\"special-paste\",\n\t\t\t\tsubmenu:[\n\t\t\t\t\t{ id: \"paste-values\"  },\n\t\t\t\t\t{ id: \"paste-formulas\" },\n\t\t\t\t\t{ id: \"paste-styles\" },\n\t\t\t\t\t{ id: \"paste-conditions\" },\n\t\t\t\t\t{ id: \"paste-validation\" },\n\t\t\t\t]\n\t\t\t}\n\t\t];\n\n\tconst lists = {\n\t\tdata: setMenuLocaleLabels(clipboard.concat(editMenu().sort((a,b) => a.menuOrder - b.menuOrder))),\n\t\tcolumn: setMenuLocaleLabels(getColumnOperation(view)),\n\t\trow: setMenuLocaleLabels(getRowOperation(view))\n\t};\n\n\tconst context = {\n\t\tview: \"contextmenu\",\n\t\tid: \"context\",\n\t\tpadding:0,\n\t\tsubmenuConfig:{\n\t\t\ttemplate: obj => obj.example ? formatTemplate(view, obj) : obj.value,\n\t\t\tpadding:0,\n\t\t\ton:{\n\t\t\t\tonBeforeShow:function(){\n\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tdata:[],\n\t\ton:{\n\t\t\tonMenuItemClick(id) {\n\t\t\t\tconst option = webix.copy(this.getMenuItem(id));\n\t\t\t\tnormalizeAction(option);\n\t\t\t\tview.callEvent(\"onCommand\", [option]);\n\t\t\t},\n\t\t\tonShow(){\n\t\t\t\tdelete view._context;\n\t\t\t},\n\t\t\tonBeforeShow(pos) {\n\t\t\t\tview._context = true;\n\t\t\t\twebix.callEvent(\"onClick\", []);\n\n\t\t\t\tconst trg = view._table.locate(pos);\n\t\t\t\tif (!trg) return false;\n\n\t\t\t\tlet mode = \"\";\n\t\t\t\tif (trg.header && trg.column !== \"rowId\"){\n\t\t\t\t\tif (!isColSelected(trg.column, view))\n\t\t\t\t\t\tselectColumn(trg.column, view);\n\t\t\t\t\tmode = \"column\";\n\t\t\t\t} else if (trg.row){\n\t\t\t\t\tif (trg.column === \"rowId\"){\n\t\t\t\t\t\tif (!isRowSelected(trg.row, view))\n\t\t\t\t\t\t\tselectRow(trg.row, view);\n\t\t\t\t\t\tmode = \"row\";\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (!isCellSelected(trg.row, trg.column, view))\n\t\t\t\t\t\t\tview._table.addSelectArea(trg, trg);\n\t\t\t\t\t\tmode = \"data\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (mode){\n\t\t\t\t\tconst data = getMenuData(view, mode, lists[mode]);\n\t\t\t\t\tif (data){\n\t\t\t\t\t\tthis.clearAll();\n\t\t\t\t\t\tthis.parse(data);\n\t\t\t\t\t\tthis.sizeToContent();\n\t\t\t\t\t\twebix.html.preventEvent(pos);\n\t\t\t\t\t\treturn true;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"context\", context]);\n\tconst contextMenu = view.ui(context);\n\n\tview._destroy_with_me.push(contextMenu);\n}\n\nexport function getMenuData(view, name, data){\n\tconst ev = { area: name, data };\n\tif (view.callEvent(\"onContextMenuConfig\", [ev]))\n\t\treturn ev && ev.data;\n\treturn null;\n}\n","import {ignoreReset, ignoreUndo} from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\nimport {adjustSpan} from \"../operations/spans\";\nimport {updateMaxColumn} from \"../helpers/column_names\";\nimport {find} from \"../helpers/array\";\nimport {processAreaFormats} from \"./formats\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action, start, end) => {\n\t\tif (action.id == \"add\" || action.id == \"del\"){\n\t\t\tconst area = view._table.getSelectArea();\n\t\t\tif (area && !(start && end)){\n\t\t\t\tstart = area.start;\n\t\t\t\tend = area.end;\n\t\t\t}\n\n\t\t\tif (start && end){\n\t\t\t\tif (action.group == \"column\" && action.id == \"add\")\n\t\t\t\t\tupdateMaxColumn(view.config.columnCount + (end.column - start.column) + 1);\n\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tprocess(action, start, end, view);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, dir, extra) => {\n\t\tif (action == \"grid-change\"){\n\t\t\tconst state = view._table.getScrollState();\n\n\t\t\t//if we added rows/cols - rengine can update cell references on other pages on undo\n\t\t\tif(extra){\n\t\t\t\tif(!dir)\n\t\t\t\t\tview._mPage[row ? \"removeRow\" : \"removeColumn\"]((row || column)-1, extra.count);\n\t\t\t\telse\n\t\t\t\t\tview._mPage[row ? \"addRow\" : \"addColumn\"]((row || column)-1, extra.count);\n\t\t\t}\n\t\t\t//if removed - can't, so parse full data and show sheet\n\t\t\telse\n\t\t\t\tstate.sheet = view.getActiveSheet();\n\n\t\t\tloadChangedData(view, value, state);\n\t\t}\n\t});\n}\n\nfunction process(action, start, end, view) {\n\tlet select = view._table.getSelectArea();\n\tconst state = view._table.getScrollState();\n\n\tconst del = action.id == \"del\";\n\tconst oldData = view.serialize({sheets: del, viewIds:true});\n\tconst newData = webix.copy(oldData);\n\tconst data = {value:oldData, newValue:newData};\n\n\tif(!del)\n\t\twebix.extend(data, {\n\t\t\t[action.group]: start[action.group],\n\t\t\textra: {\n\t\t\t\tcount: end.row - start.row + 1\n\t\t\t}\n\t\t});\n\n\tconst obj = del ? find(newData, sheet => sheet.name == view.getActiveSheet()).content : newData;\n\n\tconst spanData = [];\n\tconst spans = obj.spans;\n\tfor (let i in spans){\n\t\tconst span = adjustSpan(spans[i], action, start, end, view, obj.data, spanData);\n\t\tif (span[2] <= 0 || span[3] <= 0)\n\t\t\tspans.splice(i, 1);\n\t}\n\n\tconst values = getUpdateValues(action, start, end);\n\tignoreUndo(function(){\n\t\tview.callEvent(\"onAction\", [\"before-grid-change\", {\n\t\t\tname: values.name,\n\t\t\tinc: values.inc,\n\t\t\tdata: obj,\n\t\t\tstart: start\n\t\t}]);\n\t},view);\n\n\tif (action.group == \"column\"){\n\t\tif (del)\n\t\t\t_delColumn(action, start, end, view);\n\t\telse\n\t\t\t_addColumn(action, start, end, view);\n\t}\n\telse if (action.group == \"row\") {\n\t\tif (del)\n\t\t\t_delRow(action, start, end, view);\n\t\telse\n\t\t\t_addRow(action, start, end, view);\n\t}\n\n\t// muon updates data and ranges\n\tconst updatedData = view.serialize();\n\tobj.data = updatedData.data;\n\tobj.ranges = updatedData.ranges;\n\tobj.locked = updatedData.locked;\n\n\tspanData.forEach(item => {\n\t\tobj.data.push(item);\n\t});\n\n\tview.callEvent(\"onAction\", [\"grid-change\", data]);\n\n\tignoreUndo(function() {\n\t\tloadChangedData(view, obj, state);\n\t\tprocessAreaFormats(view, action, start, end);\n\t},view);\n\n\tif (select){\n\t\tselect = fixSelectArea(select, view);\n\t\tif (select)\n\t\t\tview.$$(\"cells\").addSelectArea(select.start, select.end);\n\t}\n}\n\nfunction fixSelectArea(select, view){\n\tconst config = view.config;\n\n\tconst rows = config.rowCount;\n\tconst cols = config.columnCount;\n\n\tif (select.start.row*1 > rows) select.start.row = rows;\n\tif (select.end.row*1 > rows) select.end.row = rows;\n\tif (select.start.column*1 > cols) select.start.column = cols;\n\tif (select.end.column*1 > cols) select.end.column = cols;\n\n\tif (\n\t\tview.isRowVisible(select.start.row) &&\n\t\tview.isRowVisible(select.end.row) &&\n\t\tview.isColumnVisible(select.start.column) &&\n\t\tview.isColumnVisible(select.end.column)\n\t)\n\t\treturn select;\n}\n\nfunction loadChangedData(view, data, state){\n\t// data loading resets undo history, and\n\t// we need to preserve it\n\tignoreReset(function(){\n\t\tview.$handleSelection = null;\n\t\tview.parse(data);\n\n\t\tif(state){\n\t\t\tif(state.sheet)\n\t\t\t\tview.showSheet(state.sheet);\n\t\t\tview._table.scrollTo(state.x, state.y);\n\t\t}\n\t});\n}\n\nfunction getUpdateValues( action, start, end){\n\tconst name = action.group;\n\tlet inc = action.id == \"add\" ? 1 : (action.id == \"del\" ? -1 : 0);\n\n\tif (inc) {\n\t\t// span support\n\t\tif (name == \"row\")\n\t\t\tinc += inc * (end.row - start.row);\n\t\tif (name == \"column\")\n\t\t\tinc += inc * (end.column - start.column);\n\t}\n\treturn {name, inc};\n}\n\nfunction _addColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tview._mPage.addColumn(start.column-1, count);\n\tview.config.columnCount += count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, view.getActiveSheet()]);\n}\n\nfunction _delColumn(action, start, end, view) {\n\tlet count = end.column - start.column + 1;\n\n\tif (view.config.columnCount === count){\n\t\tif (start.column == end.column)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.column--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeColumn(start.column-1, count);\n\tview.config.columnCount -= count;\n\n\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, view.getActiveSheet()]);\n}\n\nfunction _addRow(action, start, end, view) {\n\tconst count = end.row - start.row + 1;\n\n\tview._mPage.addRow(start.row-1, count);\n\tview.config.rowCount += count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}\n\nfunction _delRow(action, start, end, view) {\n\tlet count = end.row - start.row + 1;\n\n\tif (view.config.rowCount === count){\n\t\tif (start.row == end.row)\n\t\t\treturn; //deleting last column, ignoring\n\t\t//prevent deleting all columns\n\t\tend.row--;\n\t\tcount--;\n\t}\n\n\tview._mPage.removeRow(start.row-1, count);\n\tview.config.rowCount -= count;\n\n\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row]);\n}","import group from \"./undo_group\";\nimport {setSpanCss} from \"./spans\";\nimport {rangeOptions} from \"../mathematics/ranges\";\nimport * as fmt from \"../operations/formats\";\nimport {changeRange, eachRange} from \"../helpers/column_names\";\n\nexport function init(view){\n\tconst table = view._table;\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\treset(view);\n\n\ttable.attachEvent(\"onBeforeEditStart\", function(id){\n\t\tlet col = this.getColumnConfig(id.column);\n\t\tif (this._ssEditors[id.row]){\n\t\t\tlet ed = this._ssEditors[id.row][id.column];\n\t\t\tif (ed){\n\t\t\t\twebix.extend(col, ed, true);\n\t\t\t\twebix.extend(col, {row: view.getRow(id.row)}, true);\n\t\t\t\tif (ed.options){\n\t\t\t\t\tif (typeof ed.options == \"string\")\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { unique:true, order:true, empty:ed.empty });\n\t\t\t\t\telse if (webix.isArray(ed.options))\n\t\t\t\t\t\tcol.options = rangeOptions(view, ed.options, { empty:ed.empty });\n\n\t\t\t\t\tif(col.collection){\n\t\t\t\t\t\tcol.collection.clearAll();\n\t\t\t\t\t\tcol.collection.parse(col.options);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\t// update format if editor supports this feature\n\ttable.attachEvent(\"onBeforeEditStop\", function(state, editor, ignore){\n\t\tif (!ignore && editor.getFormat){\n\t\t\tconst value = editor.getValue();\n\t\t\tlet format = editor.getFormat(value);\n\n\t\t\tgroup.set(function(){\n\t\t\t\tview.setCellValue(editor.row, editor.column, value);\n\t\t\t\tif (format){\n\t\t\t\t\tfmt.addFormat(view, editor.row, editor.column, fmt.getFormatSource(view, format));\n\t\t\t\t} else\n\t\t\t\t\tfmt.removeFormat(view, editor.row, editor.column);\n\t\t\t});\n\n\t\t\tconst cell = view.getSelectedId();\n\t\t\tif (cell && cell.row == editor.row && cell.column == editor.column){\n\t\t\t\tformat = format || \"common\";\n\t\t\t\tformat = fmt.isCustom(format) ? \"custom\" : format;\n\t\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"format\", value:format}]);\n\t\t\t}\n\t\t}\n\t});\n\n\ttable.attachEvent(\"onAfterEditStop\", function(state, editor){\n\t\tconst col = this.getColumnConfig(editor.column);\n\n\t\tcol.editor = \"text\";\n\t\tdelete col.popup; delete col.$popup; delete col.row;\n\t});\n\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type == \"dropdown\")\n\t\t\tview.setCellEditor(row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p) => {\n\t\tif (action == \"dropdown\"){\n\t\t\tif(p.page == view.getActiveSheet())\n\t\t\t\tsetSpanCss(view, p.row, p.column, \"ss_editor\", p.newValue);\n\t\t}\n\t\telse if (action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nfunction reset(view){\n\tview._table._ssEditors = {};\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\ttblEditors = view._table._ssEditors,\n\t\teditors = [];\n\n\tfor (row in tblEditors){\n\t\tfor (column in tblEditors[row])\n\t\t\teditors.push([row, column, tblEditors[row][column]]);\n\t}\n\tdata.editors = editors;\n}\n\nexport function load(view,data){\n\tconst editors = data.editors;\n\n\tif (editors)\n\t\tfor (let i=0; i<editors.length; i++)\n\t\t\tview.setCellEditor.apply(view, editors[i]);\n}\n\nexport function clearEditors(view, range, page){\n\tview._table.editStop();\n\teachRange(range, view, function(view, cell){\n\t\tif(view.getCellEditor(cell.row, cell.column, page))\n\t\t\tview.setCellEditor(cell.row, cell.column, null, page);\n\t});\n}\n\nexport function isEditor(view, row, column){\n\tconst editor = view._table._ssEditors;\n\treturn editor[row] && !!editor[row][column];\n}\n\n// called on column/row add, delete, hide,show\nfunction updatePosition(view, name, inc, data, start){\n\tconst editors = data.editors;\n\n\tif (inc){\n\t\t// create new editors\n\t\tfor(let i=editors.length-1; i>=0; i--){\n\t\t\tlet [row,column,editor] = editors[i];\n\t\t\tif (name == \"row\" && row >= start.row || name == \"column\" && column >= start.column){\n\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc){\t//delete editor mark if row was deleted\n\t\t\t\t\t\teditors.splice(i,1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\teditors[i][0] = row*1 + inc;\n\t\t\t\t}\n\t\t\t\telse if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\teditors.splice(i, 1);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t} else \n\t\t\t\t\t\teditors[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t\teditor.options = changeRange(editor.options, name, inc, start);\n\t\t\t}\n\t\t}\n\t}\n}\n\nexport function pasteDropdown(view, extra, row, col, cutted){\n\tconst editor = extra.dropdown;\n\n\tview.setCellEditor(row, col, editor);\n\tif (cutted === 1)\n\t\tview.setCellEditor(extra.row, extra.col, {});\n}","import {ignoreReset, ignoreUndo} from \"./undo\";\nimport {pasteCondition} from \"./conditional_formats\";\nimport {pasteDropdown} from \"./dropdown\";\nimport {pasteFilter} from \"./filter\";\nimport {pasteSpan} from \"./spans\";\nimport {pasteValidation} from \"./validation\";\n\nlet styledata, clipdata, origin, cutted, updateFilters, specialPaste, context;\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName)=> {\n\t\tif(context && context.page == name && context.view == view)\n\t\t\tcontext.page = newName;\n\t});\n\n\tview.attachEvent(\"onSheetRemove\", (name)=> {\n\t\tif(context && context.page == name && context.view == view)\n\t\t\tcontext = null;\n\t});\n\n\tconst clipboard = view.config.clipboard;\n\tconst browserClipboard = navigator.clipboard;\n\n\tif(clipboard === false)\n\t\treturn;\n\n\twebix.clipbuffer.init();\n\tconst buffer = document.querySelector(\".webix_clipbuffer\");\n\n\tconst keyC = 67; //keyboard 'c' code\n\tconst keyX = 88; //keyboard 'x' code\n\tconst grid = view.$$(\"cells\");\n\n\tgrid.attachEvent(\"onSelectChange\", () => _sel_to_clip(view, buffer));\n\n\tgrid.attachEvent(\"onKeyPress\", (code, e) => {\n\t\tif((code === keyC || code === keyX) && (e.ctrlKey || e.metaKey) && grid.getSelectedId()){\n\t\t\tcutted = (code === keyX)*1;\n\t\t\tsetClipboard(view, buffer);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onCommand\", action => {\n\t\tif(action.id.indexOf(\"paste\") != -1){\n\t\t\tspecialPaste = action.id.split(\"-\")[1];\n\n\t\t\tif(browserClipboard && browserClipboard.readText){\n\t\t\t\tbrowserClipboard.readText()\n\t\t\t\t\t.then(text => {\n\t\t\t\t\t\twebix.clipbuffer.set(text);\n\t\t\t\t\t\t_clip_to_sel(view, grid, buffer.value);\n\t\t\t\t\t})\n\t\t\t\t\t.catch(()=> {\n\t\t\t\t\t\t_clip_to_sel(view, grid, clipdata);\n\t\t\t\t\t})\n\t\t\t\t\t.finally(()=> {\n\t\t\t\t\t\tspecialPaste = null;\n\t\t\t\t\t});\n\t\t\t}\n\t\t\telse {\n\t\t\t\t_clip_to_sel(view, grid, clipdata);\n\t\t\t\tspecialPaste = null;\n\t\t\t}\n\t\t}\n\t\telse if(action.id == \"copy\" || action.id == \"cut\"){\n\t\t\tcutted = (action.id == \"cut\")*1;\n\t\t\tsetClipboard(view, buffer, browserClipboard, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onUndo\", (action, row, column, data) => {\n\t\tif (action == \"paste\"){\n\t\t\tconst state = grid.getScrollState();\n\t\t\tconst sel = grid.getSelectArea();\n\t\t\t// data loading resets undo history, and\n\t\t\t// we need to preserve it\n\t\t\tignoreReset(()=>{\n\t\t\t\tview.$handleSelection = null;\n\t\t\t\tview.parse(data);\n\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t\t\tgrid.scrollTo(state.x, state.y);\n\t\t\t});\n\t\t}\n\t});\n\n\tif (!view.config.readonly) {\n\t\tgrid.attachEvent(\"onPaste\", text => {\n\t\t\t_clip_to_sel(view, grid, text);\n\t\t});\n\t}\n}\n\nfunction setClipboard(view, buffer, browserClipboard, menu){\n\tconst grid = view.$$(\"cells\");\n\torigin = grid.getSelectArea();\n\t\n\tstyledata = _get_sel_style(view);\n\tcontext = { page: view.getActiveSheet(), view };\n\n\tif(menu && browserClipboard && browserClipboard.writeText)\n\t\tbrowserClipboard.writeText(buffer.value);\n\n\tclipdata = buffer.value;\n\n\tif(cutted && Object.keys(grid._ssFilters).length !== 0)\n\t\tupdateFilters = allFiltersInZone(grid._ssFilters, view.config.columnCount);\n}\n\nfunction _sel_to_clip(view, buffer){\n\tif(view._loading_data) return;\n\tconst grid = view.$$(\"cells\");\n\tif(grid.getSelectedId())\n\t\twebix.delay(()=>{\n\t\t\tconst data = [];\n\n\t\t\tconst origin = grid.getSelectArea();\n\t\t\tfor(let r = origin.start.row; r <= origin.end.row; r++){\n\t\t\t\tconst row = [];\n\t\t\t\tfor(let c = origin.start.column; c <= origin.end.column; c++)\n\t\t\t\t\trow.push(_updateDelimiter(view.getCellValue(r, c, false), view.config));\n\t\t\t\tdata.push(row);\n\t\t\t}\n\n\t\t\tconst clipdata = webix.csv.stringify(data, grid.config.delimiter);\n\n\t\t\tif (grid.getEditor()){\n\t\t\t\tbuffer.value = clipdata;\n\t\t\t} else {\n\t\t\t\tbuffer.focus();\n\t\t\t\twebix.clipbuffer.set(clipdata);\n\t\t\t}\n\t\t\twebix.UIManager.setFocus(grid);\n\t\t});\n}\n\nfunction _updateDelimiter(value, config) {\n\tconst format = getClipboardNumberFormat(config);\n\n\tif(webix.rules.isNumber(value) && format)\n\t\tvalue = webix.Number.numToStr(format)(value);\n\n\treturn value;\n}\n\nfunction _clip_to_sel(view, grid, text){\n\tif(!text)\n\t\ttext = \"\";\n\n\tconst leftTop = grid.getSelectArea();\n\tif (!leftTop) return;\n\tconst start = leftTop.start;\n\tconst end = leftTop.end;\n\n\tconst fromSheet = text === clipdata;\n\n\tlet data = fromSheet ? styledata : webix.csv.parse(text, grid.config.delimiter);\n\tif(!fromSheet)\n\t\tdata = _changeDelimiter(data, view.config);\n\n\tconst translate = { id:\"move\", column:0, row: 0, cut:cutted };\n\tconst sameView = context && context.view == view;\n\n\tif(specialPaste || !fromSheet){\n\t\tcutted = 0;\n\t\tupdateFilters = 0;\n\t}\n\n\tconst oldData = view.serialize();\n\n\tignoreUndo(()=>{\n\t\tconst dataRowCount = data.length;\n\t\tconst dataColCount = data[0].length;\n\n\t\tconst colCount = end.column - start.column + 1;\n\t\tlet rowCount = end.row - start.row + 1;\n\n\t\t_add_row_col(view, start, rowCount, data);\n\n\t\tif(fromSheet){\n\t\t\ttranslate.column = start.column - origin.start.column;\n\t\t\ttranslate.row = start.row - origin.start.row;\n\n\t\t\tif (updateFilters){\n\t\t\t\tconst sel = grid.getSelectArea();\n\t\t\t\tview.removeFilters();\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t\t}\n\n\t\t\tconst mode = (!cutted && !updateFilters && (rowCount > dataRowCount || colCount > dataColCount)) ? 2 : 0;\n\n\t\t\tif(specialPaste != \"conditions\"){\n\t\t\t\tif (cutted == 1){\n\t\t\t\t\tif(sameView){\n\t\t\t\t\t\tview._mData.getCopyManager().move(\n\t\t\t\t\t\t\tview._mPage.cellID(start.row-1, start.column-1),\n\t\t\t\t\t\t\tview._mData.getStore().getMeta().$clipboard\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t\tif(context && !context.view.$destructed)\n\t\t\t\t\t\tcontext.view.groupUndo(()=>{\n\t\t\t\t\t\t\tfor (let row = origin.start.row; row <= origin.end.row; row++) {\n\t\t\t\t\t\t\t\tfor (let column = origin.start.column; column <= origin.end.column; column++) {\n\t\t\t\t\t\t\t\t\tcontext.view.setCellValue(row, column, null, context.page);\n\t\t\t\t\t\t\t\t\tcontext.view.setStyle(row, column, null, context.page);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\telse if(sameView){\n\t\t\t\t\tlet handler;\n\t\t\t\t\tif(specialPaste)\n\t\t\t\t\t\thandler = (a, b) => {\n\t\t\t\t\t\t\tswitch(specialPaste){\n\t\t\t\t\t\t\t\tcase \"formulas\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, { value: b.formula || b.value }, true);\n\t\t\t\t\t\t\t\tcase \"styles\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, {style: b.style, format: b.format }, true);\n\t\t\t\t\t\t\t\tcase \"values\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, {value: b.value }, true);\n\t\t\t\t\t\t\t\tcase \"validation\":\n\t\t\t\t\t\t\t\t\treturn webix.extend(a, {validation: b.validation }, true);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t};\n\n\t\t\t\t\tview._mData.getCopyManager().paste(\n\t\t\t\t\t\tview._mPage.cellID(start.row-1, start.column-1),\n\t\t\t\t\t\tview._mPage.cellID(\n\t\t\t\t\t\t\tMath.max(start.row + origin.end.row - origin.start.row, end.row)-1,\n\t\t\t\t\t\t\tMath.max(start.column + origin.end.column - origin.start.column, end.column)-1\n\t\t\t\t\t\t),\n\t\t\t\t\t\tview._mData.getStore().getMeta().$clipboard,\n\t\t\t\t\t\tmode,\n\t\t\t\t\t\thandler\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (mode == 2) {\n\t\t\t\tfor(let r = 0, ri = 0; r < Math.max(rowCount, dataRowCount); r++, ri++){\n\t\t\t\t\tif(ri == data.length) ri = 0;\n\t\t\t\t\tfor (let c = 0, ci = 0; c < Math.max(colCount, dataColCount); c++, ci++){\n\t\t\t\t\t\tif(ci == data[0].length) ci = 0;\n\n\t\t\t\t\t\tconst subtrans = {\n\t\t\t\t\t\t\tid: \"move\",\n\t\t\t\t\t\t\tcolumn: translate.column + Math.floor(c/dataColCount) * dataColCount,\n\t\t\t\t\t\t\trow: translate.row + Math.floor(r/dataRowCount) * dataRowCount,\n\t\t\t\t\t\t\tcut: cutted\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t_clipboardToTable(view, start.row + r, start.column + c, data[ri][ci], subtrans);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tgrid.mapCells(\n\t\t\t\t\tstart.row,\n\t\t\t\t\tstart.column,\n\t\t\t\t\tdataRowCount,\n\t\t\t\t\tnull,\n\t\t\t\t\tfunction(value, row, col, row_ind, col_ind) {\n\t\t\t\t\t\tif (data[row_ind] && data[row_ind].length > col_ind) {\n\t\t\t\t\t\t\tconst cdata = data[row_ind][col_ind];\n\t\t\t\t\t\t\t_clipboardToTable(view, row, col, cdata, translate);\n\t\t\t\t\t\t}\n\t\t\t\t\t},\n\t\t\t\t\ttrue\n\t\t\t\t);\n\t\t\t}\n\t\t\tif(cutted == 1){\n\t\t\t\t//cut and cleared\n\t\t\t\tcutted = 2;\n\t\t\t\tupdateFilters = false;\n\t\t\t}\n\t\t}\n\t\telse \n\t\t\tfor (let r = 0, ri = 0; r < Math.max(rowCount, dataRowCount); r++, ri++) {\n\t\t\t\tif (ri == data.length) ri = 0;\n\t\t\t\tfor (var c = 0, ci = 0; c < Math.max(colCount, dataColCount); c++, ci++) {\n\t\t\t\t\tif (ci == data[0].length) ci = 0;\n\t\t\t\t\tview.setCellValue(start.row + r, start.column + c, data[ri][ci]);\n\t\t\t\t}\n\t\t\t}\n\t}, view);\n\n\tview.callEvent(\"onAction\", [\"paste\", {\n\t\tvalue: oldData,\n\t\tnewValue: view.serialize()\n\t}]);\n\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\"}]);\n\tview.refresh();\n}\n\nfunction _clipboardToTable(view, row, col, cdata, translate){\n\tif (typeof cdata === \"object\"){\n\t\tconst sameView = context && context.view == view;\n\t\tif(!(sameView && context.page == view.getActiveSheet())){\n\t\t\tif(!sameView && (!specialPaste || specialPaste == \"values\" || specialPaste == \"formulas\"))\n\t\t\t\tview.setCellValue(\n\t\t\t\t\trow,\n\t\t\t\t\tcol,\n\t\t\t\t\tcdata.math && specialPaste != \"values\" ? view._mData.getStore().transposeMath(cdata.math, translate.row, translate.column) : cdata.text\n\t\t\t\t);\n\n\t\t\tif(cdata.style && cdata.style.props && (!specialPaste || specialPaste == \"styles\")){\n\t\t\t\tconst style = view.addStyle(cdata.style.props);\n\t\t\t\tview.setStyle(row, col, style);\n\t\t\t}\n\t\t}\n\n\t\tconst extra = cdata.extra;\n\t\tif(extra){\n\t\t\tif(extra.condition && (!specialPaste || specialPaste == \"conditions\"))\n\t\t\t\tpasteCondition(view, extra, row, col, cutted);\n\t\t\tif(extra.dropdown && !specialPaste)\n\t\t\t\tpasteDropdown(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.filter && updateFilters)\n\t\t\t\tpasteFilter(view, extra, row, col, cutted, translate);\n\t\t\tif(extra.validation && (!specialPaste || specialPaste == \"validation\"))\n\t\t\t\tpasteValidation(view, extra, row, col, cutted, translate);\n\t\t}\n\n\t\tif(!specialPaste)\n\t\t\tpasteSpan(view, extra, row, col, cutted, translate);\n\n\t\tview.saveCell(row, col, view.getActiveSheet());\n\t}\n}\n\nfunction _get_sel_style(view){\n\tconst data = [];\n\n\tconst cm = view._mData.getCopyManager();\n\tcm.copy(\n\t\tview._mPage.cellID(origin.start.row-1, origin.start.column-1),\n\t\tview._mPage.cellID(origin.end.row-1, origin.end.column-1)\n\t);\n\n\tfor(let r = origin.start.row; r <= origin.end.row; r++){\n\t\tconst row = [];\n\t\tfor(let c = origin.start.column; c <= origin.end.column; c++){\n\t\t\tlet math = view.getCellValue(r, c);\n\t\t\tmath = math && math[0] == \"=\" && math.length > 1 ? math : null;\n\n\t\t\tconst obj = { text: view.getCellValue(r, c, false), math, style: view.getStyle(r, c) };\n\n\t\t\tconst condition = view.conditions.get(r, c);\n\t\t\tconst editor = view.getCellEditor(r, c);\n\t\t\tconst filter = view.getCellFilter(r, c);\n\t\t\tconst span = view._table.getSpan(r, c);\n\t\t\tconst validation = view.validation.get(r, c);\n\n\t\t\tif (editor || filter || condition || span || validation){\n\t\t\t\tconst extra = { row:r, col:c };\n\t\t\t\tif (condition) extra.condition = condition;\n\t\t\t\tif (editor) extra.dropdown = editor;\n\t\t\t\tif (filter) extra.filter = filter;\n\t\t\t\tif (span) extra.span = span;\n\t\t\t\tif(validation) extra.validation = validation;\n\t\t\t\tobj.extra = extra;\n\t\t\t}\n\n\t\t\trow.push(obj);\n\t\t}\n\t\tdata.push(row);\n\t}\n\n\treturn data;\n}\n\nfunction allFiltersInZone(extra, columnCount){\n\tvar filters = Object.keys(extra);\n\tvar startRow = Math.min.apply(null, filters);\n\tvar endRow = Math.max.apply(null, filters);\n\tvar startCol = columnCount;\n\tvar endCol = 1;\n\n\tfor (var i = startRow; i <= endRow; i++){\n\t\tif(extra[i]){\n\t\t\tvar columns = Object.keys(extra[i]);\n\t\t\tstartCol = Math.min(startCol, Math.min.apply(null, columns));\n\t\t\tendCol = Math.max(endCol, Math.max.apply(null, columns));\n\t\t}\n\t}\n\n\tif(origin.start.row <= startRow && origin.end.row >= endRow && origin.start.column <= startCol && origin.end.column >= endCol)\n\t\treturn true;\n\telse\n\t\treturn false;\n}\n//dynamically increase rows and columns according to pasted data size\nfunction _add_row_col(view, start, rowCount, data){\n\tvar maxCol = start.column + data[0].length - 1;\n\tlet maxRow;\n\n\tif(rowCount > data.length){\n\t\tlet extraSpanRows = 0;\n\t\tconst lastRows = rowCount % data.length;\n\t\tfor (let r = 0; r < lastRows; r++) {\n\t\t\tfor(let c = 0; c < data[r].length; c++){\n\t\t\t\tif(data[r][c].extra && data[r][c].extra.span){\n\t\t\t\t\tconst span = data[r][c].extra.span;\n\t\t\t\t\tif(span[0] == origin.start.row + r && span[1] == origin.start.column + c){\n\t\t\t\t\t\tconst extra = r + span[3] - lastRows;\n\t\t\t\t\t\tif(extra > 0)\n\t\t\t\t\t\t\textraSpanRows = Math.max(extra, extraSpanRows);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tmaxRow = start.row + rowCount + extraSpanRows - 1;\n\t}\n\telse\n\t\tmaxRow = start.row + data.length - 1;\n\n\tif(maxRow > view.config.rowCount || maxCol > view.config.columnCount){\n\t\tvar action = { id:\"add\" };\n\t\tif (maxRow > view.config.rowCount) {\n\t\t\taction.group = \"row\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ row: view.config.rowCount + 1 }, \n\t\t\t\t{ row: maxRow }\n\t\t\t]);\n\t\t}\n\t\tif (maxCol > view.config.columnCount) {\n\t\t\taction.group = \"column\";\n\t\t\tview.callEvent(\"onCommand\", [\n\t\t\t\taction, \n\t\t\t\t{ column: view.config.columnCount + 1 },\n\t\t\t\t{ column: maxCol }\n\t\t\t]);\n\t\t}\n\t}\n}\n\nfunction _changeDelimiter(data, config){\n\tconst format = getClipboardNumberFormat(config);\n\n\tif(format)\n\t\tfor(let i = 0; i < data.length; i++)\n\t\t\tfor(let k = 0; k < data[i].length; k++){\n\t\t\t\tconst record = webix.Number.parse(data[i][k], format);\n\t\t\t\tif(webix.rules.isNumber(record))\n\t\t\t\t\tdata[i][k] = record;\n\t\t\t}\n\n\treturn data;\n}\n\nfunction getClipboardNumberFormat(config){\n\tlet format = config.clipboardNumberFormat;\n\n\tif(!format && config.clipboardDecimalDelimiter) // backward compatibility\n\t\tformat = {\n\t\t\tdecimalDelimiter: config.clipboardDecimalDelimiter,\n\t\t\tdecimalOptional: true\n\t\t};\n\n\tif(format)\n\t\twebix.extend(format, {\n\t\t\tminusSign: webix.i18n.minusSign,\n\t\t\tminusPosition: webix.i18n.minusPosition,\n\t\t});\n\n\treturn format;\n}","import group from \"./undo_group\";\nimport {getSheet} from \"../sheets\";\nimport {find, findIndex} from \"../helpers/array\";\n\nexport function init(view) {\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tif (action.id == \"show\" || action.id == \"hide\"){\n\t\t\tconst sel = view._table.getSelectArea();\n\t\t\tif (sel)\n\t\t\t\tprocess(action, webix.copy(sel.start), webix.copy(sel.end), view);\n\t\t}\n\t});\n\treset(view);\n\n\tview.attachEvent(\"onUndo\", (action, row, column, value, direction) => {\n\t\tif ((action.id == \"hide\" || action.id == \"show\") && (action.group == \"column\" || action.group == \"row\")){\n\t\t\tlet type = action.id;\n\t\t\tif (!direction)\n\t\t\t\ttype = type == \"hide\" ? \"show\" : \"hide\";\n\t\t\tconst obj = (row || column);\n\t\t\tprocess({ id: type, group: action.group, neighbors: action.neighbors }, obj.start, obj.end, view, true);\n\t\t}\n\t});\n\n\tview.attachEvent(\"onHardReset\", () => reset(view));\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\t_updatePosition(view, p.name, p.inc, p.data, p.start);\n\t});\n}\n\nexport function reset(view, mode) {\n\tif(mode) view[\"_hidden_\"+mode+\"_hash\"] = {};\n\telse{\n\t\tview._hidden_cols_hash = {};\n\t\tview._hidden_rows_hash = {};\n\t\tview.filterSpreadSheet();\n\t}\n}\n\nfunction getIds(id){\n\treturn webix.isArray(id) ? id : [id, id];\n}\n\nexport function isColumnVisible(view, column, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tconst table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.column)\n\t\t\t\treturn !find(table.hidden.column, c => c == column);\n\t\t\telse return true;\n\t\t}\n\t}\n\telse\n\t\treturn !view._hidden_cols_hash[column];\n}\n\nexport function setState(view, indexes, state, type, page){\n\tif(!indexes && (!page || page == view.getActiveSheet())){\n\t\tconst sel = view.getSelectedId(true);\n\t\tif(!sel.length) return;\n\t\tindexes = [sel[0][type], sel[sel.length-1][type]];\n\n\t}\n\t\n\tconst ids = getIds(indexes);\n\n\tif (state)\n\t\t(type == \"row\" ? _hideRow : _hideColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view, false, page);\n\telse\n\t\t(type == \"row\" ? _showRow : _showColumn)({id: \"hide\", group: type}, {[type]: ids[0]}, {[type]: ids[1]}, view, false, page);\n}\n\nexport function isRowVisible(view, row, page){\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tconst table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.row)\n\t\t\t\treturn !find(table.hidden.row, r => r == row);\n\t\t\telse return true;\n\t\t}\n\t}\n\telse\n\t\treturn !view._hidden_rows_hash[row];\n}\n\nexport function serialize(view, data){\n\tlet hrows  = []; let hcols = [];\n\tfor(let r in view._hidden_rows_hash) hrows.push(r);\n\tfor(let c in view._hidden_cols_hash) hcols.push(c);\n\n\tif(hrows.length || hcols.length)\t\n\t\tdata.table.hidden = {};\n\tif(hrows.length)\n\t\tdata.table.hidden.row = hrows;\n\tif(hcols.length)\n\t\tdata.table.hidden.column = hcols;\n}\n\nexport function load(view, data){\n\treset(view);\n\t\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.hidden)){\n\t\tconst hidden = data.table.hidden;\n\n\t\tif(hidden.row && hidden.row.length){\n\t\t\tfor(let r = 0; r < hidden.row.length; r++)\n\t\t\t\t_hideRow({id:\"hide\", group:\"row\"}, {row:hidden.row[r]}, {row:hidden.row[r]}, view, true);\n\t\t}\n\n\t\tif(hidden.column && hidden.column.length){\n\t\t\tfor(let c = 0; c < hidden.column.length; c++)\n\t\t\t\t_hideColumn({id:\"hide\", group:\"column\"}, {column:hidden.column[c]}, {column:hidden.column[c]}, view, true);\n\t\t}\n\t}\n}\n\nfunction process(action) {\n\tif (action.group == \"column\"){\n\t\tif (action.id == \"show\")\n\t\t\t_showColumn.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideColumn.apply(this, arguments);\n\t} else if (action.group == \"row\") {\n\t\tif (action.id == \"show\")\n\t\t\t_showRow.apply(this, arguments);\n\t\telse if (action.id == \"hide\")\n\t\t\t_hideRow.apply(this, arguments);\n\t}\n}\n\nfunction _showColumn(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst sel = grid.getSelectArea();\n\n\t\tconst hash = view._hidden_cols_hash;\n\n\t\tif(action.neighbors){\n\t\t\tif(hash[ start.column-1 ])\n\t\t\t\twhile(hash[ start.column-1 ])\n\t\t\t\t\tstart.column--;\n\t\t\telse\n\t\t\t\twhile(hash[ end.column+1 ])\n\t\t\t\t\tend.column++;\n\t\t}\n\n\t\tgroup.set(()=>{\n\t\t\tfor (let i = start.column; i <= end.column; i++) {\n\t\t\t\tif(hash[i]){\n\t\t\t\t\tdelete hash[i];\n\t\t\t\t\tconst cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_column\", \"\");\n\t\t\t\t\tgrid.showColumn(i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst split = view._frozenColumns;\n\t\t\tif(split && split >= start.column){\n\t\t\t\tview.freezeColumns(0); // remove freeze (split is equal with current frozen col)\n\t\t\t\tview.freezeColumns(split); // if col was freezed on hidden column - move it\n\t\t\t}\n\n\t\t\tif (sel)\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t}, view);\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.column)\n\t\t\t\tfor(let i = start.column; i <= end.column; i++){\n\t\t\t\t\tconst index = findIndex(table.hidden.column, c => c == i);\n\t\t\t\t\tif(index != -1)\n\t\t\t\t\t\ttable.hidden.column.splice(index, 1);\n\t\t\t\t}\n\t\t}\n\t\telse return;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, page]);\n}\n\nfunction _showRow(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst sel = grid.getSelectArea();\n\n\t\tconst hash = view._hidden_rows_hash;\n\n\t\tif(action.neighbors){\n\t\t\tif(hash[ start.row-1 ])\n\t\t\t\twhile(hash[ start.row-1 ])\n\t\t\t\t\tstart.row--;\n\t\t\telse\n\t\t\t\twhile(hash[ end.row+1 ])\n\t\t\t\t\tend.row++;\n\t\t}\n\n\t\tgroup.set(()=>{\n\t\t\tconst split = view._frozenRows;\n\t\t\tif(split){\n\t\t\t\t//Frozen rows ignore filtering applied to the datatable\n\t\t\t\tview.freezeRows(0);\n\t\t\t}\t\t\n\n\t\t\tfor (let i = start.row; i <= end.row; i++) {\n\t\t\t\tif(hash[i]){\n\t\t\t\t\tdelete hash[i];\n\n\t\t\t\t\tif (i - 1 === 0) {\n\t\t\t\t\t\tconst cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\t\t\tcell.css = cell.css.replace(\"webix_ssheet_hide_row\", \"\");\n\t\t\t\t\t\tgrid.refreshColumns();\n\t\t\t\t\t} else\n\t\t\t\t\t\tgrid.removeCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tview.filterSpreadSheet();\n\n\t\t\tif(split)\n\t\t\t\tview.freezeRows(split);\n\n\t\t\tif (sel)\n\t\t\t\tgrid.addSelectArea(sel.start, sel.end);\n\t\t}, view);\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(table && table.hidden && table.hidden.row)\n\t\t\t\tfor(let i = start.row; i <= end.row; i++){\n\t\t\t\t\tconst index = findIndex(table.hidden.row, c => c == i);\n\t\t\t\t\tif(index != -1)\n\t\t\t\t\t\ttable.hidden.row.splice(index, 1);\n\t\t\t\t}\n\t\t}\n\t\telse return;\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row, page]);\n}\n\nfunction _hideColumn(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tconst grid = view.$$(\"cells\");\n\t\tlet i = end.column;\n\t\tview.$handleSelection = null;\n\t\tgrid.unselect();\n\n\t\tif (end.column < 1 || start.column < 1){\n\t\t\tdelete view._hidden_cols_hash[start.column];\n\t\t\treturn;\n\t\t}\n\t\twhile (i >= start.column) {\n\t\t\tif(grid.getColumnIndex(i) != -1){\n\t\t\t\tview._hidden_cols_hash[i] = i;\n\n\t\t\t\tlet cell = grid.getColumnConfig(i - 1 || \"rowId\").header[0];\n\t\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_column\";\n\n\t\t\t\tgrid.hideColumn(i);\n\t\t\t}\n\t\t\ti--;\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(!table) table = sheet.content.table = {};\n\t\t\tif(!table.hidden) table.hidden = {};\n\t\t\tif(!table.hidden.rows) table.hidden.column = [];\n\t\t\t\n\t\t\tfor(let i = start.column; i <= end.column; i++)\n\t\t\t\tif(!find(table.hidden.column, c => c == i))\n\t\t\t\t\ttable.hidden.column.push(i);\n\t\t}\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onColumnOperation\", [action.id, start.column, end.column, page]);\n}\n\nfunction _hideRow(action, start, end, view, silent, page) {\n\tpage = page || view.getActiveSheet();\n\n\tif(page == view.getActiveSheet()){\n\t\tif (end.row < 1 || start.row < 1){\n\t\t\tdelete view._hidden_rows_hash[start.row];\n\t\t\treturn;\n\t\t}\n\n\t\tconst split = view._frozenRows;\n\t\tif(split){\n\t\t\t//Frozen rows ignore filtering applied to the datatable\n\t\t\tview.freezeRows(0);\n\t\t}\n\n\t\tconst grid = view.$$(\"cells\");\n\t\tlet i = end.row;\n\n\t\twhile (i >= start.row) {\n\t\t\tview._hidden_rows_hash[i] = i;\n\n\t\t\tif (i - 1 === 0) {\n\t\t\t\tlet cell = grid.getColumnConfig(\"rowId\").header[0];\n\t\t\t\tcell.css = (cell.css || \"\") + \" webix_ssheet_hide_row\";\n\t\t\t\tgrid.refreshColumns();\n\t\t\t}\n\t\t\telse\n\t\t\t\tgrid.addCellCss(i - 1, \"rowId\", \"webix_ssheet_hide_row\");\n\n\t\t\ti--;\n\t\t}\n\n\t\tview.filterSpreadSheet();\n\n\t\tif(split)\n\t\t\tview.freezeRows(split);\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tlet table = sheet.content.table;\n\t\t\tif(!table) table = sheet.content.table = {};\n\t\t\tif(!table.hidden) table.hidden = {};\n\t\t\tif(!table.hidden.row) table.hidden.row = [];\n\t\t\t\n\t\t\tfor(let i = start.row; i <= end.row; i++)\n\t\t\t\tif(!find(table.hidden.row, r => r == i))\n\t\t\t\t\ttable.hidden.row.push(i);\n\t\t}\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onRowOperation\", [action.id, start.row, end.row, page]);\n}\n\nfunction _updatePosition(view, name, inc, data, start){\n\tif(data.table && data.table.hidden && data.table.hidden[name] && data.table.hidden[name].length){\n\t\treset(view, name == \"column\" ? \"cols\" : \"rows\");\n\n\t\tconst s = start[name];\n\t\tconst hidden = data.table.hidden[name];\n\n\t\tfor (let i = hidden.length - 1; i >= 0; i--) {\n\t\t\tconst hiddenIndex = hidden[i]*1;\n\t\t\tif(inc > 0 && hiddenIndex >= s)\n\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\telse if(inc < 0 && hiddenIndex >= s) {\n\t\t\t\tif(hiddenIndex < s - inc)\n\t\t\t\t\thidden.splice(i, 1);\n\t\t\t\telse\n\t\t\t\t\thidden[i] = inc + hiddenIndex;\n\t\t\t}\n\t\t}\n\t}\n}","import {encode} from \"../helpers/column_names\";\nimport {pasteCondition} from \"./conditional_formats\";\nimport group from \"./undo_group\";\n\nexport function init(view){\n\tvar table = view._table;\n\n\tvar bs = 0;\n\ttable.attachEvent(\"onAreaDrag\", () => bs = new Date());\n\ttable.attachEvent(\"onBeforeAreaRemove\", function(){\n\t\t//[FIXME] currently we don't have enough info to know\n\t\t//is user selects new area, and removing need to be blocked\n\t\t//or is it some API which attempts to remove the area\n\t\tif (view.$handleSelection && (new Date() - bs)<500) return false;\n\t});\n\n\ttable.attachEvent(\"onBeforeAreaAdd\", (area) => {\n\t\t//[FIXME] \n\t\t//block selection of row-id column\n\t\t//temporary fix, we need to fire onBeforeBlockSelect when selection moves\n\t\t//so the common onBeforeBlockSelect handler will block rowId selection\n\t\tif (area.start.column == \"rowId\") return false;\n\n\t\t//if we have an active editor, we need to close it on block selection\n\t\t//ignore, when selecting the editor's cell\n\t\tvar editor = table.getEditor();\n\t\tif (editor && (\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ||\n\t\t\teditor.row != area.start.row || editor.column != area.start.column ))\n\t\t\ttable.editStop();\n\n\t\tif (!view.$handleSelection) return true;\n\t\t\n\n\t\tlet blockStart = encode[area.start.column] + area.start.row;\n\t\tlet blockEnd = encode[area.end.column] + area.end.row;\n\n\t\tvar res = view.$handleSelection(area.start, area.end, blockStart, blockEnd);\n\n\t\tif (res !== false){\n\t\t\tview.$handleSelection = null;\n\t\t\ttable.removeSelectArea();\n\t\t}\n\n\t\treturn res;\n\t});\n\n\ttable.attachEvent(\"onBeforeBlockSelect\", (start, end, finalStep) => {\n\t\tif(!view.config.readonly && finalStep && table.$handleStart){\n\t\t\tconst oldSel = table.getSelectArea();\n\t\t\tconst oldStart = oldSel.start;\n\t\t\tconst oldEnd = oldSel.end;\n\n\t\t\tconst sr = start.row;\n\t\t\tconst er = end.row;\n\t\t\tconst sc = start.column;\n\t\t\tconst ec = end.column;\n\n\t\t\tif(oldStart.row == sr && oldEnd.row > er)\n\t\t\t\tview.clearRange({start:{row:er+1,column:sc}, end:{row:oldEnd.row,column:ec}}, {values:true});\n\t\t\telse if(oldStart.column == sc && oldEnd.column > ec){\n\t\t\t\tview.clearRange({start:{row:sr,column:ec+1}, end:{row:er,column:oldEnd.column}}, {values:true});\n\t\t\t}\n\t\t\telse{\n\t\t\t\tlet type;\n\t\t\t\tif(sr != oldStart.row || er != oldEnd.row)\n\t\t\t\t\ttype = \"row\";\n\t\t\t\telse if(sc != oldStart.column || ec != oldEnd.column)\n\t\t\t\t\ttype = \"column\";\n\n\t\t\t\tif(type){\n\t\t\t\t\tgroup.start();\n\t\t\t\t\tconst isRow = type == \"row\";\n\n\t\t\t\t\tconst {dayShort, dayFull, monthShort, monthFull} = webix.i18n.calendar;\n\n\t\t\t\t\tconst dayAndMonthNames = {\n\t\t\t\t\t\tdayShort: [dayShort, dayShort.map(v => v.toLowerCase())],\n\t\t\t\t\t\tdayFull: [dayFull, dayFull.map(v => v.toLowerCase())],\n\t\t\t\t\t\tmonthShort: [monthShort, monthShort.map(v => v.toLowerCase())],\n\t\t\t\t\t\tmonthFull: [monthFull, monthFull.map(v => v.toLowerCase())]\n\t\t\t\t\t};\n\n\t\t\t\t\tfor (\n\t\t\t\t\t\tlet i = (isRow ? sc : sr);\n\t\t\t\t\t\ti <= (isRow ? ec : er);\n\t\t\t\t\t\ti++\n\t\t\t\t\t){\n\t\t\t\t\t\tconst nums = [];\n\t\t\t\t\t\tlet border = [];\n\n\t\t\t\t\t\tfor (let j = oldStart[type]; j <= oldEnd[type]; j++) {\n\t\t\t\t\t\t\tlet dayOrMonthType;\n\t\t\t\t\t\t\tlet dayOrMonthCase;\n\n\t\t\t\t\t\t\tconst [row, col] = type == \"row\" ? [j, i] : [i, j];\n\t\t\t\t\t\t\tlet value = view.getCellValue(row, col);\n\n\t\t\t\t\t\t\tif(typeof value == \"string\")\n\t\t\t\t\t\t\t\tfor(let name in dayAndMonthNames){\n\t\t\t\t\t\t\t\t\tconst lowerCaseNames = dayAndMonthNames[name][1];\n\t\t\t\t\t\t\t\t\tconst index = lowerCaseNames.indexOf(value.toLowerCase());\n\t\t\t\t\t\t\t\t\tif(index != -1){\n\t\t\t\t\t\t\t\t\t\tconst lowerCaseName = lowerCaseNames[index];\n\n\t\t\t\t\t\t\t\t\t\tif(value == lowerCaseName)\n\t\t\t\t\t\t\t\t\t\t\tdayOrMonthCase = \"lower\"; // sun, mon, tue, ...\n\t\t\t\t\t\t\t\t\t\telse if(value == lowerCaseName.toUpperCase())\n\t\t\t\t\t\t\t\t\t\t\tdayOrMonthCase = \"upper\"; // SUN, MON, TUE, ...\n\t\t\t\t\t\t\t\t\t\t//else like in locale: Sun, Mon, Tue, ...\n\n\t\t\t\t\t\t\t\t\t\tdayOrMonthType = name;\n\t\t\t\t\t\t\t\t\t\tvalue = index;\n\t\t\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif(webix.rules.isNumber(value)){\n\t\t\t\t\t\t\t\tif(border.type != dayOrMonthType)\n\t\t\t\t\t\t\t\t\tborder = [];\n\n\t\t\t\t\t\t\t\tif(!border[0]){\n\t\t\t\t\t\t\t\t\tborder.firstValue = value;\n\t\t\t\t\t\t\t\t\tborder.type = dayOrMonthType;\n\t\t\t\t\t\t\t\t\tborder.case = dayOrMonthCase;\n\t\t\t\t\t\t\t\t\tborder[0] = border[1] = j;\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\t\tborder[1] = j;\n\t\t\t\t\t\t\t\t\tif(webix.isUndefined(border.inc))\n\t\t\t\t\t\t\t\t\t\tborder.inc = value - border.firstValue;\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tnums[j] = {\n\t\t\t\t\t\t\t\t\tvalue,\n\t\t\t\t\t\t\t\t\tborder\n\t\t\t\t\t\t\t\t};\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tborder = [];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tconst afterSel = oldStart[type] == (isRow ? sr : sc);\n\t\t\t\t\t\tconst start = afterSel ? oldStart[type] : oldEnd[type];\n\t\t\t\t\t\tconst dir = afterSel ? 1 : -1;\n\n\t\t\t\t\t\tfor(\n\t\t\t\t\t\t\tlet j = (afterSel ? oldEnd[type] + 1 : oldStart[type] - 1), index = 0, iteration = 1;\n\t\t\t\t\t\t\tafterSel ? j <= (isRow ? er : ec) : j >= (isRow ? sr : sc);\n\t\t\t\t\t\t\tafterSel ? j++ : j--, index++\n\t\t\t\t\t\t){\n\t\t\t\t\t\t\tif(index == oldEnd[type] - oldStart[type] + 1){\n\t\t\t\t\t\t\t\titeration++;\n\t\t\t\t\t\t\t\tindex = 0;\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst linkPos = start+index*dir;\n\t\t\t\t\t\t\tconst [linkRow, linkCol] = isRow ? [linkPos, i] : [i, linkPos];\n\n\t\t\t\t\t\t\tlet value;\n\n\t\t\t\t\t\t\tlet num = nums[linkPos];\n\t\t\t\t\t\t\tif(num){\n\t\t\t\t\t\t\t\tvalue = num.value;\n\t\t\t\t\t\t\t\tnum = num.border;\n\t\t\t\t\t\t\t\tvalue += (num.inc === 0 ? 0 : (num.inc || 1)) * (num[1] - num[0] + 1) * iteration * dir;\n\n\t\t\t\t\t\t\t\tif(num.type){\n\t\t\t\t\t\t\t\t\tconst names = dayAndMonthNames[num.type][0];\n\t\t\t\t\t\t\t\t\tconst max = names.length;\n\t\t\t\t\t\t\t\t\tvalue = names[((value % max) + max) % max];\n\t\t\t\t\t\t\t\t\tif (num.case) value = num.case == \"upper\" ? value.toUpperCase() : value.toLowerCase();\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\telse{\n\t\t\t\t\t\t\t\tvalue = view.getCellValue(linkRow, linkCol);\n\t\t\t\t\t\t\t\tif(typeof value == \"string\" && value[0] == \"=\" && value.length > 0){\n\t\t\t\t\t\t\t\t\tif(isRow)\n\t\t\t\t\t\t\t\t\t\tvalue = view._mData.getStore().transposeMath(value, j - start - index * dir, 0);\n\t\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\t\tvalue = view._mData.getStore().transposeMath(value, 0, j - start - index * dir);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tconst [row, col] = isRow ? [j, i] : [i, j];\n\t\t\t\t\t\t\tview.setCellValue(row, col, value);\n\t\t\t\t\t\t\tview.setStyle(row, col, view.getStyle(linkRow, linkCol));\n\n\t\t\t\t\t\t\tconst condition = view.conditions.get(linkRow, linkCol);\n\t\t\t\t\t\t\tif(condition)\n\t\t\t\t\t\t\t\tpasteCondition(view, {condition}, row, col);\n\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\tview.conditions.clear(row, col);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\tgroup.end();\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\twebix.event(table.$view, \"mousedown\", function(e){\n\t\tif (view.$handleSelection)\n\t\t\treturn webix.html.preventEvent(e);\n\t});\n}","export function expandSelection(r, view){\n\tlet maxY = view.config.rowCount;\n\tlet maxX = view.config.columnCount;\n\tlet table = view._table;\n\n\tlet nr1 = r.start.row, nr2 = r.end.row, nc1 = r.start.column, nc2 = r.end.column;\n\n\tfor (let i=nr1-1; i>0; i--){\n\t\tif (getValue(i, r.start.column, table))\n\t\t\tnr1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nr2+1; i<maxY; i++){\n\t\tif (getValue(i, r.end.column, table))\n\t\t\tnr2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc1-1; i>0; i--){\n\t\tif (getValue(r.start.row, i, table))\n\t\t\tnc1 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tfor (let i=nc2+1; i<maxX; i++){\n\t\tif (getValue(r.end.row, i, table))\n\t\t\tnc2 = i;\n\t\telse\n\t\t\tbreak;\n\t}\n\n\tlet newrange = { start:{ row:nr1, column:nc1 } , end:{ row: nr2, column: nc2 }};\n\tif (nr1 != r.start.row || nr2 != r.end.row || nc1 != r.start.column || nc2 != r.end.column){\n\t\tview._table.addSelectArea(newrange.start, newrange.end);\n\t}\n\n\treturn newrange;\n}\n\nfunction getValue(r,c, table){\n\tvar value = table.getItem(r)[c];\n\tif(value === undefined || value === \"\"){\n\t\treturn false;\n\t} else {\n\t\treturn true;\n\t}\n}","import {expandSelection} from \"../helpers/expand_selection\";\nimport {rangeObj} from \"../helpers/column_names\";\nimport group from \"./undo_group\";\nimport {_changeCondition} from \"./conditional_formats\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (cm) => {\n\t\tif (cm.id === \"sort-asc\" || cm.id === \"sort-desc\")\n\t\t\tsortRange(view, null, cm.id.replace(\"sort-\",\"\"));\n\t});\n}\n\nconst sorters = {\n\t\"int\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tlet c = a[key];\n\t\t\tlet d = b[key];\n\n\t\t\tif (!(d || d === 0)) return -1;\n\t\t\tif (!(c || c === 0)) return 1;\n\n\t\t\tif(c === \"0\") c = 0;\n\t\t\tif(d === \"0\") d = 0;\n\n\t\t\tc = typeof c == \"number\" ? c : (parseFloat(c) || dir*Infinity);\n\t\t\td = typeof d == \"number\" ? d : (parseFloat(d) || dir*Infinity);\n\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;\n\t\t};\n\t},\n\t\"str\":function(dir, key){\n\t\treturn (a,b) => {\n\t\t\tif (!b[key]) return -1;\n\t\t\tif (!a[key]) return 1;\n\n\t\t\tconst c = a[key].toString().toLowerCase();\n\t\t\tconst d = b[key].toString().toLowerCase();\n\t\t\treturn (c > d ? 1 : (c == d ? 0 : -1))*dir;  \n\t\t};\n\t}\n};\n\nexport function sortRange(view, range, dir){\n\trange = range || view._table.getSelectArea();\n\n\tif (range){\n\t\trange = rangeObj(range, view);\n\t\tlet fullrange = range;\n\t\tif (range.start.row === range.end.row)\n\t\t\tfullrange = expandSelection(range, view);\n\n\t\tconst key = view.getCellValue(range.start.row, range.start.column, false);\n\t\tconst type = isNaN(parseFloat(key)) ? \"str\" : \"int\";\n\n\t\tdir = (!dir || dir === \"asc\") ? 1 : -1;\n\t\tgroup.set(()=>\n\t\t\tsort(fullrange, range.start.column, type, dir, view)\n\t\t);\n\t}\n}\n\nfunction sort(range, by, type, dir, view){\n\tfor (let column = range.start.column; column <= range.end.column; column++){\n\t\t//get all selected column values\n\t\tconst values = [];\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst value = view.getCellValue(row, column, false);\n\t\t\t\tconst style = view.getStyle(row, column);\n\n\t\t\t\tlet math = view.getCellValue(row, column);\n\t\t\t\tmath = math && math[0] == \"=\" ? math : null;\n\n\t\t\t\tconst locked = view.isCellLocked(row, column);\n\t\t\t\tif(locked)\n\t\t\t\t\tview.lockCell(row, column, false);\n\n\t\t\t\tconst conditions = view.conditions.get(row,column);\n\t\t\t\tif(conditions)\n\t\t\t\t\t_changeCondition(\"remove\", row, column, conditions, null, view);\n\n\t\t\t\tvalues.push({\n\t\t\t\t\tvalue,\n\t\t\t\t\tstyle,\n\t\t\t\t\tmath,\n\t\t\t\t\trow,\n\t\t\t\t\tconditions,\n\t\t\t\t\tlocked\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\t//sort them\n\t\tvalues.sort(sorters[type](dir, \"value\"));\n\n\t\t//set new values to original column\n\t\tfor (let row = range.start.row; row <= range.end.row; row++) {\n\t\t\tif(view.isRowVisible(row)){\n\t\t\t\tconst element = values.shift();\n\n\t\t\t\tview.setStyle(row, column, (element.style || null));\n\t\t\t\tif(element.conditions)\n\t\t\t\t\t_changeCondition(\"update\", row, column, null, element.conditions, view);\n\n\t\t\t\tif (!element.math) view.setCellValue(row, column, element.value);\n\t\t\t\telse {\n\t\t\t\t\tconst newMath = view._mData.getStore().transposeMath(element.math, row - element.row, 0);\n\t\t\t\t\tview.setCellValue(row, column, newMath);\n\t\t\t\t}\n\n\t\t\t\tif(element.locked)\n\t\t\t\t\tview.lockCell(row, column, true);\n\t\t\t}\n\t\t}\n\t}\n\n\tview.refresh();\n}","import {split} from \"./parser\";\nimport {escapeSheet} from \"../helpers/column_names\";\n\nfunction updateSheetNames(view, formula, oldName, newName){\n\tif(formula.indexOf(\"!\") == -1)\n\t\treturn formula;\n\n\tconst stack = split(formula, view, true);\n\tfor(let i = 0; i < stack.length; i++){\n\t\tif(webix.isArray(stack[i])){\n\t\t\tconst thisSheet = stack[i][0] === oldName;\n\t\t\tlet sheet = thisSheet ? newName : stack[i][0];\n\t\t\tsheet = escapeSheet(sheet);\n\t\t\tstack[i] = `${sheet}!${stack[i][1]}`;\n\t\t}\n\t}\n\treturn stack.join(\"\");\n}\n\nfunction isFormula(val){\n\treturn typeof val == \"string\" && val[0] == \"=\";\n}\n\nexport function init(view){\n\tview.attachEvent(\"onSheetRename\", (name, newName) => {\n\t\tview._sheets.forEach(sheet => {\n\t\t\tconst activeSheet = sheet.name == view.getActiveSheet();\n\t\t\tif(activeSheet)\n\t\t\t\tsheet.content = view.serialize(); //actual data\n\n\t\t\tif(sheet.content.editors){\n\t\t\t\tsheet.content.editors.forEach(value => {\n\t\t\t\t\tconst options = value[2].options;\n\t\t\t\t\tif(options){\n\t\t\t\t\t\tif(typeof options == \"string\")\n\t\t\t\t\t\t\tvalue[2].options = updateSheetNames(view, options, name, newName);\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tfor (let i = 0; i < options.length; i++){\n\t\t\t\t\t\t\t\tconst option = options[i];\n\t\t\t\t\t\t\t\tif(typeof option == \"string\"){\n\t\t\t\t\t\t\t\t\tif(isFormula(option))\n\t\t\t\t\t\t\t\t\t\toptions[i] = updateSheetNames(view, option, name, newName);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\telse if(isFormula(option.id))\n\t\t\t\t\t\t\t\t\toption.id = updateSheetNames(view, option.id, name, newName);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tif(sheet.content.conditions){\n\t\t\t\tsheet.content.conditions.forEach(value => {\n\t\t\t\t\tif(isFormula(value[3]))\n\t\t\t\t\t\tvalue[3] = updateSheetNames(view, value[3], name, newName);\n\t\t\t\t});\n\t\t\t\tif(activeSheet){\n\t\t\t\t\tview.conditions.clear();\n\t\t\t\t\tview.conditions.parse( sheet.content.conditions );\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t});\n}","import {getSheet} from \"../sheets\";\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"gridlines-hide\")\n\t\t\thideGridlines(view, value);\n\t});\n}\n\nexport function hideGridlines(view, state = true, page){\n\tlet oldState;\n\tpage = page || view.getActiveSheet();\n\n\tif (page == view.getActiveSheet()) {\n\t\tconst grid = view.$$(\"cells\");\n\t\toldState = grid.$view.className.indexOf(\"webix_borderless\") != -1;\n\n\t\tif (state == \"toggle\")\n\t\t\tstate = !oldState;\n\n\t\tif(state != oldState){\n\t\t\tif(state)\n\t\t\t\twebix.html.addCss(grid.$view, \"webix_borderless\", true);\n\t\t\telse\n\t\t\t\twebix.html.removeCss(grid.$view, \"webix_borderless\");\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-gridlines\", value: state}]);\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {gridlines: 1};\n\n\t\t\toldState = !sheet.content.table.gridlines;\n\n\t\t\tif (state === \"toggle\")\n\t\t\t\tstate = !oldState;\n\n\t\t\tsheet.content.table.gridlines = state ? 0 : 1;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(state != oldState)\n\t\tview.callEvent(\"onAction\", [\"gridlines-hide\", {newValue: state, value: oldState, page}]);\n}\n\nexport function serialize(view, data){\n\tdata.table.gridlines = view.$$(\"cells\").$view.className.indexOf(\"webix_borderless\") !=-1?0:1;\n}\n\nexport function load(view, data){\n\tvar mode = false;\n\tif(!webix.isUndefined(data.table) && !webix.isUndefined(data.table.gridlines))\n\t\tmode = !data.table.gridlines;\n\thideGridlines(view, mode);\n}","import {getSheet} from \"../sheets\";\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"header-hide\"){\n\t\t\thideHeaders(view, value);\n\t\t}\n\t});\n}\n\nexport function hideHeaders(view, state, page){\n\tlet oldState;\n\tpage = page || view.getActiveSheet();\n\n\tif (page == view.getActiveSheet()) {\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst oldState = !(view._loading_data ? state : grid.config.header);\n\n\t\tif (state == \"toggle\")\n\t\t\tstate = !oldState;\n\n\t\tif(state != oldState){\n\t\t\tgrid.config.header = !state;\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"hide-headers\", value:state}]);\n\n\t\t\tconst firstVisible = grid.isColumnVisible(\"rowId\");\n\t\t\tif((firstVisible && state) || (!firstVisible && !state))\n\t\t\t\tgrid.hideColumn(\"rowId\", {}, true, !!state);\n\n\t\t\tgrid.refreshColumns();\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {headers: 1};\n\n\t\t\toldState = !sheet.content.table.headers;\n\n\t\t\tif (state === \"toggle\")\n\t\t\t\tstate = !oldState;\n\n\t\t\tsheet.content.table.headers = state ? 0 : 1;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(state != oldState)\n\t\tview.callEvent(\"onAction\", [\"header-hide\", {newValue: state, value: oldState, page}]);\n}\n\nexport function serialize(view, data){\n\tdata.table.headers = view.$$(\"cells\").config.header ? 1 : 0;\n}\n\nexport function load(view, data){\n\tlet mode;\n\tif(data.table && !webix.isUndefined(data.table.headers))\n\t\tmode = !data.table.headers;\n\thideHeaders(view, mode);\n}","import group from \"./undo_group\";\nimport {getSheet} from \"../sheets\";\nimport {eachRange} from \"../helpers/column_names\";\nimport {find, findIndex} from \"../helpers/array\";\n\nexport function init(view){\n\tview.comments = {\n\t\tget: function(row, column, page){\n\t\t\treturn getComment(view, row, column, page);\n\t\t},\n\t\tadd: function(row, column, comment, page){\n\t\t\tcommentCell(view, row, column, comment, false, page);\n\t\t},\n\t\tremove: function(row, column, page){\n\t\t\tremoveComment(view, row, column, false, page);\n\t\t},\n\t\t_activeComment: {},\n\t\t_pull:{}\n\t};\n\n\tview.attachEvent(\"onReset\", () => reset(view));\n\tview.attachEvent(\"onUndo\", (type, row, column, value) => {\n\t\tif (type === \"comment\")\n\t\t\t_undoComment(view, row, column, value);\n\t});\n\n\tview.attachEvent(\"onAction\", (action, p)=> {\n\t\tif(action == \"before-grid-change\")\n\t\t\tupdatePosition(view, p.name,p.inc,p.data, p.start);\n\t});\n}\n\nfunction _undoComment(view, row, column, value){\n\tif(getComment(view, row, column))\n\t\tremoveComment(view, row, column, true);\n\tif(value)\n\t\tcommentCell(view, row, column, value, true);\n}\n\nfunction reset(view){\n\tview.comments._pull = {};\n}\n\nfunction removeComment(view, row, column, silent, page){\n\tpage = page || view.getActiveSheet();\n\n\tconst old = getComment(view, row, column, page);\n\tif(old){\n\t\tif(page != view.getActiveSheet()){\n\t\t\tconst comments = getSheet(view, page).content.comments;\n\t\t\tconst index = findIndex(comments, comment => comment[0] == row && comment[1] == column);\n\t\t\tcomments.splice(index, 1);\n\t\t}\n\t\telse{\n\t\t\tdelete view.comments._pull[row][column];\n\t\t\tview.$$(\"cells\").updateItem(row, column);\n\t\t}\n\t\tif (!silent)\n\t\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue: null, value: old, page}]);\n\t\t\n\t}\n}\n\nexport function removeCommentsRange(view, range, page){\n\tgroup.set(function(){\n\t\teachRange(range, view, function(view, cell){\n\t\t\tif(getComment(view, cell.row, cell.column, page))\n\t\t\t\tremoveComment(view, cell.row, cell.column, false, page);\n\t\t});\n\t\tview.$$(\"cells\").refresh();\n\t});\n}\n\nfunction commentCell(view, row, column, comment, silent, page){\n\tpage = page || view.getActiveSheet();\n\tconst oldValue = getComment(view, row, column, page) || null;\n\n\tif(page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(!sheet.content.comments)\n\t\t\tsheet.content.comments = [];\n\n\t\tif(oldValue)\n\t\t\tfind(sheet.content.comments, comment => comment[0] == row && comment[1] == column)[2] = comment;\n\t\telse\n\t\t\tsheet.content.comments.push([row, column, comment]);\n\t}\n\telse{\n\t\t\n\n\t\tif(typeof comment == \"string\")\n\t\t\tcomment = comment.trim() ? comment : \"\";\n\t\tview.comments._pull[row] = view.comments._pull[row] ? view.comments._pull[row] : {};\n\t\tview.comments._pull[row][column] = comment;\n\n\t\tview.$$(\"cells\").addCellCss(row, column, \"ssheet_commented_cell\");\n\t}\n\n\tif (!silent)\n\t\tview.callEvent(\"onAction\", [\"comment\", {row, column, newValue:comment, value:oldValue, page}]);\n}\n\nexport function serialize(view,data){\n\tvar row, column,\n\t\tcomments = [];\n\tfor(row in view.comments._pull){\n\t\tfor(column in view.comments._pull[row])\n\t\t\tif(view.comments._pull[row][column])\n\t\t\t\tcomments.push([row, column, view.comments._pull[row][column]]);\n\t}\n\tdata.comments = comments;\n}\n\nexport function load(view,data){\n\tvar i,\n\t\tcomments = data.comments;\n\n\tif(comments)\n\t\tfor(i = 0; i < comments.length; i++)\n\t\t\tcommentCell(view, comments[i][0], comments[i][1], comments[i][2], true);\n}\n\nfunction updatePosition(view, name, inc, data, start){\n\tlet comments = data.comments,\n\t\ti = comments.length;\n\n\tif(inc){\n\t\twhile(i--){\n\t\t\tlet [row,column] = comments[i];\n\t\t\tif(row && name == \"row\" && row>= start.row || column && name == \"column\" && column >= start.column){\n\t\t\t\tif (name == \"row\"){\n\t\t\t\t\tif (row < start.row - inc)\t//delete comment if row was deleted\n\t\t\t\t\t\tcomments.splice(i,1);\n\t\t\t\t\telse\t\t\t\t\t\t//update mark position if upper row was deleted\n\t\t\t\t\t\tcomments[i][0] = row*1 + inc;\n\t\t\t\t} else if (name == \"column\"){\n\t\t\t\t\tif (column < start.column - inc){\n\t\t\t\t\t\tcomments.splice(i, 1);\n\t\t\t\t\t} else \n\t\t\t\t\t\tcomments[i][1] = column*1 + inc;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n\nfunction getComment(view, row, column, page){\n\tlet comment;\n\tif(page && page != view.getActiveSheet()){\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet && sheet.content.comments){\n\t\t\tcomment = find(sheet.content.comments, comment => comment[0] == row && comment[1] == column);\n\t\t\tif(comment)\n\t\t\t\tcomment = comment[2];\n\t\t}\n\t}\n\telse if(view.comments._pull[row] && view.comments._pull[row][column])\n\t\tcomment = view.comments._pull[row][column];\n\treturn comment || \"\";\n}","import {getSheet} from \"../sheets\";\n\nexport function init(view) {\n\tview.attachEvent(\"onUndo\", (action, row, column, value) => {\n\t\tif (action == \"show-formulas\"){\n\t\t\tshowFormulas(view, value);\n\t\t}\n\t});\n}\n\nexport function showFormulas(view, value, page){\n\tpage = page || view.getActiveSheet();\n\tlet old;\n\n\tif (page == view.getActiveSheet()) {\n\t\tconst grid = view.$$(\"cells\");\n\t\told = grid.config.showFormulas;\n\n\t\tif(value == \"toggle\")\n\t\t\tvalue = !old;\n\n\t\tif(value != old){\n\t\t\tgrid.config.showFormulas = value;\n\n\t\t\tview.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"show-formulas\", value}]);\n\t\t\tgrid.refresh();\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(view, page);\n\t\tif(sheet){\n\t\t\tif(!sheet.content.table)\n\t\t\t\tsheet.content.table = {showFormulas: 1};\n\n\t\t\told = sheet.content.table.showFormulas;\n\n\t\t\tif (value == \"toggle\")\n\t\t\t\tvalue = !old;\n\n\t\t\tsheet.content.table.showFormulas = value ? 1 : 0;\n\t\t}\n\t\telse return;\n\t}\n\n\tif(value != old)\n\t\tview.callEvent(\"onAction\", [\"show-formulas\", {newValue: value, value: old, page}]);\n}\n\nexport function serialize(view, data){\n\tdata.table.showFormulas = view.$$(\"cells\").config.showFormulas ? 1 : 0;\n}\n\nexport function load(view, data){\n\tlet mode = false;\n\tif(data.table && data.table.showFormulas)\n\t\tmode = data.table.showFormulas;\n\tshowFormulas(view, mode);\n}","import * as m1  from \"./hide_gridlines\";\nimport * as m2  from \"./hide_headers\";\nimport * as m3  from \"./lock_cell\";\nimport * as m4  from \"./dropdown\";\nimport * as m5  from \"./filter\";\nimport * as m6  from \"./hide_row_col\";\nimport * as m7  from \"./comments\";\nimport * as m8  from \"./show_formulas\";\n\nexport function init(view){\n\tvar modules = [m1,m2,m3,m4,m5,m6,m7,m8];\n\tview.attachEvent(\"onDataSerialize\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].serialize)\n\t\t\t\tmodules[i].serialize(view,data);\n\t\t}\n\n\t});\n\tview.attachEvent(\"onDataParse\", function(data){\n\t\tfor (var i = 0; i < modules.length; i++){\n\t\t\tif(modules[i].load)\n\t\t\t\tmodules[i].load(view,data);\n\t\t}\n\t});\n}","const types = [\".xls\",\".xlt\",\".xla\",\".xlsx\",\".xlsm\",\".xltx\",\".xltm\",\".xlam\",\".xlsb\"];\n\nexport function init(view){\n\tlet uploader;\n\tif (window.XMLHttpRequest && (new XMLHttpRequest()).upload){\n\t\tuploader = webix.ui({\n\t\t\tview:\"uploader\",\n\t\t\tapiOnly:true,\n\t\t\taccept: types.join()\n\t\t});\n\n\t\tuploader.attachEvent(\"onBeforeFileAdd\",webix.bind(function(upload){\n\t\t\tif(types.indexOf(\".\"+upload.type.toLowerCase())>-1){\n\t\t\t\tview.reset();\n\n\t\t\t\tif(!upload.file.options)\n\t\t\t\t\tupload.file.options = {};\n\t\t\t\twebix.extend(upload.file.options, {\n\t\t\t\t\tcellDates: false,\n\t\t\t\t\tsheetStubs: view.config.sheetStubs,\n\t\t\t\t\tcellStyles: view.config.loadStyles\n\t\t\t\t});\n\n\t\t\t\tview.parse(upload.file, \"excel\");\n\t\t\t}\n\t\t\treturn false;\n\t\t},this));\n\n\t\tview._destroy_with_me.push(uploader);\n\t}\n\n\tview.attachEvent(\"onCommand\", (obj) => {\n\t\tif (obj.id === \"excel-import\")\n\t\t\tstartImport(view, uploader);\n\t});\n}\n\nfunction startImport(view, uploader){\n\tif (!uploader)\n\t\tview.alert(webix.i18n.spreadsheet.labels[\"import-not-support\"]);\n\telse\n\t\twebix.delay(() => uploader.fileDialog());\n}","export function prepareExcelImage(url, position) {\n\tconst imagePromise = webix.promise.defer();\n\tconst regex = /data:image\\/(png|jpg|jpeg);base64,/;\n\tconst type = url.match(regex);\n\tif(type)\n\t\timagePromise.resolve({\n\t\t\tdata: url,\n\t\t\tposition\n\t\t});\n\telse{\n\t\tconst img = webix.html.create(\"img\", {src: url, width:position.width+\"px\", height:position.height+\"px\"});\n\t\timg.crossOrigin = \"anonymous\";\n\n\t\timg.onerror = () =>\timagePromise.resolve();\n\t\timg.onload = function(){\n\t\t\tconst canvas = webix.html.create(\"canvas\");\n\t\t\tconst ctx = canvas.getContext(\"2d\");\n\t\t\tcanvas.width = position.width;\n\t\t\tcanvas.height = position.height;\n\t\t\tctx.drawImage(img, 0, 0, position.width, position.height);\n\n\t\t\timagePromise.resolve({\n\t\t\t\tdata: canvas.toDataURL(\"png\"),\n\t\t\t\tposition\n\t\t\t});\n\t\t};\n\t}\n\treturn imagePromise;\n}\n\nexport function cloneNodeWithStyles(node){\n\tconst clone = node.cloneNode(false);\n\n\tif(node.tagName){\n\t\tconst styles = window.getComputedStyle(node);\n\t\tlet cssText = \"\";\n\t\tfor (let i = 0; i < styles.length; i++) {\n\t\t\tlet prop = styles[i];\n\t\t\tif(prop == \"visibility\") continue;\n\t\t\tcssText += prop + \":\" + styles.getPropertyValue(prop) + \";\";\n\t\t}\n\t\tclone.style.cssText = cssText;\n\t}\n\n\tfor (let i = 0; i < node.childNodes.length; i++)\n\t\tclone.appendChild(cloneNodeWithStyles(node.childNodes[i]));\n\n\treturn clone;\n}","import { style_names, getStyle } from \"../operations/styles\";\nimport { getType } from \"../operations/types\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { getFormatSource } from \"../operations/formats\";\nimport { getDimension } from \"../helpers/array\";\nimport { getConditionCss } from \"../operations/conditional_formats\";\nimport { getRenderedValue } from \"../table\";\nimport {getSheet, isVisible} from \"../sheets\";\nimport {toRange} from \"../helpers/column_names\";\nimport { prepareExcelImage, cloneNodeWithStyles } from \"../helpers/image_export\";\n\nexport function init(view){\n\tconst table = view._table;\n\tview.$exportView = function(options){\n\t\tconst pdf = options.export_mode == \"pdf\";\n\t\tconst excel = options.export_mode == \"excel\";\n\t\tconst defaultOptions = {\n\t\t\tfreeze: true,\n\t\t\tstubCells: true,\n\t\t\theader: false,\n\t\t\tfooter:false,\n\t\t\theights:true,\n\t\t\trawValues: !pdf,\n\t\t\tfilterHTML:true,\n\t\t\tspans: true,\n\t\t\tstyles:true,\n\t\t\tmath: !pdf,\n\t\t\thidden: excel,\n\t\t\txCorrection: table.config.header || options.hidden ? 1 : 0,\n\t\t\tignore:{rowId:true},\n\t\t\tconditions:true,\n\t\t\tformulasMode:\"auto\",\n\t\t\tgridlines:\"auto\",\n\t\t\theaders:\"auto\",\n\t\t\tzoom:\"auto\"\n\t\t};\n\n\t\twebix.extend(options, defaultOptions);\n\n\t\tif(excel || pdf)\n\t\t\treturn _exportView(view, options);\n\t\telse\n\t\t\treturn table;\n\t};\n\n\ttable.$getExportValue = function(row, column, options){\n\t\tlet value = view.getCellValue(row, column, options.math);\n\t\tconst mode = options.export_mode;\n\t\tconst math = options.math && value[0] == \"=\" && value.length > 1;\n\n\t\tif((mode == \"pdf\" || mode == \"csv\") && !math && !options.rawValues)\n\t\t\tvalue = getRenderedValue(view, row, column);\n\t\telse if(mode == \"excel\" && math){\n\t\t\tconst imageExport = value.match(/^=(image|sparkline)\\((.*?)\\)$/i);\n\t\t\tif(imageExport){\n\t\t\t\tif(options.images === false) return \"\";\n\t\t\t\tconst span = this.getSpan(row, column);\n\n\t\t\t\tlet height = 0, width = 0;\n\t\t\t\tif(span){\n\t\t\t\t\tfor(let r = row; r < row + span[3]; r++)\n\t\t\t\t\t\theight += view.getRow(r).$height;\n\t\t\t\t\tfor(let c = column; c < column + span[2]; c++)\n\t\t\t\t\t\twidth += view.getColumn(c).width;\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\twidth += view.getColumn(column).width;\n\t\t\t\t\theight += view.getRow(row).$height;\n\t\t\t\t}\n\n\t\t\t\tconst position = {\n\t\t\t\t\ttype: \"twoCellAnchor\",\n\t\t\t\t\tfrom: { col: column-1, row : row-1 },\n\t\t\t\t\tto: { \n\t\t\t\t\t\tcol: span ? column + span[2] - 1 : column,\n\t\t\t\t\t\trow: span ? row + span[3] - 1 : row\n\t\t\t\t\t},\n\t\t\t\t\twidth,\n\t\t\t\t\theight\n\t\t\t\t};\n\n\t\t\t\tlet image = imageExport[2];\n\n\t\t\t\tconst isSparkline = imageExport[1].toLowerCase() == \"sparkline\";\n\t\t\t\tif(isSparkline){\n\t\t\t\t\tconst svg = view.getCellValue(row, column, false);\n\t\t\t\t\tconst container = webix.html.create(\"div\", {style:\"height:auto;width:auto;visibility:hidden;position:absolute;top:0px;left:0px;\"});\n\t\t\t\t\tcontainer.innerHTML = svg;\n\t\t\t\t\tdocument.body.appendChild(container);\n\t\t\t\t\tconst nodeCopy = cloneNodeWithStyles(container.firstChild);\n\t\t\t\t\twebix.html.remove(container);\n\t\t\t\t\tconst svgData = new XMLSerializer().serializeToString(nodeCopy);\n\t\t\t\t\timage = \"data:image/svg+xml;base64,\" + btoa(unescape(encodeURIComponent(svgData)));\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\timage = view._mData.getStore().exec(image, view._mPage.getContext()); // =IMAGE(A1)\n\n\t\t\t\tlet imagePromise = prepareExcelImage(image, position);\n\n\t\t\t\tif(view.$getExcelImage)\n\t\t\t\t\timagePromise = view.$getExcelImage(imagePromise, {row, column}, position);\n\n\t\t\t\treturn {image: imagePromise};\n\t\t\t\t\n\t\t\t}\n\t\t\telse{\n\t\t\t\tconst id = view._mPage.cellID(row - 1, column - 1);\n\n\t\t\t\tlet arrayRowEnd, arrayColEnd, ref;\n\n\t\t\t\tfor(let r = row+1; r <= view.config.rowCount; r++){\n\t\t\t\t\tconst cell = view._mPage.getCell(r - 1, column - 1);\n\t\t\t\t\tif(cell && cell.source === id)\n\t\t\t\t\t\tarrayRowEnd = r;\n\t\t\t\t\telse break;\n\t\t\t\t}\n\n\t\t\t\tfor(let c = column+1; c <= view.config.columnCount; c++){\n\t\t\t\t\tconst cell = view._mPage.getCell(row - 1, c - 1);\n\t\t\t\t\tif(cell && cell.source === id)\n\t\t\t\t\t\tarrayColEnd = c;\n\t\t\t\t\telse break;\n\t\t\t\t}\n\n\t\t\t\tif(arrayColEnd || arrayRowEnd)\n\t\t\t\t\tref = toRange(row, column, arrayRowEnd || row, arrayColEnd || column);\n\n\t\t\t\tconst cellValue = view.getCellValue(row, column, false);\n\t\t\t\tif(/^=(checkbox|radio)\\(/i.test(value))\n\t\t\t\t\tvalue = cellValue ? \"=TRUE()\" : \"=FALSE()\";\n\n\t\t\t\tvalue = {\n\t\t\t\t\tvalue: cellValue,\n\t\t\t\t\tformula: value,\n\t\t\t\t\tref\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn value;\n\t};\n}\n\nfunction _exportView(view, options){\n\tconst excel = options.export_mode == \"excel\";\n\n\tif(options.sheets === true) \n\t\toptions.sheets = view._sheets.map(function(s){ return s.name;});\n\telse if(!options.sheets || !options.sheets.length)\n\t\toptions.sheets = [view._activeSheet];\n\telse if(typeof options.sheets == \"string\")\n\t\toptions.sheets = [options.sheets];\n\n\tif(!excel)\n\t\toptions.sheets = options.sheets.filter(sheet => isVisible(view, sheet));\n\telse if(view._sheets.length != options.sheets.length){\n\t\tfor(let i = 0; i < view._sheets.length; i++){\n\t\t\t//add veryHidden sheets in any case\n\t\t\tconst sheet = view._sheets[i];\n\t\t\tif(sheet.state == \"veryHidden\" && options.sheets.indexOf(sheet.name) == -1)\n\t\t\t\toptions.sheets.push(sheet.name);\n\t\t}\n\t}\n\n\toptions.dataOnly = true;\n\n\tlet data = [];\n\tlet active = view._activeSheet;\n\n\tfor(let i = 0; i<options.sheets.length; i++){\n\t\tconst sheet = options.sheets[i];\n\t\tconst id = sheet.id || sheet;\n\n\t\tview.showSheet(id);\n\n\t\tconst oldZoom = view._zoom;\n\t\tview.ignoreUndo(() => view.zoom(1));\n\n\t\tif(options.hidden)\n\t\t\toptions.xCorrection = 1;\n\n\t\tconst sheetOptions = sheet.options ? webix.extend(sheet.options, options) : webix.copy(options);\n\t\tlet isNotActiveSheet = id != active;\n\t\tif(isNotActiveSheet)\n\t\t\tsheetOptions._hidden = true;\n\t\tif(!sheetOptions.name)\n\t\t\tsheetOptions.name = id;\n\n\t\tconst pdfTable = !excel && sheetOptions.display != \"image\";\n\n\t\tconst serialized = view.serialize();\n\t\tconst [rows, cols] = getDimension(serialized.data, serialized.spans, 0, 0);\n\n\t\tif(!excel){\n\t\t\tif(webix.isUndefined(sheetOptions.textBefore))\n\t\t\t\tsheetOptions.textBefore = sheetOptions.name;\n\t\t\tif(pdfTable){\n\t\t\t\tsheetOptions.ignore = sheetOptions.ignore || {};\n\t\t\t\tfor(let i = cols+1; i <= view.config.columnCount; i++){\n\t\t\t\t\tsheetOptions.ignore[i] = true;\n\t\t\t\t}\n\n\t\t\t\tconst filter = sheetOptions.filter || (()=>true);\n\t\t\t\tsheetOptions.filter = obj =>{\n\t\t\t\t\treturn obj.id <= rows && filter.apply(this, arguments);\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\tconst sheetData = webix[excel ? \"toExcel\" : \"toPDF\"](view._table, sheetOptions);\n\n\t\tif(excel)\n\t\t\tsheetData[0].state = getSheet(view, id).state || \"visible\";\n\n\t\tif(pdfTable && sheetData[0].scheme.length == 0)\n\t\t\tcontinue;\n\n\t\tif((excel || pdfTable) && sheetOptions.styles){\n\t\t\tconst styles = sheetData[0].styles = _getStyles(view, sheetOptions, excel, rows, cols);\n\n\t\t\tif(pdfTable)\n\t\t\t\t_updatePdfData(styles, sheetData, sheetOptions, view, serialized);\n\t\t}\n\n\t\tdata = data.concat(sheetData);\n\n\t\tif(excel){\n\t\t\tdata[i].ranges = [];\n\n\t\t\tview.ranges.serialize(id).forEach(range => {\n\t\t\t\tconst ref = range[1].split(\"!\");\n\t\t\t\tdata[i].ranges.push({\n\t\t\t\t\tSheet: range[2] ? null : i,\n\t\t\t\t\tName: range[0],\n\t\t\t\t\tRef: ref[0]+\"!\"+ref[1].replace(/[0-9]+|[A-Z]+/gi, (match)=>`$${match}`)\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tif(options.freeze && (serialized.table.frozenRows || serialized.table.frozenColumns))\n\t\t\t\tdata[i].freeze = {\n\t\t\t\t\trows: serialized.table.frozenRows,\n\t\t\t\t\tcolumns: serialized.table.frozenColumns\n\t\t\t\t};\n\n\t\t\tdata[i].sheetSettings = {\n\t\t\t\tshowFormulas: options.formulasMode === true || (options.formulasMode == \"auto\" && serialized.table.showFormulas),\n\t\t\t\tshowGridLines: options.gridlines === true || (options.gridlines == \"auto\" && serialized.table.gridlines),\n\t\t\t\tshowRowColHeaders: options.headers === true || (options.headers == \"auto\" && serialized.table.headers),\n\t\t\t\tzoomScale: options.zoom == \"auto\" ? oldZoom * 100 : options.zoom\n\t\t\t};\n\t\t}\n\t\telse{\n\t\t\tif(options.autowidth)\n\t\t\t\tgetAutowidth(sheetOptions, options);\n\t\t}\n\t\tif(options.images !== false)\n\t\t\tfor(let id in view.views._pull){\n\t\t\t\tconst innerView = view.views._pull[id];\n\n\t\t\t\tconst position = {\n\t\t\t\t\ttype: \"absoluteAnchor\",\n\t\t\t\t\tx: innerView.x,\n\t\t\t\t\ty: innerView.y,\n\t\t\t\t\twidth: innerView.config.width || 500,\n\t\t\t\t\theight: innerView.config.height || 300\n\t\t\t\t};\n\n\t\t\t\tlet imagePromise;\n\t\t\t\tif(innerView.type == \"image\")\n\t\t\t\t\timagePromise = prepareExcelImage(innerView.data, position);\n\t\t\t\telse{\n\t\t\t\t\timagePromise = webix.promise.defer();\n\n\t\t\t\t\tlet win = webix.$$(id);\n\t\t\t\t\tconst extraWin = isNotActiveSheet || i+1 != options.sheets.length;\n\t\t\t\t\tif(extraWin){\n\t\t\t\t\t\tconst view = win.getBody();\n\t\t\t\t\t\twin = webix.ui({view:\"window\", head:false, width: position.width, height: position.height, body:{rows:[]}});\n\t\t\t\t\t\twin.getBody().addView(view);\n\t\t\t\t\t\twin.show({x:-99999, y:-99999});\n\t\t\t\t\t}\n\n\t\t\t\t\twebix.toPNG(win.getBody(), {download: false}).then(blob => {\n\t\t\t\t\t\tif(extraWin)\n\t\t\t\t\t\t\twin.close();\n\t\t\t\t\t\tconst reader = new FileReader();\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\t\t\t\t\t\treader.onload = () => {\n\t\t\t\t\t\t\timagePromise.resolve({\n\t\t\t\t\t\t\t\tdata: reader.result,\n\t\t\t\t\t\t\t\tposition\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t};\n\t\t\t\t\t\treader.onerror  = () => imagePromise.resolve();\n\t\t\t\t\t});\n\t\t\t\t}\n\n\t\t\t\tif(view.$getExcelImage)\n\t\t\t\t\timagePromise = view.$getExcelImage(imagePromise, innerView, position);\n\n\t\t\t\tdata[i].images.push(imagePromise);\n\t\t\t}\n\n\t\tview.ignoreUndo(() => view.zoom(oldZoom));\n\t}\n\n\tview.showSheet(active);\n\tdelete options.dataOnly;\n\treturn data;\n}\n\nfunction _updatePdfData(styles, sheetData, sheetOptions, view, serialized){\n\tconst header = sheetOptions.header ? 1 : 0;\n\n\tif (sheetOptions.spans) {\n\t\tconst spans = serialized.spans.sort((a,b) => a[1]<b[1]?1:(a[1]>b[1]?-1:0));\n\t\tfor (let i = 0; i < spans.length; i++) {\n\t\t\tif (spans[i][2] > 1) {\n\t\t\t\tlet row = spans[i][0] - 1 + header, // zero-based row position\n\t\t\t\t\tcol = spans[i][1] - 1, // zero-based col position\n\t\t\t\t\tcols = spans[i][2];\n\t\t\t\tif (styles[row] && styles[row][col]) {\n\t\t\t\t\tstyles[row][col].colspan = cols;\n\t\t\t\t\t// if colspan, then remove merged cells (else PDFJS will shift columns)\n\t\t\t\t\tconst rowData = sheetData[0].exportData[row - header];\n\t\t\t\t\tif (rowData){\n\t\t\t\t\t\t// remove merged cell values\n\t\t\t\t\t\trowData.splice(col + 1, cols - 1);\n\t\t\t\t\t}\n\t\t\t\t\tlet style = Object.values(styles[row]);\n\t\t\t\t\tstyle.splice(col + 1, cols - 1); // remove merged cell styles\n\t\t\t\t\tstyles[row] = style;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tconst data = sheetData[0].exportData;\n\tfor(let r = 0; r < data.length; r++){\n\t\tfor (let c = 0; c < data[r].length; c++) {\n\t\t\tlet height = view.$$(\"cells\").config.rowHeight;\n\n\t\t\tif(sheetOptions.heights && serialized.sizes.length){\n\t\t\t\tfor(let s = 0; s < serialized.sizes.length; s++){\n\t\t\t\t\tconst rowSize = serialized.sizes[s][0];\n\t\t\t\t\tif(rowSize && rowSize == r+1){\n\t\t\t\t\t\theight = serialized.sizes[s][2];\n\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tconst cellStyle = styles[r + header][c];\n\t\t\tconst align = cellStyle.vertAlign;\n\t\t\tconst pad = height*0.75 - cellStyle.fontSize; // available px for padding in top & bottom\n\t\t\tcellStyle.paddingTop = (align == \"top\" ? 0 : (align == \"bottom\" ? pad : pad / 2));\n\t\t\tcellStyle.paddingBottom = (align == \"bottom\" ? 0 : (align == \"top\" ? pad : pad / 2));\n\t\t}\n\t}\n}\n\nfunction getAutowidth(view, options){\n\tconst prop = options.orientation && options.orientation == \"landscape\" ? \"height\" : \"width\";\n\tlet width;\n\n\tif(view.$width)\n\t\twidth = view.$width;\n\telse //'view' can be local settings and we need to compare them with common ones\n\t\twidth = view[prop];\n\n\toptions[prop] = Math.max(options[prop] || 0, width || 0);\n}\n\nfunction _safeColor(str){\n\tstr = str.substring(1);\n\tif(str.length === 3) str = str+str;\n\treturn str;\n}\n\nfunction _getDefaults(options){\n\tlet d = defaultStyles;\n\tif(options.export_mode == \"excel\")\n\t\treturn {\n\t\t\tfont:{\n\t\t\t\tsz:d[\"font-size\"]*0.75,\n\t\t\t\tname:d[\"font-family\"].replace(/'|,.*$/g, \"\"),\n\t\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\t},\n\t\t\talignment:{\n\t\t\t\thorizontal:d[\"text-align\"],\n\t\t\t\tvertical:d[\"vertical-align\"]==\"middle\"?\"center\":d[\"vertical-align\"],\n\t\t\t\twrapText:d[\"white-space\"]!=\"nowrap\"\n\t\t\t}\n\t\t};\n\telse\n\t\treturn {\n\t\t\tfontSize: d[\"font-size\"]*0.75,\n\t\t\t//we do not export default color, but it is the right place to do it\n\t\t\ttextAlign: d[\"text-align\"],\n\t\t\twhiteSpace: (d[\"white-space\"]!=\"nowrap\")\n\t\t};\n}\n\nfunction _getStyles(view, options, excel, rows, cols){\n\tview.compactStyles();\n\n\tlet result = [];\n\tconst cached = {};\n\tconst cachedConditions = {};\n\tconst defaults = _getDefaults(options);\n\n\tif(excel && options.docHeader) result  = result.concat([{0:_getDocStyle(options.docHeader.css, defaults)}, {}]);\n\tif(options.header) result.push({});\n\n\tconst delta = result.length;\n\n\tconst grid = view.$$(\"cells\");\n\n\tlet rIndex = delta;\n\tgrid.eachRow(row =>{\n\t\tif(row > rows)\n\t\t\treturn;\n\n\t\tlet cIndex = 0;\n\t\tgrid.eachColumn(col => {\n\t\t\tif(cIndex > cols)\n\t\t\t\treturn;\n\n\t\t\tif(cIndex >= options.xCorrection){\n\t\t\t\tconst css = getStyle(view, {row, column:col}, null, true);\n\t\t\t\tconst index = cIndex - options.xCorrection;\n\n\t\t\t\tresult[rIndex] = result[rIndex] || {};\n\n\t\t\t\tlet styles;\n\t\t\t\tif(css){\n\t\t\t\t\tif(cached[css.id])\n\t\t\t\t\t\tstyles = webix.copy(cached[css.id]);\n\t\t\t\t\telse{\n\t\t\t\t\t\tstyles = _getCellStyle(view, css.text, excel, options);\n\n\t\t\t\t\t\tfor(let name in defaults){\n\t\t\t\t\t\t\tif(excel)\n\t\t\t\t\t\t\t\twebix.extend(styles[name], defaults[name]);\n\t\t\t\t\t\t\telse if (!styles[name])\n\t\t\t\t\t\t\t\tstyles[name] = defaults[name];\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tcached[css.id] = webix.copy(styles);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\tstyles = webix.copy(defaults);\n\n\t\t\t\tif(options.conditions){\n\t\t\t\t\t//not real excel condition, save only bg and color (sheetJS doesn't support)\n\t\t\t\t\tconst condition = _getCellConditions(view, row, col, cachedConditions);\n\t\t\t\t\tif(condition)\n\t\t\t\t\t\t_updateStyleCondition(styles, condition, excel);\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index] = styles;\n\n\t\t\t\tlet type;\n\t\t\t\tif(options.math){\n\t\t\t\t\tconst math = view.getCellValue(row, col);\n\t\t\t\t\tif(typeof math == \"string\" && math[0] == \"=\" && math.length > 1){\n\t\t\t\t\t\tconst value = view.getCellValue(row, col, false);\n\t\t\t\t\t\tif(isNaN(value))\n\t\t\t\t\t\t\ttype = \"string\";\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tresult[rIndex][index].type = type || getType(view, row, col);\n\t\t\t}\n\t\t\tcIndex++;\n\t\t}, options.hidden);\n\t\trIndex++;\n\t}, options.hidden);\n\n\tif(excel && options.docFooter) result  = result.concat([{},{0:_getDocStyle(options.docFooter.css, defaults)}]);\n\n\treturn result;\n}\n\nfunction _getCellStyle(view, styles, excel, options){\n\tlet str = styles.split(\";\");\n\tlet stl = {};\n\tif(excel)\n\t\tstl = { font:{}, alignment:{}, border:{}};\n\n\tfor(let s = 0; s<str.length; s++){\n\t\tif(str[s]){\n\t\t\tif(excel)\n\t\t\t\t_getExcelCellStyle(view, stl, str, s);\n\t\t\telse\n\t\t\t\t_getPdfCellStyle(stl, str, s, options.table);\n\t\t}\n\t}\n\n\treturn stl;\n}\n\nfunction _getCellConditions(view, r, c, cached){\n\tconst rendered = getRenderedValue(view, r, c);\n\tconst css = getConditionCss(view, r, c, rendered);\n\tif(css){\n\t\tif(cached[css])\n\t\t\treturn cached[css];\n\t\tconst el = webix.html.create(\"div\", {\"class\":css});\n\t\tdocument.body.appendChild(el);\n\n\t\tconst computed = window.getComputedStyle(el);\n\t\tconst bg = computed.backgroundColor;\n\t\tconst color = computed.color;\n\n\t\tdocument.body.removeChild(el);\n\n\t\tcached[css] = [bg, color];\n\t\treturn cached[css];\n\t}\n}\n\nfunction _updateStyleCondition(stl, condition, excel){\n\tlet [bg, color] = condition.map(val => webix.color.rgbToHex(val));\n\tif(excel){\n\t\tstl.fill = {fgColor:{rgb:bg}};\n\t\tstl.font.color = {rgb:color};\n\t}\n\telse{\n\t\tstl.backgroundColor = bg;\n\t\tstl.color = color;\n\t}\n}\n\nfunction _getExcelCellStyle(view, stl, str, s){\n\tswitch (style_names[s]){\n\t\tcase \"color\":\n\t\t\tstl.font.color = {rgb:_safeColor(str[s])};\n\t\t\tbreak;\n\t\tcase \"background\":{\n\t\t\tconst fill = _safeColor(str[s]);\n\t\t\tif(fill && fill.toLowerCase() !== \"ffffff\")\n\t\t\t\tstl.fill = { fgColor:{ rgb:fill}};\n\t\t\tbreak;\n\t\t}\t\n\t\tcase \"text-align\":\n\t\t\tstl.alignment.horizontal = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tstl.font.name = str[s].replace(/'|,.*$/g, \"\"); // cut off fallback font\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.font.sz = str[s].replace(\"px\", \"\")*0.75; //px to pt conversion\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.font.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"underline\":\n\t\t\tstl.font.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"strike\":\n\t\t\tstl.font.strike = str[s] == \"strike\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.font.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.alignment.vertical = str[s] == \"middle\"?\"center\":str[s];\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.alignment.wrapText = str[s] == \"wrap\";\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tstl.format = getFormatSource(view, str[s], true) || \"\";\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":\n\t\t\tstl.border[ style_names[s].split(\"-\")[1] ] = getBorderStyles(str[s], true);\n\t\t\tbreak;\n\t\tcase \"indent\":\n\t\t\tstl.alignment.indent = str[s];\n\t\t\tbreak;\n\t}\n}\n\nfunction _getPdfCellStyle(stl, str, s, table){\n\tswitch (style_names[s]) {\n\t\tcase \"color\":\n\t\t\tstl.color = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"background\":\n\t\t\tstl.backgroundColor = _safeColor(str[s]);\n\t\t\tbreak;\n\t\tcase \"text-align\":\n\t\t\tstl.textAlign = str[s];\n\t\t\tbreak;\n\t\tcase \"font-family\":\n\t\t\tbreak;\n\t\tcase \"font-size\":\n\t\t\tstl.fontSize = str[s].replace(\"px\", \"\")*0.75;\n\t\t\tbreak;\n\t\tcase \"font-style\":\n\t\t\tstl.italic = str[s] == \"italic\";\n\t\t\tbreak;\n\t\tcase \"underline\":\n\t\t\tstl.underline = str[s] == \"underline\";\n\t\t\tbreak;\n\t\tcase \"strike\":\n\t\t\tstl.strikethrough = str[s] == \"strike\";\n\t\t\tbreak;\n\t\tcase \"font-weight\":\n\t\t\tstl.bold = str[s] == \"bold\";\n\t\t\tbreak;\n\t\tcase \"vertical-align\":\n\t\t\tstl.vertAlign = str[s]; // not supported in PDFJS, so simulate with lineHeight and paddingTop\n\t\t\tbreak;\n\t\tcase \"wrap\":\n\t\t\tstl.whiteSpace = (str[s] != \"nowrap\");\n\t\t\tbreak;\n\t\tcase \"borders\":\n\t\t\tbreak;\n\t\tcase \"format\":\n\t\t\tbreak;\n\t\tcase \"border-right\":\n\t\tcase \"border-bottom\":\n\t\tcase \"border-left\":\n\t\tcase \"border-top\":{\n\t\t\tconst pos = style_names[s].split(\"-\")[1];\n\t\t\tstl[`border${pos[0].toUpperCase() + pos.substring(1)}Color`] = getBorderStyles(str[s]);\n\t\t\tbreak;\n\t\t}\n\t\tcase \"indent\":\n\t\t\tif(str[s]){\n\t\t\t\tconst name = `padding${ str[2] == \"right\" ? \"Right\" : \"Left\" }`;\n\t\t\t\tconst padding = table && table[name] ? table[name] : 10; // 10 - default padding value\n\t\t\t\tstl[name] = padding + str[s] * 6;\n\t\t\t}\n\t\t\tbreak;\n\t}\n}\n\nfunction getBorderStyles(val, excel){\n\tconst [color, type] = val.split(\",\");\n\n\tif(excel)\n\t\treturn { color:{ rgb:_safeColor(color)}, style:type};\n\telse\n\t\treturn _safeColor(color);\n}\n\nfunction _getDocStyle(css){\n\tif(!css) return {};\n\tconst str = [];\n\tfor(let i =0; i<style_names.length; i++)\n\t\tstr.push(css[style_names[i]]||\"\");\n\treturn _getCellStyle(str.join(\";\"), true);\n}","import { style_names } from \"../operations/styles\";\nimport { fontFamily } from \"../toolbar/structure\";\nimport { defaultStyles} from \"../toolbar/defaults\";\nimport { find } from \"../helpers/array\";\n\nexport function init(view){\n\tview._parseExcel = function(obj, driver){\n\t\tconst options = obj.options || {};\n\t\toptions.math = view.config.math;\n\n\t\tconst full = { sheets:[]};\n\t\tconst fmt = {count: view._formats.formatsCount, cache:{}};\n\t\tfor(let i  = 0; i< obj.names.length; i++){\n\t\t\toptions.name = obj.names[i];\n\t\t\tfull.sheets.push({\n\t\t\t\tname:options.name,\n\t\t\t\tstate:obj.states[i],\n\t\t\t\tcontent:_excel_to_data(view, driver.getSheet(obj, options), obj.ranges, i, fmt)\n\t\t\t});\n\t\t}\n\t\treturn full;\n\t};\n\tview._parseCsv = function(obj, driver){\n\t\tobj = driver.getRecords(obj);\n\n\t\tconst dataObj = webix.copy(obj);\n\t\tconst data = [];\n\n\t\tfor(let i = 0; i < dataObj.length; i++){\n\t\t\tlet item = dataObj[i].split(driver.cell);\n\t\t\tfor(let c  = 0; c<item.length; c++){\n\t\t\t\tconst row = i+1, column = c+1;\n\t\t\t\tdata.push([row, column, item[c]]);\n\t\t\t}\n\t\t}\n\t\treturn { data };\n\t};\n}\n\nfunction _excel_to_data(view, obj, ranges, index, fmt){\n\tconst dataObj = webix.copy(obj.data);\n\tconst data =  [];\n\n\tconst typesMap = new Map();\n\tif (obj.types)\n\t\tfor (const type of obj.types)\n\t\t\ttypesMap.set(`${type[0]},${type[1]}`, type[2]);\n\n\tfor (let i = 0; i < dataObj.length; i++){\n\t\tfor(let c = 0; c<dataObj[0].length; c++){\n\t\t\tconst row = i+1, column = c+1;\n\t\t\tlet val = dataObj[i][c];\n\t\t\tif(obj.links.length){\n\t\t\t\tlet link = find(obj.links, link => link[0] == i && link[1] == c);\n\t\t\t\tif(link){\n\t\t\t\t\tlink = typeof link[2] == \"string\" && link[2][0] == \"=\" ? link[2].slice(1) : `\"${link[2]}\"`;\n\t\t\t\t\tval = typeof val == \"string\" && val[0] == \"=\" ? val.slice(1) : `\"${val}\"`;\n\t\t\t\t\tval = `=HYPERLINK(${link}, ${val})`;\n\t\t\t\t}\n\t\t\t}\n\t\t\tdata.push([row, column, val, typesMap.get(`${i},${c}`)]);\n\t\t}\n\t}\n\tobj.data = data;\n\n\t//merged cells\n\tif(obj.spans){\n\t\tfor(let i = 0; i<obj.spans.length; i++){\n\t\t\tobj.spans[i][0]++;\n\t\t\tobj.spans[i][1]++;\n\t\t}\n\t}\n\n\t//named ranges\n\tif(ranges){\n\t\tfor(let r = 0; r < ranges.length; r++){\n\t\t\tconst sheetIndex = ranges[r].Sheet;\n\t\t\tconst book = webix.isUndefined(sheetIndex);\n\t\t\tif(book || sheetIndex === index){\n\t\t\t\tobj.ranges = obj.ranges || [];\n\t\t\t\tobj.ranges.push([ranges[r].Name.toUpperCase(), ranges[r].Ref.substring(ranges[r].Ref.indexOf(\"!\")+1).replace(/\\$/g, \"\"), book]);\n\t\t\t}\n\t\t}\n\t}\n\n\t//cell styles\n\tif(obj.styles)\n\t\t_getStyles(view, obj, fmt);\n\n\tif(obj.hidden){\n\t\t_getHidden(obj);\n\t}\n\n\t//column width and row height\n\tif(obj.sizes){\n\t\tfor(let i = 0; i<obj.sizes.length; i++){\n\t\t\tif(obj.sizes[i][0] == \"column\")\n\t\t\t\tobj.sizes[i] = [0, obj.sizes[i][1]+1, obj.sizes[i][2]];\n\t\t\telse\n\t\t\t\tobj.sizes[i] = [obj.sizes[i][1]+1, 0, obj.sizes[i][2]];\n\t\t}\n\t}\n\n\tconst settings = obj.sheetSettings;\n\tif(settings){\n\t\tobj.table.showFormulas = settings.showFormulas;\n\t\tobj.table.gridlines = settings.showGridLines;\n\t\tobj.table.headers = settings.showRowColHeaders;\n\t\tobj.table.zoom = settings.zoomScale / 100;\n\t}\n\n\treturn obj; \n}\n\n//ARGB conversion\nfunction _safeColor(str){\n\tstr = str || \"000000\";\n\tif(str.length === 8) str = str.substring(2);\n\treturn \"#\"+str;\n}\n\n//only fonts that we support can be imported\nfunction _safeFont(str){\n\tlet safe = defaultStyles[\"font-family\"];\n\tfor(let i = 0; i<fontFamily.length; i++){\n\t\tif(fontFamily[i].value == str) { safe = fontFamily[i].id; break; }\n\t}\n\treturn safe;\n}\n\nfunction _getHidden(obj){\n\tconst hidden = {\n\t\trow:[],\n\t\tcolumn:[]\n\t};\n\n\tfor(let i = 0; i < obj.hidden.length; i++){\n\t\tconst item = obj.hidden[i];\n\t\tif(item[0] == \"column\")\n\t\t\thidden.column.push(item[1]+1);\n\t\telse\n\t\t\thidden.row.push(item[1]+1);\n\t}\n\n\tobj.table = {hidden};\n}\n\nfunction _getBorderStyles(pos, stl){\n\tpos = pos.replace(\"border-\", \"\");\n\tif(stl.border && stl.border[pos]){\n\t\tconst border = stl.border[pos];\n\t\tif(border.color){\n\t\t\tconst color = _safeColor(border.color.rgb) || \"\";\n\t\t\tconst type = border.style || \"\";\n\t\t\treturn `${color},${type}`;\n\t\t}\n\t}\n\treturn \"\";\n}\n\nfunction _getStyles(view, obj, fmt){\n\tlet stylescount = 1;\n\tconst styleshash = {}, styles = [], formats = [];\n\n\tfor(let i = 0; i<obj.styles.length; i++){\n\t\tlet str = [], stl = obj.styles[i][2], css;\n\n\t\tfor(let s  = 0; s<style_names.length; s++){\n\t\t\tswitch (style_names[s]){\n\t\t\t\tcase \"color\": \n\t\t\t\t\tstr[s] = stl.font && stl.font.color ? (_safeColor(stl.font.color.rgb) || \"\") : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"background\":\n\t\t\t\t\tstr[s] = stl.fill && stl.fill.fgColor ? (_safeColor(stl.fill.fgColor.rgb) || \"\") : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"text-align\":\n\t\t\t\t\tstr[s] = (stl.alignment ? stl.alignment.horizontal : \"\") || defaultStyles[\"text-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-family\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.name ? _safeFont(stl.font.name) : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-size\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.sz ? ((stl.font.sz/0.75)+\"px\" || \"\") : \"\"; //pt to px conversion\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-style\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.italic ? \"italic\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"underline\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.underline ? \"underline\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"strike\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.strike ? \"strike\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"font-weight\":\n\t\t\t\t\tstr[s] = stl.font && stl.font.bold ? \"bold\" : \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"vertical-align\":{\n\t\t\t\t\tconst va = stl.alignment ? (stl.alignment.vertical || \"\") : \"\";\n\t\t\t\t\tstr[s] = (va == \"center\" ? \"middle\" : va) || defaultStyles[\"vertical-align\"];\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"wrap\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.wrapText ? \"wrap\" : \"nowrap\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"borders\":\n\t\t\t\t\tstr[s] = \"\";\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"format\":{\n\t\t\t\t\tlet format = stl.numFmt;\n\t\t\t\t\tlet name = \"\";\n\t\t\t\t\tif(format && format != \"General\"){\n\t\t\t\t\t\tformat = format.replaceAll(\"\\\\\", \"\");\n\t\t\t\t\t\tif(view._formats.formatCache[format])\n\t\t\t\t\t\t\tname = view._formats.formatCache[format];\n\t\t\t\t\t\telse if(fmt.cache[format])\n\t\t\t\t\t\t\tname = fmt.cache[format];\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\tname = fmt.cache[format] = \"fmt\"+(fmt.count++);\n\n\t\t\t\t\t\tif(!find(formats, arr => arr[0] == name))\n\t\t\t\t\t\t\tformats.push([name, format]);\n\t\t\t\t\t}\n\t\t\t\t\tstr[s] = name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase \"border-right\":\n\t\t\t\tcase \"border-bottom\":\n\t\t\t\tcase \"border-left\":\n\t\t\t\tcase \"border-top\":\n\t\t\t\t\tstr[s] = _getBorderStyles(style_names[s], stl);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"indent\":\n\t\t\t\t\tstr[s] = stl.alignment && stl.alignment.indent ? stl.alignment.indent : \"\";\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tstr = str.join(\";\");\n\t\tcss = styleshash[str] || \"wss\"+stylescount;\n\n\t\tfor(let d = 0; d<obj.data.length; d++){\n\t\t\tif(obj.data[d][0] === obj.styles[i][0]+1 && obj.data[d][1] === obj.styles[i][1]+1){\n\t\t\t\tobj.data[d][3] = css;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif(!styleshash[str]){\n\t\t\tstyles.push([css, str]);\n\t\t\tstyleshash[str] = css;\n\t\t\tstylescount++;\n\t\t}\n\t}\n\n\tobj.formats = formats;\n\tobj.styles = styles;\n}","import group from \"../operations/undo_group\";\n\nexport function init(view){\n\tview.attachEvent(\"onCommand\", (action) => {\n\t\tswitch (action.id) {\n\t\t\tcase \"clear-value\":\n\t\t\t\tview.clearRange(null,{values: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-style\":\n\t\t\t\tview.clearRange(null,{styles: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-conditional-formats\":\n\t\t\t\tview.clearRange(null,{conditions: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-dropdown-editors\":\n\t\t\t\tview.clearRange(null,{editors: true});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-filters\":\n\t\t\t\tview.clearRange(null,{filters: true});\n\t\t\t\tbreak;\t\n\t\t\tcase \"clear-all\":\n\t\t\t\tgroup.set(function(){\n\t\t\t\t\tview.clearRange(null,null);\n\t\t\t\t});\n\t\t\t\tbreak;\n\t\t\tcase \"clear-comments\":\n\t\t\t\tview.clearRange(null,{comments: true});\n\t\t\t\tbreak;\n\t\t}\n\t});\n}","import group from \"../operations/undo_group\";\nimport {adjustRow, adjustColumn} from \"../operations/column_operations\";\nimport {find} from \"../helpers/array\";\n\n/* row operations */\n\nexport function insertRow(row){\n\tcallCommand(this, \"add\", \"row\", row);\n}\n\nexport function deleteRow(row){\n\tcallCommand(this, \"del\", \"row\", row);\n}\n\nexport function setRowHeight(row, height, page){\n\tsetSize(this, \"row\", row, height, page);\n}\n\n/* col operations */\n\nexport function insertColumn(column){\n\tcallCommand(this, \"add\", \"column\", column);\n}\n\nexport function deleteColumn(column){\n\tcallCommand(this, \"del\", \"column\", column);\n}\n\nexport function setColumnWidth(column, width, page){\n\tsetSize(this, \"column\", column, width, page);\n}\n\n/* helpers */\n\nfunction getCells(view, id, group, page){\n\tif(!id){\n\t\tif(page && page != view.getActiveSheet())\n\t\t\treturn;\n\t\tconst area = view.$$(\"cells\").getSelectArea();\n\t\tif(area)\n\t\t\tid = [area.start[group], area.end[group]];\n\t}\n\telse if(!webix.isArray(id)){\n\t\tid =  [id,id];\n\t}\n\treturn id;\n}\n\nfunction callCommand(view, name, group, id){\n\tlet start = {}, end = {};\n\tid = getCells(view, id, group);\n\tif(!id)\n\t\treturn;\n\tstart[group] = id[0];\n\tend[group] = id[1];\n\tview.callEvent(\"onCommand\", [{ id: name, group }, start, end]);\n}\n\nfunction setSize(view, type, id, size, page){\n\tid = getCells(view, id, type, page);\n\tif(!id)\n\t\treturn;\n\n\tlet sheet;\n\tif(page && page != view.getActiveSheet()){\n\t\tsheet = find(view._sheets, obj => obj.name == page);\n\t\tif(!sheet) return;\n\t}\n\n\tconst grid = view.$$(\"cells\");\n\n\tgroup.set(()=>{\n\t\tfor (let i = id[0]; i <= id[1]; i++){\n\t\t\tif(size == \"auto\"){\n\t\t\t\tif(sheet){\n\t\t\t\t\t//TODO: adjust not active sheet\n\t\t\t\t}\n\t\t\t\telse\n\t\t\t\t\t(type == \"row\" ? adjustRow : adjustColumn)(i, view);\n\t\t\t}\n\t\t\telse{\n\t\t\t\tif(sheet){\n\t\t\t\t\tif(!sheet.content.sizes)\n\t\t\t\t\t\tsheet.content.sizes = [];\n\t\t\t\t\tconst oldSize = find(sheet.content.sizes, arr => type == \"row\" ? arr[0] == i : arr[1] == i);\n\t\t\t\t\tif(oldSize){\n\t\t\t\t\t\tif(size == oldSize[2])\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\toldSize[2] = size;\n\t\t\t\t\t}\n\t\t\t\t\telse {\n\t\t\t\t\t\tif (type == \"row\") {\n\t\t\t\t\t\t\tif (size == grid.config.columnWidth)\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (size == grid.config.rowHeight)\n\t\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t\tconst newSize = [0, 0, size];\n\t\t\t\t\t\tnewSize[type == \"row\" ? 0 : 1] = i;\n\t\t\t\t\t\tsheet.content.sizes.push(newSize);\n\t\t\t\t\t}\n\t\t\t\t\tview.callEvent(\"onAction\", [type+\"-resize\", { [type]: i, value: size, page } ]);\n\t\t\t\t}\n\t\t\t\telse{\n\t\t\t\t\tsize *= view._zoom;\n\t\t\t\t\tgrid[type == \"row\" ? \"setRowHeight\" : \"setColumnWidth\"](i, size);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n}","import * as lock from \"../operations/lock_cell\";\n\nexport function lockCell(row, column, state, page){\n\tlock.lockCell(this, row, column, state, false, page);\n}\n\nexport function isCellLocked(row, column, page){\n\treturn !!lock.isCellLocked(this, row, column, page);\n}","import group from \"../operations/undo_group\";\nimport {getSheet} from \"../sheets\";\n\nexport function freezeColumns(column, page){\n\tlet oldValue;\n\n\tgroup.set(()=>{\n\t\tif(page && page != this.getActiveSheet()){\n\t\t\tconst sheet = getSheet(this, page);\n\t\t\tif(sheet){\n\t\t\t\tif(!sheet.content.table)\n\t\t\t\t\tsheet.content.table = {};\n\t\t\t\toldValue = sheet.content.table.frozenColumns;\n\t\t\t\tsheet.content.table.frozenColumns = column;\n\t\t\t\tif(sheet.content.spans)\n\t\t\t\t\tcheckSpans(this, \"column\", column, sheet.content.spans);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(!page)\n\t\t\t\tpage = this.getActiveSheet();\n\t\t\tconst grid = this.$$(\"cells\");\n\n\t\t\tif( webix.isUndefined(column) ){\n\t\t\t\tconst sel = grid.getSelectArea();\n\t\t\t\tcolumn = sel ? sel.end.column : 0;\n\t\t\t}\n\n\t\t\tconst base = grid.config.columns[0].id == \"rowId\" ? 1 : 0;\n\t\t\tlet index = base;\n\t\t\tlet removeFreeze = false;\n\t\t\tif (column && column != this._frozenColumns){\n\t\t\t\tfor (let i = column; i > 0; i--) {\n\t\t\t\t\tindex = grid.getColumnIndex(i)+1;\n\t\t\t\t\tif(index)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tif (!index) index = base;\n\t\t\t}\n\t\t\telse removeFreeze = true;\n\n\t\t\tcheckSpans(this, \"column\", column);\n\t\t\tgrid.unselect();\n\t\t\tgrid.define(\"leftSplit\", index);\n\t\t\tgrid.refreshColumns();\n\t\t\toldValue = this._frozenColumns;\n\t\t\tthis._frozenColumns = (removeFreeze || !column) ? 0 : column;\n\t\t}\n\t\tthis.callEvent(\"onAction\", [ \"freeze-column\", { value: (oldValue || 0), newValue: column, page}]);\n\t});\n}\n\nexport function freezeRows(row, page){\n\tlet oldValue;\n\n\tgroup.set(()=>{\n\t\tif(page && page != this.getActiveSheet()){\n\t\t\tconst sheet = getSheet(this, page);\n\t\t\tif(sheet){\n\t\t\t\tif(!sheet.content.table)\n\t\t\t\t\tsheet.content.table = {};\n\t\t\t\toldValue = sheet.content.table.frozenRows;\n\t\t\t\tsheet.content.table.frozenRows = row;\n\t\t\t\tif(sheet.content.spans)\n\t\t\t\t\tcheckSpans(this, \"row\", row, sheet.content.spans);\n\t\t\t}\n\t\t}\n\t\telse{\n\t\t\tif(!page)\n\t\t\t\tpage = this.getActiveSheet();\n\t\t\tconst grid = this.$$(\"cells\");\n\n\t\t\tif( webix.isUndefined(row) ){\n\t\t\t\tconst sel = grid.getSelectArea();\n\t\t\t\trow = sel ? sel.end.row : 0;\n\t\t\t}\n\n\t\t\tlet index = 0;\n\t\t\tlet removeFreeze = false;\n\t\t\tif (row && row != this._frozenRows){\n\t\t\t\tfor (let i = row; i > 0; i--) {\n\t\t\t\t\tindex = grid.getIndexById(i)+1;\n\t\t\t\t\tif(index)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\telse removeFreeze = true;\n\n\t\t\tcheckSpans(this, \"row\", row);\n\t\t\tgrid.unselect();\n\t\t\tgrid.define(\"topSplit\", index);\n\t\t\tgrid.refreshColumns();\n\t\t\toldValue = this._frozenRows;\n\t\t\tthis._frozenRows = (removeFreeze || !row) ? 0 : row;\n\t\t}\n\t\tthis.callEvent(\"onAction\", [ \"freeze-row\", { value: (oldValue || 0), newValue: row, page}]);\n\t});\n}\n\nfunction checkSpans(view, type, num, spans){\n\tif(spans){\n\t\tfor (let i = spans.length - 1; i >= 0; i--) {\n\t\t\tconst span = spans[i];\n\n\t\t\tconst index1 = type == \"row\" ? 0 : 1;\n\t\t\tconst index2 = type == \"row\" ? 3 : 2;\n\n\t\t\tif(span[index1] <= num && span[index1] + span[index2] - 1 > num)\n\t\t\t\tspan[index2] = num - span[index1] + 1;\n\t\t\tif(span[0] - span[3] == 0 && span[1] - span[2] == 0)\n\t\t\t\tspans.splice(i, 1);\n\t\t}\n\t}\n\telse{\n\t\tconst grid = view.$$(\"cells\");\n\t\tconst spans = grid.getSpan();\n\t\tlet changed;\n\n\t\tfor(let row in spans){\n\t\t\tif(type == \"row\" && row > num)\n\t\t\t\tcontinue;\n\n\t\t\tfor (let col in spans[row]){\n\t\t\t\tif(type == \"column\" && col > num)\n\t\t\t\t\tcontinue;\n\n\t\t\t\tconst span = spans[row][col];\n\t\t\t\tconst spanSize = type == \"row\" ? (row*1) + span[1] - 1 : (col*1) + span[0] - 1;\n\n\t\t\t\tif(spanSize > num){\n\t\t\t\t\tchanged = true;\n\t\t\t\t\tchangeSpan(\n\t\t\t\t\t\tview,\n\t\t\t\t\t\t[row, col],\n\t\t\t\t\t\ttype == \"row\" ? span[0] : span[0] - (spanSize - num),\n\t\t\t\t\t\ttype == \"row\" ? span[1] - (spanSize - num) : span[1]\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif(changed)\n\t\t\tview.refresh();\n\t}\n}\n\nfunction changeSpan(view, span, x, y){\n\tview.splitCell(span[0], span[1], null, true);\n\tview.combineCells(\n\t\t{\n\t\t\tcell:{\n\t\t\t\trow:span[0],\n\t\t\t\tcolumn:span[1]\n\t\t\t},\n\t\t\tx,\n\t\t\ty,\n\t\t},\n\t\tnull,\n\t\ttrue\n\t);\n}","import * as gridlines from \"../operations/hide_gridlines\";\n\nexport function hideGridlines(state, page){\n\tgridlines.hideGridlines(this, state, page);\n}","import * as headers from \"../operations/hide_headers\";\n\nexport function hideHeaders(state, page){\n\theaders.hideHeaders(this, state, page);\n}","import * as hrows from \"../operations/hide_row_col\";\n\nexport function hideColumn(column, state, page){\n\throws.setState(this, column, state, \"column\", page);\n}\nexport function isColumnVisible(column, page){\n\treturn hrows.isColumnVisible(this, column, page);\n}\nexport function hideRow(row, state, page){\n\throws.setState(this, row, state, \"row\", page);\n}\nexport function isRowVisible(row, page){\n\treturn hrows.isRowVisible(this, row, page);\n}","import {image, chart} from \"../mathematics/writer\";\nimport {addMath, setRadioState} from \"../mathematics/methods\";\n\nexport function addImage(row, column, url, page){\n\tthis.setCellValue(row, column, image(url), page);\n\tif(!page || page == this.getActiveSheet())\n\t\tthis.refresh();\n}\n\nexport function addSparkline(row, column, config, page){\n\tlet value = chart(config);\n\tthis.setCellValue(row, column, value, page);\n\tif(!page || page == this.getActiveSheet())\n\t\tthis.refresh();\n}\n\n// getSheetData is deprecated, use ss.getCellValue(row, col, math, page), ss.getRangeValue(range, page) instead\nexport function getSheetData(name){\n\tif(this._mData.getPage(name))\n\t\treturn {\n\t\t\tgetValue: (r, c, math)=> this.getCellValue(r, c, math, name),\n\t\t\tgetRangeValue: (range)=> this.getRangeValue(range, name)\n\t\t};\n}\n\nexport function registerMathMethod(name, handler, category, generateHTML){\n\taddMath(this, name, handler, true, category, generateHTML);\n}\n\nexport function recalculate(){\n\tthis._mData.getStore().recalculate();\n\tthis.callEvent(\"onMathRefresh\",[]);\n\tthis.refresh();\n}\n\nexport function setPlaceholder(name, value){\n\tif(typeof name == \"object\"){\n\t\tvalue = name;\n\t\tname = \"*\";\n\t}\n\n\tthis._mData.getStore().setPlaceholder(name, value);\n\n\tthis.refresh();\n\tthis.callEvent(\"onMathRefresh\",[]);\n}\n\nexport function addCheckbox(range, page){\n\tif(!range)\n\t\trange = this.$$(\"cells\").getSelectArea();\n\tif(range){\n\t\tconst start = range.start;\n\t\tconst end = range.end;\n\t\tthis.groupUndo(()=>{\n\t\t\tfor(let r = start.row; r <= end.row; r++)\n\t\t\t\tfor(let c = start.column; c <= end.column; c++)\n\t\t\t\t\tthis.setCellValue(r, c, \"=checkbox()\", page);\n\t\t});\n\t\tthis.refresh();\n\t}\n}\n\nexport function markCheckbox(row, column, state, page){\n\tif(/^=(checkbox)\\(/i.test(this.getCellValue(row, column, true, page))){\n\t\tthis.setCellValue(row, column, `=checkbox(${state === false ? 0 : 1})`);\n\t\tthis.refresh();\n\t}\n}\n\nexport function addRadio(range, page){\n\tif(!range)\n\t\trange = this.$$(\"cells\").getSelectArea();\n\tif(range){\n\t\tconst start = range.start;\n\t\tconst end = range.end;\n\t\tthis.groupUndo(()=>{\n\t\t\tfor(let r = start.row; r <= end.row; r++)\n\t\t\t\tfor(let c = start.column; c <= end.column; c++)\n\t\t\t\t\tthis.setCellValue(r, c, `=radio(${r - start.row + 1}, ${c - start.column + 1}, ${end.row - start.row + 1}, ${end.column - start.column + 1})`, page);\n\t\t});\n\t\tthis.refresh();\n\t}\n}\n\nexport function markRadio(row, column, state, page){\n\tsetRadioState(this, row, column, state, page);\n}","import * as sheets from \"../sheets\";\nimport * as spn from \"../operations/spans\";\nimport * as und from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\nimport * as stl from \"../operations/styles\";\nimport * as srt from \"../operations/sorting\";\nimport {removeCommentsRange} from \"../operations/comments\";\nimport {clearConditionalFormats} from \"../operations/conditional_formats\";\nimport {clearEditors} from \"../operations/dropdown\";\nimport {clearFilters} from \"../operations/filter\";\nimport {showCells} from \"../operations/show_cells\";\n\n//spans\nexport function combineCells(range, page, silent){\n\tconst isActivePage = !page || page == this.getActiveSheet();\n\tif(!range){\n\t\tif(!isActivePage)\n\t\t\treturn;\n\t\tconst sel = this.getSelectedId(true);\n\t\tif (sel.length>1){\n\t\t\trange = spn.getRange(sel);\n\t\t}\n\t}\n\n\tgroup.set(()=> {\n\t\tif (range)\n\t\t\tspn.addSpan(this, range.cell, range.x, range.y, null, page);\n\t});\n\n\tif(!silent && isActivePage)\n\t\tthis.refresh();\n}\n\nexport function splitCell(row, column, page, silent){\n\tconst isActivePage = !page || page == this.getActiveSheet();\n\n\tif (row && column) {\n\t\tspn.removeSpan(this, {row, column}, page);\n\t}\n\telse if(isActivePage){\n\t\tgroup.set(function(){\n\t\t\tthis.eachSelectedCell(function(cell){\n\t\t\t\tspn.removeSpan(this, cell);\n\t\t\t});\n\t\t},this);\n\t}\n\n\tif(!silent && isActivePage)\n\t\tthis.refresh();\n}\n\n//styles\nexport function addStyle(prop, origin, page){\n\treturn stl.addStyle(this, prop, origin, page);\n}\n\nexport function getStyle(row, column, page){\n\treturn stl.getStyle(this, {row:row, column:column}, page);\n}\n\nexport function setStyle(row, column, style, page){\n\treturn stl.setStyle(this, {row: row, column: column}, style, page);\n}\n\nexport function setRangeStyle(rangeStr, style, page){\n\tgroup.set(function() {\n\t\tstl.setRangeStyle(this, rangeStr, style, page);\n\t},this);\n}\n\nexport function clearRange(rangeStr, type, page) {\n\tif (!rangeStr){\n\t\tif(!page || page == this.getActiveSheet())\n\t\t\trangeStr = this._table.getSelectArea();\n\t\tif (!rangeStr) return;\n\t}\n\n\tif (!type) type = {styles: true, values: true, editors:true, filters:true, conditions:true, comments:true };\n\t\n\tif (type.styles)\n\t\tstl.clearRangeStyle(this, rangeStr, page);\n\n\tif (type.conditions)\n\t\tclearConditionalFormats(this, rangeStr, page);\n\t\n\tif (type.values)\n\t\tthis.setRangeValue(rangeStr, null, page);\n\n\tif (type.editors)\n\t\tclearEditors(this, rangeStr, page);\n\n\tif(type.filters)\n\t\tclearFilters(this, rangeStr, page);\n\n\tif (type.comments)\n\t\tremoveCommentsRange(this, rangeStr, page);\n\n\tthis.refresh();\n}\n\nexport function compactStyles(){\n\treturn stl.compactStyles(this);\n}\n\n//serialize\nexport function serialize(config){\n\tconst obj = {};\n\tthis.callEvent(\"onDataSerialize\",[obj, config]);\n\n\tif(config){\n\t\tif(config.compactStyles)\n\t\t\tobj.styles = stl.removeUnusedStyles(obj);\n\t\tif(config.sheets)\n\t\t\treturn sheets.serialize(this, obj, config);\n\t}\n\n\treturn obj;\n}\n\n//sheets\nexport function showSheet(name){\n\tsheets.show(this,name);\n}\nexport function setSheetState(name,state){\n\tsheets.setState(this,name,state);\n}\nexport function getSheetState(name){\n\treturn sheets.getSheet(this,name).state || \"visible\";\n}\nexport function getActiveSheet(){\n\treturn this._activeSheet;\n}\nexport function addSheet(content, name, show){\n\treturn sheets.add(this, content, name, show);\n}\nexport function clearSheet(){\n\tthis.reset();\n}\nexport function renameSheet(name,newName){\n\tsheets.rename(this,name,newName);\n}\nexport function editSheet(name){\n\tsheets.edit(this,name);\n}\nexport function removeSheet(name){\n\tsheets.remove(this,name);\n}\n\n//undo\nexport function undo(){\n\tund.undo(this);\n}\nexport function redo(){\n\tund.redo(this);\n}\n\n//sort\nexport function sortRange(range, dir){\n\tsrt.sortRange(this, range, dir);\n}\n\n//cells\nexport function showCell(ref, silent){\n\tshowCells(this, ref, silent);\n}","import {toRange,rangeObj,range as getRange} from \"../helpers/column_names\";\nimport * as tbl from \"../table\";\nimport group from \"../operations/undo_group\";\nimport {newSheet, prepareCell, getSheet} from \"../sheets\";\nimport {getType, loadCell, handleChange} from \"../operations/types\";\nimport {getExcelDateFromJs} from \"../mathematics/methods\";\nimport {checkFormat, getFormatFromData} from \"../operations/formats\";\nimport * as arr from \"../helpers/array\";\nimport {fillEditor} from \"../editor\";\nimport {isInvalid} from \"../operations/validation\";\n\nexport function refresh(all){\n\tif (all)\n\t\tthis._table.refreshColumns();\n\telse\n\t\tthis._table.refresh();\n}\nexport function eachSelectedCell(cb){\n\tvar cells = this.getSelectedId(true);\n\tfor (var i=0; i<cells.length; i++)\n\t\tcb.call(this, cells[i]);\n}\nexport function getSelectedRange(sheet){\n\tvar area = this._table.getSelectArea();\n\tif (area){\n\t\tif (sheet)\n\t\t\tsheet = this.getActiveSheet();\n\t\treturn toRange(area.start.row,area.start.column,area.end.row,area.end.column,sheet);\n\t}\n\treturn \"\";\n}\nexport function getSelectedId(all){\n\tvar area = this._table.getSelectArea();\n\tif(!all)\n\t\treturn area && area.start.row ? area.start : null;\n\n\tvar selection = [];\n\tif(area){\n\t\tvar c0 = area.start;\n\t\tvar c1 = area.end;\n\n\t\tfor(var i = c0.row; i<= c1.row; i++){\n\t\t\tfor(var j = c0.column; j <= c1.column; j++){\n\t\t\t\tselection.push({row: i,column:j});\n\t\t\t}\n\t\t}\n\t}\n\n\treturn selection;\n\t//return this._table.getSelectedId(all)\n}\nexport function getCellValue(row, column, math, page){\n\tpage = page ? this._mData.getPage(page) : this._mPage;\n\n\tif(!page)\n\t\treturn;\n\n\tconst value = page.getValue(row-1, column-1, math !== false);\n\n\treturn correctVal(value);\n}\nexport function setCellValue(row, column, value, page){\n\tif(!page)\n\t\tpage = this.getActiveSheet();\n\n\tconst muonPage = this._mData.getPage(page);\n\tif(!muonPage)\n\t\treturn;\n\n\tvalue = correctVal(value);\n\tconst old = this.getCellValue(row, column, true, page);\n\tconst oldType = getType(this, row, column, page);\n\tlet oldStyle, oldEditor;\n\n\tif(!this._type_change && page != this.getActiveSheet()){\n\t\toldStyle = this.getStyle(row, column, page);\n\t\toldEditor = this.getCellEditor(row, column, page);\n\t}\n\n\tlet sameValue;\n\tif(oldType == \"date\"){\n\t\tconst parser = webix.Date.strToDate( webix.i18n.spreadsheet.formats.parseDateTime );\n\t\tlet dateValue;\n\t\tif(isNaN(value)){\n\t\t\tconst jsDate = parser(value);\n\t\t\tif(jsDate === \"\")\n\t\t\t\tdateValue = value;\n\t\t\telse\n\t\t\t\tdateValue = getExcelDateFromJs(jsDate);\n\t\t}\n\t\telse\n\t\t\tdateValue = value;\n\t\tsameValue = old == dateValue;\n\t}\n\telse if(oldType != \"string\" && value !== \"\" && !isNaN(value) && old == value && value !== 0){\n\t\tsameValue = true;\n\t\tvalue = value*1;\n\t}\n\n\tif (!sameValue && old !== value){\n\t\tgroup.set(()=>{\n\t\t\tif (this.callEvent(\"onBeforeValueChange\",[row, column, value, old, page])){\n\t\t\t\tif(page != this.getActiveSheet()){\n\t\t\t\t\tconst sheet = getSheet(this, page).content;\n\t\t\t\t\tlet cell = arr.find(sheet.data, cell => cell[0] == row && cell[1] == column);\n\n\t\t\t\t\tif(!cell){\n\t\t\t\t\t\tcell = [row, column];\n\t\t\t\t\t\tsheet.data.push(cell);\n\t\t\t\t\t}\n\t\t\t\t\tcell[2] = value;\n\n\t\t\t\t\tthis._page_value_set = true;\n\t\t\t\t\tcell[4] = null;\n\t\t\t\t\tconst item = loadCell(this, sheet, cell);\n\t\t\t\t\tdelete this._page_value_set;\n\n\t\t\t\t\tconst muonItem = muonPage.getCell(row-1, column-1, true);\n\t\t\t\t\tmuonItem.$format = checkFormat(this, { fmt: getFormatFromData(this, sheet, cell) }, \"string\") ? 1 : 0;\n\t\t\t\t\tmuonPage.setValue(row-1, column-1, item.value);\n\n\t\t\t\t\tcell[2] = item.value;\n\t\t\t\t\tcell[4] = muonItem.type = item.type;\n\n\t\t\t\t\tthis._type_change = true;\n\t\t\t\t\t//prepareCell can change style (1/1/2001 --loadCell--> 36892 + date type --prepareCell--> date format)\n\t\t\t\t\tprepareCell(cell, sheet, true);\n\t\t\t\t\tmuonItem.style = cell[3];\n\t\t\t\t\tdelete this._type_change;\n\n\t\t\t\t\tif(!this._validation_restore && !this._type_change && isInvalid(this, row, column, null, page)){\n\t\t\t\t\t\tconst validation = this.validation.get(row, column, page);\n\t\t\t\t\t\tconst oldData = { value: old, style: oldStyle, editor: oldEditor };\n\n\t\t\t\t\t\tshowValidationError(this, validation)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tif(validation.errorHandle == \"stop\")\n\t\t\t\t\t\t\t\t\trestoreValue(this, row, column, oldData, page);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value, page]);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(()=>{\n\t\t\t\t\t\t\t\trestoreValue(this, row, column, oldData, page);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value, page]);\n\t\t\t\t}\n\t\t\t\telse {\n\t\t\t\t\tconst sel = this.getSelectedId();\n\t\t\t\t\tfillEditor(this, sel, true);\n\n\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t\tif(!this._type_change){\n\t\t\t\t\t\tthis._type_change = true;\n\t\t\t\t\t\thandleChange(this, row, column, value);\n\t\t\t\t\t\tdelete this._type_change;\n\t\t\t\t\t}\n\n\t\t\t\t\tconst updatedType = getType(this, row, column);\n\n\t\t\t\t\t//recalculate if we refer to a cell, where type is string and value is something like 005 or 5e5\n\t\t\t\t\tif(oldType != updatedType && updatedType == \"string\" && value[0] == \"=\" && value.length > 1)\n\t\t\t\t\t\tthis._mPage.setValue(row-1, column-1, value);\n\n\t\t\t\t\tfillEditor(this, sel);\n\n\t\t\t\t\tif(/^=hyperlink\\(/i.test(value)){\n\t\t\t\t\t\tconst baseStyle = this.getStyle(row, column);\n\t\t\t\t\t\tconst urlStyle = this.addStyle({ color: \"#0000ff\", underline: \"underline\" }, baseStyle);\n\t\t\t\t\t\tthis.setStyle(row, column, urlStyle);\n\t\t\t\t\t}\n\n\t\t\t\t\tif(!this._validation_restore && !this._type_change && isInvalid(this, row, column, tbl.getRenderedValue(this, row, column))){\n\t\t\t\t\t\tconst validation = this.validation.get(row, column);\n\t\t\t\t\t\tshowValidationError(this, validation)\n\t\t\t\t\t\t\t.then(()=>{\n\t\t\t\t\t\t\t\tif(validation.errorHandle == \"stop\")\n\t\t\t\t\t\t\t\t\trestoreValue(this);\n\t\t\t\t\t\t\t\telse\n\t\t\t\t\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value, page]);\n\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t.fail(()=>{\n\t\t\t\t\t\t\t\trestoreValue(this);\n\t\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t\telse if(!this._type_change)\n\t\t\t\t\t\tthis.callEvent(\"onCellChange\", [row, column, value, page]);\n\t\t\t\t}\n\n\t\t\t\tif(!this._type_change)\n\t\t\t\t\tthis.saveCell(row, column, page);\n\t\t\t}\n\t\t});\n\t}\n}\n\nfunction restoreValue(view, row, column, data, page){\n\tview._validation_restore = true;\n\tif(page){\n\t\tview.setStyle(row, column, data.style, page);\n\t\tview.setCellEditor(row, column, data.editor, page);\n\t\tview.setCellValue(row, column, data.value, page);\n\t}\n\telse{\n\t\tview.undo();\n\t\tview._ssUndoHistory.splice(view._ssUndoCursor+1);\n\t}\n\tdelete view._validation_restore;\n}\n\nfunction showValidationError(view, validation){\n\tconst errorHandle = validation.errorHandle || \"information\";\n\n\tconst type = errorHandle == \"stop\" ? \"alert-error\" : (errorHandle == \"warning\" ? \"confirm-\" : \"alert-\") + errorHandle;\n\tconst locale = webix.i18n.spreadsheet.labels;\n\treturn view[errorHandle == \"warning\" ? \"confirm\" : \"alert\"]({\n\t\ttype,\n\t\tok: locale[\"validation-error-\" + (errorHandle == \"stop\" ? \"restore\" : \"save\")],\n\t\tcancel: locale[\"validation-error-restore\"],\n\t\ttitle: validation.errorTitle || locale[\"validation-error-title-text\"],\n\t\ttext: validation.errorMessage || locale[\"validation-error-message-text\"]\n\t});\n}\n\nfunction correctVal(val){\n\tif(typeof val === \"boolean\")\n\t\tval *= 1;\n\treturn val || val === 0 ? val : \"\";\n}\n\nexport function setRangeValue(range, value, page){\n\tgroup.set(function(){\n\t\tconst pos = rangeObj(range, this);\n\t\tlet i = 0;\n\t\tfor (let row = pos.start.row; row <= pos.end.row; row++) {\n\t\t\tfor (let column = pos.start.column; column <=  pos.end.column; column++, i++) {\n\t\t\t\tthis.setCellValue(row, column, webix.isArray(value) ? value[i] : value, page);\n\t\t\t}\n\t\t}\n\t},this);\n}\n\nexport function getRangeValue(range, page){\n\tif(!page)\n\t\tpage = this.getActiveSheet();\n\n\tconst pos = getRange(range, this, page);\n\tconst muonPage = this._mData.getPage(pos[4]);\n\n\tif (!pos || !muonPage) return [];\n\n\treturn muonPage.getRange(pos[0]-1, pos[1]-1, pos[2]-1, pos[3]-1).map(correctVal);\n}\n\nexport function getRow(id, page){\n\tlet row, colCount;\n\n\tconst isActiveSheet = !page || page == this.getActiveSheet();\n\tif(isActiveSheet){\n\t\trow = webix.copy(this._table.getItem(id));\n\t\tcolCount = this.config.columnCount;\n\t}\n\telse{\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet){\n\t\t\tlet height;\n\t\t\tif(sheet.content.sizes)\n\t\t\t\theight = arr.find(sheet.content.sizes, size => size[0] == id);\n\t\t\theight = height ? height[2] : this.$$(\"cells\").config.rowHeight;\n\t\t\trow = {id, $height: height};\n\t\t\tcolCount = arr.getDimension(sheet.content.data, sheet.content.spans, 1, 1, sheet.content.filters)[1];\n\t\t}\n\t\telse return;\n\t}\n\n\tfor(let i = 1; i <= colCount; i++){\n\t\tconst cell = (isActiveSheet ? this._mPage : this._mData.getPage(page)).getCell(id-1, i-1);\n\n\t\tif(cell){\n\t\t\trow[i] = cell.value;\n\n\t\t\t[[\"style\", \"$cellCss\"], [\"type\", \"$cellType\"], [\"format\", \"$cellFormat\"]].forEach(param => {\n\t\t\t\tconst val = cell[param[0]];\n\t\t\t\tif(val){\n\t\t\t\t\tif(!row[param[1]])\n\t\t\t\t\t\trow[param[1]] = {};\n\t\t\t\t\trow[param[1]][i] = val;\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tconst math =  this.getCellValue(id, i, true, page);\n\t\t\tif(math && math[0] == \"=\")\n\t\t\t\trow[\"$\"+i] = math;\n\t\t}\n\t}\n\n\treturn row;\n}\nexport function getColumn(id, page){\n\tif(!page || page == this.getActiveSheet())\n\t\treturn this._table.getColumnConfig(id);\n\n\tconst sheet = getSheet(this, page);\n\tif(sheet){\n\t\tlet width;\n\t\tif(sheet.content.sizes)\n\t\t\twidth = arr.find(sheet.content.sizes, size => size[1] == id);\n\t\twidth = width ? width[2] : this.$$(\"cells\").config.columnWidth;\n\t\treturn {id, width};\n\t}\n}\nexport function reset(mode){\n\tvar obj = { data:[] };\n\tif (mode && mode.sheets){\n\t\tobj = newSheet(obj);\n\t}\n\t\n\tthis.parse(obj);\n}\n\nexport function _resetTable(){\n\ttbl.reset(this);\n}\n\nexport function refToPos(text){\n\treturn getRange(text);\n}\n\nexport function posToRef(r1, c1, r2, c2, page){\n\treturn toRange(r1, c1, r2, c2, page);\n}\n\nexport function getCellType(row, column, page) {\n\treturn getType(this, row, column, page);\n}","import {save} from \"../operations/save\";\n\nexport function saveCell(row, column, page){\n\tconst cell = (page ? this._mData.getPage(page) : this._mPage).getCell(row-1, column-1);\n\n\tsave(this, \"data\", {\n\t\trow,\n\t\tcolumn,\n\t\tvalue: this.getCellValue(row, column, null, page),\n\t\tpage: page || this.getActiveSheet(),\n\t\tstyle: (cell ? cell.style : \"\") || \"\"\n\t});\n}","import {getSheet} from \"../sheets\";\nimport {find, findIndex} from \"../helpers/array\";\n\nexport function setCellEditor(row, column, editor, page) {\n\tpage = page || this.getActiveSheet();\n\tlet value;\n\n\tif(page == this.getActiveSheet()){\n\t\tconst line = this._table._ssEditors[row] = this._table._ssEditors[row] || {};\n\t\tvalue = line[column] || null;\n\t\tline[column] = editor;\n\n\t\tif (editor && editor.editor){\n\t\t\tthis._table.addCellCss(row,column, \"ss_editor\");\n\t\t} else {\n\t\t\tdelete this._table._ssEditors[row][column];\n\t\t\tthis._table.removeCellCss(row,column, \"ss_editor\");\n\t\t}\n\t}\n\telse{\n\t\tconst sheet = getSheet(this, page);\n\t\tif(!sheet) return;\n\n\t\tif(!sheet.content.editors)\n\t\t\tsheet.content.editors = [];\n\n\t\tconst index = findIndex(sheet.content.editors, editor => editor[0] == row && editor[1] == column);\n\t\tif(index != -1){\n\t\t\tvalue = sheet.content.editors[index][2];\n\t\t\tsheet.content.editors.splice(index, 1);\n\t\t}\n\t\telse if(!editor) return;\n\n\t\tif(editor)\n\t\t\tsheet.content.editors.push([row, column, editor]);\n\t}\n\n\tthis.callEvent(\"onAction\", [\"dropdown\", { row, column, value, newValue:editor, page }]);\n}\n\nexport function getCellEditor(row, column, page){\n\tif(page && page != this.getActiveSheet()){\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet && sheet.content.editors){\n\t\t\tconst editor = find(sheet.content.editors, editor => editor[0] == row && editor[1] == column);\n\t\t\treturn editor ? editor[2] : null;\n\t\t}\n\t}\n\telse {\n\t\tlet line = this._table._ssEditors[row] || {};\n\t\treturn line[column] || null;\n\t}\n}","import * as flt from \"../operations/filter\";\nimport {find, findIndex} from \"../helpers/array\";\nimport {getSheet} from \"../sheets\";\n\nexport function setCellFilter(row, column, filter, page){\n\tpage = page || this.getActiveSheet();\n\n\tlet sheet;\n\tif(page != this.getActiveSheet()){\n\t\tsheet = getSheet(this, page);\n\t\tif(!sheet) return;\n\t}\n\n\tfilter = prepareFilter(this, row, column, filter, sheet);\n\tlet value;\n\n\tif(sheet){\n\t\tif(!sheet.content.filters)\n\t\t\tsheet.content.filters = [];\n\n\t\tconst index = findIndex(sheet.content.filters, arr => arr[0] == row && arr[1] == column);\n\t\tif(index != -1){\n\t\t\tvalue = sheet.content.filters[index][2];\n\t\t\tsheet.content.filters.splice(index, 1);\n\t\t}\n\t\telse if(!filter) return;\n\n\t\tif(filter)\n\t\t\tsheet.content.filters.push([row, column, filter]);\n\t}\n\telse{\n\t\tconst line = this._table._ssFilters[row] = this._table._ssFilters[row] || {};\n\t\tvalue = line[column] || null;\n\t\tline[column] = filter;\n\n\t\tif (filter && typeof filter == \"object\"){\n\t\t\tthis._table.addCellCss(row, column, \"ss_filter\");\n\t\t\tif (filter.value && flt.isValueActive(filter.value))\n\t\t\t\tthis._table.addCellCss(row, column, \"ss_filter_active\");\n\n\t\t\twebix.extend(filter, {row, column}, true);\n\n\t\t\tif (!filter.handler && filter.value && filter.value.condition){\n\t\t\t\tconst mode = filter.mode || flt.getFilterMode(this, row, column);\n\t\t\t\tfilter.handler = flt.getFilterFunction(mode, filter.value);\n\t\t\t}\n\t\t} else {\n\t\t\tdelete this._table._ssFilters[row][column];\n\t\t\tthis._table.removeCellCss(row,column, \"ss_filter\");\n\t\t\tthis._table.removeCellCss(row,column, \"ss_filter_active\");\n\t\t}\n\t}\n\tthis.callEvent(\"onAction\", [\"filter\", { row, column, value, newValue:filter, page }]);\n}\n\nfunction prepareFilter(view, row, column, filter, sheet){\n\tif(filter){\n\t\tif (webix.isArray(filter) || typeof filter == \"string\")\n\t\t\tfilter = {options: filter};\n\t\tfilter.options = flt.calibrateRange(view, row, column, filter.options, null, sheet);\n\t}\n\treturn filter;\n}\n\nexport function getCellFilter(row, column, page){\n\tif(page && page != this.getActiveSheet()){\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet && sheet.content.filters)\n\t\t\treturn find(sheet.content.filters, arr => arr[0] == row && arr[1] == column) || null;\n\t}\n\telse{\n\t\tlet line = this._table._ssFilters[row] || {};\n\t\treturn line[column];\n\t}\n\treturn null;\n}\n\nexport function removeFilters(page){\n\tif(page && page != this.getActiveSheet()){\n\t\tconst sheet = getSheet(this, page);\n\t\tif(sheet && sheet.content.filters){\n\t\t\tfor(let i = 0; i < sheet.content.filters.length; i++){\n\t\t\t\tconst filter = sheet.content.filters[i];\n\t\t\t\tthis.callEvent(\"onAction\", [\"filter\", { row: filter[0], column: filter[1], value: filter[2], newValue: null, page:page||this.getActiveSheet() }]);\n\t\t\t}\n\t\t\tsheet.content.filters = [];\n\t\t}\n\t}\n\telse{\n\t\tconst filters = flt.getFilters(this._table);\n\n\t\tfor\t(let i=0; i<filters.length; i++){\n\t\t\tconst {row, column} = filters[i];\n\t\t\tthis.setCellFilter(row, column, null);\n\t\t}\n\n\t\tthis._table._ssFilters = {};\n\t\tthis._table.data.filter((obj) => {\n\t\t\treturn this.isRowVisible(obj.id);\n\t\t});\n\t}\n}\n\n\nexport function filterSpreadSheet(){\n\tconst grid = this._table;\n\tgrid.data.silent(()=>{\n\t\t// hidden rows\n\t\tgrid.data.filter(obj => this.isRowVisible(obj.id));\n\n\t\tconst filters = flt.getFilters(grid);\n\t\tfor (let i = 0; i < filters.length; i++){\n\t\t\tconst {row, column, handler, lastRow} = filters[i];\n\n\t\t\tlet finished = false;\n\t\t\tgrid.data.filter(obj => {\n\t\t\t\tlet r = obj.id;\n\t\t\t\tif(r <= row || typeof handler != \"function\")\n\t\t\t\t\treturn true;\n\n\t\t\t\tconst span = grid.getSpan(r, column);\n\t\t\t\tif(span){\n\t\t\t\t\tif(span[0] == row && span[1] == column)\n\t\t\t\t\t\treturn true;\n\t\t\t\t\telse\n\t\t\t\t\t\tr = span[0];\n\t\t\t\t}\n\n\t\t\t\tconst value = String(this.getCellValue(r, column, false));\n\n\t\t\t\tif(lastRow){\n\t\t\t\t\tif(r > lastRow)\n\t\t\t\t\t\treturn true;\n\t\t\t\t}\n\t\t\t\telse if(finished || !value)\n\t\t\t\t\treturn finished = true;\n\n\t\t\t\treturn handler(value);\n\t\t\t}, 1, true);\n\t\t}\n\t});\n\n\tgrid.callEvent(\"onAfterFilter\", []);\n\tgrid.refresh();\n}\n","export function confirm(config){\n\treturn webix.confirm(\n\t\twebix.extend(\n\t\t\t{\n\t\t\t\tcontainer: this.$view,\n\t\t\t\tcss:\"webix_ssheet_confirm\",\n\t\t\t\tok: webix.i18n.spreadsheet.labels.ok,\n\t\t\t\tcancel: webix.i18n.spreadsheet.labels.cancel\n\t\t\t},\n\t\t\tconfig,\n\t\t\ttrue\n\t\t)\n\t);\n}\n\nexport function alert(config){\n\treturn webix.alert(\n\t\twebix.extend(\n\t\t\t{\n\t\t\t\tcontainer: this.$view,\n\t\t\t\tcss: \"webix_ssheet_alert\",\n\t\t\t\tok: webix.i18n.spreadsheet.labels.ok\n\t\t\t},\n\t\t\tconfig,\n\t\t\ttrue\n\t\t)\n\t);\n}","import * as undo from \"../operations/undo\";\nimport group from \"../operations/undo_group\";\n\nexport function resetUndo(){\n\tundo.reset(this);\n}\n\nexport function groupUndo(func){\n\tgroup.set(func, this);\n}\n\nexport function ignoreUndo(func){\n\tundo.ignoreUndo(func, this);\n}","import * as fmt from \"../operations/formats\";\n\nexport function setFormat(row, column, format, page){\n\treturn fmt.addFormat(this, row, column, format, null, page);\n}\n\nexport function setFormatName(row, column, name, page){\n\tfmt.setFormat(this, row, column, name, page);\n}\n\nexport function getFormat(row, column, page){\n\tconst name = fmt.getFormatName(this, row, column, page);\n\treturn name ? { name, format: fmt.getFormatSource(this, name) } : null;\n}\n\nexport function addFormat(format){\n\treturn fmt.createFormat(this, format);\n}\n\nexport function removeFormat(row, column, page) {\n\tfmt.removeFormat(this, row, column, page);\n}\n\nexport function changeDecimals(row, column, inc, page){\n\t//row and column may be obj\n\tfmt.changeAreaDecimals(this, inc, row, column, page);\n}","import * as formulas from \"../operations/show_formulas\";\n\nexport function showFormulas(state, page){\n\tformulas.showFormulas(this, state, page);\n}","import {showBorders} from \"../operations/print\";\n\nexport function showPrintBorders(value){\n\tconst old = !!this._printBorders.$render;\n\n\tif(value == \"toggle\")\n\t\tvalue = !old;\n\n\tif(value != old){\n\t\tif(value)\n\t\t\tshowBorders(this);\n\t\telse{\n\t\t\tdelete this._printBorders.$render;\n\t\t\tthis.refresh();\n\t\t}\n\n\t\tthis.callEvent(\"onCommand\", [{id:\"toolbar-update\", name:\"print-borders\", value}]);\n\t\tthis.callEvent(\"onAction\", [\"print-borders\", {newValue: value, value: old}]);\n\t}\n}","import {zoom as zoomView} from \"../operations/zoom\";\n\nexport function zoom(value, page){\n\tzoomView(this, value, false, page);\n}","import { actions } from \"./actions\";\nimport { commonStructure, readonlyStructure } from \"./structure\";\nimport { getMenuLabel, normalizeAction } from \"./helpers\";\n\nconst defaultMenu = webix.copy(commonStructure);\nconst readonlyMenu = webix.copy(readonlyStructure);\n\nfunction getActionFromParent(parentId) {\n\tif (parentId == \"format-row\" || parentId == \"format-column\") parentId = \"format\";\n\tconst actions = {\n\t\t\"font-family\": true,\n\t\t\"font-size\": true,\n\t\t\"borders\": true,\n\t\t\"format\": true,\n\t\t\"text-align\": true,\n\t\t\"vertical-align\": true,\n\t};\n\treturn actions[parentId] ? parentId : null;\n}\n\nfunction getActionFromId(id){\n\tconst actions = {\n\t\t\"font-weight\": true,\n\t\t\"font-style\": true,\n\t\t\"underline\": true,\n\t\t\"strike\": true,\n\t\t\"wrap\": true,\n\t};\n\treturn actions[id] || false;\n}\n\nconst ui = {\n\tgetMenuData: function(menu, config, action){\n\t\tmenu = menu.filter(o => o.menu !== false);\n\t\t\n\t\tfor (let i = 0; i < menu.length; i++){\n\t\t\tif (typeof menu[i] == \"string\")\n\t\t\t\tmenu[i] = { id: menu[i] };\n\t\t\tif ((menu[i].id == \"resize-column\" || menu[i].id == \"resize-row\") && !config.resizeCell) {\n\t\t\t\tmenu.splice(i,1);\n\t\t\t\ti--;\n\t\t\t\tcontinue;\n\t\t\t}\n\t\t\tif (action) menu[i].action = action;\n\t\t\tif (!menu[i].value){\n\t\t\t\tif (!isNaN(parseInt(menu[i].id))) {\n\t\t\t\t\tmenu[i].value = menu[i].id; // \"font-size\"\n\t\t\t\t} else {\n\t\t\t\t\tmenu[i].value = getMenuLabel(menu[i].id, menu[i].action);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (menu[i].submenu) {\n\t\t\t\tconst parentId = menu[i].id;\n\t\t\t\tconst parentAction = getActionFromParent(parentId);\n\t\t\t\tmenu[i].submenu = {\n\t\t\t\t\tdata: this.getMenuData(menu[i].submenu, config, parentAction),\n\t\t\t\t};\n\t\t\t}\n\t\t}\n\n\t\treturn menu.sort((a, b) => a.menuOrder - b.menuOrder);\n\t}\n};\n\nexport function init(view){\n\tview.attachEvent(\"onComponentInit\", () => ready(view));\n\n\tconst config = view.config;\n\tconst menu = {\n\t\tview: \"menu\",\n\t\tborderless: true,\n\t\tcss: \"webix_ssheet_menu\",\n\t\tid: \"menu\",\n\t\tautowidth: true,\n\t\ttype:{\n\t\t\theight: 40\n\t\t},\n\t\tdata: ui.getMenuData(\n\t\t\twebix.isArray(config.menu) ? config.menu : webix.copy(config.readonly ? readonlyMenu : defaultMenu),\n\t\t\tconfig\n\t\t)\n\t};\n\n\tview.callEvent(\"onViewInit\", [\"menu\", menu]);\n\treturn menu;\n}\n\n\nfunction ready(view){\n\tif (view.$$(\"menu\"))\n\t\tview.$$(\"menu\").attachEvent(\"onMenuItemClick\",(id) => callAction(view,id));\n}\nfunction callAction(view,id){\n\tif (view.callEvent(\"onMenuItemClick\", [id])) {\n\t\tif (actions[id]) {\n\t\t\tactions[id](view);\n\t\t} else {\n\t\t\tconst topMenu = view.$$(\"menu\");\n\t\t\tconst option = topMenu.getMenuItem(id);\n\t\t\tlet action = option.action;\n\t\t\t\n\t\t\tif (!action && getActionFromId(id)) {\n\t\t\t\taction = id;\n\t\t\t\tid = undefined;\n\t\t\t}\n\n\t\t\tif (action == \"format\" && id == \"common\")\n\t\t\t\tid = \"\";\n\n\t\t\tif (action && !(action == \"format\" && id == \"custom\")) {\n\t\t\t\tview.callEvent(\"onStyleSet\", [action, id]);\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t\n\t\t\tif (!option.submenu) {\n\t\t\t\tconst actionParams = { id, value: option.value, group: option.group };\n\t\t\t\tnormalizeAction(actionParams);\n\t\t\t\tview.callEvent(\"onCommand\", [actionParams]);\n\t\t\t}\n\t\t}\n\t}\n}\n","//global definitions\nimport \"./locale\";\nimport \"./views/index\";\n\n//special content for non-production builds\nimport \"./init\";\n\nimport \"./editors/index\";\n\n//modules\nimport * as bar from \"./toolbar\";\nimport * as tbl from \"./table\";\nimport * as key from \"./hotkeys\";\nimport * as editor from \"./editor\";\nimport * as sheets from \"./sheets\";\nimport * as dialogs from \"./dialogs/index\";\nimport * as context from \"./context\";\nimport * as chart from \"./chart\";\n\nimport {setDefaultFormats} from \"./operations/formats\";\nimport {operations} from \"./operations/index\";\nimport {api} from \"./api/index\";\n\n//styling\nimport * as menu from \"./toolbar/menu\";\nimport {getDefaultStyles} from \"./helpers/conditional\";\nimport {setSkinDefaults} from \"./toolbar/defaults\";\n\nimport {addMathMethods} from \"./mathematics/methods\";\n\nvar component = {\n\tname:\"spreadsheet\",\n\t_base_index:{ count:1 },\n\tdefaults:{\n\t\tspans: true,\n\t\tliveEditor: true,\n\t\trowCount:50,\n\t\tmath:true,\n\t\tcolumnCount:20,\n\t\tresizeCell: true,\n\t\tsheetTabWidth: 90,\n\t\tconditionStyle: getDefaultStyles()\n\t},\n\t$init:function(){\n\t\tthis.$index = (this._base_index.count++);\n\t\tthis.$view.className += \" webix_ssheet\";\n\n\t\tthis.$ready.unshift(this._sub_init);\n\t\tthis.$ready.unshift(()=>setDefaultFormats(this));\n\t\tthis.$ready.push(this._set_handlers);\n\n\t\tthis._destroy_with_me = [];\n\t\tthis.attachEvent(\"onDestruct\", () => {\n\t\t\tthis._destroy_with_me.forEach(view => view.destructor());\n\t\t});\n\t},\n\t$skin:function(){\n\t\tsetSkinDefaults();\n\t},\n\t_sub_init:function(){\n\t\tconst obj = this.config;\n\t\tconst readonly = obj.readonly;\n\t\tconst rows = [];\n\n\t\taddMathMethods(obj.methods);\n\n\t\t//toolbars\n\t\tif(obj.menu)\n\t\t\trows.push(menu.init(this));\n\t\tif((readonly && (obj.toolbar || obj.buttons)) || (!readonly && obj.toolbar !== false))\n\t\t\trows.push(bar.init(this));\n\t\tif (obj.subbar)\n\t\t\trows.push(obj.subbar);\n\t\tif(!readonly && obj.liveEditor)\n\t\t\trows.push(editor.init(this));\n\n\t\t//data part\n\t\tconst tblObj = {\n\t\t\teditable : !readonly,\n\t\t\tliveEditor: obj.liveEditor\n\t\t};\n\t\tif(obj.rowHeight)\n\t\t\ttblObj.rowHeight = obj.rowHeight;\n\t\tif(obj.columnWidth)\n\t\t\ttblObj.columnWidth = obj.columnWidth;\n\n\t\tif(readonly)\n\t\t\trows.push(tbl.init(this, tblObj));\n\t\telse\n\t\t\trows.push({cols:[tbl.init(this, tblObj), chart.init(this)]});\n\n\t\tconst bottom = obj.bottombar === true ? sheets.defaultBottom(this) : obj.bottombar;\n\t\tif (bottom)\n\t\t\trows.push(bottom);\n\n\t\tsheets.init(this);\n\n\t\tif(!readonly)\n\t\t\tcontext.init(this);\n\n\t\tdialogs.init(this);\n\n\t\tthis.rows_setter(rows);\n\t},\n\t_set_handlers:function(){\n\t\t//prevent double init\n\t\tif (this._table) return;\n\t\tthis._table = this.$$(\"cells\");\n\n\t\t//init all sub modules\n\t\toperations(this);\n\n\t\tthis._loading_data = true;\n\n\t\t//set sizes for the table\n\t\ttbl.reset(this, this.config.columnCount, this.config.rowCount);\n\t\tkey.init(this); //keyboard shortcuts\n\n\t\tdelete this._loading_data;\n\t\t\n\t\tthis._table.attachEvent(\"onAfterAreaAdd\", () =>\n\t\t\tthis.callEvent(\"onAfterSelect\", [ this.getSelectedId(true) ]));\n\n\t\tthis.callEvent(\"onComponentInit\", []);\n\t},\n\t$onLoad:function(obj, driver){\n\t\t//when loading data by data:, we can get $onLoad before _set_handlers call\n\t\tthis._set_handlers();\n\n\t\tconst excel = obj.excel;\n\n\t\tif (excel)\n\t\t\tobj = this._parseExcel(obj, driver);\n\t\telse if(!obj.data && typeof obj == \"string\" && (driver.cell || driver.row))\n\t\t\tobj = this._parseCsv(obj, driver);\n\n\t\tsheets.load(this, obj, excel);\n\t}\n};\napi(component);\nwebix.protoUI(component, webix.AtomDataLoader, webix.IdSpace, webix.ui.layout);\n","import * as m1  from \"./add_row_col\";\nimport * as m6  from \"./clipboard\";\nimport * as m12 from \"./column_operations\";\nimport * as m2  from \"./conditional_formats\";\nimport * as m4 from \"./types\";\nimport * as m8 from \"./formats\";\nimport * as m17 from \"./data\";\nimport * as m18 from \"./dropdown\";\nimport * as m13 from \"./hide_row_col\";\nimport * as m14 from \"./lock_cell\";\nimport * as m3  from \"./resize\";\nimport * as m9  from \"./selection\";\nimport * as m10 from \"./sorting\";\nimport * as m16 from \"./spans\";\nimport * as m16a from \"../mathematics/methods\";\nimport * as m16b from \"../mathematics/ranges\";\nimport * as m16c from \"../mathematics/sheets\";\nimport * as m19 from \"./states\";\nimport * as m5  from \"./styles\";\nimport * as m11 from \"./undo\";\nimport * as m20 from \"./import\";\nimport * as m21 from \"./filter\";\nimport * as m22 from \"./print\";\nimport * as m23 from \"./export\";\nimport * as m24 from \"./load\";\nimport * as m25 from \"./clear_styles\";\nimport * as m26 from \"./comments\";\nimport * as m27 from \"./save\";\nimport * as m28 from \"./hide_headers\";\nimport * as m29 from \"./hide_gridlines\";\nimport * as m30 from \"./views\";\nimport * as m31 from \"./show_formulas\";\nimport * as m32 from \"./zoom\";\nimport * as m33 from \"./validation\";\n\nexport function operations(view){\n\t//order in some cases does matter\n\t//resize must be applied after math, to size data by the result of math calculation\n\t//types must be applied after state and data \n\tvar all = [m32,m1,m2,m5,m6,m9,m10,m11,m12,m13,m14,m16,m3,m8,m17,m16a,m16b,m16c,m18,m19,m4,m20,m21,m22,m23,m24,m25,m26,m27,m28,m29,m30,m31,m33];\n\tfor (var i = 0; i < all.length; i++){\n\t\tif (all[i].init)\n\t\t\tall[i].init(view);\n\t}\n}","import * as rco from \"./row_col_operations\";\nimport * as lcl from \"./lock_cell\";\nimport * as fcl from \"./freeze\";\nimport * as hbr from \"./hide_gridlines\";\nimport * as hhd from \"./hide_headers\";\nimport * as hrc from \"./hide_rows\";\nimport * as mat from \"./math\";\nimport * as ops from \"./operations\";\nimport * as cor from \"./core\";\nimport * as sav from \"./save\";\nimport * as dpd from \"./dropdown\";\nimport * as flt from \"./filter\";\nimport * as cfm from \"./confirm\";\nimport * as und from \"./undo\";\nimport * as fmt from \"./number_formats\";\nimport * as fml from \"./show_formulas\";\nimport * as prt from \"./print\";\nimport * as zoom from \"./zoom\";\n\nexport function api(view){\n\tvar all = [rco, lcl, fcl, hbr, hhd, hrc, mat, ops, cor, sav, dpd, flt, cfm, und, fmt, fml, prt, zoom];\n\tfor (var i = 0; i < all.length; i++)\n\t\twebix.extend(view, all[i]);\n}"],"names":["f","y","e","t","r","_","w","M","O","n","o","i","u","a","s","q","E","code","source","c","h","length","l","pageName","v","substr","z","A","toUpperCase","String","fromCharCode","test","S","I","C","x","D","charCodeAt","L","P","$","F","U","k","V","B","push","j","Math","round","page","name","exec","broken","triggers","H","X","Y","indexOf","pop","Function","G","null","div0","value","ref","num","na","data","W","Date","getFullYear","valueOf","getTimezoneOffset","floor","getTime","K","Q","isNaN","J","concat","Z","ee","te","re","ne","toString","padStart","oe","int","parseFloat","str","toLowerCase","ie","sort","index","dir","ue","map","ae","$height","$width","se","Object","assign","slice","ce","filter","values","he","nt","ot","Ge","le","fe","ceil","de","me","pe","ge","be","Re","Te","ye","_e","we","Ne","pow","Me","Oe","qe","Ee","Ae","sqrt","ve","Se","Ie","Ce","abs","xe","random","De","Le","toFixed","Pe","$e","Fe","CM","CD","XC","XL","IX","IV","Ue","ke","Ve","Be","je","He","log","Xe","Ye","We","ze","Ke","Qe","Je","exp","Ze","et","tt","rt","substring","Number","replace","it","cos","cosh","sin","sinh","ut","at","st","ct","ht","lt","ft","dt","mt","pt","reduce","gt","bt","ABS","ACOS","acos","ACOSH","acosh","ACOT","atan","ACOTH","ADD","ARABIC","ASIN","asin","ASINH","asinh","ATAN","ATAN2","atan2","ATANH","AVEDEV","AVERAGE","AVERAGEA","BASE","Array","max","join","BINOMDIST","BITAND","BITLSHIFT","BITOR","BITRSHIFT","BITXOR","CEILING","COMBIN","COMBINA","COMPLEX","CORREL","COS","COSH","COT","tan","COTH","COUNT","COUNTA","COUNTBLANK","COVAR","CSC","CSCH","DEC2BIN","DEC2HEX","DEC2OCT","DECIMAL","match","parseInt","DEGREES","PI","DELTA","DEVSQ","forEach","DIVIDE","EQ","ERF","ERFC","EVEN","sign","EXP","FACT","FACTDOUBLE","FISHER","FISHERINV","FLOOR","GAMMA","isInteger","GCD","GEOMEAN","some","isFinite","GESTEP","GT","GTE","HARMEAN","HEX2BIN","HEX2DEC","HEX2OCT","IMABS","IMAGINARY","IMCONJUGATE","IMCOS","IMCOSH","IMCOT","IMCSC","IMCSCH","IMDIV","IMEXP","IMLN","IMPOWER","IMPRODUCT","IMREAL","IMSEC","IMSECH","IMSIN","IMSINH","IMSQRT","IMSUB","IMSUM","IMTAN","INT","LARGE","LN","LOG","LOG10","LT","LTE","MAX","MEDIAN","MIN","MINUS","MOD","MROUND","MULTINOMIAL","MULTIPLY","NE","OCT2BIN","OCT2DEC","OCT2HEX","ODD","PERCENTILE","PERMUT","POW","POWER","PRODUCT","QUARTILE","QUOTIENT","RADIANS","RAND","RANDBETWEEN","ROMAN","split","ROUND","ROUNDDOWN","ROUNDUP","SEC","SECH","SIGN","SIN","SINH","SMALL","SQRT","SQRTPI","STDEV","STDEVA","STDEVP","STDEVPA","STEYX","SUBTOTAL","SUM","SUMPRODUCT","SUMSQ","SUMX2MY2","find","SUMX2PY2","SUMXMY2","TAN","TANH","tanh","TRUNC","VAR","VARA","VARP","VARPA","WEIBULL","Rt","Tt","yt","_t","wt","Nt","Mt","Ot","trim","qt","Et","At","vt","St","RegExp","It","Ct","freeze","__proto__","CONCATENATE","LEFT","MID","RIGHT","LOWER","UPPER","PROPER","TRIM","LEN","CHAR","CLEAN","CODE","EXACT","FIND","FIXED","NUMBERVALUE","REGEXEXTRACT","REGEXMATCH","REGEXREPLACE","REPT","SEARCH","SUBSTITUTE","T","JOIN","REPLACE","ARRAYTOTEXT","xt","Dt","Lt","Pt","$t","trunc","Ft","getDate","Ut","getMonth","kt","Vt","getHours","Bt","getMinutes","jt","getSeconds","Ht","Xt","Yt","Gt","setHours","setDate","getDay","Wt","Error","getUTCDay","zt","Kt","Qt","toDateString","Jt","DATE","TIME","DAY","MONTH","YEAR","HOUR","MINUTE","SECOND","NOW","DATEDIF","DATEVALUE","DAYS","DAYS360","EDATE","setMonth","EOMONTH","ISOWEEKNUM","NETWORKDAYS","TIMEVALUE","setMinutes","setSeconds","WEEKNUM","WEEKDAY","WORKDAY","YEARFRAC","Zt","er","tr","INDEX","XMATCH","XLOOKUP","LOOKUP","HLOOKUP","VLOOKUP","MATCH","CHOOSE","rr","IF","AND","NOT","OR","FALSE","TRUE","nr","ISBLANK","ISBINARY","ISEVEN","ISODD","ISNONTEXT","ISNUMBER","ISTEXT","N","or","ir","ur","ar","sr","cr","keys","pr","gr","br","add","has","Rr","from","Tr","next","done","yr","constructor","get","set","strict","this","_getter","_setter","_strict","_parser","_printer","_parseContext","pageObj","$count","_data","Map","_triggers","_holders","_context","m","p","getPlaceholder","getTriggerList","setValue","_removeTriggers","trigger","clean","getValue","getMeta","_meta","setMeta","setPlaceholder","entries","each","setMath","_generate","_setMathAt","_execAndTrigger","refresh","getMath","Set","triggerSet","size","_check_for_loops","delete","_errorAndTrigger","getStats","math","_clearArea","parse","_exec","setLogger","_err_handler","_setErr","regenerate","recalculate","isArray","_complexSetter","debug","console","transpose","d","_transpose","g","_triggerRow","_triggerColumn","moveMath","_moveMath","id","transposeMath","_r","_id","_store","reset","_parseMode","_rows","_cols","_spans","getID","cellID","getSize","getContext","addRow","splice","apply","wr","_recalculateSpans","removeRow","addColumn","removeColumn","setCell","clearCell","getCell","$locked","getRange","getCellRange","eachCell","serialize","serializeBlock","parseBlock","throwError","setRowMeta","getRowMeta","setColumnMeta","getColumnMeta","row","addSpan","findIndex","info","width","height","getSpan","getSpans","_adjustSpan","min","Nr","_ranges","_counter","_rangeOrder","_page","_pageGetter","toId","_next_id","_refresh","remove","renamePage","Mr","copy","_serialize","$clipboard","paste","_updateCurrentCell","b","R","_updateCell","_addCellToPasteData","_refreshRelatedFormulas","Or","move","_getTriggersOutsideCutRange","_updateRelatedFormulas","formula","fromCSV","qr","_cfg","_pages","_pageNames","_pageName2ID","_pCounter","spill","$format","getPage","bind","_cm","addPage","removePage","getRanges","getStore","firstOnly","resultsLimit","getCopyManager","Er","UNIQUE","RANDARRAY","TOROW","TOCOL","TEXTSPLIT","fill","WRAPROWS","WRAPCOLS","TAKE","DROP","SEQUENCE","CHOOSEROWS","CHOOSECOLS","EXPAND","SORT","SORTBY","Ar","vr","Sr","Ir","ACCRINT","PMT","FV","DB","DDB","DOLLAR","DOLLARDE","LN10","LN2","DOLLARFR","EFFECT","FVSCHEDULE","IRR","IPMT","ISPMT","NPV","NOMINAL","NPER","PDURATION","PPMT","PV","SYD","TBILLPRICE","TBILLYIELD","en","labels","common","currency","number","percent","date","string","separator","negative","font","text","cell","align","format","column","borders","px","cancel","save","sheet","condition","range","ok","image","graph","controls","display","print","sheets","selection","borderless","margin","comment","tooltips","color","background","scale","menus","new","cut","actions","file","undo","redo","underline","strike","span","wrap","price","custom","edit","clear","validation","insert","view","other","table","liveEditor","financial","array","search","category","IMAGE","HYPERLINK","SPARKLINE","CHECKBOX","RADIO","formats","dateFormat","timeFormat","longDateFormat","fullDateFormat","parseDateTime","parseDate","currencies","webix","i18n","spreadsheet","protoUI","$cssName","$init","config","options","body","tooltip","template","xCount","yCount","ui","richselect","defaults","skin","$name","cols","scroll","select","obj","on","onAfterSelect","getParentView","updateMasterValue","css","rows","title","onChange","suggest","fitMaster","hide","$$","master","getList","getColorView","getTypeView","getSelectedId","getBody","getChildViews","getItemText","$ready","getPopup","old","callEvent","palette","attachEvent","setMasterValue","colorboard","icon","$view","className","$renderInput","divStart","renderColor","call","p1","p2","p3","colorpicker","prototype","$setValue","getColorNode","style","backgroundColor","firstChild","childNodes","$renderIcon","arguments","group","method","start","end","uid","methodsWithCategories","mathCategories","addMathMethods","methods","dateMethods","textMethods","numberMethods","financialMethods","arrayMethods","arr","htmlMath","setRadioState","state","getCellValue","_math$match$1$split$m","_math$match$1$split$m2","_slicedToArray","rowPos","colPos","rowCount","colCount","setCellValue","addMath","handler","generateHTML","formulaButtonViews","popup","list","exists","categoryFilter","categoryList","isVisible","show","getJsDateFromExcel","excelDate","getExcelDateFromJs","jsDate","getMathTemplate","quotes","urlEndPos","startIndex","attrs","url","_mData","_mPage","escape","xssSafe","URL","document","baseURI","origin","type","color1","color2","negativeColor","paddingX","paddingY","extend","donut","horizontal","tableConfig","isCircle","columnWidth","rowHeight","Sparklines","getTemplate","key","grid","on_click","ev","action","addRadio","addCheckbox","getJsDate","getExcelDate","all","proxy","$parse","$proxy","ajax","headers","post","datepicker","$prepareValue","daterangepicker","buttons","close","getBodyConfig","content","elements","getFormElements","padding","$active","layoutPadding","form","label","autowidth","click","getTopParentView","hotkey","body_setter","_typeof","isUndefined","window","head","autofocus","IdSpace","headerRowHeight","datatable","getItem","setHTML","dataview","contextmenu","thread","events","_loop","newName","_loading_data","_type_change","params","activeSheet","getActiveSheet","clearTimeout","delay","decode","encode","alpha","indexToHeader","quotient","updateMaxColumn","maxColumn","lastColumn","adress","col","nind","parts","isCell","ranges","getCode","rangeParts","d1","d2","escapeSheet","toRange","x2","y2","rangeObj","eachRange","callback","isRange","cells","cellTest","changeRange","inc","updated","_range2","r1","c1","r2","c2","_ref","_ref2","toolbarSizes","defaultStyles","fonts","material","mini","flat","compact","contrast","willow","dark","func","result","getDimension","spans","filters","line","spanEndRow","spanEndCol","style_names","_style_map","left","center","right","top","middle","bottom","zoom","getBorderCss","indent","count","pos","innerCss","fontSize","border","_border$split2","sizeEl","border_checks","area","mode","_style_handlers","getSelectArea","lineStyle","modes","_updateStyle","toggleableStyles","_styles","_styles_cache","_styles_max","prefix","$index","html","removeStyle","zoomStyles","_parse","getStyle","exportStyles","styles","_sheets","stl","props","styleFromText","spanStyles","spanStyle","getFormat","addStyle","styleToText","sameStyle","cache","_addStyle","styleObj","_obj$data$_i","update_style_data","toggledStyle","undefined","nstyle","isActiveSheet","item","setStyle","_setStyle","setRangeStyle","getTextSize","baseWidth","innerHTML","_table","appendChild","offsetWidth","offsetHeight","removeChild","updateToolbar","oldFormat","formatChanged","saveCell","silent","_buildCssString2","outCss","_zoom","_buildCssString","clearRangeStyle","compactStyles","serialized","removeUnusedStyles","used","newStyles","eachSelectedCell","ostyle","oldVal","_applyCellStyles","_applyStyles","_undoStyle","create","addAreaFormat","sel","groupUndo","createFormat","applyAreaFormat","processAreaFormats","prevCellFormat","getFormatName","setFormat","columnCount","initCurrencies","getCurrencySymbol","defaultFormats","setDefaultFormats","formatsLocale","_formats","formatsCount","formatSources","formatCache","formatHelpers","extra","priceFormat","zeros","priceSettings","decimalSize","symbol","getDelimiters","numberFormat","format2code","serializeFormat","formToValues","groupSign","groupDelimiter","decimalSign","decimalDelimiter","getFormatSource","toexcel","parseFormat","createFormatName","dates","red","_format$split2","first","second","priceBrackets","isPrice","delimiters","_first$split2","integer","decimal","formatToForm","oldStyle","newStyle","isRow","last","addFormat","removeFormat","splitFormat","conditional","errorMessage","separated","separateFmt","genCode","fmt","err","check","ind","isAbs","isQuote","comma","numberPlaceholder","textPlaceholder","symbolPos","multiply","lastDateType","val","betweenPlaceholders","placeholder","datePart","excelDateToWebix","_getParts","getParts","_getParts2","reverse","lzeros","lfills","rzeros","rfills","rmax","genFormatCode","dateTypes","yy","yyyy","mm","mmm","mmmm","mmmmm","dd","ddd","dddd","timeTypes","hh","ss","dateOrder","timeOrder","typesOrder","order","types","changeAreaDecimals","getCells","rules","isNumber","changeCellDecimals","isCustom","parsed","decimals","placeholders","withoutText","withoutPlaceholders","updateDecimals","hasOwnProperty","formValues","symbolId","toExcel","leftPlaceholders","fmtParts","sepFmtParts","getFmtPartValues","leftText","rightText","fmtPart","firstPlaceholder","Infinity","checkFormat","checkTime","quot","isDateInvalid","getDateEditFormat","formatName","locale","isTime","dateToStr","getFormatFromData","styleName","fmtName","load","isChar","char","getLastCharIndex","includeNumbers","lastChar","getWord","operand","isPosition","position","word","sum","flags","chars","crosssheet","fromSheet","lines","ph","escaped","_getWord2","pushLine","getSuggestPos","editor","node","getInputNode","sizes","offset","selectionStart","textWidth","loadCell","setType","handleChange","_setType","dateToExcel","_page_value_set","getFormatType","formatType","getType","parseToStore","mathFormat","isFormula","blockLevel","level","part","getMathFormat","expectType","strToDate","parser","ignoreUndo","getExpectType","checkType","isString","cellEditor","getCellEditor","setCellEditor","updateCell","cursor","charAt","nextSymbol","_this","tagName","setValueHere","$enterKey","newValue","getHighlightValue","activeMath","updateCells","cellsColor","escapeText","colorIndex","crossheet","cellSheet","prepareSheet","cellText","rangeName","repeatedColor","nextCell","nextCellText","setColor","_highlightedCells","removeOldHighlight","changeCellCss","prepareArea","row1","col1","row2","col2","colors","coloredArea","getCellFormats","suffix","example","_this2","paramsPopup","maxHeight","autoheight","param","_destroy_with_me","suggestData","onBeforeShow","oldRanges","allRanges","global","suggestRanges","sRange","getMasterValue","highlight","_update_range","_last_value_set","activeCell","showActiveSheet","updateCellValue","blur","preventEvent","$handleSelection","UIManager","setFocus","showParamsPopup","_this3","eventRemove","keydownEv","event","endEdit","_this4","brackets","setValues","suggestConfig","activeParam","querySelector","scrollTop","offsetTop","scrollTo","focus","_activeMath","activeElement","paintValue","enter","define","showSheet","moveSelection","which","keyCode","shiftKey","getItemNode","newv","$setValueHere","str1","str2","setSelectionRange","expectOperator","ignoreSel","setRange","len","lastPos","texthighlight","layout","drag","dragscroll","EditAbility","toggle","offValue","onValue","inp","awidth","aheight","$allowsClear","blockEvent","unblockEvent","fontFamily","getColumnOperation","submenu","getRowOperation","toolbarOptionMap","$template","editMenu","menuOrder","commonStructure","toolbarHeight","toolbarWidth","toolbarLabel","menu","readonlyStructure","styleFormats","needActionToId","getToolbarText","setToolbarLabels","formatTemplate","btn","popupWidth","popupTemplate","popupEvents","titleHeight","buttonsMap","onItemClick","arrow","resizeCell","isRowColAction","normalizeAction","neighbors","getMenuLabel","blockColumns","base","elementsBlock","columns","getPopupConfig","onMenuItemClick","button","getMenuItem","getSheetData","locked","arrowCss","iconCss","inputSpacing","elementsConfig","labelWidth","_initOnChange","$eventSource","_getCheckboxes","$hiddenSheet","$all","_count","hidden","labelRight","active","baseHeight","inputHeight","checkboxes","output","cfg","scrollview","queryView","onSelectChange","resize","toFront","minWidth","minHeight","escHide","autofit","setAttribute","addHotKey","_removeView","getMenu","_clickEv","_menu","destructor","move_setter","DragControl","addDrag","$dragPos","$dragCreate","object","trg","target","getAttribute","elOffset","elPos","pOffset","parentNode","getScrollState","toNode","$dragDestroy","readonly","_toConsumableArray","submenuConfig","externalUI","_menuActions","_toggleExcel","dots","class","toPDF","toPNG","header","pull","showMenuItem","hideMenuItem","layoutMargin","multi","getSectionConfig","onAfterScroll","addSection","trashIcon","dataPadding","upper","marker","onClick","removeView","childs","getLayout","lastIndex","layoutId","addView","setSubValue","sub","hideSubviews","child","getValues","$getSize","bodySize","env","scrollSize","$setSize","oldScroll","tconfig","frozenColumns","frozenRows","_frozenColumns","_frozenRows","freezeColumns","freezeRows","getState","ids","_getSheetData","_getSheetData2","_undoValue","actionMap","confirm","then","_activeSheet","_remove","setState","init","prepare","showItem","selectSheet","command","changePagerVisability","changePagerStatus","once","context","dataOrder","rename","ready","numbers","defaultBottom","tabWidth","sheetTabWidth","minTabWidth","toolbar","getSheetsPopup","maxWidth","editable","editaction","editValue","webix_ssheet_sheet_arrow","$sheetMenu","menuInit","getMark","callAction","oneSheet","initSheetMenu","disabled","batch","scrollSheets","gravity","oldV","direction","step","onShow","clearAll","scrollPos","disable","enable","scrollWidth","showBatch","tab","getSheet","visibleSheets","getVisible","showPrevious","_filterTabs","tabs","newIndex","getNewTitle","prepareData","prevIndex","changeId","filtersIndex","rangeString","lastRow","editors","invalidValue","linkRegex","prepareCell","update","isDate","link","styleProperties","newSheet","DataStore","sheetName","_getSheetData4","_arr$getDimension2","_resetTable","bottombar","oldZoom","defWidth","defHeight","getColumnConfig","rowId","getColumn","zoomSizes","_adjustRowHeight","eachColumn","spanHeight","getText","getSpanNode","getCellFilter","textHeight","headerOnly","refreshSelectArea","setColumnWidth","_undoResize","nsizes","_sizes$i","_i4","_loop2","_i5","updatePosition","rid","cid","extraCss","getExtraCss","isEmpty","setSpanValue","removeSpan","lx","ly","rx","ry","cx","cy","setSpanCss","borderChecks","adjustSpan","spanData","checkSpan","isFirstCell","pasteSpan","cutted","translate","mapCells","isUndo","undoSpan","_spans$i","checkSpanBorders","htmlOnly","views","doc","xCorrection","sheetnames","baseIndex","pageSize","getPageSize","_print","$customPrint","tbl","_tbl$children","children","topSplit","childElementCount","splitHeight","insertBefore","sheetNode","removeCss","addCss","external","innerView","_pull","img","src","promise","defer","onload","resolve","customPrint","cloneNode","canvases","getElementsByTagName","drawImage","container","printInnerView","_buildHtml","res","sorting","as","docFooter","_cleanHtml","printSizes","paper","landscape","printMargin","printPPI","showBorders","redraw","_printBorders","$render","removePrintInnerBorders","rowsHeight","fit","colsWidth","getPrintBordersCss","lastCol","renderedSpanBorders","$renderedSpanBorders","innerRightBorder","innerBottomBorder","addSpanInnerBorder","rendered","spanNode","contains","showPrintBorders","readyZoom","getNext","minColumnWidth","nextValue","readOnly","shift","counter","excel_date","createPopup","icons","timepicker","_last_input_target","onEnter","render","showPopup","input","updateCalendar","calendar","afterRender","ss_richselect","popupInit","$value","hideGridlines","hideHeaders","showFormulas","c0","isMerged","splitCell","combineCells","createButton","$button","buttonHeight","createRows","total","rowSpans","readonlyElements","flatMap","structure","getAllElements","groups","calcButtons","createGridBlock","selected","element","updateValue","allElements","elm","checkButtons","toolbarButtons","block","getButtons","bar","$customScroll","maxSize","limited","viewId","innerId","barStyles","dropdowns","getCellStyles","cellStyle","property","getBarStyles","_span","selectRow","endRow","_selectRange","selectAll","firstColumn","selectColumn","endColumn","isColSelected","selectedArea","firstCol","firstRow","isCellSelected","isRowSelected","selectColumns","addSelectArea","adjustColumn","eachRow","currentWidth","adjustRow","setRowHeight","highlightColRow","sc","ec","removeCellCss","addCellCss","getHeaderNode","conditions","lastIndexOf","validationConditions","createRules","getConditionCss","_empty","collection","currentValue","rule","handlers","checkOrder","compare","addEmptyCollection","oldConditions","newData","_normalizeValue","conditionArr","newCondition","clearConditionalFormats","_changeCondition","pasteCondition","oldCondition","textLength","cond","_setCondition","type_action","_undoCondition","_conditions$i","oldValue","updateItem","isInvalid","invalid","ignoreEmpty","getValidationCss","_highlight","showValidationPopup","_commentSel","_inputMessage","inputMessage","pasteValidation","highlightInvalid","_validation$i","_serialize2","error","alert","showCells","cellRef","_cellRef4","_adress2","rangePos","_rangePos","replaceAll","showCell","lockCss","lockCell","innerCall","isCellLocked","cm","dragStartColumn","dragEndColumn","showCommentHandler","pointerType","comments","_activeComment","editStatus","locate","visible","commentsView","viewonly","editMath","highlightHeaders","cop","ed","$anyKey","getEditor","finalStep","resizeColumn","cind","dx","posRelative","columnId","selectColumnHandler","lastHeaderClick","headerClick","lastClickedRow","editStop","getFocus","saveFocus","details","ctrl","setDefaultCss","editHighlight","leftSplit","areaselect","minRowHeight","navigation","webix_ssheet_ref","_highlightRefresh","cell_template","_v","valueOnly","formulasMode","highlightRefresh","isHTML","bracketLvl","invalidDate","helper","el","nms","liveEdit","cssFormat","getRenderedValue","refreshColumns","isMac","dialog","scrollZoom","ctrlKey","metaKey","deltaY","f2","del","styleHotKey","ctrlU","attr","elementOn","nav","updateEditor","fillEditor","startEdit","symbols","clearEditor","isEnabled","_rangeDialog","pasteRange","disableEditor","of","hideCategoryFilter","_this$getBody$getChil2","unselect","onHide","$empty","filterFormulaSuggest","onTimedKeyPress","inputPadding","getMethods","insertFormula","onKeyPress","_views","checkSearch","checkCategory","updateRange","Dialog","_createClass","_classCallCheck","$dialog","$hide","$show","unescape","DialogBox","_Dialog","_callSuper","_inherits","box","preview","parseImage","server","images","showPreview","upload","onBeforeFileAdd","reader","FileReader","getFormView","readAsDataURL","onFileUpload","response","imageURL","onSaveClick","okClick","onCancelClick","fillUrl","addImage","_box$DialogBox","viewid","open","ignoreUndoReset","restoreHistory","_ssUndoHistory","_ssUndoCursor","addToHistory","$skipHistory","ignoreReset","prevData","undoHandlers","nvalue","ovalue","_trackAll","conf","viewMethods","_types","track","_trackOne","_fromRange","_isPie","legend","fromData","names","_getNames","switchDirection","dataSeries","legendRange","_removeLegend","_showAll","win","_correctPos","_showOne","winSize","_getWidth","_getHeight","_isRange","_getDataParts","subdata","getRangeRows","getRangeCols","_getSeries","oldLeftColumn","vals","xAxis","activeVals","series","firstRange","inActiveSeries","seria","activeVal","dataRange","subRange","_normalizeConfig","valign","rangeToData","rind","editUIType","register","_commands","getConfig","inner","renderConfig","query","tables","_processTables","oldWin","_activeWin","$destructed","chart","_reset","_undoUI","_updateData","one","viewIds","htmlFilter","scaleColor","stacked","_prepareType","pie","pieLegend","legendConfig","yAxis","lineColor","lineShape","circle","borderColor","xValue","_genChartConfig","chartEditor","handlePieLegend","getLeftColumn","getTopRow","setSilentValue","updateLegendRange","updateXaxisRange","leftColumn","xAxisRange","topRow","updateAlign","updateValign","updateType","isPie","isBar","markersVisible","hideField","hideBatch","switchRowsCols","updateSeries","oldXaxis","field","inValues","getSelectedRange","expand","closeEditor","activeSkin","barHeight","complexData","addRichselect","getTypes","vertical","attributes","sparkline","els","parseChart","color_def","color_pos","color_neg","renderPreview","visibleBatch","labelPosition","checkRange","sparkConfig","addSparkline","clearValidation","selectedCell","scope","toSheetRange","unshift","validate","oldData","_getScope","theform","onBeforeSelect","removeRange","editRange","isNotEmpty","onFocus","saveClick","selectedId","_allRanges$i","nameParts","selectList","rangeVal","empty","Ranges","_master","_normalizeName","_normalizeRange","_data$i","globalRange","out","inSpan","rangeOptions","getRangePos","boolean","unique","objA","objB","sorters","_ssFilters","markBarFilter","getFilters","clearFilters","refilter","setCellFilter","filterSpreadSheet","calibrateRange","getFilterRange","isValueActive","includes","isFilterExists","cc","rc","getFilterMode","pasteFilter","getSingleOption","getConditions","getFilterFunction","opt","ssheet_filter_sign","on_dblclick","removeFilters","toggleFilters","_filters$i2","_filters$i","$mode","$filter","syncScroll","_getTargetNode","getFilter","flt","importData","relative","inputs","applyFilter","setCellStyle","isHidden","nodeOffset","tableOffset","getElementsByClassName","ydiff","xdiff","fillForm","labelsLocale","commonConfig","customConfig","dateConfig","getFormats","updateForm","closeWin","isText","$css","_getDatalayout","value2","_formatValue","_isNotDateRule","editFormat","_safeInt","_getCondition","activeValue","_rulesToArr","current_view","onBlur","vid","dlayout","getIdByIndex","_this5","getRows","conditionStyle","getSheets","filename","restoreValue","paperSize","modal","stringResult","printPreview","_setComment","textarea","onViewResize","animate","ssheet_comment_view","showInput","addComment","showTemplate","changeTextarea","getHead","getOption","optionHeight","errorHandle","formatInput","conditionValue","normalizeValue","formatValue","prepareConditions","handleTypeChange","required","within","in","sheetUpdated","settings","fillspace","getSelectedItem","findAll","findNext","setNewValue","findCheck","case","updateTable","checkVal","same","JSON","stringify","spreadsheetSel","selectedItem","getNextId","getFirstId","bases","imt","imc","asw","rgs","dpd","cnd","lnk","pnt","cmt","siz","vld","fnd","setMenuLocaleLabels","loadChangedData","_defineProperty","getUpdateValues","_delColumn","_addColumn","_delRow","_addRow","updatedData","isRowVisible","isColumnVisible","fixSelectArea","process","_ssEditors","clearEditors","pasteDropdown","dropdown","styledata","clipdata","updateFilters","specialPaste","getRow","ignore","$popup","_editors$i","tblEditors","setClipboard","buffer","browserClipboard","_get_sel_style","writeText","startRow","startCol","endCol","allFiltersInZone","_updateDelimiter","getClipboardNumberFormat","numToStr","_clip_to_sel","leftTop","csv","delimiter","record","_changeDelimiter","sameView","dataRowCount","dataColCount","maxRow","maxCol","extraSpanRows","lastRows","_add_row_col","ri","ci","subtrans","_clipboardToTable","row_ind","col_ind","cdata","clipboardNumberFormat","clipboardDecimalDelimiter","decimalOptional","minusSign","minusPosition","clipboard","navigator","clipbuffer","_sel_to_clip","readText","catch","finally","_hidden_cols_hash","_hidden_rows_hash","indexes","_hideRow","_hideColumn","_showRow","_showColumn","hash","showColumn","getColumnIndex","hideColumn","_loop3","_i","_loop4","_i2","hiddenIndex","_updatePosition","hrows","hcols","bs","blockStart","blockEnd","removeSelectArea","$handleStart","oldSel","oldStart","oldEnd","clearRange","_webix$i18n$calendar","dayShort","dayFull","monthShort","monthFull","dayAndMonthNames","nums","dayOrMonthType","dayOrMonthCase","lowerCaseNames","lowerCaseName","firstValue","afterSel","iteration","linkPos","_ref4","linkRow","linkCol","_ref6","sortRange","fullrange","maxY","maxX","nr1","nr2","nc1","nc2","newrange","expandSelection","by","newMath","updateSheetNames","oldName","stack","option","oldState","gridlines","firstVisible","removeComment","getComment","removeCommentsRange","commentCell","_undoComment","_comments$i","modules","m1","m2","m3","m4","m5","m6","m7","m8","uploader","XMLHttpRequest","apiOnly","accept","cellDates","sheetStubs","cellStyles","loadStyles","fileDialog","startImport","prepareExcelImage","imagePromise","crossOrigin","onerror","canvas","ctx","toDataURL","cloneNodeWithStyles","clone","getComputedStyle","cssText","prop","getPropertyValue","_safeColor","_getCellStyle","excel","alignment","_getExcelCellStyle","_getPdfCellStyle","rgb","fgColor","sz","italic","bold","wrapText","getBorderStyles","textAlign","strikethrough","vertAlign","whiteSpace","_val$split2","_getDocStyle","$exportView","pdf","export_mode","defaultOptions","stubCells","footer","heights","rawValues","filterHTML","_arguments","dataOnly","sheetOptions","isNotActiveSheet","_hidden","pdfTable","_getDimension2","textBefore","sheetData","scheme","cached","cachedConditions","_getDefaults","docHeader","delta","rIndex","cIndex","computed","bg","_getCellConditions","_condition$map","rgbToHex","_condition$map2","_updateStyleCondition","_getStyles","colspan","rowData","exportData","rowSize","pad","paddingTop","paddingBottom","_updatePdfData","Sheet","Name","Ref","sheetSettings","showGridLines","showRowColHeaders","zoomScale","orientation","getAutowidth","extraWin","download","blob","$getExcelImage","_exportView","$getExportValue","imageExport","to","svg","nodeCopy","svgData","XMLSerializer","serializeToString","btoa","encodeURIComponent","arrayRowEnd","arrayColEnd","cellValue","_excel_to_data","dataObj","typesMap","_step","_iterator","_createForOfIteratorHelper","links","sheetIndex","book","stylescount","styleshash","_safeFont","va","numFmt","_getBorderStyles","_getHidden","safe","_parseExcel","driver","full","states","_parseCsv","getRecords","callCommand","setSize","oldSize","newSize","lock","checkSpans","index1","index2","changed","spanSize","changeSpan","removeFreeze","getIndexById","getRangeValue","rangeStr","setRangeValue","isActivePage","spn","und","srt","_validation_restore","showValidationError","errorTitle","correctVal","cb","muonPage","oldEditor","sameValue","oldType","dateValue","muonItem","fail","updatedType","baseStyle","urlStyle","finished","_filters$_i","prepareFilter","formulas","zoomView","defaultMenu","readonlyMenu","getActionFromParent","parentId","getMenuData","parentAction","getActionFromId","actionParams","component","_base_index","_sub_init","_set_handlers","$skin","setSkinDefaults","subbar","tblObj","attachTo","lists","sizeToContent","contextMenu","dialogs","viewBases","rows_setter","m32","m9","m10","m11","m12","m13","m14","m16","m17","m16a","m16b","m16c","m18","m19","m20","m21","m22","m23","m24","m25","m26","m27","m28","m29","m30","m31","m33","operations","$onLoad","rco","lcl","fcl","hbr","hhd","hrc","mat","ops","cor","sav","cfm","fml","prt","api","AtomDataLoader"],"mappings":"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","x_google_ignoreList":[0]}